<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Miracleyoo</title>
  
  
  <link href="https://www.miracleyoo.com/atom.xml" rel="self"/>
  
  <link href="https://www.miracleyoo.com/"/>
  <updated>2022-11-05T05:41:36.302Z</updated>
  <id>https://www.miracleyoo.com/</id>
  
  <author>
    <name>Miracle Yoo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç›¸æœºæ ¡å‡† ç›¸æœºæ ‡å®š Intrinsic/Extrinsic Calibrationè¯¦è§£ ç»å¯¹ExtrinsicçŸ©é˜µæµ‹å¾—å®æ“ Event Camera/DVS</title>
    <link href="https://www.miracleyoo.com/2022/11/04/camera-calibration/"/>
    <id>https://www.miracleyoo.com/2022/11/04/camera-calibration/</id>
    <published>2022-11-05T05:07:36.000Z</published>
    <updated>2022-11-05T05:41:36.302Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆæä¸€ä¸‹æœ¬æ–‡çš„å‘è¡¨ç†ç”±ã€‚å› ä¸ºå®éªŒéœ€è¦ç”¨åˆ°ä¸€ä¸ªDAVIS 346çš„Event Cameraï¼Œä¸”é¡¹ç›®éœ€è¦é€šè¿‡Motion Captureï¼ˆMocapï¼‰å¾—åˆ°äººä½“çš„3Då‡†ç¡®æ ‡å®šï¼Œæ‰€ä»¥å°±ç ”ç©¶äº†ä¸€ä¸‹ç›¸æœºçš„Intrinsicå’Œç»å¯¹Extrinsicæ ‡å®šã€‚ä»¤äººåƒæƒŠçš„æ˜¯ï¼Œç½‘ä¸Šå…¶å®å¹¶æ²¡æœ‰å¤ªå¤šå…³äºå¦‚ä½•é€šè¿‡å®éªŒæ–¹æ³•æ ‡å®šå¾—åˆ°ç›¸å¯¹äºåæ ‡åŸç‚¹ï¼ˆOç‚¹ï¼ŒOriginï¼‰çš„Extrinsic Matrixçš„è®²è§£ï¼Œå°¤å…¶æ˜¯ç¼ºå°‘ä¸­æ–‡æ•™ç¨‹ã€‚äºæ˜¯æˆ‘å°±æŠŠå‚è€ƒå„ç§è‹±æ–‡èµ„æ–™ï¼ˆä¸»è¦æ˜¯ä¸€äº›å¤§å­¦çš„slideså’Œæœ‰å…³é‡‡é›†Mocapæ•°æ®é›†çš„æ–‡çŒ®ï¼‰æ€»ç»“çš„ä¸€äº›ç†è®ºæ¨å¯¼å’Œå®éªŒæ–¹æ³•ï¼Œä»¥åŠå®é™…èƒ½ç”¨çš„ä»£ç æ•´ç†å¾—åˆ°äº†æœ¬æ–‡ã€‚</p><p>é¦–å…ˆæ˜¯å‡ å¼ éå¸¸é‡è¦çš„Slidesï¼Œåé¢éƒ½ä¼šreferåˆ°ï¼Œå¯ä»¥å…ˆè‡ªè¡Œç†Ÿæ‚‰ä¸‹ã€‚å¦å¤–ï¼Œæœ¬ç¯‡ä¸æ˜¯100%ä»é›¶å¼€å§‹çš„æ•™ç¨‹ï¼Œç¯‡å¹…é™åˆ¶å¹¶æ— æ³•å±•å¼€æ‰€æœ‰çš„ç»†èŠ‚ï¼Œè‹¥æƒ³æ·±åº¦ç†è§£ï¼Œè¯·è‡ªè¡Œç»“åˆå‡ ä¸ªå¤§å­¦ï¼ˆCMUï¼ŒStanfordï¼‰ç›¸åº”çš„Slidesä¸€èµ·å­¦ä¹ ã€‚</p><p><img src="/2022/11/04/camera-calibration/image-20221021152707045-1667622796441-1.png" alt="image-20221021152707045" style="zoom:33%;"></p><figure><img src="/2022/11/04/camera-calibration/image-20221021165722788-1667622796442-2.png" alt="image-20221021165722788"><figcaption aria-hidden="true">image-20221021165722788</figcaption></figure><h2 id="coordinates">Coordinates</h2><ul><li>åœ¨æ•´ä¸ªç›¸æœºçš„æŠ•å½±ä¸æ ¡å‡†è¿‡ç¨‹ä¸­ï¼Œä¸€å…±æ¶‰åŠ3ä¸ªåæ ‡ç³»ã€‚å®ƒä»¬åˆ†åˆ«æ˜¯ï¼š<ol type="1"><li>ä¸–ç•Œåæ ‡ç³»ï¼šä»¥ç©ºé—´ä¸­æŸç‚¹ä¸ºåŸç‚¹å»ºç«‹æ¬§æ‹‰åæ ‡ç³»ï¼Œè®¾å®šxyzæ–¹å‘åå½¢æˆçš„åæ ‡ç³»ã€‚</li><li>ç›¸æœºåæ ‡ç³»ã€‚è¯¥åæ ‡ç³»çš„åŸç‚¹æ˜¯ç›¸æœºçš„ç„¦ç‚¹ã€‚ç„¦ç‚¹ä¸€èˆ¬åœ¨ç›¸æœºå†…éƒ¨ï¼Œä¹Ÿå¯èƒ½è½åœ¨çš„ç›¸æœºå¤–éƒ¨ï¼Œè¿™å–å†³äºfocal lengthã€‚åæ ‡ç³»çš„æŒ‡å‘ï¼šxå’Œyå°±æ˜¯ç›¸å¹³é¢çš„æ¨ªçºµåæ ‡æ–¹å‘ï¼ˆç›¸æœºè§†è§’æ–¹å‘ï¼‰ï¼Œzæ˜¯ä¸xyå¹³é¢å‚ç›´çš„æ–¹å‘ï¼Œäº¦å³é•œå¤´æŒ‡å‘çš„å‰æ–¹ã€‚</li><li>å›¾åƒåæ ‡ç³»ï¼ˆä¹Ÿå¯ä»¥åˆ†æˆä¸¤ä¸ªï¼šå›¾åƒåæ ‡ç³»(m)å’Œåƒç´ åæ ‡ç³»(pixel)ï¼‰ã€‚å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯æ¯ä¸ªåƒç´ å¹¶ä¸æ˜¯çœŸæ­£çš„ä¸€ä¸ªç‚¹ï¼Œpixelåæ ‡ç³»æ‰€ä»£è¡¨çš„æ•´æ•°å€¼æ˜¯æ¯ä¸ªåƒç´ ç‚¹çš„ä¸­å¿ƒã€‚</li></ol></li><li>è€ƒè™‘åŠŸèƒ½æ€§ï¼Œè¿˜æœ‰ä¸€ä¸ªåŒè´¨åæ ‡ç³»ï¼Œç”¨äºå®é™…è¿ç®—ã€‚</li></ul><p><img src="/2022/11/04/camera-calibration/image-20221021144051423-1667622796442-3.png" alt="image-20221021144051423" style="zoom: 25%;"></p><h2 id="intrinsic">Intrinsic</h2><ul><li><p>ç†æƒ³çŠ¶å†µä¸‹ï¼ˆæ— Skewnesså’ŒDistortionï¼‰ï¼ŒIntrinsic çŸ©é˜µEncodeçš„ä¿¡æ¯æœ‰ï¼šFocal Lengthã€Image Sensorçš„é•¿å®½ï¼ˆin pixelï¼‰ï¼Œæ¯åƒç´ ä»£è¡¨çš„ç±³æ•°(pixel/m)ï¼Œä¹Ÿå³ç›¸æœºçš„åˆ†è¾¨ç‡ã€‚</p></li><li><p>éç†æƒ³æƒ…å†µä¸‹ï¼ŒSkewnesså’ŒDistortionä¹Ÿä¼šè¢«æ”¾åˆ°Intrinsicä¸­ã€‚</p></li><li><p>å…³äºå½“æé«˜/é™ä½åˆ†è¾¨ç‡æ—¶å€™çš„Intrinsicå˜åŒ–ï¼š<span class="math inline">\(k,l,c_x,c_y\)</span>éƒ½è¦ä¹˜ä»¥åˆ†è¾¨ç‡æé«˜çš„ç³»æ•°ã€‚</p><figure><img src="/2022/11/04/camera-calibration/image-20221026155238653-1667622796442-4.png" alt="image-20221026155238653"><figcaption aria-hidden="true">image-20221026155238653</figcaption></figure></li><li><p>å‚è§Intrinsicçš„è®¡ç®—è¿‡ç¨‹ï¼Œç”±äºè®¡ç®—æ—¶å·²ç»è€ƒè™‘äº†ç›®æ ‡ç‰©ä½“æ·±åº¦å¯¹æˆåƒä½ç½®çš„å½±å“ï¼Œæ‰€ä»¥Intrinsicå…¶å®æ˜¯åŒ…å«äº†é€è§†(perspective)ä¿¡æ¯çš„ã€‚</p></li><li><p>Intrinsicå¯ä½¿ç›¸æœºåæ ‡ç³»è½¬åŒ–ä¸ºå›¾ç‰‡åæ ‡ç³»ã€‚</p></li></ul><h2 id="extrinsic">Extrinsic</h2><ul><li><p>Extrinsic å¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸ªçŸ©é˜µå†™åœ¨äº†ä¸€èµ·ï¼šæ—‹è½¬çŸ©é˜µRå’Œå¹³ç§»çŸ©é˜µTã€‚å‰ä¸‰åˆ—æ˜¯Rï¼Œæœ€åä¸€åˆ—æ˜¯Tã€‚ å…¶å®ï¼Œè™½ç„¶ç»å¸¸å†™ä½œ<span class="math inline">\([R|T]\)</span>ï¼Œä½†äº‹å®ä¸Šè¿˜æœ‰ä¸€ä¸ªç›¸ä¼¼å˜æ¢Sï¼Œè¿™ä¸ªSæ˜¯ä¸ªå¯¹è§’çº¿çŸ©é˜µï¼Œå¯¹è§’çº¿ä¸Šçš„å€¼ä¸º<span class="math inline">\([S_x, S_y, S_z, 1]\)</span>ã€‚Sç›´æ¥å’ŒRä¹˜åœ¨ä¸€èµ·ï¼Œä¸Tæ— å…³ã€‚</p><p><img src="/2022/11/04/camera-calibration/image-20221026162455644-1667622796442-5.png" alt="image-20221026162455644" style="zoom:50%;"></p></li><li><p>Extrinsicå¯ä½¿ä¸–ç•Œåæ ‡ç³»è½¬åŒ–ä¸ºç›¸æœºåæ ‡ç³»ã€‚</p></li></ul><h2 id="skewness-and-distortion">Skewness and Distortion</h2><ul><li><p>SkewnessæŒ‡çš„æ˜¯ç›¸æœºSensorçš„ä¸¤ä¸ªè½´ä¸å‚ç›´ï¼Œå³xyä¹‹é—´æœ‰ä¸€ä¸ªå°å¤¹è§’ã€‚é€šå¸¸è¿™ä¸ä¼šå‘ç”Ÿï¼Œä½†å¦‚æœæœ‰åˆ¶é€ æ–¹é¢çš„é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯å¯èƒ½çš„ã€‚</p></li><li><p>ç›¸æœºçš„Skewness</p></li><li><p>Skewnessçš„è§£å†³æ–¹æ³•æ˜¯æŠŠè¿™ä¸ªå¤¹è§’æ‰¾åˆ°ï¼Œå¹¶åœ¨Intrinsicä¸­åæ˜ å‡ºæ¥ã€‚</p><figure><img src="/2022/11/04/camera-calibration/image-20221026154924465-1667622796442-6.png" alt="image-20221026154924465"><figcaption aria-hidden="true">image-20221026154924465</figcaption></figure></li><li><p>DistortionåŒ…å«ï¼š</p><ul><li><em>Radial Distortion</em> (å¾„å‘ç•¸å˜)ï¼š</li><li><em>Tangential distortion</em> (åˆ‡å‘ç•¸å˜)ï¼šæœ¬è´¨ä¸Šæ˜¯ç›¸å¹³é¢å’Œç›¸æœºåæ ‡ç³»å­˜åœ¨ä¸€ä¸ªå¤¹è§’ï¼Œå³â€œå›¾åƒSensorå’Œé•œå¤´æˆªé¢ä¸å¹³è¡Œâ€ã€‚</li></ul></li><li><p>å…³äºDistortionçš„è®¡ç®—ï¼š</p><figure><img src="/2022/11/04/camera-calibration/image-20221026163826434-1667622796442-7.png" alt="image-20221026163826434"><figcaption aria-hidden="true">image-20221026163826434</figcaption></figure></li></ul><h2 id="homogeneous-coordinates">Homogeneous Coordinates</h2><ul><li>åŒè´¨åæ ‡çš„ä¸»è¦ç”¨æ„æ˜¯æŠŠæœ¬æ¥åœ¨åˆ†æ¯ä¸Šçš„zï¼ˆæ·±åº¦ï¼‰ç»™æŒªèµ°ï¼Œä»¥ä¾¿è®©æŠ•å½±è¿™ä¸ªTransformationä»non-linearå˜æˆLinearã€‚</li><li>æ³¨æ„åŒè´¨åæ ‡è™½ç„¶åœ¨è§†è§‰æ•ˆæœä¸Šæ˜¯åœ¨åŸæœ¬çš„åæ ‡(u,v)æˆ–(x,y,z)ä¸‹é¢åŠ äº†ä¸€ä¸ª1ï¼Œä½†æ˜¯å®é™…ä¸Šè¿™ä¸ª1åœ¨æ¬§å¼åæ ‡ç³»ä¸­å¹¶ä¸å­˜åœ¨ã€‚å½“æˆ‘ä»¬åé¢åˆ—å‡ºæ–¹ç¨‹æ ¡å‡†æ—¶ï¼Œåº”è¯¥å›åˆ°åŸæœ¬çš„æ¬§å¼åæ ‡ç³»è§£ã€‚</li></ul><h2 id="imu">IMU</h2><ul><li>IMUè¾“å‡ºä¸‰ä¸ªæ–¹å‘è§’é€Ÿåº¦å’Œä¸‰ä¸ªè½´å‘åŠ é€Ÿåº¦çš„å€¼ï¼Œä½¿ç”¨æ—¶ä¹Ÿéœ€è¦æ ¡å‡†ã€‚</li><li>å…·ä½“æ ¡å‡†æ–¹æ³•å‚è§Kalibrå’ŒDVï¼Œå› ä¸ºæˆ‘æ²¡ç”¨ä¸Šï¼Œæ‰€ä»¥ä¸å¤šå±•å¼€ã€‚</li></ul><h2 id="dvs">DVS</h2><ul><li>DVSçš„æ ¡å‡†ä¸»è¦åˆ†ä¸ºä¸¤ç§æ–¹æ³•ï¼š<ul><li>ä¸€ç§æ˜¯ç›´æ¥ç”¨pairedçš„RGBè¿›è¡Œæ ¡å‡†ï¼Œæ¯•ç«Ÿè¿™é‡Œçš„RGBå’ŒDVS shareåŒä¸€ç»„é€é•œã€‚</li><li>å¦‚æœæ²¡æœ‰è¿™ä¸ªRGBï¼Œå°±ç›´æ¥ç”¨accumulateçš„frameåšæ ¡å‡†ã€‚</li></ul></li></ul><h2 id="methods">Methods</h2><h3 id="è§£æ–¹ç¨‹ç›´æ¥æ ¡å‡†pçŸ©é˜µ">è§£æ–¹ç¨‹ç›´æ¥æ ¡å‡†PçŸ©é˜µ</h3><ul><li><p>åœ¨Paper <em>DHP19: Dynamic Vision Sensor 3D Human Pose Dataset</em>é‡Œï¼Œ ä»–ä»¬é‡‡ç”¨çš„æ–¹æ³•æ˜¯ï¼šç›´æ¥åœ¨ç»è¿‡Mocapæ ¡å‡†çš„ç©ºé—´ä¸­æ”¾ç½®ä¸€ç³»åˆ—Markersï¼Œç„¶ååœ¨DVSçš„RGBï¼ˆAPSï¼‰è¾“å‡ºframeä¸­ç›´æ¥è¿›è¡Œæ‰‹åŠ¨æ ‡æ³¨ï¼Œå¾—åˆ°å…¶åœ¨image planeä¸­çš„<span class="math inline">\((u, v)\)</span>åæ ‡ï¼Œ ç„¶åè§£æ–¹ç¨‹ã€‚</p><p><img src="/2022/11/04/camera-calibration/image-20221021155115039-1667622796442-8.png" alt="image-20221021155115039" style="zoom:40%;"></p></li><li><p>ä¸Šå›¾ä¸­æåˆ°äº†ä¸€ä¸ªç‚¹ï¼šä»æŠ•å½±çŸ©é˜µè®¡ç®—ç›¸æœºåæ ‡ç³»çš„åŸç‚¹ï¼Œå³ç›¸æœºçš„ç„¦ç‚¹ä½ç½®çš„æ–¹æ³•ï¼š<span class="math inline">\(C=Q^{-1}c_4\)</span>ã€‚å…·ä½“çš„æ¨ç†å…¶å®å¾ˆç®€å•ï¼Œä¸»è¦å°±é ä¸€ä¸ªæ¡ä»¶å…¬å¼ï¼š<span class="math inline">\(PC=0\)</span>ï¼Œå³åŸç‚¹çš„æŠ•å½±æ˜¯0ã€‚</p></li><li><p>ç»†èŠ‚ä¸Šï¼Œä»–ä»¬ç”¨äº†38ä¸ªMarkerï¼Œå¹¶8æ¬¡æ”¹å˜å®ƒä»¬çš„ä½ç½®ï¼Œé€šè¿‡æœ€å°å¹³æ–¹æ³•è§£å¾—æœ€æ¥è¿‘çš„11ä¸ªPä¸­å‚æ•°å€¼ã€‚è¿™é‡Œçš„æœ€å°å¹³æ–¹æ³•çš„æ„ä¹‰åœ¨äºé€šè¿‡å¢åŠ æ•°æ®ç‚¹å–å¹³å‡På€¼æ¥å‡å°è¯¯å·®ã€‚å…¶å®11ç»„å¼å­å°±å¤Ÿäº†ï¼Œä½†è¿™é‡Œè¿˜æ˜¯ç”¨äº†<span class="math inline">\(8\times38\times2\)</span>ä¸ªå…¬å¼ï¼Œå°±åœ¨äºæ­¤ã€‚</p></li><li><p>å…·ä½“çš„æœ€å°å¹³æ–¹æ³•ä»‹ç»åŠä»£ç ï¼š<a href="https://pythonnumericalmethods.berkeley.edu/notebooks/chapter16.04-Least-Squares-Regression-in-Python.html">Link</a></p></li><li><p>è¿™ä¸ªå…¨çŸ©é˜µPå…¶å®åŒ…å«äº†Camera Intrinsic <em>K</em>ï¼Œ Camera Extrinsic <em>RT</em>, ä»¥åŠCamera Skewnessã€‚</p></li><li><p>ç†è®ºï¼š</p><figure><img src="/2022/11/04/camera-calibration/image-20221026175034098-1667622796442-9.png" alt="image-20221026175034098"><figcaption aria-hidden="true">image-20221026175034098</figcaption></figure><p><img src="/2022/11/04/camera-calibration/image-20221026175051047-1667622796442-10.png" alt="image-20221026175051047" style="zoom:50%;"></p></li><li><p>ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Least Square Calibration for Camera Projection Matrix using Numpy</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">svd_calibration</span>(<span class="params">points_3d, points_2d</span>):</span></span><br><span class="line">    <span class="comment"># points_3d: 3D points in world coordinate</span></span><br><span class="line">    <span class="comment"># points_2d: 2D points in image coordinate</span></span><br><span class="line">    <span class="comment"># return: projection matrix</span></span><br><span class="line">    <span class="keyword">assert</span> points_3d.shape[<span class="number">0</span>] == points_2d.shape[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">assert</span> points_3d.shape[<span class="number">1</span>] == <span class="number">3</span></span><br><span class="line">    <span class="keyword">assert</span> points_2d.shape[<span class="number">1</span>] == <span class="number">2</span></span><br><span class="line">    num_points = points_3d.shape[<span class="number">0</span>]</span><br><span class="line">    A = np.zeros((<span class="number">2</span> * num_points, <span class="number">12</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_points):</span><br><span class="line">        A[<span class="number">2</span> * i, <span class="number">0</span>:<span class="number">4</span>] = *(points_3d[i, :]), <span class="number">1</span></span><br><span class="line">        A[<span class="number">2</span> * i, <span class="number">8</span>:<span class="number">12</span>] = *(-points_2d[i, <span class="number">0</span>] * points_3d[i, :]), -points_2d[i, <span class="number">0</span>]</span><br><span class="line">        A[<span class="number">2</span> * i + <span class="number">1</span>, <span class="number">4</span>:<span class="number">8</span>] = *(points_3d[i, :]), <span class="number">1</span></span><br><span class="line">        A[<span class="number">2</span> * i + <span class="number">1</span>, <span class="number">8</span>:<span class="number">12</span>] = *(-points_2d[i, <span class="number">1</span>] * points_3d[i, :]), -points_2d[i, <span class="number">0</span>]</span><br><span class="line">    U, S, V = np.linalg.svd(A)</span><br><span class="line">    P = V[:ï¼Œ-<span class="number">1</span>].reshape((<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">    <span class="keyword">return</span> P</span><br><span class="line"></span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Least Square Calibration for Camera Projection Matrix</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">least_square_calibrate_camera_projection_matrix_np</span>(<span class="params">x,y,z,u,v</span>):</span></span><br><span class="line">    <span class="comment"># x,y,z: 3D points in world coordinate</span></span><br><span class="line">    <span class="comment"># u,v: 2D points in image coordinate</span></span><br><span class="line">    <span class="comment"># return: projection matrix</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(x) == <span class="built_in">len</span>(y) == <span class="built_in">len</span>(z) == <span class="built_in">len</span>(u) == <span class="built_in">len</span>(v)</span><br><span class="line">    num_points = <span class="built_in">len</span>(x)</span><br><span class="line">    A = np.zeros((<span class="number">2</span> * num_points, <span class="number">12</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_points):</span><br><span class="line">        A[<span class="number">2</span> * i, <span class="number">0</span>:<span class="number">4</span>] = x[i], y[i], z[i], <span class="number">1</span></span><br><span class="line">        A[<span class="number">2</span> * i, <span class="number">8</span>:<span class="number">12</span>] = -u[i] * x[i], -u[i] * y[i], -u[i] * z[i], -u[i]</span><br><span class="line">        A[<span class="number">2</span> * i + <span class="number">1</span>, <span class="number">4</span>:<span class="number">8</span>] = x[i], y[i], z[i], <span class="number">1</span></span><br><span class="line">        A[<span class="number">2</span> * i + <span class="number">1</span>, <span class="number">8</span>:<span class="number">12</span>] = -v[i] * x[i], -v[i] * y[i], -v[i] * z[i], -v[i]</span><br><span class="line">    U, S, V = np.linalg.svd(A)</span><br><span class="line">    P = V[:ï¼Œ-<span class="number">1</span>].reshape((<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">    <span class="keyword">return</span> P</span><br></pre></td></tr></table></figure></li><li><p>æ³¨æ„ï¼šSVDè¿™é‡Œæ˜¯ç”¨äºè§£å†³Least Squares Problemçš„ï¼Œå¦‚æœç›´æ¥ç”¨<code>np.linalg.lstsq</code>å‡½æ•°çš„è¯ï¼ˆbå–å…¨0ï¼‰ï¼Œä¼šè§£å¾—ä¸€ä¸ªå…¨0çŸ©é˜µï¼ˆå› ä¸º0æ°¸è¿œæ˜¯ä¸€ä¸ªè§£ï¼‰ã€‚</p></li><li><p>SVDçš„è§£æ³•ç»†èŠ‚ï¼š</p><figure><img src="/2022/11/04/camera-calibration/image-20221027230723755-1667622796442-11.png" alt="image-20221027230723755"><figcaption aria-hidden="true">image-20221027230723755</figcaption></figure></li><li><p>è§£SVDçš„æ—¶å€™å¯ä»¥é€‰æ‹©æŠŠPçŸ©é˜µå³ä¸‹è§’<span class="math inline">\(P_{(3,4)}\)</span>è®¾ä¸º1ã€‚ä¸è®¾æ˜¯homogeneousè§£æ³•ï¼Œè®¾äº†ä¹‹åæ˜¯inhomogeneousã€‚</p></li></ul><h3 id="kalibr">kalibr</h3><ul><li><p><a href="https://github.com/ethz-asl/kalibr">Link</a></p></li><li><p>Used for:</p><ol type="1"><li><strong>Multi-Camera Calibration</strong>: Intrinsic and extrinsic calibration of a camera-systems with non-globally shared overlapping fields of view</li><li><strong>Visual-Inertial Calibration (CAM-IMU)</strong>: Spatial and temporal calibration of an IMU w.r.t a camera-system along with IMU intrinsic parameters</li><li><strong>Multi-Inertial Calibration (IMU-IMU)</strong>: Spatial and temporal calibration of an IMU w.r.t a base inertial sensor along with IMU intrinsic parameters (requires 1-aiding camera sensor).</li><li><strong>Rolling Shutter Camera Calibration</strong>: Full intrinsic calibration (projection, distortion and shutter parameters) of rolling shutter cameras.</li></ol></li><li><p>ç®€å•è¯´å°±æ˜¯ä¸»æ”»å¤šç›¸æœº/IMUç³»ç»Ÿã€‚<a href="https://github.com/ethz-asl/kalibr/wiki/multiple-camera-calibration">å¤šä¸ªç›¸æœº</a>ï¼Œ<a href="https://github.com/ethz-asl/kalibr/wiki/Multi-IMU-and-IMU-intrinsic-calibration">å¤šä¸ªIMU</a>ï¼Œ<a href="https://github.com/ethz-asl/kalibr/wiki/camera-imu-calibration">ç›¸æœº+IMU</a>ç­‰ã€‚</p></li><li><p>æ ¡å‡†å‡ºæ¥çš„Extrinsicç»“æœå¹¶ä¸æ˜¯ç›¸å¯¹åŸç‚¹ç»å¯¹çš„ï¼Œè€Œæ˜¯å¤šä¸ªè®¾å¤‡é—´ç›¸å¯¹çš„ã€‚æ¯”å¦‚IMU+Camæ ¡å‡†å‡ºæ¥çš„Extrinsicå°±æ˜¯IMUç›¸å¯¹äºCamåæ ‡çš„å˜æ¢ã€‚</p><p>å¼•ç”¨ä¸€æ®µ<a href="https://github.com/ethz-asl/kalibr/wiki/yaml-formats">åŸè¯</a>ï¼š</p><blockquote><ul><li><strong>T_cn_cnm1</strong> camera extrinsic transformation, always with respect to the last camera in the chain (e.g. cam1: T_cn_cnm1 = T_c1_c0, takes cam0 to cam1 coordinates)</li><li><strong>T_cam_imu</strong> IMU extrinsics: transformation from IMU to camera coordinates (T_c_i)</li><li><strong>timeshift_cam_imu</strong> timeshift between camera and IMU timestamps in seconds (t_imu = t_cam + shift)</li></ul></blockquote></li><li><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒKalibrå¹¶ä¸æ˜¯æ»¡è¶³æˆ‘ä»¬éœ€æ±‚çš„æ ¡å‡†æ–¹æ¡ˆã€‚</p></li></ul><h3 id="dv-calibration">DV Calibration</h3><ul><li><a href="https://inivation.gitlab.io/dv/dv-docs/docs/tutorial-calibration/">Tutorial Link</a>, <a href="https://gitlab.com/inivation/dv/dv-imu-cam-calibration">Code Link</a></li><li>å•ä¸ªå¤šä¸ªDVSéƒ½å¯ä»¥ã€‚</li><li>åŸºäºKalibrçš„æ–¹æ¡ˆã€‚</li><li>å¯¹äºå•ä¸ªDVSï¼Œæ ¡å‡†ä¸»è¦è¿›è¡Œçš„æ˜¯undistortionï¼Œä¸”å¯ä»¥åœ¨æ ¡å‡†åç›´æ¥åº”ç”¨äºç›¸æœºåç»­çš„å›¾åƒï¼Œè®©åé¢çš„recordéƒ½ä¸å†æœ‰å¤±çœŸã€‚</li><li>è¿™é‡Œçš„æ ¡å‡†å¯ä»¥æœ‰æ•ˆåº”å¯¹ä¹‹å‰Upalæ•™æˆæå‡ºçš„æ‰­æ›²é—®é¢˜ï¼Œåº”åœ¨åç»­æ“ä½œä¸­åº”ç”¨ã€‚</li></ul><h3 id="opencv-camera-calibration">OpenCV Camera Calibration</h3><ul><li><p>è¿™ä¸ªæ ¡å‡†ä¼šä½¿ç”¨chessboardï¼Œè€Œå…³äº3dåæ ‡ï¼Œä»–ä»¬ç”¨äº†æ£‹ç›˜ä¸Šä¸¤ä¸ªç›¸é‚»çš„ç‚¹çš„å®é™…è·ç¦»æ˜¯å·²çŸ¥çš„è¿™ä¸ªç‰¹æ€§ï¼ˆå› ä¸ºæ‰“å°çš„æ ‡å‡†æ£‹ç›˜ï¼Œé—´è·æ˜¯å›ºå®šçš„ï¼Œå¦‚30mmï¼‰ï¼Œæ¥æä¾›ç›¸åº”çš„3Dåæ ‡ä¿¡æ¯ã€‚</p></li><li><p>è¿™ä¸ªæ ¡å‡†ä¼šåˆ†åˆ«è¾“å‡ºIntrinsic matrix (mtx), rotation matrix (R, rvecs), translation matrix (T, tvecs), Distortion coefficients (dist)ã€‚è¿™äº›è¾“å‡ºå¯ä»¥ç›´æ¥è¢«ç”¨æ¥çº åã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># generate camera matrixes</span></span><br><span class="line">ret, mtx, dist, rvecs, tvecs = cv.calibrateCamera(objpoints, imgpoints, gray.shape[::-<span class="number">1</span>], <span class="literal">None</span>, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">img = cv.imread(<span class="string">&#x27;left12.jpg&#x27;</span>)</span><br><span class="line">h,  w = img.shape[:<span class="number">2</span>]</span><br><span class="line">newcameramtx, roi = cv.getOptimalNewCameraMatrix(mtx, dist, (w,h), <span class="number">1</span>, (w,h))</span><br><span class="line"></span><br><span class="line"><span class="comment"># undistort</span></span><br><span class="line">dst = cv.undistort(img, mtx, dist, <span class="literal">None</span>, newcameramtx)</span><br><span class="line"><span class="comment"># crop the image</span></span><br><span class="line">x, y, w, h = roi</span><br><span class="line">dst = dst[y:y+h, x:x+w]</span><br><span class="line">cv.imwrite(<span class="string">&#x27;calibresult.png&#x27;</span>, dst)</span><br></pre></td></tr></table></figure></li><li><p>å…³äºOpenCVæ ¡å‡†å‡ºæ¥çš„Extrinsic Matrixï¼Œç”±äºä¸–ç•Œåæ ‡ç³»å¿…å®šæœ‰ä¸€ä¸ªåŸç‚¹ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿæ˜¯æ¯«æ— ç–‘é—®æœ‰ä¸€ä¸ªåŸç‚¹çš„ã€‚ä½†è¿™ä¸ªä¸–ç•Œåæ ‡ç³»åŸç‚¹å®é™…ä¸Šåªæœ‰å‚è€ƒæ„ä¹‰ï¼ˆç¬¬ä¸€å¼ æ ¡å‡†å›¾çš„å·¦ä¸Šè§’æ£‹ç›˜ç‚¹ï¼‰ï¼Œå¹¶æ— æ³•ç›´æ¥ä½¿ç”¨ã€‚åŒæ—¶ï¼Œç›¸æœºåæ ‡ç³»çš„åŸç‚¹æ˜¯ç›¸æœºçš„ç„¦ç‚¹ï¼Œè€Œè¿™ä¸ªç„¦ç‚¹ä¹Ÿæ˜¯å‡ ä¹ä¸å¯é¢„çŸ¥å’Œæµ‹é‡ä½ç½®çš„ï¼ˆå®ƒå¯èƒ½åœ¨ç›¸æœºå†…éƒ¨æˆ–å¤–éƒ¨ï¼Œä½†æ ¡å‡†å¹¶ä¸ä¼šå‘Šè¯‰ä½ è¿™ä¸ªç‚¹ä½ç½®ï¼Œæ‰€ä»¥ä½ ä¹Ÿæ— æ³•é€šè¿‡ç›´æ¥æµ‹é‡ç›¸æœºOç‚¹å’Œå®é™…ä¸–ç•ŒOç‚¹ä¹‹é—´çš„ç›¸å¯¹ä½ç½®æ¥çº æ­£Extrinsicã€‚ï¼‰</p><blockquote><p><a href="https://www.appsloveworld.com/opencv/100/91/opencv-camera-calibration-world-coordinate-system-origin">Link</a>: I believe it used to be the position of the top-left corner of the checkerboard in the first calibration image, but it may have changed. You can visualized it by writing a few lines of code that project point (0,0,0) (in calibrated scene coordinates) in all the calibration images, then plotting its projected image coordinates on top of the image themselves.</p><p>You should really not depend on it being anything meaningful, and instead locate a separate feature in 3D and roto-translate the reference frame to it after calibration.</p></blockquote></li><li><p>å®é™…ä¸Šï¼Œä¸è¦æƒ³é€šè¿‡OpenCVçš„æ ¡å‡†æ¥ç›´æ¥å¾—åˆ°æœ‰å®é™…æ„ä¹‰çš„Extrinsicï¼Œè‹¥æƒ³å¾—åˆ°ï¼Œè¯·è‡ªè¡Œç”¨å‰é¢æåˆ°çš„Method 1æ¥å®é™…labelä¸€äº›å·²çŸ¥3Dåæ ‡çš„Markerså¯¹åº”çš„2Dç‚¹ï¼Œç”¨Least Squaresè§£å¾—ã€‚</p></li><li><p>ä½†æ˜¯ï¼ŒOpenCVçš„æ ¡å‡†å¯ä»¥æä¾›æœ‰æ•ˆçš„Distortion Coefficientå’ŒIntrinsicï¼Œå¹¶å¯ç›´æ¥è¢«ç”¨äºç•¸å˜è¡¥å¿ã€‚</p></li></ul><h2 id="reference">Reference</h2><h3 id="blogswebsites">Blogs/Websites</h3><ul><li><a href="****https://pythonnumericalmethods.berkeley.edu/notebooks/chapter16.04-Least-Squares-Regression-in-Python.html****">Least Squares Regression in Python</a></li><li><a href="https://math.stackexchange.com/questions/974193/why-does-svd-provide-the-least-squares-and-least-norm-solution-to-a-x-b">Why does SVD provide the least squares and least norm solution to ğ´ğ‘¥=ğ‘?</a></li><li><a href="https://math.stackexchange.com/questions/772039/how-does-the-svd-solve-the-least-squares-problem">How does the SVD solve the least squares problem?</a></li><li><a href="https://www.quora.com/What-is-the-real-world-coordinate-system-camera-calibration-refer-to-in-computer-vision">What is the "real world coordinate system" camera calibration refer to in computer vision?</a></li><li><a href="https://numpy.org/doc/stable/reference/generated/numpy.linalg.svd.html">numpy linalg svd</a></li><li><a href="https://docs.opencv.org/4.x/dc/dbb/tutorial_py_calibration.html">OpenCV Camera Calibration</a></li></ul><h3 id="slides">Slides</h3><ul><li><a href="https://s3.amazonaws.com/content.udacity-data.com/courses/ud810/slides/Unit-3/3C-L3.pdf#fromHistory">Udacity CS4495/6495 Introduction to Computer Vision 3C-L3 Calibrating cameras</a></li><li><a href="https://www.cs.cmu.edu/~16385/s17/Slides/11.1_Camera_matrix.pdf">CMU - Camera Matrix</a></li><li><a href="https://cvgl.stanford.edu/teaching/cs231a_winter1314/lectures/lecture2_camera_models.pdf">Stanford - Lecture 2</a></li><li><a href="https://cvgl.stanford.edu/teaching/cs231a_winter1314/lectures/lecture3_camera_calibration.pdf">Stanford - Lecture 3</a></li></ul><h3 id="papers">Papers</h3><ul><li><a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/tr98-71.pdf">A Flexible New Technique for Camera Calibration</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å…ˆæä¸€ä¸‹æœ¬æ–‡çš„å‘è¡¨ç†ç”±ã€‚å› ä¸ºå®éªŒéœ€è¦ç”¨åˆ°ä¸€ä¸ªDAVIS 346çš„Event Cameraï¼Œä¸”é¡¹ç›®éœ€è¦é€šè¿‡Motion Captureï¼ˆMocapï¼‰å¾—åˆ°äººä½“çš„3Då‡†ç¡®æ ‡å®šï¼Œæ‰€ä»¥å°±ç ”ç©¶äº†ä¸€ä¸‹ç›¸æœºçš„Intrinsicå’Œç»å¯¹Extrinsicæ ‡å®šã€‚ä»¤äººåƒæƒŠçš„æ˜¯ï¼Œç½‘ä¸Šå…¶å®å¹¶æ²¡æœ‰å¤ªå¤šå…³</summary>
      
    
    
    
    
    <category term="python" scheme="https://www.miracleyoo.com/tags/python/"/>
    
    <category term="camera calibration" scheme="https://www.miracleyoo.com/tags/camera-calibration/"/>
    
    <category term="camera matrix" scheme="https://www.miracleyoo.com/tags/camera-matrix/"/>
    
    <category term="CV" scheme="https://www.miracleyoo.com/tags/CV/"/>
    
  </entry>
  
  <entry>
    <title>Pytorch Lighting å®Œå…¨æ”»ç•¥</title>
    <link href="https://www.miracleyoo.com/2021/03/11/pytorch-lightning/"/>
    <id>https://www.miracleyoo.com/2021/03/11/pytorch-lightning/</id>
    <published>2021-03-12T04:09:57.000Z</published>
    <updated>2021-03-12T22:05:55.192Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢">å†™åœ¨å‰é¢</h2><p>Pytorch-Lightningè¿™ä¸ªåº“æˆ‘â€œå‘ç°â€è¿‡ä¸¤æ¬¡ã€‚ç¬¬ä¸€æ¬¡å‘ç°æ—¶ï¼Œæ„Ÿè§‰å®ƒå¾ˆé‡å¾ˆéš¾å­¦ï¼Œè€Œä¸”ä¼¼ä¹è‡ªå·±ä¹Ÿç”¨ä¸ä¸Šã€‚ä½†æ˜¯åé¢éšç€åšçš„é¡¹ç›®å¼€å§‹å‡ºç°äº†ä¸€äº›ç¨å¾®é«˜é˜¶çš„è¦æ±‚ï¼Œæˆ‘å‘ç°æˆ‘æ€»æ˜¯ä¸æ–­åœ°åœ¨ç›¸ä¼¼å·¥ç¨‹ä»£ç ä¸ŠèŠ±è´¹å¤§é‡æ—¶é—´ï¼ŒDebugä¹Ÿæ˜¯è¿™äº›ä»£ç èŠ±çš„æ—¶é—´æœ€å¤šï¼Œè€Œä¸”æ¸æ¸äº§ç”Ÿäº†ä¸€ä¸ªçŸ›ç›¾ä¹‹å¤„ï¼šå¦‚æœæƒ³è¦æ›´å¤šæ›´å¥½çš„åŠŸèƒ½ï¼Œå¦‚TensorBoardæ”¯æŒï¼ŒEarly Stopï¼ŒLR Schedulerï¼Œåˆ†å¸ƒå¼è®­ç»ƒï¼Œå¿«é€Ÿæµ‹è¯•ç­‰ï¼Œä»£ç å°±æ— å¯é¿å…åœ°å˜å¾—è¶Šæ¥è¶Šé•¿ï¼Œçœ‹èµ·æ¥ä¹Ÿè¶Šæ¥è¶Šä¹±ï¼ŒåŒæ—¶æ ¸å¿ƒçš„è®­ç»ƒé€»è¾‘ä¹Ÿæ¸æ¸è¢«è¿™äº›å·¥ç¨‹ä»£ç ç›–è¿‡ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œç”šè‡³èƒ½ä¸€é”®è§£å†³æ‰€æœ‰è¿™äº›é—®é¢˜å‘¢ï¼Ÿ</p><span id="more"></span><p>äºæ˜¯æˆ‘ç¬¬äºŒæ¬¡å‘ç°äº†Pytorch-Lightningã€‚</p><p>çœŸé¦™ã€‚</p><p>ä½†æ˜¯é—®é¢˜è¿˜æ˜¯æ¥äº†ã€‚è¿™ä¸ªæ¡†æ¶å¹¶æ²¡æœ‰å› ä¸ºé¦™è€Œå˜å¾—æ›´åŠ æ˜“å­¦ã€‚å®˜ç½‘çš„æ•™ç¨‹å¾ˆä¸°å¯Œï¼Œå¯ä»¥çœ‹å‡ºæ¥å¼€å‘è€…ä»¬åœ¨åŠªåŠ›åšäº†ã€‚ä½†æ˜¯å¾ˆå¤šç›¸è¿çš„çŸ¥è¯†ç‚¹éƒ½è¢«åˆ†å¸ƒåœ¨äº†ä¸åŒçš„ç‰ˆå—é‡Œï¼Œè¿˜æœ‰ä¸€äº›æ ¸å¿ƒçš„ç†è§£è¦ç‚¹å¹¶æ²¡æœ‰è¢«å¼ºè°ƒå‡ºæ¥ï¼Œè€Œæ˜¯å°å­—å¸¦è¿‡ï¼Œè¿™è®©æˆ‘æƒ³åšä¸€ä¸ªæ™®æƒ çš„æ•™ç¨‹ï¼ŒåŒ…å«æ‰€æœ‰æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è®¤ä¸ºé‡è¦çš„æ¦‚å¿µï¼Œå¥½ç”¨çš„å‚æ•°ï¼Œä¸€äº›æ³¨æ„ç‚¹ã€å‘ç‚¹ï¼Œå¤§é‡çš„ç¤ºä¾‹ä»£ç æ®µå’Œä¸€äº›æ ¸å¿ƒé—®é¢˜çš„é›†ä¸­è®²è§£ã€‚</p><p>æœ€åï¼Œç¬¬ä¸‰éƒ¨åˆ†æä¾›äº†ä¸€ä¸ªæˆ‘æ€»ç»“å‡ºæ¥çš„æ˜“ç”¨äºå¤§å‹é¡¹ç›®ã€å®¹æ˜“è¿ç§»ã€æ˜“äºå¤ç”¨çš„æ¨¡æ¿ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»<a href="https://github.com/miracleyoo/pytorch-lightning-template">GitHub</a>è¯•ç”¨ã€‚</p><h2 id="crucial">Crucial</h2><ul><li><p>Pytorch-Lighting çš„ä¸€å¤§ç‰¹ç‚¹æ˜¯æŠŠæ¨¡å‹å’Œç³»ç»Ÿåˆ†å¼€æ¥çœ‹ã€‚æ¨¡å‹æ˜¯åƒResnet18ï¼Œ RNNä¹‹ç±»çš„çº¯æ¨¡å‹ï¼Œ è€Œç³»ç»Ÿå®šä¹‰äº†ä¸€ç»„æ¨¡å‹å¦‚ä½•ç›¸äº’äº¤äº’ï¼Œå¦‚GANï¼ˆç”Ÿæˆå™¨ç½‘ç»œä¸åˆ¤åˆ«å™¨ç½‘ç»œï¼‰ã€Seq2Seqï¼ˆEncoderä¸Decoderç½‘ç»œï¼‰å’ŒBertã€‚åŒæ—¶ï¼Œæœ‰æ—¶å€™é—®é¢˜åªæ¶‰åŠä¸€ä¸ªæ¨¡å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿåˆ™å¯ä»¥æ˜¯ä¸€ä¸ªé€šç”¨çš„ç³»ç»Ÿï¼Œç”¨äºæè¿°æ¨¡å‹å¦‚ä½•ä½¿ç”¨ï¼Œå¹¶å¯ä»¥è¢«å¤ç”¨åˆ°å¾ˆå¤šå…¶ä»–é¡¹ç›®ã€‚</p></li><li><p>Pytorch-Lighting çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³æ˜¯â€œè‡ªç»™è‡ªè¶³â€ã€‚æ¯ä¸ªç½‘ç»œä¹ŸåŒæ—¶åŒ…å«äº†å¦‚ä½•è®­ç»ƒã€å¦‚ä½•æµ‹è¯•ã€ä¼˜åŒ–å™¨å®šä¹‰ç­‰å†…å®¹ã€‚</p></li></ul><figure><img src="/2021/03/11/pytorch-lightning/plres.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="æ¨èä½¿ç”¨æ–¹æ³•">æ¨èä½¿ç”¨æ–¹æ³•</h2><p>è¿™ä¸€éƒ¨åˆ†æ”¾åœ¨æœ€å‰é¢ï¼Œå› ä¸ºå…¨æ–‡å†…å®¹å¤ªé•¿ï¼Œå¦‚æœæ”¾åé¢å®¹æ˜“å¿½ç•¥æ‰è¿™éƒ¨åˆ†ç²¾åã€‚</p><p>Pytorch-Lightning æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åº“ï¼Œæˆ–è€…è¯´æ˜¯pytorchçš„æŠ½è±¡å’ŒåŒ…è£…ã€‚å®ƒçš„å¥½å¤„æ˜¯å¯å¤ç”¨æ€§å¼ºï¼Œæ˜“ç»´æŠ¤ï¼Œé€»è¾‘æ¸…æ™°ç­‰ã€‚ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªåŒ…éœ€è¦å­¦ä¹ å’Œç†è§£çš„å†…å®¹è¿˜æ˜¯æŒºå¤šçš„ï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œå¾ˆé‡ã€‚å¦‚æœç›´æ¥æŒ‰ç…§å®˜æ–¹çš„æ¨¡æ¿å†™ä»£ç ï¼Œå°å‹projectè¿˜å¥½ï¼Œå¦‚æœæ˜¯å¤§å‹é¡¹ç›®ï¼Œæœ‰å¤æ•°ä¸ªéœ€è¦è°ƒè¯•éªŒè¯çš„æ¨¡å‹å’Œæ•°æ®é›†ï¼Œé‚£å°±ä¸å¤ªå¥½åŠï¼Œç”šè‡³æ›´åŠ éº»çƒ¦äº†ã€‚ç»è¿‡å‡ å¤©çš„æ‘¸ç´¢å’Œè°ƒè¯•ï¼Œæˆ‘æ€»ç»“å‡ºäº†ä¸‹é¢è¿™æ ·ä¸€å¥—å¥½ç”¨çš„æ¨¡æ¿ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å¯¹Pytorch-Lightningçš„è¿›ä¸€æ­¥æŠ½è±¡ã€‚</p><p>æ¬¢è¿å¤§å®¶å°è¯•è¿™ä¸€å¥—ä»£ç é£æ ¼ï¼Œå¦‚æœç”¨ä¹ æƒ¯çš„è¯è¿˜æ˜¯ç›¸å½“æ–¹ä¾¿å¤ç”¨çš„ï¼Œä¹Ÿä¸å®¹æ˜“åŠé“é€€å‘ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root-</span><br><span class="line">|-data</span><br><span class="line">|-__init__.py</span><br><span class="line">|-data_interface.py</span><br><span class="line">|-xxxdataset1.py</span><br><span class="line">|-xxxdataset2.py</span><br><span class="line">|-...</span><br><span class="line">|-model</span><br><span class="line">|-__init__.py</span><br><span class="line">|-model_interface.py</span><br><span class="line">|-xxxmodel1.py</span><br><span class="line">|-xxxmodel2.py</span><br><span class="line">|-...</span><br><span class="line">|-main.py</span><br></pre></td></tr></table></figure><p>å¦‚æœå¯¹æ¯ä¸ªæ¨¡å‹ç›´æ¥ä¸Šplmoduleï¼Œå¯¹äºå·²æœ‰é¡¹ç›®ã€åˆ«äººçš„ä»£ç ç­‰çš„è½¬æ¢å°†ç›¸å½“è€—æ—¶ã€‚å¦å¤–ï¼Œè¿™æ ·çš„è¯ï¼Œä½ éœ€è¦ç»™æ¯ä¸ªæ¨¡å‹éƒ½åŠ ä¸Šä¸€äº›ç›¸ä¼¼çš„ä»£ç ï¼Œå¦‚<code>training_step</code>ï¼Œ<code>validation_step</code>ã€‚æ˜¾ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¦‚æœçœŸçš„è¿™æ ·åšï¼Œä¸ä½†ä¸æ˜“äºç»´æŠ¤ï¼Œåè€Œå¯èƒ½ä¼šæ›´åŠ æ‚ä¹±ã€‚åŒç†ï¼Œå¦‚æœæŠŠæ¯ä¸ªæ•°æ®é›†ç±»éƒ½ç›´æ¥è½¬æ¢æˆplçš„DataModuleï¼Œä¹Ÿä¼šé¢ä¸´ç›¸ä¼¼çš„é—®é¢˜ã€‚åŸºäºè¿™æ ·çš„è€ƒé‡ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ä¸Šè¿°æ¶æ„ï¼š</p><ul><li><p>ä¸»ç›®å½•ä¸‹åªæ”¾ä¸€ä¸ª<code>main.py</code>æ–‡ä»¶ã€‚</p></li><li><p><code>data</code>å’Œ<code>modle</code>ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸­æ”¾å…¥<code>__init__.py</code>æ–‡ä»¶ï¼ŒåšæˆåŒ…ã€‚è¿™æ ·æ–¹ä¾¿å¯¼å…¥ã€‚ä¸¤ä¸ª<code>init</code>æ–‡ä»¶åˆ†åˆ«æ˜¯ï¼š</p><ul><li><code>from .data_interface import DInterface</code></li><li><code>from .model_interface import MInterface</code></li></ul></li><li><p>åœ¨<code>data_interface</code>ä¸­å»ºç«‹ä¸€ä¸ª<code>class DInterface(pl.LightningDataModule):</code>ç”¨ä½œæ‰€æœ‰æ•°æ®é›†æ–‡ä»¶çš„æ¥å£ã€‚<code>__init__()</code>å‡½æ•°ä¸­importç›¸åº”Datasetç±»ï¼Œ<code>setup()</code>è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¹¶è€è€å®å®åŠ å…¥æ‰€éœ€è¦çš„çš„<code>train_dataloader</code>, <code>val_dataloader</code>, <code>test_dataloader</code>å‡½æ•°ã€‚è¿™äº›å‡½æ•°å¾€å¾€éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œå¯ä»¥ç”¨å‡ ä¸ªè¾“å…¥argsæ§åˆ¶ä¸åŒçš„éƒ¨åˆ†ã€‚</p></li><li><p>åŒç†ï¼Œåœ¨<code>model_interface</code>ä¸­å»ºç«‹<code>class MInterface(pl.LightningModule):</code>ç±»ï¼Œä½œä¸ºæ¨¡å‹çš„ä¸­é—´æ¥å£ã€‚<code>__init__()</code>å‡½æ•°ä¸­importç›¸åº”æ¨¡å‹ç±»ï¼Œç„¶åè€è€å®å®åŠ å…¥<code>configure_optimizers</code>, <code>training_step</code>, <code>validation_step</code>ç­‰å‡½æ•°ï¼Œç”¨ä¸€ä¸ªæ¥å£ç±»æ§åˆ¶æ‰€æœ‰æ¨¡å‹ã€‚ä¸åŒéƒ¨åˆ†ä½¿ç”¨è¾“å…¥å‚æ•°æ§åˆ¶ã€‚</p></li><li><p><code>main.py</code>å‡½æ•°åªè´Ÿè´£ï¼š</p><ul><li>å®šä¹‰parserï¼Œæ·»åŠ parseé¡¹ã€‚</li><li>é€‰å¥½éœ€è¦çš„<code>callback</code>å‡½æ•°ä»¬ã€‚</li><li>å®ä¾‹åŒ–<code>MInterface</code>, <code>DInterface</code>, <code>Trainer</code>ã€‚</li></ul><p>å®Œäº‹ã€‚</p></li></ul><h2 id="lightning-module">Lightning Module</h2><h3 id="ç®€ä»‹">ç®€ä»‹</h3><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/lightning_module.html">ä¸»é¡µé¢</a></p><ul><li><p>ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p><ul><li>æ¨¡å‹</li><li>ä¼˜åŒ–å™¨</li><li>Train/Val/Testæ­¥éª¤</li></ul></li><li><p>æ•°æ®æµä¼ªä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">outs = []</span><br><span class="line"><span class="keyword">for</span> batch <span class="keyword">in</span> data:</span><br><span class="line">    out = training_step(batch)</span><br><span class="line">    outs.append(out)</span><br><span class="line">training_epoch_end(outs)</span><br></pre></td></tr></table></figure><p>ç­‰ä»·Lightningä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">training_step</span>(<span class="params">self, batch, batch_idx</span>):</span></span><br><span class="line">    prediction = ...</span><br><span class="line">    <span class="keyword">return</span> prediction</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">training_epoch_end</span>(<span class="params">self, training_step_outputs</span>):</span></span><br><span class="line">    <span class="keyword">for</span> prediction <span class="keyword">in</span> predictions:</span><br><span class="line">        <span class="comment"># do something with these</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦åšçš„ï¼Œå°±æ˜¯åƒå¡«ç©ºä¸€æ ·ï¼Œå¡«è¿™äº›å‡½æ•°ã€‚</p></li></ul><h3 id="ç»„ä»¶ä¸å‡½æ•°">ç»„ä»¶ä¸å‡½æ•°</h3><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/lightning_module.html#lightningmodule-api">APIé¡µé¢</a></p><ul><li><p>ä¸€ä¸ªPytorch-Lighting æ¨¡å‹å¿…é¡»å«æœ‰çš„éƒ¨ä»¶æ˜¯ï¼š</p><ul><li><p><code>init</code>: åˆå§‹åŒ–ï¼ŒåŒ…æ‹¬æ¨¡å‹å’Œç³»ç»Ÿçš„å®šä¹‰ã€‚</p></li><li><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/api/pytorch_lightning.core.lightning.html#pytorch_lightning.core.lightning.LightningModule.training_step"><code>training_step(self, batch, batch_idx)</code></a>: å³æ¯ä¸ªbatchçš„å¤„ç†å‡½æ•°ã€‚</p><blockquote><p>å‚æ•°ï¼š</p><ul><li><strong>batch</strong> (<a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor"><code>Tensor</code></a> | (<a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor"><code>Tensor</code></a>, â€¦) | [<a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor"><code>Tensor</code></a>, â€¦]) â€“ The output of your <a href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader"><code>DataLoader</code></a>. A tensor, tuple or list.</li><li><strong>batch_idx</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a>) â€“ Integer displaying index of this batch</li><li><strong>optimizer_idx</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><em>int</em></a>) â€“ When using multiple optimizers, this argument will also be present.</li><li><strong>hiddens</strong> (<a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor"><code>Tensor</code></a>) â€“ Passed in if <a href="https://pytorch-lightning.readthedocs.io/en/latest/api/pytorch_lightning.trainer.trainer.html#pytorch_lightning.trainer.trainer.Trainer.params.truncated_bptt_steps"><code>truncated_bptt_steps</code></a> &gt; 0.</li></ul><p>è¿”å›å€¼ï¼šAny of.</p><ul><li><a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor"><code>Tensor</code></a> - The loss tensor</li><li><code>dict</code> - A dictionary. Can include any keys, but must include the key <code>'loss'</code></li><li><code>None</code> - Training will skip to the next batch</li></ul></blockquote><p>è¿”å›å€¼æ— è®ºå¦‚ä½•ä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªlossé‡ã€‚å¦‚æœæ˜¯å­—å…¸ï¼Œè¦æœ‰è¿™ä¸ªkeyã€‚æ²¡lossè¿™ä¸ªbatchå°±è¢«è·³è¿‡äº†ã€‚ä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">training_step</span>(<span class="params">self, batch, batch_idx</span>):</span></span><br><span class="line">    x, y, z = batch</span><br><span class="line">    out = self.encoder(x)</span><br><span class="line">    loss = self.loss(out, x)</span><br><span class="line">    <span class="keyword">return</span> loss</span><br><span class="line"></span><br><span class="line"><span class="comment"># Multiple optimizers (e.g.: GANs)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">training_step</span>(<span class="params">self, batch, batch_idx, optimizer_idx</span>):</span></span><br><span class="line">    <span class="keyword">if</span> optimizer_idx == <span class="number">0</span>:</span><br><span class="line">        <span class="comment"># do training_step with encoder</span></span><br><span class="line">    <span class="keyword">if</span> optimizer_idx == <span class="number">1</span>:</span><br><span class="line">        <span class="comment"># do training_step with decoder</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># Truncated back-propagation through time</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">training_step</span>(<span class="params">self, batch, batch_idx, hiddens</span>):</span></span><br><span class="line">    <span class="comment"># hiddens are the hidden states from the previous truncated backprop step</span></span><br><span class="line">    ...</span><br><span class="line">    out, hiddens = self.lstm(data, hiddens)</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;loss&#x27;</span>: loss, <span class="string">&#x27;hiddens&#x27;</span>: hiddens&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/optimizers.html#automatic-optimization"><code>configure_optimizers</code></a>: ä¼˜åŒ–å™¨å®šä¹‰ï¼Œè¿”å›ä¸€ä¸ªä¼˜åŒ–å™¨ï¼Œæˆ–æ•°ä¸ªä¼˜åŒ–å™¨ï¼Œæˆ–ä¸¤ä¸ªListï¼ˆä¼˜åŒ–å™¨ï¼ŒSchedulerï¼‰ã€‚å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># most cases</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">configure_optimizers</span>(<span class="params">self</span>):</span></span><br><span class="line">    opt = Adam(self.parameters(), lr=<span class="number">1e-3</span>)</span><br><span class="line">    <span class="keyword">return</span> opt</span><br><span class="line"></span><br><span class="line"><span class="comment"># multiple optimizer case (e.g.: GAN)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">configure_optimizers</span>(<span class="params">self</span>):</span></span><br><span class="line">    generator_opt = Adam(self.model_gen.parameters(), lr=<span class="number">0.01</span>)</span><br><span class="line">    disriminator_opt = Adam(self.model_disc.parameters(), lr=<span class="number">0.02</span>)</span><br><span class="line">    <span class="keyword">return</span> generator_opt, disriminator_opt</span><br><span class="line"></span><br><span class="line"><span class="comment"># example with learning rate schedulers</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">configure_optimizers</span>(<span class="params">self</span>):</span></span><br><span class="line">    generator_opt = Adam(self.model_gen.parameters(), lr=<span class="number">0.01</span>)</span><br><span class="line">    disriminator_opt = Adam(self.model_disc.parameters(), lr=<span class="number">0.02</span>)</span><br><span class="line">    discriminator_sched = CosineAnnealing(discriminator_opt, T_max=<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">return</span> [generator_opt, disriminator_opt], [discriminator_sched]</span><br><span class="line"></span><br><span class="line"><span class="comment"># example with step-based learning rate schedulers</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">configure_optimizers</span>(<span class="params">self</span>):</span></span><br><span class="line">    gen_opt = Adam(self.model_gen.parameters(), lr=<span class="number">0.01</span>)</span><br><span class="line">    dis_opt = Adam(self.model_disc.parameters(), lr=<span class="number">0.02</span>)</span><br><span class="line">    gen_sched = &#123;<span class="string">&#x27;scheduler&#x27;</span>: ExponentialLR(gen_opt, <span class="number">0.99</span>),</span><br><span class="line">                 <span class="string">&#x27;interval&#x27;</span>: <span class="string">&#x27;step&#x27;</span>&#125;  <span class="comment"># called after each training step</span></span><br><span class="line">    dis_sched = CosineAnnealing(discriminator_opt, T_max=<span class="number">10</span>) <span class="comment"># called every epoch</span></span><br><span class="line">    <span class="keyword">return</span> [gen_opt, dis_opt], [gen_sched, dis_sched]</span><br><span class="line"></span><br><span class="line"><span class="comment"># example with optimizer frequencies</span></span><br><span class="line"><span class="comment"># see training procedure in `Improved Training of Wasserstein GANs`, Algorithm 1</span></span><br><span class="line"><span class="comment"># https://arxiv.org/abs/1704.00028</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">configure_optimizers</span>(<span class="params">self</span>):</span></span><br><span class="line">    gen_opt = Adam(self.model_gen.parameters(), lr=<span class="number">0.01</span>)</span><br><span class="line">    dis_opt = Adam(self.model_disc.parameters(), lr=<span class="number">0.02</span>)</span><br><span class="line">    n_critic = <span class="number">5</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &#123;<span class="string">&#x27;optimizer&#x27;</span>: dis_opt, <span class="string">&#x27;frequency&#x27;</span>: n_critic&#125;,</span><br><span class="line">        &#123;<span class="string">&#x27;optimizer&#x27;</span>: gen_opt, <span class="string">&#x27;frequency&#x27;</span>: <span class="number">1</span>&#125;</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¯ä»¥æŒ‡å®šçš„éƒ¨ä»¶æœ‰ï¼š</p><ul><li><code>forward</code>: å’Œæ­£å¸¸çš„<code>nn.Module</code>ä¸€æ ·ï¼Œç”¨äºinferenceã€‚å†…éƒ¨è°ƒç”¨æ—¶ï¼š<code>y=self(batch)</code></li><li><code>training_step_end</code>: åªåœ¨ä½¿ç”¨å¤šä¸ªnodeè¿›è¡Œè®­ç»ƒä¸”ç»“æœæ¶‰åŠå¦‚softmaxä¹‹ç±»éœ€è¦å…¨éƒ¨è¾“å‡ºè”åˆè¿ç®—çš„æ­¥éª¤æ—¶ä½¿ç”¨è¯¥å‡½æ•°ã€‚åŒç†ï¼Œ<code>validation_step_end</code>/<code>test_step_end</code>ã€‚</li><li><code>training_epoch_end</code>:<ul><li>åœ¨ä¸€ä¸ªè®­ç»ƒepochç»“å°¾å¤„è¢«è°ƒç”¨ã€‚</li><li>è¾“å…¥å‚æ•°ï¼šä¸€ä¸ªListï¼ŒListçš„å†…å®¹æ˜¯å‰é¢<code>training_step()</code>æ‰€è¿”å›çš„æ¯æ¬¡çš„å†…å®¹ã€‚</li><li>è¿”å›ï¼šNone</li></ul></li><li><code>validation_step(self, batch, batch_idx)</code>/<code>test_step(self, batch, batch_idx)</code>:<ul><li>æ²¡æœ‰è¿”å›å€¼é™åˆ¶ï¼Œä¸ä¸€å®šéè¦è¾“å‡ºä¸€ä¸ª<code>val_loss</code>ã€‚</li></ul></li><li><code>validation_epoch_end</code>/<code>test_epoch_end</code>:</li></ul></li><li><p>å·¥å…·å‡½æ•°æœ‰ï¼š</p><ul><li><p><code>freeze</code>ï¼šå†»ç»“æ‰€æœ‰æƒé‡ä»¥ä¾›é¢„æµ‹æ—¶å€™ä½¿ç”¨ã€‚ä»…å½“å·²ç»è®­ç»ƒå®Œæˆä¸”åé¢åªæµ‹è¯•æ—¶ä½¿ç”¨ã€‚</p></li><li><p><code>print</code>ï¼šå°½ç®¡è‡ªå¸¦çš„<code>print</code>å‡½æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œä½†å¦‚æœç¨‹åºè¿è¡Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ï¼Œä¼šæ‰“å°å¤šæ¬¡ã€‚è€Œä½¿ç”¨<code>self.print()</code>åˆ™åªä¼šæ‰“å°ä¸€æ¬¡ã€‚</p></li><li><p><code>log</code>ï¼šåƒæ˜¯TensorBoardç­‰logè®°å½•å™¨ï¼Œå¯¹äºæ¯ä¸ªlogçš„æ ‡é‡ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªç›¸å¯¹åº”çš„æ¨ªåæ ‡ï¼Œå®ƒå¯èƒ½æ˜¯batch numberæˆ–epoch numberã€‚è€Œ<code>on_step</code>å°±è¡¨ç¤ºæŠŠè¿™ä¸ªlogå‡ºå»çš„é‡çš„æ¨ªåæ ‡è¡¨ç¤ºä¸ºå½“å‰batchï¼Œè€Œ<code>on_epoch</code>åˆ™è¡¨ç¤ºå°†logçš„é‡åœ¨æ•´ä¸ªepochä¸Šè¿›è¡Œç´¯ç§¯ålogï¼Œæ¨ªåæ ‡ä¸ºå½“å‰epochã€‚</p><table><thead><tr class="header"><th>LightningMoule Hook</th><th>on_step</th><th>on_epoch</th><th>prog_bar</th><th>logger</th></tr></thead><tbody><tr class="odd"><td>training_step</td><td>T</td><td>F</td><td>F</td><td>T</td></tr><tr class="even"><td>training_step_end</td><td>T</td><td>F</td><td>F</td><td>T</td></tr><tr class="odd"><td>training_epoch_end</td><td>F</td><td>T</td><td>F</td><td>T</td></tr><tr class="even"><td>validation_step*</td><td>F</td><td>T</td><td>F</td><td>T</td></tr><tr class="odd"><td>validation_step_end*</td><td>F</td><td>T</td><td>F</td><td>T</td></tr><tr class="even"><td>validation_epoch_end*</td><td>F</td><td>T</td><td>F</td><td>T</td></tr></tbody></table><p><code>*</code> also applies to the test loop</p><blockquote><p>å‚æ•°</p><ul><li><strong>name</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str"><code>str</code></a>) â€“ key name</li><li><strong>value</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Any"><code>Any</code></a>) â€“ value name</li><li><strong>prog_bar</strong> (<a href="https://docs.python.org/3/library/functions.html#bool"><code>bool</code></a>) â€“ if True logs to the progress bar</li><li><strong>logger</strong> (<a href="https://docs.python.org/3/library/functions.html#bool"><code>bool</code></a>) â€“ if True logs to the logger</li><li><strong>on_step</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Optional"><code>Optional</code></a>[<a href="https://docs.python.org/3/library/functions.html#bool"><code>bool</code></a>]) â€“ if True logs at this step. None auto-logs at the training_step but not validation/test_step</li><li><strong>on_epoch</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Optional"><code>Optional</code></a>[<a href="https://docs.python.org/3/library/functions.html#bool"><code>bool</code></a>]) â€“ if True logs epoch accumulated metrics. None auto-logs at the val/test step but not training_step</li><li><strong>reduce_fx</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Callable"><code>Callable</code></a>) â€“ reduction function over step values for end of epoch. Torch.mean by default</li><li><strong>tbptt_reduce_fx</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Callable"><code>Callable</code></a>) â€“ function to reduce on truncated back prop</li><li><strong>tbptt_pad_token</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><code>int</code></a>) â€“ token to use for padding</li><li><strong>enable_graph</strong> (<a href="https://docs.python.org/3/library/functions.html#bool"><code>bool</code></a>) â€“ if True, will not auto detach the graph</li><li><strong>sync_dist</strong> (<a href="https://docs.python.org/3/library/functions.html#bool"><code>bool</code></a>) â€“ if True, reduces the metric across GPUs/TPUs</li><li><strong>sync_dist_op</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Union"><code>Union</code></a>[<a href="https://docs.python.org/3/library/typing.html#typing.Any"><code>Any</code></a>, <a href="https://docs.python.org/3/library/stdtypes.html#str"><code>str</code></a>]) â€“ the op to sync across GPUs/TPUs</li><li><strong>sync_dist_group</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Optional"><code>Optional</code></a>[<a href="https://docs.python.org/3/library/typing.html#typing.Any"><code>Any</code></a>]) â€“ the ddp group</li></ul></blockquote></li><li><p><code>log_dict</code>ï¼šå’Œ<code>log</code>å‡½æ•°å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ï¼Œ<code>name</code>å’Œ<code>value</code>å˜é‡ç”±ä¸€ä¸ªå­—å…¸æ›¿æ¢ã€‚è¡¨ç¤ºåŒæ—¶logå¤šä¸ªå€¼ã€‚å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">values = &#123;<span class="string">&#x27;loss&#x27;</span>: loss, <span class="string">&#x27;acc&#x27;</span>: acc, ..., <span class="string">&#x27;metric_n&#x27;</span>: metric_n&#125;</span><br><span class="line">self.log_dict(values)</span><br></pre></td></tr></table></figure></li><li><p><code>save_hyperparameters</code>ï¼šå‚¨å­˜<code>init</code>ä¸­è¾“å…¥çš„æ‰€æœ‰è¶…å‚ã€‚åç»­è®¿é—®å¯ä»¥ç”±<code>self.hparams.argX</code>æ–¹å¼è¿›è¡Œã€‚åŒæ—¶ï¼Œè¶…å‚è¡¨ä¹Ÿä¼šè¢«å­˜åˆ°æ–‡ä»¶ä¸­ã€‚</p></li></ul></li><li><p>å‡½æ•°å†…å»ºå˜é‡ï¼š</p><ul><li><code>device</code>ï¼šå¯ä»¥ä½¿ç”¨<code>self.device</code>æ¥æ„å»ºè®¾å¤‡æ— å…³å‹tensorã€‚å¦‚ï¼š<code>z = torch.rand(2, 3, device=self.device)</code>ã€‚</li><li><code>hparams</code>ï¼šå«æœ‰æ‰€æœ‰å‰é¢å­˜ä¸‹æ¥çš„è¾“å…¥è¶…å‚ã€‚</li><li><code>precision</code>ï¼šç²¾ç¡®åº¦ã€‚å¸¸è§32å’Œ16ã€‚</li></ul></li></ul><h3 id="è¦ç‚¹">è¦ç‚¹</h3><ul><li>å¦‚æœå‡†å¤‡ä½¿ç”¨DataParallelï¼Œåœ¨å†™<code>training_step</code>çš„æ—¶å€™éœ€è¦è°ƒç”¨forwardå‡½æ•°ï¼Œ<code>z=self(x)</code></li></ul><h3 id="æ¨¡æ¿">æ¨¡æ¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LitModel</span>(<span class="params">pl.LightningModule</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">...</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">...</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">training_step</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">training_step_end</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">training_epoch_end</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">validation_step</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">validation_step_end</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">validation_epoch_end</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">test_step</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">test_step_end</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">test_epoch_end</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">configure_optimizers</span>(<span class="params">...</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">any_extra_hook</span>(<span class="params">...</span>)</span></span><br></pre></td></tr></table></figure><h2 id="trainer">Trainer</h2><h3 id="åŸºç¡€ä½¿ç”¨">åŸºç¡€ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">model = MyLightningModule()</span><br><span class="line"></span><br><span class="line">trainer = Trainer()</span><br><span class="line">trainer.fit(model, train_dataloader, val_dataloader)</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿<code>validation_step</code>éƒ½æ²¡æœ‰ï¼Œé‚£<code>val_dataloader</code>ä¹Ÿå°±ç®—äº†ã€‚</p><h3 id="ä¼ªä»£ç ä¸hooks">ä¼ªä»£ç ä¸hooks</h3><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/lightning_module.html#hooks">Hooksé¡µé¢</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fit</span>(<span class="params">...</span>):</span></span><br><span class="line">    on_fit_start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> global_rank == <span class="number">0</span>:</span><br><span class="line">        <span class="comment"># prepare data is called on GLOBAL_ZERO only</span></span><br><span class="line">        prepare_data()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> gpu/tpu <span class="keyword">in</span> gpu/tpus:</span><br><span class="line">        train_on_device(model.copy())</span><br><span class="line"></span><br><span class="line">    on_fit_end()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_on_device</span>(<span class="params">model</span>):</span></span><br><span class="line">    <span class="comment"># setup is called PER DEVICE</span></span><br><span class="line">    setup()</span><br><span class="line">    configure_optimizers()</span><br><span class="line">    on_pretrain_routine_start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> epochs:</span><br><span class="line">        train_loop()</span><br><span class="line"></span><br><span class="line">    teardown()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_loop</span>():</span></span><br><span class="line">    on_train_epoch_start()</span><br><span class="line">    train_outs = []</span><br><span class="line">    <span class="keyword">for</span> train_batch <span class="keyword">in</span> train_dataloader():</span><br><span class="line">        on_train_batch_start()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ----- train_step methods -------</span></span><br><span class="line">        out = training_step(batch)</span><br><span class="line">        train_outs.append(out)</span><br><span class="line"></span><br><span class="line">        loss = out.loss</span><br><span class="line"></span><br><span class="line">        backward()</span><br><span class="line">        on_after_backward()</span><br><span class="line">        optimizer_step()</span><br><span class="line">        on_before_zero_grad()</span><br><span class="line">        optimizer_zero_grad()</span><br><span class="line"></span><br><span class="line">        on_train_batch_end(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> should_check_val:</span><br><span class="line">            val_loop()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># end training epoch</span></span><br><span class="line">    logs = training_epoch_end(outs)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">val_loop</span>():</span></span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line">    torch.set_grad_enabled(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    on_validation_epoch_start()</span><br><span class="line">    val_outs = []</span><br><span class="line">    <span class="keyword">for</span> val_batch <span class="keyword">in</span> val_dataloader():</span><br><span class="line">        on_validation_batch_start()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># -------- val step methods -------</span></span><br><span class="line">        out = validation_step(val_batch)</span><br><span class="line">        val_outs.append(out)</span><br><span class="line"></span><br><span class="line">        on_validation_batch_end(out)</span><br><span class="line"></span><br><span class="line">    validation_epoch_end(val_outs)</span><br><span class="line">    on_validation_epoch_end()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># set up for train</span></span><br><span class="line">    model.train()</span><br><span class="line">    torch.set_grad_enabled(<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h3 id="æ¨èå‚æ•°">æ¨èå‚æ•°</h3><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/trainer.html#trainer-flags">å‚æ•°ä»‹ç»ï¼ˆé™„è§†é¢‘ï¼‰</a></p><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/trainer.html#trainer-class-api">ç±»å®šä¹‰ä¸é»˜è®¤å‚æ•°</a></p><ul><li><p><code>default_root_dir</code>ï¼šé»˜è®¤å­˜å‚¨åœ°å€ã€‚æ‰€æœ‰çš„å®éªŒå˜é‡å’Œæƒé‡å…¨éƒ¨ä¼šè¢«å­˜åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ã€‚æ¨èæ˜¯ï¼Œæ¯ä¸ªæ¨¡å‹æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶å¤¹ã€‚æ¯æ¬¡é‡æ–°è®­ç»ƒä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„<code>version_x</code>å­æ–‡ä»¶å¤¹ã€‚</p></li><li><p><code>max_epochs</code>ï¼šæœ€å¤§è®­ç»ƒå‘¨æœŸæ•°ã€‚<code>trainer = Trainer(max_epochs=1000)</code></p></li><li><p><code>min_epochs</code>ï¼šè‡³å°‘è®­ç»ƒå‘¨æœŸæ•°ã€‚å½“æœ‰Early Stopæ—¶ä½¿ç”¨ã€‚</p></li><li><p><code>auto_scale_batch_size</code>ï¼šåœ¨è¿›è¡Œä»»ä½•è®­ç»ƒå‰è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„batch sizeã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default used by the Trainer (no scaling of batch size)</span></span><br><span class="line">trainer = Trainer(auto_scale_batch_size=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># run batch size scaling, result overrides hparams.batch_size</span></span><br><span class="line">trainer = Trainer(auto_scale_batch_size=<span class="string">&#x27;binsearch&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># call tune to find the batch size</span></span><br><span class="line">trainer.tune(model)</span><br></pre></td></tr></table></figure></li><li><p><code>auto_select_gpus</code>ï¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„GPUã€‚å°¤å…¶æ˜¯åœ¨æœ‰GPUå¤„äºç‹¬å æ¨¡å¼æ—¶å€™ï¼Œéå¸¸æœ‰ç”¨ã€‚</p></li><li><p><code>auto_lr_find</code>ï¼šè‡ªåŠ¨æ‰¾åˆ°åˆé€‚çš„åˆå§‹å­¦ä¹ ç‡ã€‚ä½¿ç”¨äº†è¯¥<a href="https://arxiv.org/abs/1506.01186">è®ºæ–‡</a>çš„æŠ€æœ¯ã€‚å½“ä¸”ä»…å½“æ‰§è¡Œ<code>trainer.tune(model)</code>ä»£ç æ—¶å·¥ä½œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run learning rate finder, results override hparams.learning_rate</span></span><br><span class="line">trainer = Trainer(auto_lr_find=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># run learning rate finder, results override hparams.my_lr_arg</span></span><br><span class="line">trainer = Trainer(auto_lr_find=<span class="string">&#x27;my_lr_arg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># call tune to find the lr</span></span><br><span class="line">trainer.tune(model)</span><br></pre></td></tr></table></figure></li><li><p><code>precision</code>ï¼šç²¾ç¡®åº¦ã€‚æ­£å¸¸æ˜¯32ï¼Œä½¿ç”¨16å¯ä»¥å‡å°å†…å­˜æ¶ˆè€—ï¼Œå¢å¤§batchã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default used by the Trainer</span></span><br><span class="line">trainer = Trainer(precision=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 16-bit precision</span></span><br><span class="line">trainer = Trainer(precision=<span class="number">16</span>, gpus=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>val_check_interval</code>ï¼šè¿›è¡ŒValidationæµ‹è¯•çš„å‘¨æœŸã€‚æ­£å¸¸ä¸º1ï¼Œè®­ç»ƒ1ä¸ªepochæµ‹è¯•4æ¬¡æ˜¯0.25ï¼Œæ¯1000 batchæµ‹è¯•ä¸€æ¬¡æ˜¯1000ã€‚</p><blockquote><ul><li>use (float) to check within a training epochï¼šæ­¤æ—¶è¿™ä¸ªå€¼ä¸ºä¸€ä¸ªepochçš„ç™¾åˆ†æ¯”ã€‚æ¯ç™¾åˆ†ä¹‹å¤šå°‘æµ‹è¯•ä¸€æ¬¡ã€‚</li><li>use (int) to check every n steps (batches)ï¼šæ¯å¤šå°‘ä¸ªbatchæµ‹è¯•ä¸€æ¬¡ã€‚</li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default used by the Trainer</span></span><br><span class="line">trainer = Trainer(val_check_interval=<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># check validation set 4 times during a training epoch</span></span><br><span class="line">trainer = Trainer(val_check_interval=<span class="number">0.25</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># check validation set every 1000 training batches</span></span><br><span class="line"><span class="comment"># use this when using iterableDataset and your dataset has no length</span></span><br><span class="line"><span class="comment"># (ie: production cases with streaming data)</span></span><br><span class="line">trainer = Trainer(val_check_interval=<span class="number">1000</span>)</span><br></pre></td></tr></table></figure></li><li><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/trainer.html#gpus"><code>gpus</code></a>ï¼šæ§åˆ¶ä½¿ç”¨çš„GPUæ•°ã€‚å½“è®¾å®šä¸ºNoneæ—¶ï¼Œä½¿ç”¨cpuã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default used by the Trainer (ie: train on CPU)</span></span><br><span class="line">trainer = Trainer(gpus=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># equivalent</span></span><br><span class="line">trainer = Trainer(gpus=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># int: train on 2 gpus</span></span><br><span class="line">trainer = Trainer(gpus=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># list: train on GPUs 1, 4 (by bus ordering)</span></span><br><span class="line">trainer = Trainer(gpus=[<span class="number">1</span>, <span class="number">4</span>])</span><br><span class="line">trainer = Trainer(gpus=<span class="string">&#x27;1, 4&#x27;</span>) <span class="comment"># equivalent</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -1: train on all gpus</span></span><br><span class="line">trainer = Trainer(gpus=-<span class="number">1</span>)</span><br><span class="line">trainer = Trainer(gpus=<span class="string">&#x27;-1&#x27;</span>) <span class="comment"># equivalent</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># combine with num_nodes to train on multiple GPUs across nodes</span></span><br><span class="line"><span class="comment"># uses 8 gpus in total</span></span><br><span class="line">trainer = Trainer(gpus=<span class="number">2</span>, num_nodes=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># train only on GPUs 1 and 4 across nodes</span></span><br><span class="line">trainer = Trainer(gpus=[<span class="number">1</span>, <span class="number">4</span>], num_nodes=<span class="number">4</span>)</span><br></pre></td></tr></table></figure></li><li><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/trainer.html#limit-train-batches"><code>limit_train_batches</code></a>ï¼šä½¿ç”¨è®­ç»ƒæ•°æ®çš„ç™¾åˆ†æ¯”ã€‚å¦‚æœæ•°æ®è¿‡å¤šï¼Œæˆ–æ­£åœ¨è°ƒè¯•ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªã€‚å€¼çš„èŒƒå›´ä¸º0~1ã€‚åŒæ ·ï¼Œæœ‰<code>limit_test_batches</code>ï¼Œ<code>limit_val_batches</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default used by the Trainer</span></span><br><span class="line">trainer = Trainer(limit_train_batches=<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># run through only 25% of the training set each epoch</span></span><br><span class="line">trainer = Trainer(limit_train_batches=<span class="number">0.25</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># run through only 10 batches of the training set each epoch</span></span><br><span class="line">trainer = Trainer(limit_train_batches=<span class="number">10</span>)</span><br></pre></td></tr></table></figure></li><li><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/trainer.html#fast-dev-run"><code>fast_dev_run</code></a>ï¼šboolé‡ã€‚å¦‚æœè®¾å®šä¸ºtrueï¼Œä¼šåªæ‰§è¡Œä¸€ä¸ªbatchçš„train, val å’Œ testï¼Œç„¶åç»“æŸã€‚ä»…ç”¨äºdebugã€‚</p><blockquote><p>Setting this argument will disable tuner, checkpoint callbacks, early stopping callbacks, loggers and logger callbacks like <code>LearningRateLogger</code> and runs for only 1 epoch</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default used by the Trainer</span></span><br><span class="line">trainer = Trainer(fast_dev_run=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># runs 1 train, val, test batch and program ends</span></span><br><span class="line">trainer = Trainer(fast_dev_run=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># runs 7 train, val, test batches and program ends</span></span><br><span class="line">trainer = Trainer(fast_dev_run=<span class="number">7</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="fitå‡½æ•°">.fit()å‡½æ•°</h3><p><code>Trainer.fit(model, train_dataloader=None, val_dataloaders=None, datamodule=None)</code>ï¼šè¾“å…¥ç¬¬ä¸€ä¸ªé‡ä¸€å®šæ˜¯modelï¼Œç„¶åå¯ä»¥è·Ÿä¸€ä¸ªLigntningDataModuleæˆ–ä¸€ä¸ªæ™®é€šçš„Train DataLoaderã€‚å¦‚æœå®šä¹‰äº†Val stepï¼Œä¹Ÿè¦æœ‰Val DataLoaderã€‚</p><blockquote><p>å‚æ•°</p><ul><li><strong>datamodule</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Optional"><code>Optional</code></a>[<a href="https://pytorch-lightning.readthedocs.io/en/latest/api/pytorch_lightning.core.datamodule.html#pytorch_lightning.core.datamodule.LightningDataModule"><code>LightningDataModule</code></a>]) â€“ A instance of <code>LightningDataModule</code>.</li><li><strong>model</strong> (<a href="https://pytorch-lightning.readthedocs.io/en/latest/api/pytorch_lightning.core.lightning.html#pytorch_lightning.core.lightning.LightningModule"><code>LightningModule</code></a>) â€“ Model to fit.</li><li><strong>train_dataloader</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Optional"><code>Optional</code></a>[<a href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader"><code>DataLoader</code></a>]) â€“ A Pytorch DataLoader with training samples. If the model has a predefined train_dataloader method this will be skipped.</li><li><strong>val_dataloaders</strong> (<a href="https://docs.python.org/3/library/typing.html#typing.Union"><code>Union</code></a>[<a href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader"><code>DataLoader</code></a>, <a href="https://docs.python.org/3/library/typing.html#typing.List"><code>List</code></a>[<a href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader"><code>DataLoader</code></a>], <a href="https://docs.python.org/3/library/constants.html#None"><code>None</code></a>]) â€“ Either a single Pytorch Dataloader or a list of them, specifying validation samples. If the model has a predefined val_dataloaders method this will be skipped</li></ul></blockquote><h3 id="å…¶ä»–è¦ç‚¹">å…¶ä»–è¦ç‚¹</h3><ul><li><code>.test()</code>è‹¥éç›´æ¥è°ƒç”¨ï¼Œä¸ä¼šè¿è¡Œã€‚<code>trainer.test()</code></li><li><code>.test()</code>ä¼šè‡ªåŠ¨loadæœ€ä¼˜æ¨¡å‹ã€‚</li><li><code>model.eval()</code> and <code>torch.no_grad()</code> åœ¨è¿›è¡Œæµ‹è¯•æ—¶ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Trainer()</code>è¿è¡ŒäºCPUä¸Šã€‚</li></ul><h3 id="ä½¿ç”¨æ ·ä¾‹">ä½¿ç”¨æ ·ä¾‹</h3><ol type="1"><li>æ‰‹åŠ¨æ·»åŠ å‘½ä»¤è¡Œå‚æ•°ï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> argparse <span class="keyword">import</span> ArgumentParser</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">hparams</span>):</span></span><br><span class="line">    model = LightningModule()</span><br><span class="line">    trainer = Trainer(gpus=hparams.gpus)</span><br><span class="line">    trainer.fit(model)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    parser = ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--gpus&#x27;</span>, default=<span class="literal">None</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    main(args)</span><br></pre></td></tr></table></figure><ol start="2" type="1"><li>è‡ªåŠ¨æ·»åŠ æ‰€æœ‰<code>Trainer</code>ä¼šç”¨åˆ°çš„å‘½ä»¤è¡Œå‚æ•°ï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> argparse <span class="keyword">import</span> ArgumentParser</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">args</span>):</span></span><br><span class="line">    model = LightningModule()</span><br><span class="line">    trainer = Trainer.from_argparse_args(args)</span><br><span class="line">    trainer.fit(model)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    parser = ArgumentParser()</span><br><span class="line">    parser = Trainer.add_argparse_args(</span><br><span class="line">        <span class="comment"># group the Trainer arguments together</span></span><br><span class="line">        parser.add_argument_group(title=<span class="string">&quot;pl.Trainer args&quot;</span>)</span><br><span class="line">    )</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    main(args)</span><br></pre></td></tr></table></figure><ol start="3" type="1"><li>æ··åˆå¼ï¼Œæ—¢ä½¿ç”¨<code>Trainer</code>ç›¸å…³å‚æ•°ï¼Œåˆä½¿ç”¨ä¸€äº›è‡ªå®šä¹‰å‚æ•°ï¼Œå¦‚å„ç§æ¨¡å‹è¶…å‚ï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> argparse <span class="keyword">import</span> ArgumentParser</span><br><span class="line"><span class="keyword">import</span> pytorch_lightning <span class="keyword">as</span> pl</span><br><span class="line"><span class="keyword">from</span> pytorch_lightning <span class="keyword">import</span> LightningModule, Trainer</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">args</span>):</span></span><br><span class="line">    model = LightningModule()</span><br><span class="line">    trainer = Trainer.from_argparse_args(args)</span><br><span class="line">    trainer.fit(model)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    parser = ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--batch_size&#x27;</span>, default=<span class="number">32</span>, <span class="built_in">type</span>=<span class="built_in">int</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--hidden_dim&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">128</span>)</span><br><span class="line">    parser = Trainer.add_argparse_args(</span><br><span class="line">        <span class="comment"># group the Trainer arguments together</span></span><br><span class="line">        parser.add_argument_group(title=<span class="string">&quot;pl.Trainer args&quot;</span>)</span><br><span class="line">    )</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    main(args)</span><br></pre></td></tr></table></figure><h3 id="æ‰€æœ‰å‚æ•°">æ‰€æœ‰å‚æ•°</h3><blockquote><p><code>Trainer.``__init__</code>(<em>logger=True</em>, <em>checkpoint_callback=True</em>, <em>callbacks=None</em>, <em>default_root_dir=None</em>, <em>gradient_clip_val=0</em>, <em>process_position=0</em>, <em>num_nodes=1</em>, <em>num_processes=1</em>, <em>gpus=None</em>, <em>auto_select_gpus=False</em>, <em>tpu_cores=None</em>, <em>log_gpu_memory=None</em>, <em>progress_bar_refresh_rate=None</em>, <em>overfit_batches=0.0</em>, <em>track_grad_norm=- 1</em>, <em>check_val_every_n_epoch=1</em>, <em>fast_dev_run=False</em>, <em>accumulate_grad_batches=1</em>, <em>max_epochs=None</em>, <em>min_epochs=None</em>, <em>max_steps=None</em>, <em>min_steps=None</em>, <em>limit_train_batches=1.0</em>, <em>limit_val_batches=1.0</em>, <em>limit_test_batches=1.0</em>, <em>limit_predict_batches=1.0</em>, <em>val_check_interval=1.0</em>, <em>flush_logs_every_n_steps=100</em>, <em>log_every_n_steps=50</em>, <em>accelerator=None</em>, <em>sync_batchnorm=False</em>, <em>precision=32</em>, <em>weights_summary='top'</em>, <em>weights_save_path=None</em>, <em>num_sanity_val_steps=2</em>, <em>truncated_bptt_steps=None</em>, <em>resume_from_checkpoint=None</em>, <em>profiler=None</em>, <em>benchmark=False</em>, <em>deterministic=False</em>, <em>reload_dataloaders_every_epoch=False</em>, <em>auto_lr_find=False</em>, <em>replace_sampler_ddp=True</em>, <em>terminate_on_nan=False</em>, <em>auto_scale_batch_size=False</em>, <em>prepare_data_per_node=True</em>, <em>plugins=None</em>, <em>amp_backend='native'</em>, <em>amp_level='O2'</em>, <em>distributed_backend=None</em>, <em>move_metrics_to_cpu=False</em>, <em>multiple_trainloader_mode='max_size_cycle'</em>, <em>stochastic_weight_avg=False</em>)</p></blockquote><h3 id="logå’Œreturn-lossåˆ°åº•åœ¨åšä»€ä¹ˆ">Logå’Œreturn lossåˆ°åº•åœ¨åšä»€ä¹ˆ</h3><p>To add a training loop use the training_step method</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LitClassifier</span>(<span class="params">pl.LightningModule</span>):</span></span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, model</span>):</span></span><br><span class="line">         <span class="built_in">super</span>().__init__()</span><br><span class="line">         self.model = model</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">training_step</span>(<span class="params">self, batch, batch_idx</span>):</span></span><br><span class="line">         x, y = batch</span><br><span class="line">         y_hat = self.model(x)</span><br><span class="line">         loss = F.cross_entropy(y_hat, y)</span><br><span class="line">         <span class="keyword">return</span> loss</span><br></pre></td></tr></table></figure><ul><li>æ— è®ºæ˜¯<code>training_step</code>ï¼Œè¿˜æ˜¯<code>validation_step</code>ï¼Œ<code>test_step</code>è¿”å›å€¼éƒ½æ˜¯<code>loss</code>ã€‚è¿”å›çš„lossä¼šè¢«ç”¨ä¸€ä¸ªlistæ”¶é›†èµ·æ¥ã€‚</li></ul><p>Under the hood, Lightning does the following (pseudocode):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># put model in train mode</span></span><br><span class="line">model.train()</span><br><span class="line">torch.set_grad_enabled(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">losses = []</span><br><span class="line"><span class="keyword">for</span> batch <span class="keyword">in</span> train_dataloader:</span><br><span class="line">    <span class="comment"># forward</span></span><br><span class="line">    loss = training_step(batch)</span><br><span class="line">    losses.append(loss.detach())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># backward</span></span><br><span class="line">    loss.backward()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># apply and clear grads</span></span><br><span class="line">    optimizer.step()</span><br><span class="line">    optimizer.zero_grad()</span><br></pre></td></tr></table></figure><h4 id="training-epoch-level-metrics">Training epoch-level metrics</h4><p>If you want to calculate epoch-level metrics and log them, use the <code>.log</code> method</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">training_step</span>(<span class="params">self, batch, batch_idx</span>):</span></span><br><span class="line">    x, y = batch</span><br><span class="line">    y_hat = self.model(x)</span><br><span class="line">    loss = F.cross_entropy(y_hat, y)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># logs metrics for each training_step,</span></span><br><span class="line">    <span class="comment"># and the average across the epoch, to the progress bar and logger</span></span><br><span class="line">    self.log(<span class="string">&#x27;train_loss&#x27;</span>, loss, on_step=<span class="literal">True</span>, on_epoch=<span class="literal">True</span>, prog_bar=<span class="literal">True</span>, logger=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> loss</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœåœ¨<code>x_step</code>å‡½æ•°ä¸­ä½¿ç”¨äº†<code>.log()</code>å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªé‡å°†ä¼šè¢«é€æ­¥è®°å½•ä¸‹æ¥ã€‚æ¯ä¸€ä¸ª<code>log</code>å‡ºå»çš„å˜é‡éƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œæ¯ä¸€ä¸ª<code>step</code>ä¼šé›†ä¸­ç”Ÿæˆä¸€ä¸ªå­—å…¸dictï¼Œè€Œæ¯ä¸ªepochéƒ½ä¼šæŠŠè¿™äº›å­—å…¸æ”¶é›†èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå­—å…¸çš„listã€‚</li></ul><p>The .log object automatically reduces the requested metrics across the full epoch. Hereâ€™s the pseudocode of what it does under the hood:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">outs = []</span><br><span class="line"><span class="keyword">for</span> batch <span class="keyword">in</span> train_dataloader:</span><br><span class="line">    <span class="comment"># forward</span></span><br><span class="line">    out = training_step(val_batch)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># backward</span></span><br><span class="line">    loss.backward()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># apply and clear grads</span></span><br><span class="line">    optimizer.step()</span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">epoch_metric = torch.mean(torch.stack([x[<span class="string">&#x27;train_loss&#x27;</span>] <span class="keyword">for</span> x <span class="keyword">in</span> outs]))</span><br></pre></td></tr></table></figure><h4 id="train-epoch-level-operations">Train epoch-level operations</h4><p>If you need to do something with all the outputs of each training_step, override training_epoch_end yourself.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">training_step</span>(<span class="params">self, batch, batch_idx</span>):</span></span><br><span class="line">    x, y = batch</span><br><span class="line">    y_hat = self.model(x)</span><br><span class="line">    loss = F.cross_entropy(y_hat, y)</span><br><span class="line">    preds = ...</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;loss&#x27;</span>: loss, <span class="string">&#x27;other_stuff&#x27;</span>: preds&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">training_epoch_end</span>(<span class="params">self, training_step_outputs</span>):</span></span><br><span class="line">   <span class="keyword">for</span> pred <span class="keyword">in</span> training_step_outputs:</span><br><span class="line">       <span class="comment"># do something</span></span><br></pre></td></tr></table></figure><p>The matching pseudocode is:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">outs = []</span><br><span class="line"><span class="keyword">for</span> batch <span class="keyword">in</span> train_dataloader:</span><br><span class="line">    <span class="comment"># forward</span></span><br><span class="line">    out = training_step(val_batch)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># backward</span></span><br><span class="line">    loss.backward()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># apply and clear grads</span></span><br><span class="line">    optimizer.step()</span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">training_epoch_end(outs)</span><br></pre></td></tr></table></figure><h2 id="datamodule">DataModule</h2><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/extensions/datamodules.html">ä¸»é¡µé¢</a></p><h3 id="ä»‹ç»">ä»‹ç»</h3><ul><li><p>é¦–å…ˆï¼Œè¿™ä¸ª<code>DataModule</code>å’Œä¹‹å‰å†™çš„Datasetå®Œå…¨ä¸å†²çªã€‚å‰è€…æ˜¯åè€…çš„ä¸€ä¸ªåŒ…è£…ï¼Œå¹¶ä¸”è¿™ä¸ªåŒ…è£…å¯ä»¥è¢«ç”¨äºå¤šä¸ªtorch Dataset ä¸­ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œå…¶æœ€å¤§çš„ä½œç”¨å°±æ˜¯æŠŠå„ç§train/val/teståˆ’åˆ†ã€DataLoaderåˆå§‹åŒ–ä¹‹ç±»çš„é‡å¤ä»£ç é€šè¿‡åŒ…è£…ç±»çš„æ–¹å¼å¾—ä»¥è¢«ç®€å•çš„å¤ç”¨ã€‚</p></li><li><p>å…·ä½“ä½œç”¨é¡¹ç›®ï¼š</p><ul><li>Download instructionsï¼šä¸‹è½½</li><li>Processing instructionsï¼šå¤„ç†</li><li>Split instructionsï¼šåˆ†å‰²</li><li>Train dataloaderï¼šè®­ç»ƒé›†Dataloader</li><li>Val dataloader(s)ï¼šéªŒè¯é›†Dataloader</li><li>Test dataloader(s)ï¼šæµ‹è¯•é›†Dataloader</li></ul></li><li><p>å…¶æ¬¡ï¼Œ<code>pl.LightningDataModule</code>ç›¸å½“äºä¸€ä¸ªåŠŸèƒ½åŠ å¼ºç‰ˆçš„torch Datasetï¼ŒåŠ å¼ºçš„åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li><code>prepare_data(self)</code>ï¼š<ul><li>æœ€æœ€å¼€å§‹çš„æ—¶å€™ï¼Œè¿›è¡Œä¸€äº›æ— è®ºGPUæœ‰å¤šå°‘åªè¦æ‰§è¡Œä¸€æ¬¡çš„æ“ä½œï¼Œå¦‚å†™å…¥ç£ç›˜çš„ä¸‹è½½æ“ä½œã€åˆ†è¯æ“ä½œ(tokenize)ç­‰ã€‚</li><li>è¿™é‡Œæ˜¯ä¸€åŠ³æ°¸é€¸å¼å‡†å¤‡æ•°æ®çš„å‡½æ•°ã€‚</li><li>ç”±äºåªåœ¨å•çº¿ç¨‹ä¸­è°ƒç”¨ï¼Œä¸è¦åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¿›è¡Œ<code>self.x=y</code>ä¼¼çš„èµ‹å€¼æ“ä½œã€‚</li><li>ä½†å¦‚æœæ˜¯è‡ªå·±ç”¨è€Œä¸æ˜¯ç»™å¤§ä¼—åˆ†å‘çš„è¯ï¼Œè¿™ä¸ªå‡½æ•°å¯èƒ½å¹¶ä¸éœ€è¦è°ƒç”¨ï¼Œå› ä¸ºæ•°æ®æå‰å¤„ç†å¥½å°±å¥½äº†ã€‚</li></ul></li><li><code>setup(self, stage=None)</code>ï¼š<ul><li>å®ä¾‹åŒ–æ•°æ®é›†ï¼ˆDatasetï¼‰ï¼Œå¹¶è¿›è¡Œç›¸å…³æ“ä½œï¼Œå¦‚ï¼šæ¸…ç‚¹ç±»æ•°ï¼Œåˆ’åˆ†train/val/testé›†åˆç­‰ã€‚</li><li>å‚æ•°<code>stage</code>ç”¨äºæŒ‡ç¤ºæ˜¯å¤„äºè®­ç»ƒå‘¨æœŸ(<code>fit</code>)è¿˜æ˜¯æµ‹è¯•å‘¨æœŸ(<code>test</code>)ï¼Œå…¶ä¸­ï¼Œ<code>fit</code>å‘¨æœŸéœ€è¦æ„å»ºtrainå’Œvalä¸¤è€…çš„æ•°æ®é›†ã€‚</li><li>setupå‡½æ•°ä¸éœ€è¦è¿”å›å€¼ã€‚åˆå§‹åŒ–å¥½çš„train/val/test setç›´æ¥èµ‹å€¼ç»™selfå³å¯ã€‚</li></ul></li><li><code>train_dataloader/val_dataloader/test_dataloader</code>ï¼š<ul><li>åˆå§‹åŒ–<code>DataLoader</code>ã€‚</li><li>è¿”å›ä¸€ä¸ªDataLoaderé‡ã€‚</li></ul></li></ul></li></ul><h3 id="ç¤ºä¾‹">ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MNISTDataModule</span>(<span class="params">pl.LightningDataModule</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, data_dir: <span class="built_in">str</span> = <span class="string">&#x27;./&#x27;</span>, batch_size: <span class="built_in">int</span> = <span class="number">64</span>, num_workers: <span class="built_in">int</span> = <span class="number">8</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.data_dir = data_dir</span><br><span class="line">        self.batch_size = batch_size</span><br><span class="line">        self.num_workers = num_workers</span><br><span class="line"></span><br><span class="line">        self.transform = transforms.Compose([</span><br><span class="line">            transforms.ToTensor(),</span><br><span class="line">            transforms.Normalize((<span class="number">0.1307</span>,), (<span class="number">0.3081</span>,))</span><br><span class="line">        ])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># self.dims is returned when you call dm.size()</span></span><br><span class="line">        <span class="comment"># Setting default dims here because we know them.</span></span><br><span class="line">        <span class="comment"># Could optionally be assigned dynamically in dm.setup()</span></span><br><span class="line">        self.dims = (<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>)</span><br><span class="line">        self.num_classes = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">prepare_data</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># download</span></span><br><span class="line">        MNIST(self.data_dir, train=<span class="literal">True</span>, download=<span class="literal">True</span>)</span><br><span class="line">        MNIST(self.data_dir, train=<span class="literal">False</span>, download=<span class="literal">True</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setup</span>(<span class="params">self, stage=<span class="literal">None</span></span>):</span></span><br><span class="line">        <span class="comment"># Assign train/val datasets for use in dataloaders</span></span><br><span class="line">        <span class="keyword">if</span> stage == <span class="string">&#x27;fit&#x27;</span> <span class="keyword">or</span> stage <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            mnist_full = MNIST(self.data_dir, train=<span class="literal">True</span>, transform=self.transform)</span><br><span class="line">            self.mnist_train, self.mnist_val = random_split(mnist_full, [<span class="number">55000</span>, <span class="number">5000</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assign test dataset for use in dataloader(s)</span></span><br><span class="line">        <span class="keyword">if</span> stage == <span class="string">&#x27;test&#x27;</span> <span class="keyword">or</span> stage <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.mnist_test = MNIST(self.data_dir, train=<span class="literal">False</span>, transform=self.transform)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">train_dataloader</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> DataLoader(self.mnist_train, batch_size=self.batch_size, num_workers=self.num_workers)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">val_dataloader</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> DataLoader(self.mnist_val, batch_size=self.batch_size, num_workers=self.num_workers)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_dataloader</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> DataLoader(self.mnist_test, batch_size=self.batch_size, num_workers=self.num_workers)</span><br></pre></td></tr></table></figure><h3 id="è¦ç‚¹-1">è¦ç‚¹</h3><ul><li>è‹¥åœ¨DataModuleä¸­å®šä¹‰äº†ä¸€ä¸ª<code>self.dims</code> å˜é‡ï¼Œåé¢å¯ä»¥è°ƒç”¨<code>dm.size()</code>è·å–è¯¥å˜é‡ã€‚</li></ul><h2 id="saving-and-loading">Saving and Loading</h2><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/common/weights_loading.html">ä¸»é¡µé¢</a></p><h3 id="saving">Saving</h3><ul><li><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/extensions/generated/pytorch_lightning.callbacks.ModelCheckpoint.html#pytorch_lightning.callbacks.ModelCheckpoint">ModelCheckpoint</a>: è‡ªåŠ¨å‚¨å­˜çš„callback moduleã€‚é»˜è®¤æƒ…å†µä¸‹trainingè¿‡ç¨‹ä¸­åªä¼šè‡ªåŠ¨å‚¨å­˜æœ€æ–°çš„æ¨¡å‹ä¸ç›¸å…³å‚æ•°ï¼Œè€Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™ä¸ªmoduleè‡ªå®šä¹‰ã€‚å¦‚è§‚æµ‹ä¸€ä¸ª<code>val_loss</code>çš„é‡ï¼Œå¹¶å‚¨å­˜top 3å¥½çš„æ¨¡å‹ï¼Œä¸”åŒæ—¶å‚¨å­˜æœ€åä¸€ä¸ªepochçš„æ¨¡å‹ï¼Œç­‰ç­‰ã€‚ä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pytorch_lightning.callbacks <span class="keyword">import</span> ModelCheckpoint</span><br><span class="line"></span><br><span class="line"><span class="comment"># saves a file like: my/path/sample-mnist-epoch=02-val_loss=0.32.ckpt</span></span><br><span class="line">checkpoint_callback = ModelCheckpoint(</span><br><span class="line">    monitor=<span class="string">&#x27;val_loss&#x27;</span>,</span><br><span class="line">    filename=<span class="string">&#x27;sample-mnist-&#123;epoch:02d&#125;-&#123;val_loss:.2f&#125;&#x27;</span>,</span><br><span class="line">    save_top_k=<span class="number">3</span>,</span><br><span class="line">    mode=<span class="string">&#x27;min&#x27;</span>,</span><br><span class="line">    save_last=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trainer = pl.Trainer(gpus=<span class="number">1</span>, max_epochs=<span class="number">3</span>, progress_bar_refresh_rate=<span class="number">20</span>, callbacks=[checkpoint_callback])</span><br></pre></td></tr></table></figure></li><li><p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å­˜å‚¨checkpoint: <code>trainer.save_checkpoint("example.ckpt")</code></p></li><li><p><code>ModelCheckpoint</code> Callbackä¸­ï¼Œå¦‚æœ<code>save_weights_only =True</code>ï¼Œé‚£ä¹ˆå°†ä¼šåªå‚¨å­˜æ¨¡å‹çš„æƒé‡ï¼ˆç›¸å½“äº<code>model.save_weights(filepath)</code>ï¼‰ï¼Œåä¹‹ä¼šå‚¨å­˜æ•´ä¸ªæ¨¡å‹ï¼ˆç›¸å½“äº<code>model.save(filepath)</code>ï¼‰ã€‚</p></li></ul><h3 id="loading">Loading</h3><ul><li><p>loadä¸€ä¸ªæ¨¡å‹ï¼ŒåŒ…æ‹¬å®ƒçš„weightsã€biaseså’Œè¶…å‚æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">model = MyLightingModule.load_from_checkpoint(PATH)</span><br><span class="line"></span><br><span class="line">print(model.learning_rate)</span><br><span class="line"><span class="comment"># prints the learning_rate you used in this checkpoint</span></span><br><span class="line"></span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line">y_hat = model(x)</span><br></pre></td></tr></table></figure></li><li><p>loadæ¨¡å‹æ—¶æ›¿æ¢ä¸€äº›è¶…å‚æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LitModel</span>(<span class="params">LightningModule</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, in_dim, out_dim</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.save_hyperparameters()</span><br><span class="line">        self.l1 = nn.Linear(self.hparams.in_dim, self.hparams.out_dim)</span><br><span class="line">        </span><br><span class="line"><span class="comment"># if you train and save the model like this it will use these values when loading</span></span><br><span class="line"><span class="comment"># the weights. But you can overwrite this</span></span><br><span class="line">LitModel(in_dim=<span class="number">32</span>, out_dim=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># uses in_dim=32, out_dim=10</span></span><br><span class="line">model = LitModel.load_from_checkpoint(PATH)</span><br><span class="line"></span><br><span class="line"><span class="comment"># uses in_dim=128, out_dim=10</span></span><br><span class="line">model = LitModel.load_from_checkpoint(PATH, in_dim=<span class="number">128</span>, out_dim=<span class="number">10</span>)</span><br></pre></td></tr></table></figure></li><li><p>å®Œå…¨loadè®­ç»ƒçŠ¶æ€ï¼šloadåŒ…æ‹¬æ¨¡å‹çš„ä¸€åˆ‡ï¼Œä»¥åŠå’Œè®­ç»ƒç›¸å…³çš„ä¸€åˆ‡å‚æ•°ï¼Œå¦‚<code>model, epoch, step, LR schedulers, apex</code>ç­‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">model = LitModel()</span><br><span class="line">trainer = Trainer(resume_from_checkpoint=<span class="string">&#x27;some/path/to/my_checkpoint.ckpt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># automatically restores model, epoch, step, LR schedulers, apex, etc...</span></span><br><span class="line">trainer.fit(model)</span><br></pre></td></tr></table></figure></li></ul><h2 id="callbacks">Callbacks</h2><ul><li>Callback æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„ç¨‹åºï¼Œå¯ä»¥ä¸è®­ç»ƒæµç¨‹äº¤ç»‡åœ¨ä¸€èµ·ï¼Œè€Œä¸ä¼šæ±¡æŸ“ä¸»è¦çš„ç ”ç©¶é€»è¾‘ã€‚</li><li>Callback å¹¶éåªä¼šåœ¨epochç»“å°¾è°ƒç”¨ã€‚pytorch-lightning æä¾›äº†æ•°åä¸ªhookï¼ˆæ¥å£ï¼Œè°ƒç”¨ä½ç½®ï¼‰å¯ä¾›é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰callbackï¼Œå®ç°ä»»ä½•æƒ³å®ç°çš„æ¨¡å—ã€‚</li><li>æ¨èä½¿ç”¨æ–¹å¼æ˜¯ï¼Œéšé—®é¢˜å’Œé¡¹ç›®å˜åŒ–çš„æ“ä½œï¼Œè¿™äº›å‡½æ•°å†™åˆ°lightning moduleé‡Œé¢ï¼Œè€Œç›¸å¯¹ç‹¬ç«‹ï¼Œç›¸å¯¹è¾…åŠ©æ€§çš„ï¼Œéœ€è¦å¤ç”¨çš„å†…å®¹åˆ™å¯ä»¥å®šä¹‰å•ç‹¬çš„æ¨¡å—ï¼Œä¾›åç»­æ–¹ä¾¿åœ°æ’æ‹”ä½¿ç”¨ã€‚</li></ul><h3 id="callbacksæ¨è">Callbacksæ¨è</h3><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/extensions/callbacks.html#built-in-callbacks">å†…å»ºCallbacks</a></p><ul><li><p><code>EarlyStopping(monitor='early_stop_on', min_delta=0.0, patience=3, verbose=False, mode='min', strict=True)</code>ï¼šæ ¹æ®æŸä¸ªå€¼ï¼Œåœ¨æ•°ä¸ªepochæ²¡æœ‰æå‡çš„æƒ…å†µä¸‹æå‰åœæ­¢è®­ç»ƒã€‚</p><blockquote><p>å‚æ•°ï¼š</p><ul><li><strong>monitor</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str"><code>str</code></a>) â€“ quantity to be monitored. Default: <code>'early_stop_on'</code>.</li><li><strong>min_delta</strong> (<a href="https://docs.python.org/3/library/functions.html#float"><code>float</code></a>) â€“ minimum change in the monitored quantity to qualify as an improvement, i.e. an absolute change of less than min_delta, will count as no improvement. Default: <code>0.0</code>.</li><li><strong>patience</strong> (<a href="https://docs.python.org/3/library/functions.html#int"><code>int</code></a>) â€“ number of validation epochs with no improvement after which training will be stopped. Default: <code>3</code>.</li><li><strong>verbose</strong> (<a href="https://docs.python.org/3/library/functions.html#bool"><code>bool</code></a>) â€“ verbosity mode. Default: <code>False</code>.</li><li><strong>mode</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str"><code>str</code></a>) â€“ one of <code>'min'</code>, <code>'max'</code>. In <code>'min'</code> mode, training will stop when the quantity monitored has stopped decreasing and in <code>'max'</code> mode it will stop when the quantity monitored has stopped increasing.</li><li><strong>strict</strong> (<a href="https://docs.python.org/3/library/functions.html#bool"><code>bool</code></a>) â€“ whether to crash the training if monitor is not found in the validation metrics. Default: <code>True</code>.</li></ul></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pytorch_lightning <span class="keyword">import</span> Trainer</span><br><span class="line"><span class="keyword">from</span> pytorch_lightning.callbacks <span class="keyword">import</span> EarlyStopping</span><br><span class="line"></span><br><span class="line">early_stopping = EarlyStopping(<span class="string">&#x27;val_loss&#x27;</span>)</span><br><span class="line">trainer = Trainer(callbacks=[early_stopping])</span><br></pre></td></tr></table></figure></li><li><p><code>ModelCheckpoint</code>ï¼šè§ä¸Šæ–‡<strong>Saving and Loading</strong>.</p></li><li><p><code>PrintTableMetricsCallback</code>ï¼šåœ¨æ¯ä¸ªepochç»“æŸåæ‰“å°ä¸€ä»½ç»“æœæ•´ç†è¡¨æ ¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pl_bolts.callbacks <span class="keyword">import</span> PrintTableMetricsCallback</span><br><span class="line"></span><br><span class="line">callback = PrintTableMetricsCallback()</span><br><span class="line">trainer = pl.Trainer(callbacks=[callback])</span><br><span class="line">trainer.fit(...)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------</span></span><br><span class="line"><span class="comment"># at the end of every epoch it will print</span></span><br><span class="line"><span class="comment"># ------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># lossâ”‚train_lossâ”‚val_lossâ”‚epoch</span></span><br><span class="line"><span class="comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span><br><span class="line"><span class="comment"># 2.2541470527648926â”‚2.2541470527648926â”‚2.2158432006835938â”‚0</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="logging">Logging</h2><ul><li><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/extensions/logging.html">Logging</a>ï¼šLoggeré»˜è®¤æ˜¯TensorBoardï¼Œä½†å¯ä»¥æŒ‡å®šå„ç§ä¸»æµLogger<a href="https://pytorch-lightning.readthedocs.io/en/latest/extensions/logging.html#supported-loggers">æ¡†æ¶</a>ï¼Œå¦‚Comet.mlï¼ŒMLflowï¼ŒNetpuneï¼Œæˆ–ç›´æ¥CSVæ–‡ä»¶ã€‚å¯ä»¥åŒæ—¶ä½¿ç”¨å¤æ•°ä¸ªloggerã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pytorch_lightning <span class="keyword">import</span> loggers <span class="keyword">as</span> pl_loggers</span><br><span class="line"></span><br><span class="line"><span class="comment"># Default</span></span><br><span class="line">tb_logger = pl_loggers.TensorBoardLogger(</span><br><span class="line">    save_dir=os.getcwd(),</span><br><span class="line">    version=<span class="literal">None</span>,</span><br><span class="line">    name=<span class="string">&#x27;lightning_logs&#x27;</span></span><br><span class="line">)</span><br><span class="line">trainer = Trainer(logger=tb_logger)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Or use the same format as others</span></span><br><span class="line">tb_logger = pl_loggers.TensorBoardLogger(<span class="string">&#x27;logs/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># One Logger</span></span><br><span class="line">comet_logger = pl_loggers.CometLogger(save_dir=<span class="string">&#x27;logs/&#x27;</span>)</span><br><span class="line">trainer = Trainer(logger=comet_logger)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Save code snapshot</span></span><br><span class="line">logger = pl_loggers.TestTubeLogger(<span class="string">&#x27;logs/&#x27;</span>, create_git_tag=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Multiple Logger</span></span><br><span class="line">tb_logger = pl_loggers.TensorBoardLogger(<span class="string">&#x27;logs/&#x27;</span>)</span><br><span class="line">comet_logger = pl_loggers.CometLogger(save_dir=<span class="string">&#x27;logs/&#x27;</span>)</span><br><span class="line">trainer = Trainer(logger=[tb_logger, comet_logger])</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯50ä¸ªbatch logä¸€æ¬¡ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´å‚æ•°</p></li><li><p>å¦‚æœæƒ³è¦logè¾“å‡ºéscalarï¼ˆæ ‡é‡ï¼‰çš„å†…å®¹ï¼Œå¦‚å›¾ç‰‡ï¼Œæ–‡æœ¬ï¼Œç›´æ–¹å›¾ç­‰ç­‰ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨<code>self.logger.experiment.add_xxx()</code>æ¥å®ç°æ‰€éœ€æ“ä½œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">training_step</span>(<span class="params">...</span>):</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment"># the logger you used (in this case tensorboard)</span></span><br><span class="line">    tensorboard = self.logger.experiment</span><br><span class="line">    tensorboard.add_image()</span><br><span class="line">    tensorboard.add_histogram(...)</span><br><span class="line">    tensorboard.add_figure(...)</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨logï¼šå¦‚æœæ˜¯TensorBoardï¼Œé‚£ä¹ˆï¼š<code>tensorboard --logdir ./lightning_logs</code>ã€‚åœ¨Jupyter Notebookä¸­ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Start tensorboard.</span></span><br><span class="line">%load_ext tensorboard</span><br><span class="line">%tensorboard --logdir lightning_logs/</span><br></pre></td></tr></table></figure><p>åœ¨è¡Œå†…æ‰“å¼€TensorBoardã€‚</p></li><li><p>å°æŠ€å·§ï¼šå¦‚æœåœ¨å±€åŸŸç½‘å†…å¼€å¯äº†TensorBoardï¼ŒåŠ ä¸Šflag <code>--bind_all</code>å³å¯ä½¿ç”¨ä¸»æœºåè®¿é—®ï¼š</p><p><code>tensorboard --logdir lightning_logs --bind_all</code> -&gt; <code>http://SERVER-NAME:6006/</code></p></li></ul><h3 id="åŒæ—¶ä½¿ç”¨tensorboardå’Œcsv-logger">åŒæ—¶ä½¿ç”¨TensorBoardå’ŒCSV Logger</h3><p>å¦‚æœåŒæ—¶ä½¿ç”¨ä¸¤ä¸ªLoggerï¼ŒPLä¼šæœ‰ç¿æ™ºæ“ä½œï¼šå¦‚æœä¿å­˜æ ¹ç›®å½•ç›¸åŒï¼Œä»–ä»¬ä¼šä¾æ¬¡å»ºç«‹ä¸¤ä¸ªversionæ–‡ä»¶å¤¹ï¼Œä»¤äººçª’æ¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pytorch_lightning.loggers <span class="keyword">import</span> TensorBoardLogger, CSVLogger</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_loggers</span>():</span></span><br><span class="line">    loggers = []</span><br><span class="line">    loggers.append(TensorBoardLogger(</span><br><span class="line">        save_dir=<span class="string">&#x27;lightning_logs&#x27;</span>, name=<span class="string">&#x27;tb&#x27;</span></span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">    loggers.append(CSVLogger(</span><br><span class="line">        save_dir=<span class="string">&#x27;lightning_logs&#x27;</span>, name=<span class="string">&#x27;csv&#x27;</span></span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">    loggers.append(CometLogger(</span><br><span class="line">        save_dir=<span class="string">&#x27;lightning_logs&#x27;</span>, name=<span class="string">&#x27;tt&#x27;</span></span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> loggers</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_callbacks</span>(<span class="params">logger</span>):</span></span><br><span class="line">    callbacks = []</span><br><span class="line">    dirpath = <span class="string">f&#x27;lightning_logs/<span class="subst">&#123;logger.name&#125;</span>/version_<span class="subst">&#123;logger.version&#125;</span>/checkpoints&#x27;</span></span><br><span class="line">    callbacks.append(ModelCheckpoint(</span><br><span class="line">        dirpath=dirpath,</span><br><span class="line">        monitor=<span class="string">&#x27;loss_epoch&#x27;</span>,</span><br><span class="line">        filename=<span class="string">&#x27;&#123;epoch:02d&#125;-&#123;val_loss:.2f&#125;&#x27;</span>,</span><br><span class="line">        save_top_k=<span class="number">3</span>,</span><br><span class="line">        mode=<span class="string">&#x27;max&#x27;</span>,</span><br><span class="line">        save_last=<span class="literal">True</span></span><br><span class="line">    ))</span><br><span class="line">    <span class="keyword">return</span> callbacks</span><br><span class="line"></span><br><span class="line">loggers = load_loggers()</span><br><span class="line">callbacks = load_callbacks(loggers[<span class="number">0</span>])</span><br><span class="line">trainer = pl.Trainer(logger=loggers, callbacks=callbacks)</span><br></pre></td></tr></table></figure><h2 id="transfer-learning">Transfer Learning</h2><p><a href="https://pytorch-lightning.readthedocs.io/en/latest/starter/introduction_guide.html#transfer-learning">ä¸»é¡µé¢</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torchvision.models <span class="keyword">as</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImagenetTransferLearning</span>(<span class="params">LightningModule</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># init a pretrained resnet</span></span><br><span class="line">        backbone = models.resnet50(pretrained=<span class="literal">True</span>)</span><br><span class="line">        num_filters = backbone.fc.in_features</span><br><span class="line">        layers = <span class="built_in">list</span>(backbone.children())[:-<span class="number">1</span>]</span><br><span class="line">        self.feature_extractor = nn.Sequential(*layers)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># use the pretrained model to classify cifar-10 (10 image classes)</span></span><br><span class="line">        num_target_classes = <span class="number">10</span></span><br><span class="line">        self.classifier = nn.Linear(num_filters, num_target_classes)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        self.feature_extractor.<span class="built_in">eval</span>()</span><br><span class="line">        <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">            representations = self.feature_extractor(x).flatten(<span class="number">1</span>)</span><br><span class="line">        x = self.classifier(representations)</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure><h2 id="å…³äºdeviceæ“ä½œ">å…³äºdeviceæ“ä½œ</h2><p>LightningModules know what device they are on! Construct tensors on the device directly to avoid CPU-&gt;Device transfer.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bad</span></span><br><span class="line">t = torch.rand(<span class="number">2</span>, <span class="number">2</span>).cuda()</span><br><span class="line"></span><br><span class="line"><span class="comment"># good (self is LightningModule)</span></span><br><span class="line">t = torch.rand(<span class="number">2</span>, <span class="number">2</span>, device=self.device)</span><br></pre></td></tr></table></figure><p>For tensors that need to be model attributes, it is best practice to register them as buffers in the modulesâ€™s <code>__init__</code> method:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bad</span></span><br><span class="line">self.t = torch.rand(<span class="number">2</span>, <span class="number">2</span>, device=self.device)</span><br><span class="line"></span><br><span class="line"><span class="comment"># good</span></span><br><span class="line">self.register_buffer(<span class="string">&quot;t&quot;</span>, torch.rand(<span class="number">2</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure><p>å‰é¢ä¸¤æ®µæ˜¯æ•™ç¨‹ä¸­çš„æ–‡æœ¬ã€‚ç„¶è€Œå®é™…ä¸Šæœ‰ä¸€ä¸ªæš—å‘ï¼š</p><p>å¦‚æœä½ ä½¿ç”¨äº†ä¸€ä¸ªä¸­ç»§çš„<code>pl.LightningModule</code>ï¼Œè€Œè¿™ä¸ªmoduleé‡Œé¢å®ä¾‹åŒ–äº†æŸä¸ªæ™®é€šçš„<code>nn.Module</code>ï¼Œè€Œè¿™ä¸ªæ¨¡å‹ä¸­åˆéœ€è¦å†…éƒ¨ç”Ÿæˆä¸€äº›tensorï¼Œæ¯”å¦‚å›¾ç‰‡æ¯ä¸ªé€šé“çš„meanï¼Œstdä¹‹ç±»ï¼Œé‚£ä¹ˆå¦‚æœä½ ä»<code>pl.LightningModule</code>ä¸­passä¸€ä¸ª<code>self.device</code>ï¼Œå®é™…ä¸Šåœ¨ä¸€å¼€å§‹è¿™ä¸ª<code>self.device</code>æ°¸è¿œæ˜¯<code>cpu</code>ã€‚æ‰€ä»¥å¦‚æœä½ åœ¨è°ƒç”¨çš„<code>nn.Module</code>çš„<code>__init__()</code>ä¸­åˆå§‹åŒ–ï¼Œä½¿ç”¨<code>to(device)</code>æˆ–å¹²è„†ä»€ä¹ˆéƒ½ä¸ç”¨ï¼Œç»“æœå°±æ˜¯å®ƒæ°¸è¿œéƒ½åœ¨<code>cpu</code>ä¸Šã€‚</p><p>ä½†æ˜¯ï¼Œç»è¿‡å®éªŒï¼Œè™½ç„¶<code>pl.LightningModule</code>åœ¨<code>__init__()</code>é˜¶æ®µ<code>self.device</code>è¿˜æ˜¯<code>cpu</code>ï¼Œå½“è¿›å…¥äº†<code>training_step()</code>ä¹‹åï¼Œå°±è¿…é€Ÿå˜ä¸ºäº†<code>cuda</code>ã€‚æ‰€ä»¥ï¼Œå¯¹äºå­æ¨¡å—ï¼Œæœ€ä½³æ–¹æ¡ˆæ˜¯ï¼Œä½¿ç”¨ä¸€ä¸ª<code>forward</code>ä¸­ä¼ å…¥çš„é‡ï¼Œå¦‚<code>x</code>ï¼Œä½œä¸ºä¸€ä¸ªreferenceå˜é‡ï¼Œç”¨<code>type_as</code>å‡½æ•°å°†åœ¨æ¨¡å‹ä¸­ç”Ÿæˆçš„tensoréƒ½æ”¾åˆ°å’Œè¿™ä¸ªå‚è€ƒå˜é‡ç›¸åŒçš„deviceä¸Šå³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RDNFuse</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init_norm_func</span>(<span class="params">self, ref</span>):</span></span><br><span class="line">        self.mean = torch.tensor(np.array(self.mean_sen), dtype=torch.float32).type_as(ref)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(self, <span class="string">&#x27;mean&#x27;</span>):</span><br><span class="line">            self.init_norm_func(x)</span><br></pre></td></tr></table></figure><h2 id="å…³äºlimit_train_batchesé€‰é¡¹">å…³äº<code>limit_train_batches</code>é€‰é¡¹</h2><p>è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¯ä¸ªepochä½¿ç”¨éƒ¨åˆ†æ•°æ®è€Œéå…¨éƒ¨æ—¶ï¼Œç¨‹åºå°†ä¼šæ€ä¹ˆå·¥ä½œã€‚</p><blockquote><p>The shuffling happens when the iterator is created. In the case of the for loop, that happens just before the for loop starts. You can create the iterator manually with:</p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Iterator gets created, the data has been shuffled at this point.</span></span><br><span class="line">data_iterator = <span class="built_in">iter</span>(namesTrainLoader)</span><br></pre></td></tr></table></figure><blockquote><p>By default the data loader uses <a href="https://pytorch.org/docs/stable/data.html#torch.utils.data.RandomSampler"><code>torch.utils.data.RandomSampler</code></a> if you set <code>shuffle=True</code> (without providing your own sampler). Its implementation is very straight forward and you can see where the data is shuffled when the iterator is created by looking at the <a href="https://github.com/pytorch/pytorch/blob/f3e620ee83f080283445aa1a7242d40e30eb6a7f/torch/utils/data/sampler.py#L103-L107"><code>RandomSampler.__iter__</code></a> method:</p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">    n = <span class="built_in">len</span>(self.data_source)</span><br><span class="line">    <span class="keyword">if</span> self.replacement:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">iter</span>(torch.randint(high=n, size=(self.num_samples,), dtype=torch.int64).tolist())</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">iter</span>(torch.randperm(n).tolist())</span><br></pre></td></tr></table></figure><blockquote><p>The return statement is the important part, where the shuffling takes place. It simply creates a random permutation of the indices.</p><p>That means you will see your entire dataset every time you fully consume the iterator, just in a different order every time. Therefore there is no data lost (not including cases with <code>drop_last=True</code>) and your model will see all data at every epoch.</p></blockquote><p>æ€»ç»“ä¸‹æ¥ï¼Œå¦‚æœä½¿ç”¨äº†<code>shuffle=True</code>é€‰é¡¹ï¼Œé‚£ä¹ˆå³ä½¿æ¯æ¬¡éƒ½ä¸è·‘å®Œæ•´ä¸ªepochï¼Œä½ è¿˜æ˜¯æœ‰æœºä¼šè§åˆ°æ‰€æœ‰çš„æ•°æ®çš„ã€‚æ•°æ®é›†çš„shuffleå‘ç”Ÿåœ¨<code>iter</code>è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œåœ¨æˆ‘ä»¬ä¸€èˆ¬çš„ä»£ç ä¸­ï¼Œä¹Ÿå°±æ˜¯å†…å±‚forå¾ªç¯å¼€å§‹æ—¶ã€‚ä½†å¦‚æœä½ æ²¡æœ‰é€‰æ‹©<code>shuffle=True</code>ï¼Œé‚£ä½ å°†æ°¸è¿œåªèƒ½çœ‹åˆ°ä½ è®¾å®šçš„å‰é¢Nä¸ªæ•°æ®ã€‚</p><h2 id="points">Points</h2><ul><li><p><code>pl.seed_everything(1234)</code>ï¼šå¯¹æ‰€æœ‰ç›¸å…³çš„éšæœºé‡å›ºå®šç§å­ã€‚</p></li><li><p>ä½¿ç”¨LR Scheduleræ—¶å€™ï¼Œä¸ç”¨è‡ªå·±<code>.step()</code>ã€‚å®ƒä¹Ÿè¢«Trainerè‡ªåŠ¨å¤„ç†äº†ã€‚<a href="https://pytorch-lightning.readthedocs.io/en/latest/common/optimizers.html?highlight=scheduler#">Optimization ä¸»é¡µé¢</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Single optimizer</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> epochs:</span><br><span class="line">    <span class="keyword">for</span> batch <span class="keyword">in</span> data:</span><br><span class="line">        loss = model.training_step(batch, batch_idx, ...)</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> scheduler <span class="keyword">in</span> schedulers:</span><br><span class="line">        scheduler.step()</span><br><span class="line">        </span><br><span class="line"><span class="comment"># Multiple optimizers</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> epochs:</span><br><span class="line">  <span class="keyword">for</span> batch <span class="keyword">in</span> data:</span><br><span class="line">     <span class="keyword">for</span> opt <span class="keyword">in</span> optimizers:</span><br><span class="line">        disable_grads_for_other_optimizers()</span><br><span class="line">        train_step(opt)</span><br><span class="line">        opt.step()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> scheduler <span class="keyword">in</span> schedulers:</span><br><span class="line">     scheduler.step()</span><br></pre></td></tr></table></figure></li><li><p>å…³äºåˆ’åˆ†trainå’Œvalé›†åˆçš„æ–¹æ³•ã€‚ä¸PLæ— å…³ï¼Œä½†å¾ˆå¸¸ç”¨ï¼Œä¸¤ä¸ªä¾‹å­ï¼š</p><ol type="1"><li><code>random_split(range(10), [3, 7], generator=torch.Generator().manual_seed(42))</code></li><li>å¦‚ä¸‹ï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader, random_split</span><br><span class="line"><span class="keyword">from</span> torchvision.datasets <span class="keyword">import</span> MNIST</span><br><span class="line"></span><br><span class="line">mnist_full = MNIST(self.data_dir, train=<span class="literal">True</span>, transform=self.transform)</span><br><span class="line">self.mnist_train, self.mnist_val = random_split(mnist_full, [<span class="number">55000</span>, <span class="number">5000</span>])</span><br></pre></td></tr></table></figure><p>Parametersï¼š</p><ul><li><strong>dataset</strong> (<a href="https://pytorch.org/docs/stable/data.html#torch.utils.data.Dataset"><em>Dataset</em></a>) â€“ Dataset to be split</li><li><strong>lengths</strong> (<em>sequence</em>) â€“ lengths of splits to be produced</li><li><strong>generator</strong> (<a href="https://pytorch.org/docs/stable/generated/torch.Generator.html#torch.Generator"><em>Generator</em></a>) â€“ Generator used for the random permutation.</li></ul></li><li><p>å¦‚æœä½¿ç”¨äº†<code>PrintTableMetricsCallback</code>ï¼Œé‚£ä¹ˆ<code>validation_step</code>ä¸è¦returnå†…å®¹ï¼Œå¦åˆ™ä¼šç‚¸ã€‚</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;
&lt;p&gt;Pytorch-Lightningè¿™ä¸ªåº“æˆ‘â€œå‘ç°â€è¿‡ä¸¤æ¬¡ã€‚ç¬¬ä¸€æ¬¡å‘ç°æ—¶ï¼Œæ„Ÿè§‰å®ƒå¾ˆé‡å¾ˆéš¾å­¦ï¼Œè€Œä¸”ä¼¼ä¹è‡ªå·±ä¹Ÿç”¨ä¸ä¸Šã€‚ä½†æ˜¯åé¢éšç€åšçš„é¡¹ç›®å¼€å§‹å‡ºç°äº†ä¸€äº›ç¨å¾®é«˜é˜¶çš„è¦æ±‚ï¼Œæˆ‘å‘ç°æˆ‘æ€»æ˜¯ä¸æ–­åœ°åœ¨ç›¸ä¼¼å·¥ç¨‹ä»£ç ä¸ŠèŠ±è´¹å¤§é‡æ—¶é—´ï¼ŒDebugä¹Ÿæ˜¯è¿™äº›ä»£ç èŠ±çš„æ—¶é—´æœ€å¤šï¼Œè€Œä¸”æ¸æ¸äº§ç”Ÿäº†ä¸€ä¸ªçŸ›ç›¾ä¹‹å¤„ï¼šå¦‚æœæƒ³è¦æ›´å¤šæ›´å¥½çš„åŠŸèƒ½ï¼Œå¦‚TensorBoardæ”¯æŒï¼ŒEarly Stopï¼ŒLR Schedulerï¼Œåˆ†å¸ƒå¼è®­ç»ƒï¼Œå¿«é€Ÿæµ‹è¯•ç­‰ï¼Œä»£ç å°±æ— å¯é¿å…åœ°å˜å¾—è¶Šæ¥è¶Šé•¿ï¼Œçœ‹èµ·æ¥ä¹Ÿè¶Šæ¥è¶Šä¹±ï¼ŒåŒæ—¶æ ¸å¿ƒçš„è®­ç»ƒé€»è¾‘ä¹Ÿæ¸æ¸è¢«è¿™äº›å·¥ç¨‹ä»£ç ç›–è¿‡ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œç”šè‡³èƒ½ä¸€é”®è§£å†³æ‰€æœ‰è¿™äº›é—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;</summary>
    
    
    
    
    <category term="deep-learning" scheme="https://www.miracleyoo.com/tags/deep-learning/"/>
    
    <category term="pytorch" scheme="https://www.miracleyoo.com/tags/pytorch/"/>
    
    <category term="pytorch-lightning" scheme="https://www.miracleyoo.com/tags/pytorch-lightning/"/>
    
  </entry>
  
  <entry>
    <title>Analyzing Geography Data (Beginners&#39; Tutorial)</title>
    <link href="https://www.miracleyoo.com/2021/02/03/satellite-basic/"/>
    <id>https://www.miracleyoo.com/2021/02/03/satellite-basic/</id>
    <published>2021-02-04T02:18:19.000Z</published>
    <updated>2021-03-12T23:19:59.936Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ•°æ®æ¥æº">æ•°æ®æ¥æº</h2><h3 id="å«æ˜Ÿç±»å‹">å«æ˜Ÿç±»å‹</h3><ol type="1"><li><p>Sentinel-2ï¼šæä¾›æ··åˆåˆ†è¾¨ç‡çš„13 Bands MSIã€‚åˆ†è¾¨ç‡æœ‰<span class="math inline">\(10m \times 10m\)</span>ï¼Œ<span class="math inline">\(20m \times 20m\)</span>ï¼Œ<span class="math inline">\(60m \times 60m\)</span>ï¼Œbandsä¸­å¿ƒæ³¢é•¿ä»442.3nmåˆ°2185.7nmã€‚</p><p><img src="/2021/02/03/satellite-basic/image-20201213154533413.png" alt="image-20201213154533413" style="zoom:33%;"></p><span id="more"></span></li><li><p>Planetï¼šè¿™ä¸ªæ•°æ®æºæä¾›<span class="math inline">\(3m \times 3m\)</span>çš„4 bands MSI imageã€‚åˆ†åˆ«æ˜¯Rã€Gã€Bã€NIRã€‚</p><ul><li>è¿™ä¸ªæ•°æ®æºä¼¼ä¹åªå¯¹ç¾å›½å›½å†…çš„é™¢æ ¡æœºæ„å¼€æ”¾ï¼Œä¸è¿‡ä¸æ˜¯å¾ˆç¡®å®šï¼Œéœ€è¦çš„å¯ä»¥è¯•è¯•ã€‚</li></ul><figure><img src="/2021/02/03/satellite-basic/image-20201213150111581.png" alt="Planet Specification"><figcaption aria-hidden="true">Planet Specification</figcaption></figure></li><li><p>RapidEyes</p></li></ol><h3 id="sentinel-2-data-source">Sentinel-2 Data Source</h3><ol type="1"><li><p>USGS Earth Explorer: <a href="https://earthexplorer.usgs.gov/">Link</a>. It support downloading data within five years. And it not only support sentinel-2 data, but also contains many other satellite datasource.</p><figure><img src="/2021/02/03/satellite-basic/image-20201227143234319.png" alt="image-20201227143234319"><figcaption aria-hidden="true">image-20201227143234319</figcaption></figure></li><li><p>Copernicus Open Access Hub: <a href="https://scihub.copernicus.eu/dhus/#/home">Link</a>. It supports only one year's old data. You can request the older data, but not guarante the fetch time.</p><figure><img src="/2021/02/03/satellite-basic/image-20201227145324164.png" alt="image-20201227145324164"><figcaption aria-hidden="true">image-20201227145324164</figcaption></figure></li><li><p>Amazon AWS Sentinel-2 Service: <a href="https://registry.opendata.aws/sentinel-2/">Link</a></p></li></ol><h3 id="planet-data-source">Planet Data Source</h3><ul><li>å®˜ç½‘ï¼š<a href="https://www.planet.com/">Link</a></li></ul><h3 id="specification">Specification</h3><ol type="1"><li><a href="https://sentinel.esa.int/web/sentinel/technical-guides/sentinel-2-msi/msi-instrument">Sentinel-2 MultiSpectral Instrument (MSI) Overview</a></li><li><a href="https://www.planet.com/products/satellite-imagery/files/Planet_Combined_Imagery_Product_Specs_December2017.pdf">Sentinel-2 Specification Doc</a></li><li><a href="https://www.planet.com/products/planet-imagery/">Planet Specification</a></li></ol><h2 id="è½¯ä»¶ä¸pythonåŒ…ç®€ä»‹">è½¯ä»¶ä¸PythonåŒ…ç®€ä»‹</h2><ul><li><a href="http://www.gdal.org/">GDAL</a> â€“&gt; Fundamental package for processing vector and raster data formats (many modules below depend on this). Used for raster processing.</li><li><a href="https://github.com/mapbox/rasterio">Rasterio</a> â€“&gt; Clean and fast and geospatial raster I/O for Python. <a href="https://rasterio.readthedocs.io/en/latest/quickstart.html">Guidebook</a>.</li><li><a href="http://geopandas.org/#description">Geopandas</a> â€“&gt; Working with geospatial data in Python made easier, combines the capabilities of pandas and shapely.</li><li><a href="http://toblerity.org/shapely/manual.html">Shapely</a> â€“&gt; Python package for manipulation and analysis of planar geometric objects (based on widely deployed <a href="https://trac.osgeo.org/geos/">GEOS</a>).</li><li><a href="https://pypi.python.org/pypi/Fiona">Fiona</a> â€“&gt; Reading and writing spatial data (alternative for geopandas).</li><li><a href="https://pypi.python.org/pypi/pyproj?">Pyproj</a> â€“&gt; Performs cartographic transformations and geodetic computations (based on <a href="http://trac.osgeo.org/proj">PROJ.4</a>).</li><li><a href="https://pysal.readthedocs.org/en/latest/">Pysal</a> â€“&gt; Library of spatial analysis functions written in Python.</li><li><a href="http://geopy.readthedocs.io/en/latest/">Geopy</a> â€“&gt; Geocoding library: coordinates to address &lt;-&gt; address to coordinates.</li><li><a href="http://geo.holoviews.org/index.html">GeoViews</a> â€“&gt; Interactive Maps for the web.</li><li><a href="https://networkx.github.io/documentation/networkx-1.10/overview.html">Networkx</a> â€“&gt; Network analysis and routing in Python (e.g. Dijkstra and A* -algorithms), see <a href="http://gis.stackexchange.com/questions/65056/is-it-possible-to-route-shapefiles-using-python-and-without-arcgis-qgis-or-pgr">this post</a>.</li><li><a href="http://scitools.org.uk/cartopy/docs/latest/index.html">Cartopy</a> â€“&gt; Make drawing maps for data analysis and visualisation as easy as possible.</li><li><a href="http://docs.scipy.org/doc/scipy/reference/spatial.html">Scipy.spatial</a> â€“&gt; Spatial algorithms and data structures.</li><li><a href="http://toblerity.org/rtree/">Rtree</a> â€“&gt; Spatial indexing for Python for quick spatial lookups.</li><li><a href="http://www.rsgislib.org/index.html#python-documentation">RSGISLib</a> â€“&gt; Remote Sensing and GIS Software Library for Python.</li><li><a href="https://python-geojson.readthedocs.io/en/latest/">python-geojson</a>-&gt; Deal with geojson format files.</li></ul><h2 id="sentinel-2-å¤§æ°”æ ¡æ­£">Sentinel-2 å¤§æ°”æ ¡æ­£</h2><p>Sentinel-2ä¸€èˆ¬æœ‰ä¸¤ç§standardï¼Œä¸€ä¸ªæ˜¯Açº§åˆ«ï¼Œä¸€ä¸ªæ˜¯Cçº§åˆ«ã€‚Cçº§åˆ«çš„æ•°æ®æ˜¯ä½ å¯ä»¥ä»ä»»æ„ç½‘ç«™ä¸Šä¸‹è½½åˆ°çš„æ•°æ®ï¼Œå®ƒæ²¡æœ‰ç»è¿‡å¤§æ°”æ ¡æ­£ï¼Œæ˜¯ç²—æ•°æ®ï¼Œæ¯ä¸ªåŒºå—çš„åå°„ç‡å¯èƒ½æœ‰ä¸åŒï¼Œä¸é€‚åˆç›´æ¥ç”¨ä½œæ·±åº¦å­¦ä¹ æ•°æ®ã€‚</p><p>ç»è¿‡Sen2Corè½¯ä»¶æ ¡æ­£åå¯ä»¥å¾—åˆ°Açº§åˆ«çš„æ•°æ®ã€‚</p><p>Sen2Coræ˜¯æ¬§ç©ºå±€å‘å¸ƒçš„ä¸€ä¸ªè½¯ä»¶ï¼Œå®ƒå³å¯ä»¥ä½œä¸ºSNAPçš„æ’ä»¶å®‰è£…ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºç‹¬ç«‹å‘½ä»¤è¡Œè½¯ä»¶ä½¿ç”¨ã€‚æ¨èåè€…ï¼Œæ›´ä¸ºå¿«é€Ÿã€ç¨³å®šï¼Œå°¤å…¶é€‚ç”¨äºå¤§é‡æ•°æ®æ—¶ï¼Œå¯ä»¥ç”¨è„šæœ¬æ‰¹å¤„ç†ã€‚<a href="http://step.esa.int/main/snap-supported-plugins/sen2cor/sen2cor_v2-8/">å®˜ç½‘é“¾æ¥</a></p><h3 id="æŸ¥è¯¢åæ ‡æ˜ å°„">æŸ¥è¯¢åæ ‡æ˜ å°„</h3><ul><li>åœ°çƒæ˜¯åœ†çš„ã€‚</li><li>å«æ˜Ÿä¸Šæ‹çš„ä¸€å¼ çŸ©å½¢ç…§ç‰‡æ‰€å¯¹åº”çš„åŒºåŸŸå¹¶éæ˜¯çŸ©å½¢çš„ã€‚</li><li>ä½¿ç”¨å«æ˜Ÿå›¾ç‰‡æ—¶è¦å…ˆå°†å…¶æ˜ å°„åˆ°äºŒç»´å±•å¼€çš„åæ ‡ç³»ä¸­ã€‚</li><li>æ•´ä¸ªåœ°çƒè¢«åˆ†ä¸ºäº†è®¸å¤šé¢„å…ˆè®¢å¥½çš„åŒºåŸŸã€‚</li><li>æ¯ä¸ªåŒºåŸŸæœ‰ä¸€ä¸ªç¼–å·ã€‚</li><li>ç¼–å·å¯ä»¥åœ¨<a href="http://epsg.io/">EPSG</a>ç½‘ç«™æŸ¥è¯¢ã€‚</li></ul><h2 id="snap">SNAP</h2><ul><li><p>æ¬§ç©ºå±€è‡ªå·±ç”¨ä½œå¤„ç†Sentinel-2çš„è½¯ä»¶ã€‚<a href="https://step.esa.int/main/download/snap-download/">Link</a></p></li><li><p>åªç”¨æ¥å¤„ç†Sentinel-2ï¼Œå°¤å…¶æ˜¯é¢„å¤„ç†ï¼ŒåŒ…æ‹¬æ ¡æ­£ï¼Œreprojectionï¼Œç²—cropï¼Œç»Ÿä¸€å„ä¸ªbandsåˆ†è¾¨ç‡ç­‰ç­‰ï¼Œéå¸¸å¥½ç”¨ã€‚å› ä¸ºæ˜¯äº²å„¿å­ï¼Œæ‰€ä»¥ç”šè‡³å¯ä»¥ç›´æ¥è¯»å–Sentinel-2æ¯ä¸ªæ–‡ä»¶çš„å‹ç¼©åŒ…ï¼Œæ€»ä¹‹ååˆ†ä¾¿åˆ©ã€‚</p></li><li><p>æ¯”è¾ƒå¤è€ï¼Œinterfaceæœ‰å¹´ä»£æ„Ÿï¼ŒåŠŸèƒ½ä¹Ÿç›¸è¾ƒäºå…¶ä»–è½¯ä»¶æ¯”è¾ƒå±€é™ã€‚</p></li><li><p>æ¨èç”¨ä½œç¬¬ä¸€æ­¥é¢„å¤„ç†ã€‚</p></li><li><p>ä½¿ç”¨æµç¨‹ï¼š<code>è¯»å–-&gt;å‰ªè£-&gt;correction-&gt;resize-&gt;reprojection-&gt;å¯¼å‡º</code>ã€‚</p></li><li><p>å¤§éƒ¨åˆ†éœ€è¦ç”¨åˆ°çš„åŠŸèƒ½éƒ½åœ¨<code>Raster-&gt;Geometric</code>ä¸­</p></li><li><p>ç»è¿‡å°è¯•ã€æœç´¢ã€ç¡®è®¤ï¼ŒSNAPå¹¶ä¸æä¾›ä¾¿åˆ©çš„é€‰å®šåŒºåŸŸæˆªå›¾ï¼Œæˆ–æ˜¯ä¾æ®shapefileå‰ªè£ï¼Œæ‰€ä»¥ç›®å‰æœ€ä½³çš„æ–¹æ³•æ˜¯ï¼Œå…ˆé€šè¿‡zoomåœ°å›¾å’Œæ”¹å˜çª—å£å¤§å°ç¡®ä¿éœ€è¦çš„éƒ¨åˆ†å¤§è‡´åœ¨viewçš„å¯è§†èŒƒå›´å†…ï¼Œç„¶åå³é”®ï¼Œé€‰æ‹©<code>Spatial Subset from View</code>ï¼Œç„¶åå¯è§†åŒºåŸŸå³å¯è¢«å‰ªè£ã€‚æ³¨æ„ï¼Œè¿™åªæ˜¯ç²—å‰ªè£ï¼Œæ‰€ä»¥å°½é‡å¤šåŒ…æ‹¬ä¸€ç‚¹ï¼Œä¹Ÿä¸è¦å°‘ä»»ä½•ä¸€éƒ¨åˆ†ã€‚å‰ªè£åçš„å†…å®¹å¯ä»¥åç»­åœ¨ArcGIS Proä¸­è¿›ä¸€æ­¥å¤„ç†ã€‚</p><p><img src="/2021/02/03/satellite-basic/image-20201227155911702.png" alt="image-20201227155911702" style="zoom:40%;"></p></li><li><p>å±•ç¤ºå›¾ï¼š</p><p><img src="/2021/02/03/satellite-basic/image-20201227155421761.png" alt="image-20201227155421761" style="zoom:33%;"></p><figure><img src="/2021/02/03/satellite-basic/image-20201227155558109.png" alt="image-20201227155558109"><figcaption aria-hidden="true">image-20201227155558109</figcaption></figure></li></ul><h2 id="arcgis-pro">ArcGIS Pro</h2><ul><li><p>æˆ‘èƒ½æ‰¾åˆ°çš„æœ€å¼ºå¤§çš„å¯ç”¨äºå«æ˜Ÿå›¾åƒå¤„ç†çš„è½¯ä»¶ã€‚</p></li><li><p>ä¸“ä¸šï¼Œç¾è§‚ï¼Œæ”¯æŒformatå¤šï¼Œæœ‰ç€å¼ºå¤§çš„raster functionsã€‚</p></li><li><p>ç‰ˆæƒè½¯ä»¶ï¼Œä¸‹è½½ä¹‹å‰å…ˆç¡®è®¤è‡ªå·±å­¦æ ¡æˆ–å…¬å¸æ˜¯å¦æä¾›Licenseã€‚</p></li><li><p>æœ‰æ—¶å¯¼å‡ºrasterä¼šå‡ºç°éšæœºbugï¼Œå¯¼è‡´ï¼šå¯¼å‡ºå¯èƒ½æ˜¯çº¯é»‘çš„å›¾ç‰‡ï¼Œå¯¼å‡ºéƒ¨åˆ†æ²¡æœ‰æŒ‰ç…§æœŸæœ›å‰ªè£ç­‰ã€‚å¾ˆæ¶å¿ƒï¼Œä½†ä¼¼ä¹ä¹Ÿæ²¡æœ‰æ›´å¥½çš„é€‰æ‹©ã€‚</p></li><li><p>è§£å†³å¯¼å‡ºé—®é¢˜ï¼š</p><ol type="1"><li>å…³é—­å¯¼å‡ºçª—å£ï¼Œé‡æ–°æ“ä½œï¼Œå¤šè¯•å‡ æ¬¡ã€‚å¯ä»¥è§£å†³ç»å¤§éƒ¨åˆ†é—®é¢˜ã€‚</li><li>å’Œå‰ªè£ã€maskç­‰æœ‰å…³çš„é—®é¢˜å¯ä»¥å…ˆä½¿ç”¨raster functionè¿›è¡Œè¿™äº›æ“ä½œï¼Œå†ç›´æ¥å¯¼å‡ºå‰é¢æ“ä½œçš„ç»“æœlayerã€‚</li></ol></li><li><p>å…³äºå‰ªè£åçš„å«æ˜Ÿå›¾ç‰‡å’ŒåŸå§‹å›¾ç‰‡æœ‰ç€æ˜æ˜¾äº®åº¦å¯¹æ¯”åº¦åŒºåˆ«çš„é—®é¢˜ï¼š</p><ol type="1"><li><p>é¦–å…ˆï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªbugï¼Œè€Œæ˜¯ä¸€ä¸ªfeatureã€‚ã€‚ã€‚å®é™…ä¸Šçš„å«æ˜Ÿå›¾éƒ½å¾ˆæš—æ²‰çš„ï¼Œæ‰€ä»¥è½¯ä»¶åŸç”Ÿæä¾›ä¸€ä¸ªâ€œæ˜¾ç¤ºæ–¹æ³•â€çš„å‡½æ•°ï¼Œè°ƒæ•´å›¾ç‰‡æ›²çº¿ï¼Œä½¿å¾—æ˜¾ç¤ºçš„å›¾ç‰‡æ¯”è¾ƒäº®ï¼Œå®¹æ˜“çœ‹æ¸…æ¥šç»†èŠ‚ã€‚ç„¶è€Œï¼Œå‰ªè£åçš„å›¾ç‰‡æœ‰ç€ä¸ä¸€æ ·çš„ç»Ÿè®¡å€¼ï¼Œæ‰€ä»¥åœ¨æœ‰äº›æ˜¾ç¤ºå‡½æ•°ä¸‹ï¼Œæ˜¾ç¤ºçš„ç»“æœå’Œå‰ªè£å‰ç»“æœä¸åŒã€‚</p><p><img src="/2021/02/03/satellite-basic/image-20201227155342029.png" alt="image-20201227155342029" style="zoom:33%;"></p></li><li><p>ä½†æ˜¯ä¸ç”¨æ‹…å¿ƒï¼Œå› ä¸ºå¯¼å‡ºæ—¶å€™å¹¶ä¸ä¼šè€ƒè™‘è¿™ä¸ªæ˜¾ç¤ºå‡½æ•°ã€‚å³ï¼šå‰ªè£å‰åçš„å¯¼å‡ºå›¾åƒæ•°å€¼æ˜¯ç›¸åŒçš„ã€‚</p></li></ol></li><li><p>ä¸‹é¢æ˜¯ä¸¤å¼ å±•ç¤ºå›¾ï¼š</p></li></ul><figure><img src="/2021/02/03/satellite-basic/image-20201227155051608.png" alt="image-20201227155051608"><figcaption aria-hidden="true">image-20201227155051608</figcaption></figure><figure><img src="/2021/02/03/satellite-basic/image-20201227155259214.png" alt="image-20201227155259214"><figcaption aria-hidden="true">image-20201227155259214</figcaption></figure><h2 id="qgis">QGIS</h2><ul><li><p>å¼€æºè½¯ä»¶ï¼Œæ”¯æŒå¾ˆå¤šæ’ä»¶ï¼Œæ¯”å¦‚ç›´æ¥ä¸‹è½½Sentinel-2æ•°æ®ï¼ŒSen2Corç­‰ã€‚<a href="https://qgis.org/en/site/">Link</a></p></li><li><p>æ”¯æŒå¾ˆå¤šformatçš„æ•°æ®ã€‚</p></li><li><p>é—®é¢˜æ˜¯ï¼Œä¸ç¨³å®šï¼Œæ•ˆç‡ä½ï¼Œå®¹æ˜“å´©æºƒï¼ˆè½¯ä»¶&amp;å¿ƒæ€ï¼‰ï¼Œç”šè‡³å·¦ä¾§Exploreré‡åˆ°å¤§æ–‡ä»¶å¤¹éƒ½è¦ç»å¸¸è½¬å¾ˆä¹…æ‰èƒ½è¿›å»ï¼Œæˆ–æ˜¯å¹²è„†å°±ç›´æ¥è½¬å´©äº†ã€‚æˆ‘æ€€ç–‘ä»–ä»¬è¦åˆ†ææ¯ä¸ªæ–‡ä»¶å¤¹æ‰€æœ‰æ–‡ä»¶ä¹‹åå†æ˜¾ç¤ºåˆ—è¡¨ã€‚ã€‚ã€‚æ€»ä¹‹ï¼Œæ…é‡ã€‚</p><figure><img src="/2021/02/03/satellite-basic/image-20201227160344273.png" alt="image-20201227160344273"><figcaption aria-hidden="true">image-20201227160344273</figcaption></figure></li></ul><h2 id="pythonic-method">Pythonic Method</h2><p>è™½ç„¶å‰é¢ä»‹ç»äº†å‡ ä¸ªè½¯ä»¶ï¼Œä½†æ˜¯è¯´å®è¯ï¼Œå¤„ç†ä¸€ä¸¤ä¸ªå¯ä»¥ï¼Œæ‰¹é‡å¤„ç†å‡ åå‡ ç™¾ç”šè‡³å‡ åä¸‡å°±æœ‰ç‚¹åŠ›ä¸ä»å¿ƒäº†ã€‚æ‰€ä»¥æœ€åè¿˜æ˜¯ç‹ ä¸‹å¿ƒç ”ç©¶äº†ä¸€éPythonå¤„ç†è¿™äº›æ•°æ®çš„æ–¹æ³•ï¼Œå†™å‡ºäº†ä¸€æ‰¹é€‚åˆæˆ‘é¡¹ç›®ç”¨çš„å‡½æ•°ã€‚ä¸ä¸€å®šé€‚åˆæ‰€æœ‰äººï¼Œä½†å¯ä»¥ä½œä¸ºå‚è€ƒï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> geopandas <span class="keyword">as</span> gpd</span><br><span class="line"><span class="keyword">from</span> shapely.geometry <span class="keyword">import</span> Point, LineString, Polygon</span><br><span class="line"><span class="keyword">import</span> rasterio <span class="keyword">as</span> rio</span><br><span class="line"><span class="keyword">from</span> rasterio.mask <span class="keyword">import</span> mask</span><br><span class="line"><span class="keyword">from</span> rasterio.warp <span class="keyword">import</span> calculate_default_transform, reproject, Resampling</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bbox</span>(<span class="params">shp</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Compute the bounding box of a certain shapefile.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    piece = np.array([i.bounds <span class="keyword">for</span> i <span class="keyword">in</span> shp[<span class="string">&#x27;geometry&#x27;</span>]])</span><br><span class="line">    minx = piece[:,<span class="number">0</span>].<span class="built_in">min</span>()</span><br><span class="line">    miny = piece[:,<span class="number">1</span>].<span class="built_in">min</span>()</span><br><span class="line">    maxx = piece[:,<span class="number">2</span>].<span class="built_in">max</span>()</span><br><span class="line">    maxy = piece[:,<span class="number">3</span>].<span class="built_in">max</span>()</span><br><span class="line">    <span class="keyword">return</span> minx, miny, maxx, maxy</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">edge_length</span>(<span class="params">shp</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Compute the x and y edge length for a ceratin shapefile.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    minx, miny, maxx, maxy = bbox(shp)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">round</span>(maxx-minx,<span class="number">3</span>), <span class="built_in">round</span>(maxy-miny,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shape2latlong</span>(<span class="params">shp</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Turn the shapefile unit from meters/other units to lat/long.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> shp.to_crs(epsg=<span class="number">4326</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bbox_latlong</span>(<span class="params">shp</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Compute the latitude-longitude bounding box of a certain shapefile.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    shp = shape2latlong(shp)</span><br><span class="line">    <span class="keyword">return</span> bbox(shp)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bbox_polygon</span>(<span class="params">shp</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Return the rectangular Polygon bounding box of a certain shapefile.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    minx, miny, maxx, maxy = bbox(shp)</span><br><span class="line">    <span class="keyword">return</span> Polygon([(minx, miny), (minx, maxy), (maxx,maxy), (maxx, miny)])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_polygon</span>(<span class="params">shp</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Merge a shapefile to one single polygon.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> shp.dissolve(by=<span class="string">&#x27;Id&#x27;</span>).iloc[<span class="number">0</span>].geometry</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">polygon2geojson</span>(<span class="params">polygon</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Turn a polygon to a geojson format string.</span></span><br><span class="line"><span class="string">        This is used for rasterio mask operation.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(polygon) == Polygon:</span><br><span class="line">        polygon = gpd.GeoSeries(polygon)</span><br><span class="line">    <span class="keyword">return</span> [json.loads(polygon.to_json())[<span class="string">&#x27;features&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;geometry&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sen2rgb</span>(<span class="params">img, scale=<span class="number">30</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Turn the 12 channel float32 format sentinel-2 images to a RGB uint8 image. </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> (img[(<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>),]/<span class="number">256</span>*scale).astype(np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cropbyshp</span>(<span class="params">raster, shp</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Crop a raster using a shapefile.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Reproject the shapefile to the same crs of raster.</span></span><br><span class="line">    shp = shp.to_crs(&#123;<span class="string">&quot;init&quot;</span>: <span class="built_in">str</span>(raster.crs)&#125;)</span><br><span class="line">    <span class="comment"># Compute the rectangular Polygon bounding box of a certain shapefile.</span></span><br><span class="line">    bbpoly = bbox_polygon(shp)</span><br><span class="line">    <span class="comment"># Execute the mask operation.</span></span><br><span class="line">    out_img, out_transform = mask(dataset=raster, shapes=polygon2geojson(bbpoly), crop=<span class="literal">True</span>, all_touched=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> out_img</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_raster</span>(<span class="params">raster, path</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Write a created raster object to file.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> rio.<span class="built_in">open</span>(</span><br><span class="line">        path,</span><br><span class="line">        <span class="string">&#x27;w&#x27;</span>,</span><br><span class="line">        **raster.meta</span><br><span class="line">    ) <span class="keyword">as</span> dst:</span><br><span class="line">        dst.write(raster.read())</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sen_reproject</span>(<span class="params">src, dst_crs, out_path</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Reproject a raster to a new CRS coordinate, and save it in out_path.</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        src: Input raster.</span></span><br><span class="line"><span class="string">        dst_crs: Target CRS. String.</span></span><br><span class="line"><span class="string">        out_path: The path of the output file.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    transform, width, height = calculate_default_transform(</span><br><span class="line">        src.crs, dst_crs, src.width, src.height, *src.bounds)</span><br><span class="line">    kwargs = src.meta.copy()</span><br><span class="line">    kwargs.update(&#123;</span><br><span class="line">        <span class="string">&#x27;crs&#x27;</span>: dst_crs,</span><br><span class="line">        <span class="string">&#x27;transform&#x27;</span>: transform,</span><br><span class="line">        <span class="string">&#x27;width&#x27;</span>: width,</span><br><span class="line">        <span class="string">&#x27;height&#x27;</span>: height</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> rio.<span class="built_in">open</span>(out_path, <span class="string">&#x27;w&#x27;</span>, **kwargs) <span class="keyword">as</span> dst:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, src.count + <span class="number">1</span>):</span><br><span class="line">            reproject(</span><br><span class="line">                source=rio.band(src, i),</span><br><span class="line">                destination=rio.band(dst, i),</span><br><span class="line">                src_transform=src.transform,</span><br><span class="line">                src_crs=src.crs,</span><br><span class="line">                dst_transform=transform,</span><br><span class="line">                dst_crs=dst_crs,</span><br><span class="line">                resampling=Resampling.cubic)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mask_A_by_B</span>(<span class="params">A, B</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Generate a mask from B, and applied it to A.</span></span><br><span class="line"><span class="string">        All 0 values are excluded.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    mask = B.<span class="built_in">sum</span>(axis=<span class="number">0</span>)&gt;<span class="number">1e-3</span></span><br><span class="line">    masked_A = mask*A</span><br><span class="line">    <span class="keyword">return</span> masked_A</span><br></pre></td></tr></table></figure><h2 id="reference">Reference</h2><ol type="1"><li><a href="https://automating-gis-processes.github.io/2016/course-info.html">Python GIS è¶…å®Œæ•´æ•™ç¨‹</a></li><li><a href="https://zia207.github.io/geospatial-python.io/">Professor Zia's Personal Website</a></li><li><a href="https://blog.csdn.net/sinat_28853941/article/details/78511167">sentinel-2æ•°æ®ä¸‹è½½ å¤§æ°”æ ¡æ­£ è½¬ENVIæ ¼å¼</a></li><li><a href="https://blog.csdn.net/lidahuilidahui/article/details/102765420">03-SNAPå¤„ç†Sentinel-2 L2Açº§æ•°æ®ï¼ˆä¸€ï¼‰</a></li><li><a href="https://clouds.eos.ubc.ca/~phil/courses/atsc301/html/rasterio_demo.html">UBC Course Notebook</a></li><li><a href="https://zhuanlan.zhihu.com/p/31010043">åˆ©ç”¨Sen2corå¯¹å“¨å…µ2å·ï¼ˆSentinel-2ï¼‰L1Cå¤šå…‰è°±æ•°æ®è¿›è¡Œè¾å°„å®šæ ‡å’Œå¤§æ°”æ ¡æ­£</a></li><li><a href="https://sentinelhub-py.readthedocs.io/en/latest/">Documentation of Sentinel Hub Python package</a></li><li><a href="https://github.com/sentinel-hub/sentinelhub-py">sentinelhub-py</a></li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æ•°æ®æ¥æº&quot;&gt;æ•°æ®æ¥æº&lt;/h2&gt;
&lt;h3 id=&quot;å«æ˜Ÿç±»å‹&quot;&gt;å«æ˜Ÿç±»å‹&lt;/h3&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;Sentinel-2ï¼šæä¾›æ··åˆåˆ†è¾¨ç‡çš„13 Bands MSIã€‚åˆ†è¾¨ç‡æœ‰&lt;span class=&quot;math inline&quot;&gt;\(10m \times 10m\)&lt;/span&gt;ï¼Œ&lt;span class=&quot;math inline&quot;&gt;\(20m \times 20m\)&lt;/span&gt;ï¼Œ&lt;span class=&quot;math inline&quot;&gt;\(60m \times 60m\)&lt;/span&gt;ï¼Œbandsä¸­å¿ƒæ³¢é•¿ä»442.3nmåˆ°2185.7nmã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/02/03/satellite-basic/image-20201213154533413.png&quot; alt=&quot;image-20201213154533413&quot; style=&quot;zoom:33%;&quot;&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;</summary>
    
    
    
    
    <category term="python" scheme="https://www.miracleyoo.com/tags/python/"/>
    
    <category term="satellite" scheme="https://www.miracleyoo.com/tags/satellite/"/>
    
  </entry>
  
  <entry>
    <title>å…¨è‡ªåŠ¨ç§å­è¿½ç•ªç³»ç»Ÿ</title>
    <link href="https://www.miracleyoo.com/2021/02/01/seed-anime-system/"/>
    <id>https://www.miracleyoo.com/2021/02/01/seed-anime-system/</id>
    <published>2021-02-02T02:53:44.000Z</published>
    <updated>2021-03-12T23:53:56.641Z</updated>
    
    <content type="html"><![CDATA[<p><strong>å‰è¨€</strong>ï¼šä½ å–œæ¬¢çš„ç•ªå‰§æ›´æ–°äº†ã€‚æ˜¯ä½ å–œæ¬¢çš„å­—å¹•ç»„çš„é«˜æ¸…èµ„æºã€‚é‡Œé¢æ²¡æœ‰æ”¾è‚†çš„åœ£å…‰å’Œæš—ç‰§ã€‚å°½ç®¡å®ƒä¹Ÿè®¸æ²¡åœ¨å›½å†…æ”¾é€ã€‚ä½ å¯ä»¥åœ¨ä»»ä½•è®¾å¤‡ä¸Šè§‚çœ‹å®ƒï¼Œå¹¶ä¸”å¯ä»¥æ— ç¼åˆ‡æ¢ã€‚ç”µè§†ï¼Œæ‰‹æœºï¼ŒiPadï¼Œç”µè„‘éƒ½æ²¡æœ‰é—®é¢˜ã€‚å®ƒå¾ˆå¿«ã€‚</p><p>è¿™å°†æ˜¯æœ¬ç¯‡ä»‹ç»çš„å…¨è‡ªåŠ¨å…¨å¹³å°è®¢é˜…è¿½ç•ªç³»ç»Ÿã€‚</p><p>å‡ºäºå„ç§åŸå› ï¼Œæœ‰è®¸å¤šç•ªå‰§åœ¨Bç«™å¹¶æ‰¾ä¸åˆ°ã€‚å³ä½¿å¼€äº†å¤§ä¼šå‘˜ï¼Œä»å›½å¤–é©¾æ¢¯å›å›½ï¼Œè¿˜æ˜¯æ— æ³•çœ‹åˆ°ä¸€äº›å–œæ¬¢çš„å†…å®¹ã€‚ä½†åŒæ—¶ï¼Œå„å¤§åŠ¨æ¼«ç§å­ç«™å´æä¾›äº†å‡ ä¹æ— æ‰€ä¸åŒ…çš„èµ„æºï¼Œå…¶ä¸­åŒ…æ‹¬æ–°ç•ªã€‚ä½†ä¾é ç§å­è¿½ç•ªæœ€å¸¸è§çš„é—®é¢˜å°±æ˜¯éš¾ä»¥trackï¼Œç»å¸¸ä¼šå¿˜è®°æ›´æ–°ï¼Œè€Œä¸”æ¯æ¬¡éƒ½éœ€è¦ç»è¿‡ä¸€ä¸ª<code>æœç´¢-ä¸‹è½½ç§å­-ä¸‹è½½-æ•´ç†-è§‚çœ‹</code>çš„è¿‡ç¨‹ï¼Œç¡®å®è¿˜æ˜¯å¾ˆåŠé€€çš„ã€‚å¦‚ä½•æ­å»ºä¸€ä¸ªæ˜“äºé…ç½®ã€è¶³å¤Ÿç®€å•ã€å…¨è‡ªåŠ¨åŒ–æŠ“å–ã€ä¸‹è½½ã€ä¸²æµçš„è¿½ç•ªç³»ç»Ÿï¼Œä¾¿æˆä¸ºäº†ä¸€ä¸ªè¿½ç•ªäººçš„æ ¸å¿ƒéœ€æ±‚ã€‚</p><p>ä¸‹é¢æœ¬æ–‡å°†ä¼šå¸¦é¢†ä½ è®¤è¯†æ•´å¥—æµç¨‹ï¼Œå¦‚æœä½ è¶³å¤Ÿç»å¸¸æŠ˜è…¾ï¼Œå¤§è‡´ä¸€ä¸ªå°æ—¶ä¹‹å†…å°±å¯ä»¥æ­å»ºå®Œæˆã€‚ç¥ä½ å¥½è¿:)</p><p>PS: æœ¬æ–‡æ¶‰åŠçš„æ‰€æœ‰è„šæœ¬éƒ½å¯ä»¥åœ¨è¯¥<a href="https://github.com/miracleyoo/anime_renamer">GitHub</a>åº“ä¸Šæ‰¾åˆ°ã€‚</p><span id="more"></span><h2 id="è½¯ä»¶ä¸é…ç½®">è½¯ä»¶ä¸é…ç½®</h2><ul><li>æºï¼šåŠ¨æ¼«ç§å­ç«™ã€‚å¦‚Nyaaã€ACGRIPã€åŠ¨æ¼«èŠ±å›­ã€èŒç•ªç»„ã€‚ä¸ºäº†é¿å…æ²³èŸ¹è¿™é‡Œå°±ä¸æ”¾é“¾æ¥äº†ï¼Œè¯·è‡ªè¡Œæœç´¢ã€‚</li><li>è®¢é˜…ä¸è‡ªåŠ¨ä¸‹è½½ç§å­ï¼šRSSã€‚</li><li>ä¸‹è½½å™¨ï¼šutorrentã€‚</li><li>æ­£åˆ™åŒ¹é…ä¸è‡ªåŠ¨é‡å‘½åï¼šPythonã€‚</li><li>ä¸²æµä¸è‡ªåŠ¨æ•´ç†ï¼šPlexã€‚</li></ul><p>ç”±äºä¸Šé¢æåˆ°çš„è½¯ä»¶éƒ½æ”¯æŒWindowså’ŒMacï¼Œæ‰€ä»¥è®¤ä¸ºè¯¥ç³»ç»Ÿé€‚ç”¨äºä¸¤è€…ã€‚</p><h2 id="æµç¨‹">æµç¨‹</h2><p>é¦–å…ˆæ”¾ä¸€å¼ æ•´ç†å‡ºæ¥çš„æµç¨‹å›¾ï¼š</p><figure><img src="/2021/02/01/seed-anime-system/image-20210129014429864.png" alt="image-20210129014429864"><figcaption aria-hidden="true">image-20210129014429864</figcaption></figure><p>è¯¥ç³»ç»Ÿçš„æ•´ä½“æ€è·¯æ˜¯ï¼Œä½¿ç”¨RSSè‡ªåŠ¨å—…æ¢è®¢é˜…çš„å†…å®¹ï¼Œç”¨utorrentè‡ªåŠ¨ä¸‹è½½åˆ°ç•ªå‰§æŒ‡å®šçš„ç›®å½•ï¼Œä½¿ç”¨Pythoné‡å‘½åæˆPlexå¯ä»¥æ”¯æŒçš„å‰§é›†å‘½åæ ¼å¼åï¼Œä½¿ç”¨Plexæ•´ç†ã€åŒ¹é…å…ƒæ•°æ®ï¼Œå¹¶æä¾›ä¸²æµæœåŠ¡ï¼Œè®©ä½ çš„ç”µè„‘æœ¬èº«æˆä¸ºä¸€ä¸ªè§†é¢‘å†…å®¹æœåŠ¡å™¨ï¼Œä»è€Œä½¿ä½ å¯ä»¥åœ¨å®¶ä¸­ä»»ä½•è®¾å¤‡ä¸Šè¿…é€Ÿã€ä¾¿æ·åœ°è§‚çœ‹ä¸‹è½½æ•´ç†å¥½çš„è§†é¢‘ã€‚è¿™å¯¹äºä¹ æƒ¯åœ¨ç”µè§†å¤§å±å¹•ã€æŠ•å½±å±æˆ–iPadä¸Šè§‚çœ‹è§†é¢‘çš„ç”¨æˆ·è€Œè¨€æ˜¯ååˆ†å‹å¥½çš„ã€‚</p><p>æœ€ç»ˆè¾¾åˆ°çš„æ•ˆæœæ˜¯ï¼šä¸€æ—¦ç§å­æºç½‘ç«™ä¸Šæ›´æ–°äº†ä¸€ä¸ªä½ è®¢é˜…çš„ç•ªå‰§çš„ç§å­ï¼Œä½ å°±å¯ä»¥ç¬¬ä¸€æ—¶é—´æ‰“å¼€ç”µè§†ã€æå‡ºiPadç›´æ¥è§‚çœ‹å†…å®¹ã€‚</p><p>å¦å¤–ï¼Œç”±äºPlexå¯ä»¥è®°ä½ä½ æ‰€æœ‰è§†é¢‘çš„è§‚çœ‹è¿›åº¦ï¼Œæ‰€ä»¥ä½ å®Œå…¨å¯ä»¥åœ¨æ‰‹æœºä¸Šçœ‹äº†å‰åŠéƒ¨åˆ†ï¼Œç„¶åååˆ°ç”µè§†æœºå‰ï¼Œä»å®¹åœ°æ— ç¼ç»§ç»­è§‚çœ‹ã€‚</p><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><figure><img src="/2021/02/01/seed-anime-system/image-20210129015121641.png" alt="image-20210129015121641"><figcaption aria-hidden="true">image-20210129015121641</figcaption></figure><figure><img src="/2021/02/01/seed-anime-system/image-20210129015202322.png" alt="image-20210129015202322"><figcaption aria-hidden="true">image-20210129015202322</figcaption></figure><figure><img src="/2021/02/01/seed-anime-system/image-20210129015424295.png" alt="image-20210129015424295"><figcaption aria-hidden="true">image-20210129015424295</figcaption></figure><h2 id="æºç«™">æºç«™</h2><p>å„å¤§åŠ¨æ¼«å‹åˆ¶ç»„ã€æ±‰åŒ–ç»„å’Œæ¬è¿ç»„ï¼ˆç»Ÿç§°å‘å¸ƒç»„ï¼‰éƒ½ä¼šå°†ä»–ä»¬çš„èµ„æºå‘å¸ƒåˆ°è¿™äº›æºç«™ä¸Šã€‚æœ‰çš„æºç«™äº’ä¸ºé•œåƒï¼Œæœ‰çš„ç«™æ˜¯çˆ¬å–çš„å…¶ä»–ç«™çš„ä¿¡æ¯ã€‚å®ƒä»¬åœ¨è¿½æ–°ç•ªè¿™é¡¹ä»»åŠ¡ä¸Šçš„è¡¨ç°å…¶å®éƒ½è¿˜å¯ä»¥ï¼Œé€‰ä¸€ä¸ªä½ è‡ªå·±å–œæ¬¢çš„ç«™ç‚¹å³å¯ã€‚</p><p>æ¯ä¸ªå‘å¸ƒç»„éƒ½æœ‰è‡ªå·±çš„åå¥½çš„ç•ªå‰§ï¼Œä¹Ÿæœ‰ä»–ä»¬ç‹¬ç‰¹çš„è§„çŸ©å’Œè®²ç©¶ã€‚å¦‚VCB-Studioå°±åå¥½åšé«˜æ¸…çš„å‹åˆ¶èµ„æºï¼Œä½†ç»å¸¸ä¸é™„å¸¦å­—å¹•ï¼›LIlithç”±äºä¸»è¦æ˜¯æ¬è¿ï¼Œæ‰€ä»¥å‘å¸ƒé€Ÿåº¦å¿«ï¼›å–µèŒå¼€çš„ç•ªæ¯”è¾ƒå¤šï¼Œè§†é¢‘è´¨é‡è¾ƒé«˜ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰ç•ªå‰§éƒ½æ˜¯åŠæ—¶å‘å¸ƒçš„ã€‚çƒ­é—¨ç•ªå‰§å¾€å¾€ä¼šåœ¨ç¬¬ä¸€æ—¶é—´å°±æœ‰å‘å¸ƒç»„å‘å¸ƒï¼Œè€Œä¸€äº›å†·é—¨å†…å®¹çš„æ›´æ–°é€Ÿåº¦å°±æ— æ³•ä¿è¯äº†ã€‚å¦å¤–ï¼ŒAå‘å¸ƒç»„å‘å¸ƒXç•ªå‰§å¯èƒ½æ˜¯åŠæ—¶çš„ï¼ŒYç•ªå‰§è¦éš”å‡ å¤©ï¼›å¯èƒ½Bå‘å¸ƒç»„åˆ™ç›¸åã€‚æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æ£€æŸ¥ä¸Šä¸€é›†æœ€å…ˆæ˜¯ç”±å“ªä¸ªç»„å‘å¸ƒçš„ï¼Œå“ªä¸ªç»„æ”¾å‡ºçš„èµ„æºåˆæœ‰æœ€å¤šäººä¸‹è½½ï¼Œç„¶åè¿›è¡Œç»¼åˆåˆ¤æ–­ã€‚</p><h2 id="rss">RSS</h2><p>å¼•ç”¨ä¸€æ®µWikipediaçš„å®šä¹‰ï¼š</p><blockquote><p><strong>RSS</strong>ï¼ˆå…¨ç§°ï¼š<a href="https://zh.wikipedia.org/wiki/Resource_Description_Framework">RDF</a> Site Summaryï¼›Really Simple Syndication[<a href="https://zh.wikipedia.org/wiki/RSS#cite_note-powers-2003-1-2">2]</a>ï¼‰ï¼Œä¸­æ–‡è¯‘ä½œ<strong>ç®€æ˜“ä¿¡æ¯èšåˆ</strong>[<a href="https://zh.wikipedia.org/wiki/RSS#cite_note-3">3]</a>ï¼Œä¹Ÿç§°<strong>èšåˆå†…å®¹</strong>[<a href="https://zh.wikipedia.org/wiki/RSS#cite_note-å¼ é”2015-4">4]</a>ï¼Œæ˜¯ä¸€ç§<a href="https://zh.wikipedia.org/wiki/æ¶ˆæ¯ä¾†æº">æ¶ˆæ¯æ¥æº</a>æ ¼å¼è§„èŒƒï¼Œç”¨ä»¥<strong>èšåˆç»å¸¸å‘å¸ƒæ›´æ–°èµ„æ–™çš„ç½‘ç«™</strong>ï¼Œä¾‹å¦‚<a href="https://zh.wikipedia.org/wiki/éƒ¨è½æ ¼">åšå®¢</a>æ–‡ç« ã€æ–°é—»ã€<a href="https://zh.wikipedia.org/wiki/éŸ³è¨Š">éŸ³é¢‘</a>æˆ–<a href="https://zh.wikipedia.org/wiki/è¦–è¨Š">è§†é¢‘</a>çš„ç½‘æ‘˜ã€‚RSSæ–‡ä»¶ï¼ˆæˆ–ç§°åšæ‘˜è¦ã€ç½‘ç»œæ‘˜è¦ã€æˆ–é¢‘æ›´æ–°ï¼Œæä¾›åˆ°é¢‘é“ï¼‰åŒ…å«å…¨æ–‡æˆ–æ˜¯èŠ‚å½•çš„æ–‡å­—ï¼Œå†åŠ ä¸Šå‘å¸ƒè€…æ‰€è®¢é˜…ä¹‹ç½‘æ‘˜èµ„æ–™å’Œæˆæƒçš„å…ƒæ•°æ®ã€‚ç®€å•æ¥è¯´ RSS èƒ½å¤Ÿè®©ç”¨æˆ·è®¢é˜…ä¸ªäººç½‘ç«™ä¸ªäººåšå®¢ï¼Œå½“è®¢é˜…çš„ç½‘ç«™æœ‰æ–°æ–‡ç« æ˜¯èƒ½å¤Ÿè·å¾—é€šçŸ¥ã€‚</p></blockquote><p>RSSçš„æœ¬è´¨æ˜¯è®¢é˜…æŸä¸ªä¿¡æºã€‚ä¿¡æºå¯ä»¥ä¸æ–­æ›´æ–°å’Œæ¨é€ä¿¡æ¯ï¼Œå®ƒå¾€å¾€è¡¨ç°ä¸ºä¸€ä¸ªé“¾æ¥ã€‚è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ã€‚</p><p><img src="/2021/02/01/seed-anime-system/image-20210129020139987.png" alt="image-20210129020139987" style="zoom:50%;"></p><p>å‡è®¾æˆ‘ä»¬æƒ³è¦è¿½ä¸€ä¸ªç”±å–µèŒå¥¶èŒ¶å±‹å‘å¸ƒçš„æ–°ç•ª<code>IDOLY PRIDE</code>ï¼Œå¹¶ä¸”åªçœ‹ç®€ä½“çš„1080pç‰ˆæœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®å…¶å‘½åé£æ ¼æ¥ç”Ÿæˆå¯¹åº”çš„æœç´¢å…³é”®è¯ï¼š<code>ã€å–µèŒProductionã€‘â˜…01æœˆæ–°ç•ªâ˜…[å¶åƒè£è€€/IDOLY PRIDE][03][1080p][ç®€æ—¥åŒè¯­][æ‹›å‹Ÿç¿»è¯‘]</code>æ˜¯å…¶ä¸­ä¸€é›†çš„å‘½åã€‚é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨æœç´¢æ¡†ä¸­æœç´¢ï¼š<code>å–µèŒProduction å¶åƒè£è€€ 1080p ç®€æ—¥</code>ï¼Œå³å¯å®šä½æˆ‘ä»¬éœ€è¦è¿½çš„ç•ªçš„ç‰¹å®šç‰ˆæœ¬çš„æ‰€æœ‰åç»­èµ„æºã€‚</p><figure><img src="/2021/02/01/seed-anime-system/image-20210129020710605.png" alt="image-20210129020710605"><figcaption aria-hidden="true">image-20210129020710605</figcaption></figure><p>ç„¶åæˆ‘ä»¬å³å¯æŠŠè¿™ä¸ªæœç´¢ç»“æœçš„ç½‘é¡µå½“åšä¸€ä¸ªä¿¡æºã€‚å…·ä½“è·å–RSSè®¢é˜…é“¾æ¥çš„æ–¹æ³•æ¯ä¸ªç½‘ç«™éƒ½å„ä¸ç›¸åŒï¼Œä½†å¤§è‡´éƒ½ä¼šæœ‰ä¸€ä¸ªç±»ä¼¼çš„æŒ‰é’®å‡ºç°ã€‚ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œåœ¨å¼¹å‡ºçš„çª—å£çš„åœ°å€æ å³å¯æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„RSSè®¢é˜…é“¾æ¥ã€‚</p><figure><img src="/2021/02/01/seed-anime-system/image-20210129021051012.png" alt="image-20210129021051012"><figcaption aria-hidden="true">image-20210129021051012</figcaption></figure><p>å¤åˆ¶è¿™ä¸ªé“¾æ¥ï¼Œè¿™ä¸€æ­¥å°±å®Œæˆäº†ã€‚ä½ æˆåŠŸåœ°å¾—åˆ°äº†ä½ æ‰€éœ€è¦å†…å®¹çš„è®¢é˜…é“¾æ¥ã€‚</p><h2 id="utorrent">utorrent</h2><ul><li><p>utorrentæ˜¯ä¸€ä¸ªå¯ä»¥ä¸‹è½½ç§å­æ–‡ä»¶å’Œç£åŠ›é“¾æ¥çš„è½¯ä»¶ï¼Œæ”¯æŒWindowsã€Macå’ŒLinuxï¼Œä¹Ÿæœ‰ç½‘é¡µç‰ˆã€‚</p></li><li><p>utorrentæ”¯æŒRSSè®¢é˜…ï¼Œç›¸å½“äºæ¯å½“RSSè®¢é˜…çš„ä¿¡æºæœ‰äº†æ–°çš„å†…å®¹ï¼Œutorrentå°±ä¼šè‡ªåŠ¨æŠŠå®ƒåˆ—å‡ºæ¥ã€‚ä½ ä¹Ÿå¯ä»¥è®¾ç½®æ¯å½“æœ‰æ–°å†…å®¹å°±è‡ªåŠ¨ä¸‹è½½ï¼Œä¸è¿‡è¿™è¦è§†è®¢é˜…å†…å®¹è€Œå®šã€‚æ¯ä¸ªRSSçš„è‡ªåŠ¨ä¸‹è½½ä½ç½®å¯ä»¥æ˜¯ä¸åŒçš„æ–‡ä»¶å¤¹ã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/2021/02/01/seed-anime-system/image-20210130113430927.png" alt="image-20210130113430927" style="zoom:50%;"></p></li><li><p>utorrentæ”¯æŒæ–‡ä»¶ä¸‹è½½å®Œæˆæˆ–çŠ¶æ€æ”¹å˜åæ‰§è¡Œè„šæœ¬ã€‚è¿™ä¸ªç‰¹ç‚¹éå¸¸é‡è¦ï¼Œä¸‹ä¸€æ­¥éœ€è¦ç”¨ã€‚</p></li></ul><h3 id="rssé…ç½®">RSSé…ç½®</h3><ol type="1"><li>é¦–å…ˆï¼Œå°†ä¸Šé¢æåˆ°çš„RSSé“¾æ¥æ·»åŠ åˆ°utorrentçš„è®¢é˜…ä¸­ï¼šç‚¹å‡»<code>è®¢é˜…</code>åé¡µé¢ä¸­çš„å°Wi-Fiå›¾æ ‡å³å¯æ·»åŠ ï¼Œä¹Ÿå¯ä»¥å³é”®<code>æ·»åŠ RSSè®¢é˜…</code>ã€‚è¿™æ—¶å€™å…ˆä¸ç”¨è®¾ç½®ä»€ä¹ˆï¼ŒæŠŠURLç²˜è´´åˆ°ç¬¬ä¸€é¡¹ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªæ–¹ä¾¿è¯†åˆ«çš„åˆ«åå³å¯ï¼Œè®¢é˜…æ å…ˆé€‰æ‹©<code>ä¸è¦è‡ªåŠ¨ä¸‹è½½æ‰€æœ‰é¡¹ç›®</code>ã€‚å¾…ä¼šå„¿ä¼šåœ¨ä¸‹è½½å™¨è®¾å®šä¸­è¯¦ç»†è®¾ç½®ã€‚</li></ol><p><img src="/2021/02/01/seed-anime-system/image-20210130113824679.png" alt="image-20210130113824679" style="zoom:50%;"></p><p><img src="/2021/02/01/seed-anime-system/image-20210130114135639.png" alt="image-20210130114135639" style="zoom:50%;"></p><ol start="2" type="1"><li><p>å³é”®å·¦æ <code>è®¢é˜…</code>ä¸­å‡ºç°çš„æ–°é¡¹ï¼Œé€‰æ‹©<code>RSSä¸‹è½½å™¨</code>ï¼Œè¿›å…¥ä¸‹è½½å™¨è¯¦ç»†é…ç½®ï¼š</p><p><img src="/2021/02/01/seed-anime-system/image-20210130114636832.png" alt="image-20210130114636832" style="zoom:50%;"></p><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„åªæœ‰<code>ä¿å­˜åœ¨</code>å’Œ<code>è®¢é˜…</code>ä¸¤é¡¹ï¼Œå‰è€…æ˜¯è¿™ä¸ªè®¢é˜…ä¸­æ‰€æœ‰æ–‡ä»¶çš„ä¿å­˜ä½ç½®ï¼Œè®¢é˜…æ˜¯è¿™å¥—è®¾ç½®å°†åº”ç”¨äºå“ªä¸ªè®¢é˜…ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ–‡ä»¶å¤¹æœ€å¥½ä¸ºè¿™ä¸ªç•ªå‰§çš„åå­—ï¼Œä¸”å‘½åæœ€å¥½éµå®ˆä»¥ä¸‹è§„åˆ™ï¼Œæ–¹ä¾¿åç»­åŒ¹é…ï¼š</p><ul><li>åªæœ‰ä¸€ä¸ªä¸»åå­—ã€‚å¦‚æœä¸€ä¸ªç•ªå‰§æ—¢æœ‰ä¸­æ–‡åï¼Œåˆæœ‰æ—¥æ–‡åï¼Œè¿˜æœ‰ç½—é©¬å­—æˆ–è‹±è¯­åï¼Œè¯·åªä½¿ç”¨ä¸€ä¸ªåå­—ã€‚ä½¿ç”¨å“ªä¸ªçœ‹ä½ è‡ªå·±ï¼Œæœ€å¥½æ˜¯å¹¿æ³›æ¥å—çš„åå­—ã€‚å…¶ä»–è¯­è¨€çš„åå­—ï¼Œå…¶ä»–ä¿¡æ¯ï¼Œå¦‚å­—å¹•ç»„ï¼Œç®€ä½“ç¹ä½“ï¼Œæ¸…æ™°åº¦ç­‰ï¼Œè¯·åˆ†åˆ«ä½¿ç”¨ä¸€ä¸ªä¸­æ‹¬å·æ‹¬ä½ã€‚æ•´ç†ä¸²æµè½¯ä»¶ç”±äºä¸»è¦éµå¾ªè¥¿æ–¹å½±è§†çš„å‘½åè§„åˆ™ï¼Œä¼šç›´æ¥å¿½ç•¥æ–¹æ‹¬å·å†…çš„æ‰€æœ‰å†…å®¹ï¼Œæ‰€ä»¥åœ¨æ–¹æ‹¬å·é‡Œé¢ä½ å¯ä»¥æ”¾å…¥ä»»ä½•ä½ æƒ³å¤‡æ³¨çš„ä¿¡æ¯ã€‚</li><li>ä¸€å¥—è§„åˆ™å¯¹åº”ä¸€ä¸ªè®¢é˜…ã€‚æ•´ä¸ªé“¾æ¡çš„å¯¹åº”å…³ç³»æ˜¯ï¼š<code>ä¸€ä¸ªç•ªå‰§åå­—-&gt;ä¸€æ¡RSSé“¾æ¥-&gt;utorrentä¸­ä¸€é¡¹RSSè®¢é˜…-&gt;RSSä¸‹è½½å™¨ä¸­ä¸€å¥—è§„åˆ™-&gt;ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶å¤¹</code></li><li>è¿‡æ»¤å™¨å¦‚æœæ²¡æœ‰éœ€æ±‚ï¼Œå¯ä»¥ç•™ç©ºæˆ–<code>*</code>ï¼Œè¡¨ç¤ºåŒ¹é…æ‰€æœ‰ã€‚è‹¥æ˜¯åœ¨è¿™ä¸ªè®¢é˜…é“¾æ¥ä¸­è¿˜æ²¡æœ‰å®Œå…¨ç­›é€‰ï¼Œé‚£ä½ å¯ä»¥ç€è¿™é‡Œè¿›è¡Œå¦å¤–ä¸€æ³¢è¿‡æ»¤ã€‚</li></ul></li></ol><h2 id="é‡å‘½å">é‡å‘½å</h2><p>é¦–å…ˆå†è§£é‡Šä¸€ä¸‹ä¸ºä½•éœ€è¦é‡å‘½åã€‚æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼ŒPlexç­‰åª’ä½“ç®¡ç†è½¯ä»¶ä¸»è¦è¿˜æ˜¯é’ˆå¯¹æ¬§ç¾å‰§é›†çš„å‘½åæ–¹æ³•è®¾è®¡çš„ï¼Œä¸”ä¼šå¿½ç•¥æ–¹æ‹¬å·ä¸­æ‰€æœ‰å†…å®¹ã€‚ä½†å›½å†…ï¼Œè‡³å°‘æ˜¯ç•ªå‰§çš„å‘½åï¼Œå¯¹äºé›†æ•°çš„å‘½åï¼Œæ°æ°å¤§å¤šä¼šæ”¾åˆ°æ–¹æ‹¬å·ä¸­ï¼Œå¦‚<code>[c.cå‹•æ¼«][1æœˆæ–°ç•ª][å·¥ä½œç´°èƒ ç¬¬äºŒå­£][04][BIG5][1080P][MP4]</code>é‡Œé¢çš„è¿™ä¸ª<code>[04]</code>å°±æ˜¯é›†æ•°ã€‚å¦å¤–è¿˜æœ‰çš„å‘½åæ˜¯<code>ç¬¬04è¯</code>ï¼Œ<code>[ç¬¬04è¯]</code>ï¼Œ<code>- 04 -</code>ç­‰ã€‚å¦å¤–ï¼Œç”±äºæŸäº›æŠ€æœ¯æ€§é”™è¯¯ï¼Œæœ‰äº›å‘å¸ƒç»„ä¼šåœ¨æŸé›†å‘å¸ƒåé‡æ–°å‘å¸ƒä¿®å¤ç‰ˆæœ¬ï¼Œæ­¤æ—¶çš„å‘½åä¸º<code>04v2</code>ç­‰ã€‚è¿˜æœ‰å¾ˆå¤šç•ªå‰§çš„æœ€åä¸€é›†ä¼šè¢«æ·»åŠ ä¸ŠENDå­—æ ·è¡¨ç¤ºå®Œç»“ã€‚è€Œè¿™äº›å†…å®¹éƒ½ä¼šå¯¹åç»­çš„è§£æé€ æˆå›°éš¾ï¼Œæœ€å¥½å¯ä»¥å°†é›†æ•°è¿™ä¸ªå˜é‡è½¬ä¸ºæŸç§å›ºå®šæ ¼å¼ã€‚</p><p>Pythonå¯ä»¥å¾ˆå¥½çš„å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚é€šè¿‡æ­£åˆ™åŒ¹é…ä¸Šè¿°å†…å®¹ï¼Œå¹¶é‡æ–°ç»„åˆï¼Œå¯ä»¥è½»æ˜“çš„å¾—åˆ°æƒ³è¦çš„ç»“æœã€‚å†™å¥½çš„è„šæœ¬å¦‚ä¸‹ï¼š</p><h3 id="reg_match.py"><code>reg_match.py</code>ï¼š</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> op</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"><span class="keyword">from</span> glob <span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">from</span> pathlib2 <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line">log_name=op.join(op.dirname(op.realpath(__file__)), <span class="string">&#x27;log.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Episode Regular Expression Matching Rules</span></span><br><span class="line">episode_rules = [<span class="string">r&#x27;(.*)\[(\d&#123;1,3&#125;|\d&#123;1,3&#125;\.\d&#123;1,2&#125;)(?:v\d&#123;1,2&#125;)?(?:END)?\](.*)&#x27;</span>,</span><br><span class="line">                 <span class="string">r&#x27;(.*)\[E(\d&#123;1,3&#125;|\d&#123;1,3&#125;\.\d&#123;1,2&#125;)(?:v\d&#123;1,2&#125;)?(?:END)?\](.*)&#x27;</span>,</span><br><span class="line">                 <span class="string">r&#x27;(.*)\[ç¬¬(\d*\.*\d*)è¯(?:END)?\](.*)&#x27;</span>,</span><br><span class="line">                 <span class="string">r&#x27;(.*)\[ç¬¬(\d*\.*\d*)è©±(?:END)?\](.*)&#x27;</span>,</span><br><span class="line">                 <span class="string">r&#x27;(.*)ç¬¬(\d*\.*\d*)è¯(?:END)?(.*)&#x27;</span>,</span><br><span class="line">                 <span class="string">r&#x27;(.*)ç¬¬(\d*\.*\d*)è©±(?:END)?(.*)&#x27;</span>,</span><br><span class="line">                 <span class="string">r&#x27;(.*)- (\d&#123;1,3&#125;|\d&#123;1,3&#125;\.\d&#123;1,2&#125;)(?:v\d&#123;1,2&#125;)?(?:END)? (.*)&#x27;</span>]</span><br><span class="line"><span class="comment"># Suffixs of files we are going to rename</span></span><br><span class="line">suffixs = [<span class="string">&#x27;mp4&#x27;</span>, <span class="string">&#x27;mkv&#x27;</span>, <span class="string">&#x27;avi&#x27;</span>, <span class="string">&#x27;mov&#x27;</span>, <span class="string">&#x27;flv&#x27;</span>, <span class="string">&#x27;rmvb&#x27;</span>, <span class="string">&#x27;ass&#x27;</span>, <span class="string">&#x27;idx&#x27;</span>]</span><br><span class="line">sys.stdout = io.TextIOWrapper(buffer=sys.stdout.buffer,encoding=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Parse the input arguments. You can whether input only root, or only path, or both root and name.</span></span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">&#x27;Regular Expression Match&#x27;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;--root&#x27;</span>, default=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&#x27;The root directory of the input file.&#x27;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;--name&#x27;</span>, default=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&#x27;The file name of the input file.&#x27;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&#x27;--path&#x27;</span>, default=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&#x27;The file full path of the input file.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rename</span>(<span class="params">root, name</span>):</span></span><br><span class="line">    root = Path(root)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> rule <span class="keyword">in</span> episode_rules:</span><br><span class="line">        matchObj = re.match(rule, name, re.I)</span><br><span class="line">        <span class="keyword">if</span> matchObj <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            new_name = <span class="string">f&#x27;<span class="subst">&#123;matchObj.group(<span class="number">1</span>)&#125;</span> E<span class="subst">&#123;matchObj.group(<span class="number">2</span>)&#125;</span> <span class="subst">&#123;matchObj.group(<span class="number">3</span>)&#125;</span>&#x27;</span></span><br><span class="line">            <span class="comment"># print(matchObj.group())</span></span><br><span class="line">            <span class="comment"># print(new_name)</span></span><br><span class="line">            print(<span class="string">f&#x27;<span class="subst">&#123;name&#125;</span> -&gt; <span class="subst">&#123;new_name&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="keyword">with</span> codecs.<span class="built_in">open</span>(log_name, <span class="string">&#x27;a+&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                <span class="comment"># f.writelines(f&#x27;&#123;name&#125; -&gt; &#123;new_name&#125;&#x27;)</span></span><br><span class="line">                print(<span class="string">f&#x27;<span class="subst">&#123;name&#125;</span> -&gt; <span class="subst">&#123;new_name&#125;</span>&#x27;</span>, file=f)</span><br><span class="line"></span><br><span class="line">            os.rename(<span class="built_in">str</span>(root/name), <span class="built_in">str</span>(root/new_name))</span><br><span class="line">            general_check(root, new_name)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">    general_check(root, name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">general_check</span>(<span class="params">root, name</span>):</span></span><br><span class="line">    new_name = <span class="string">&#x27; &#x27;</span>.join(name.split())</span><br><span class="line">    <span class="keyword">if</span> new_name != name:</span><br><span class="line">        print(<span class="string">f&#x27;<span class="subst">&#123;name&#125;</span> -&gt; <span class="subst">&#123;new_name&#125;</span>&#x27;</span>)</span><br><span class="line">        <span class="keyword">with</span> codecs.<span class="built_in">open</span>(log_name, <span class="string">&#x27;a+&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            print(<span class="string">f&#x27;<span class="subst">&#123;name&#125;</span> -&gt; <span class="subst">&#123;new_name&#125;</span>&#x27;</span>, file=f)</span><br><span class="line">        os.rename(<span class="built_in">str</span>(root/name), <span class="built_in">str</span>(root/new_name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">    <span class="keyword">if</span> op.isdir(args.path):</span><br><span class="line">        args.root = args.path</span><br><span class="line">        args.path = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.name != <span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> args.root != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        temp = <span class="built_in">str</span>(args.root/args.name)</span><br><span class="line">        <span class="keyword">if</span> op.isdir(temp):</span><br><span class="line">            args.root = temp</span><br><span class="line">            args.name = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.path != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        root, name = op.split(args.path)</span><br><span class="line">        rename(root, name)</span><br><span class="line">    <span class="keyword">elif</span> args.name != <span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> args.root != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        rename(args.root, args.name)</span><br><span class="line">    <span class="keyword">elif</span> args.root != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        files = []</span><br><span class="line">        <span class="keyword">for</span> suffix <span class="keyword">in</span> suffixs:</span><br><span class="line">            files.extend(Path(args.root).rglob(<span class="string">&#x27;*.&#x27;</span>+suffix))</span><br><span class="line">            files.extend(Path(args.root).rglob(<span class="string">&#x27;*.&#x27;</span>+suffix.upper()))</span><br><span class="line">        print(<span class="string">f&#x27;Total Files Number: <span class="subst">&#123;<span class="built_in">len</span>(files)&#125;</span>&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> path <span class="keyword">in</span> files:</span><br><span class="line">            root, name = op.split(path)</span><br><span class="line">            rename(root, name)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">&#x27;Please input whether only root, or only path, or both root and name&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨çš„è¯ç›´æ¥å°†è¯¥æ–‡ä»¶å­˜åˆ°ä¸€ä¸ªæ–°å»ºçš„<code>reg_match.py</code>æ–‡ä»¶ä¸­å³å¯ã€‚ä½¿ç”¨Python3.6ç¼–å†™ï¼Œç†è®ºæ”¯æŒæ‰€æœ‰Python3ç‰ˆæœ¬ã€‚</p><p>ä½†æ˜¯ï¼Œä»…ç”¨Pythonæ— æ³•ç›´æ¥è¢«utorrentè°ƒç”¨ï¼Œå®ƒæƒ³è¦çš„æ˜¯åƒ<code>exe</code>æˆ–<code>cmd</code>ä¹‹ç±»çš„æ–‡ä»¶ï¼Œå¹¶æƒ³ä¼ é€’<strong>ä¸‹è½½å¥½çš„æ–‡ä»¶æ‰€åœ¨ç›®å½•</strong>å’Œ<strong>ä¸‹è½½å¥½çš„æ–‡ä»¶å</strong>è¿›å»ã€‚è¿™æ ·æˆ‘ä»¬æœ€å¥½åˆ›å»ºä¸€ä¸ª<code>cmd</code>æ–‡ä»¶ï¼Œç”¨äºæ¥å—å‚æ•°ï¼Œå¹¶ä¼ é€’ç»™Pythonè„šæœ¬ã€‚</p><h3 id="run_after_done.cmd"><code>run_after_done.cmd</code></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set file_name=%1%</span><br><span class="line">set directory=%2%</span><br><span class="line"></span><br><span class="line">python &lt;YOUR_SCRIPT_PATH&gt;\reg_match.py --name=%file_name% --root=%directory%</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>&lt;YOUR_SCRIPT_PATH&gt;</code>æ˜¯ä½ å­˜æ”¾ä¸Šé¢æåˆ°çš„Pythonè„šæœ¬çš„ç›®å½•ä½ç½®ã€‚</p><h3 id="utorrenté…ç½®">utorrenté…ç½®</h3><p>å®Œæˆäº†ä¸Šé¢çš„ä¸¤ä¸ªè„šæœ¬ï¼Œè®©æˆ‘ä»¬å°†å…¶é…ç½®åˆ°utorrentçš„<code>å½“ä¸‹è½½å®Œæˆæ—¶è¿è¡Œæ­¤ç¨‹åº</code>ä¸­ã€‚æ•ˆæœå°±æ˜¯ï¼Œæ¯å½“ä¸€ä¸ªæ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œutorrentéƒ½ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ª<code>cmd</code>æ–‡ä»¶ï¼Œå¹¶ä¸”å°†æ–‡ä»¶ç›®å½•å’Œåå­—éƒ½ä½œä¸ºå‚æ•°ä¼ é€’è¿›å»ã€‚</p><p><img src="/2021/02/01/seed-anime-system/image-20210130122024176.png" alt="image-20210130122024176" style="zoom:50%;"></p><p>å‘½ä»¤ä¸ºï¼š<code>&lt;YOUR_CMD_PATH&gt;\run_after_done.cmd "%F" "%D"</code></p><p>å…¶ä¸­ï¼Œ<code>&lt;YOUR_CMD_PATH&gt;</code>ä¸ºä½ å­˜æ”¾è„šæœ¬<code>run_after_done.cmd</code>çš„ç›®å½•ã€‚æ¨èå°†å®ƒå’ŒPythonè„šæœ¬æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚</p><h2 id="plex">Plex</h2><p>å¼•ç”¨ä¸€æ®µWikiï¼Œä»¥æ–¹ä¾¿ä¸ç†Ÿæ‚‰çš„æœ‹å‹ä»¬äº†è§£ï¼š</p><blockquote><p><strong>Plex</strong>æ˜¯ä¸€å¥—<a href="https://zh.wikipedia.org/wiki/åª’ä½“æ’­æ”¾å™¨">åª’ä½“æ’­æ”¾å™¨</a>åŠ<a href="https://zh.wikipedia.org/w/index.php?title=åª’é«”ä¼ºæœå™¨&amp;action=edit&amp;redlink=1">åª’ä½“æœåŠ¡å™¨</a>è½¯ä»¶ï¼Œè®©ç”¨æˆ·æ•´ç†åœ¨è®¾å¤‡ä¸Šçš„<a href="https://zh.wikipedia.org/wiki/æœ‰è²æ›¸">æœ‰å£°ä¹¦</a>ã€<a href="https://zh.wikipedia.org/wiki/éŸ³æ¨‚">éŸ³ä¹</a>ã€<a href="https://zh.wikipedia.org/wiki/æ’­å®¢">æ’­å®¢</a>ã€<a href="https://zh.wikipedia.org/wiki/åœ–ç‰‡">å›¾ç‰‡</a>å’Œ<a href="https://zh.wikipedia.org/wiki/å½±ç‰‡">è§†é¢‘</a>æ–‡ä»¶ï¼Œä»¥ä¾›<a href="https://zh.wikipedia.org/wiki/ä¸²æµ">æµ</a>è‡³<a href="https://zh.wikipedia.org/wiki/æµå‹•è£ç½®">ç§»åŠ¨è®¾å¤‡</a>ã€<a href="https://zh.wikipedia.org/wiki/æ™ºèƒ½é›»è¦–">æ™ºèƒ½ç”µè§†</a>å’Œ<a href="https://zh.wikipedia.org/w/index.php?title=é›»å­åª’é«”æ’­æ”¾å™¨&amp;action=edit&amp;redlink=1">ç”µå­åª’ä½“æ’­æ”¾å™¨</a>ä¸Šã€‚Plexå¯ç”¨äº<a href="https://zh.wikipedia.org/wiki/Microsoft_Windows">Windows</a>ã€<a href="https://zh.wikipedia.org/wiki/Android">Android</a>ã€<a href="https://zh.wikipedia.org/wiki/Linux">Linux</a>ã€<a href="https://zh.wikipedia.org/wiki/OS_X">OS X</a>å’Œ<a href="https://zh.wikipedia.org/wiki/FreeBSD">FreeBSD</a>[<a href="https://zh.wikipedia.org/wiki/Plex#cite_note-Gigaom-2">2]</a>ã€‚å¦å¤–ï¼ŒPlexäº¦è®©ç”¨æˆ·é€è¿‡è¯¥å¹³å°è§‚çœ‹æ¥è‡ª<a href="https://zh.wikipedia.org/wiki/YouTube">YouTube</a>ã€<a href="https://zh.wikipedia.org/wiki/Vimeo">Vimeo</a>å’Œ<a href="https://zh.wikipedia.org/wiki/TEDå¤§æœƒ">TED</a>ç­‰å†…å®¹æä¾›å•†çš„è§†é¢‘ã€‚Plexäº¦ä¸<a href="https://zh.wikipedia.org/w/index.php?title=Bitcasa&amp;action=edit&amp;redlink=1">Bitcasa</a>ã€<a href="https://zh.wikipedia.org/wiki/Boxå…¬å¸">Box</a>å’Œ<a href="https://zh.wikipedia.org/wiki/Dropbox">Dropbox</a>ç­‰äº‘ç«¯æœåŠ¡å…¼å®¹[<a href="https://zh.wikipedia.org/wiki/Plex#cite_note-3">3]</a>[<a href="https://zh.wikipedia.org/wiki/Plex#cite_note-4">4]</a>ã€‚</p><p>ç”¨æˆ·å¯é€è¿‡Plex<a href="https://zh.wikipedia.org/wiki/å‰ç«¯å’Œåç«¯">å‰ç«¯</a>åª’ä½“æ’­æ”¾å™¨â€œPlex Media Playerâ€ç®¡ç†åŠæ’­æ”¾åœ¨ä¸€å°è¿è¡Œâ€œPlex Media Serverâ€çš„è¿œç¨‹ç”µè„‘ä¸Šçš„å¤šåª’ä½“æ–‡ä»¶ã€‚å¦å¤–ï¼Œç”¨æˆ·å¯ä½¿ç”¨â€œPlex Onlineâ€æœåŠ¡ä»¥ç¤¾åŒºå¼€å‘çš„æ’ä»¶æ”¶çœ‹<a href="https://zh.wikipedia.org/wiki/Netflix">Netflix</a>ã€<a href="https://zh.wikipedia.org/wiki/Hulu">Hulu</a>å’Œ<a href="https://zh.wikipedia.org/wiki/CNN">CNN</a>çš„è§†é¢‘ã€‚[<a href="https://zh.wikipedia.org/wiki/Plex#cite_note-CrunchGear_Interview-5">5]</a></p></blockquote><p>ç®€å•è¯´ï¼Œå°±æ˜¯Plexå¯ä»¥ç®¡ç†ä½ çš„è¿ç»­å‰§é›†ï¼ˆå¦‚ç•ªå‰§ï¼‰å’Œç”µå½±ï¼Œè§£æå‡ºå®ƒä»¬çš„å…ƒæ•°æ®ï¼ˆå¦‚æµ·æŠ¥ï¼Œå°é¢ï¼Œæ¼”èŒå‘˜è¡¨ï¼Œç®€ä»‹ï¼Œåˆ†é›†æ ‡é¢˜ç­‰ç­‰ï¼‰ï¼Œåœ¨ä½ çš„ç”µè„‘ä¸Šè‡ªåŠ¨æ­å»ºä¸€ä¸ª<strong>æœåŠ¡å™¨</strong>ï¼Œå‘ä½ åœ¨å…¶ä»–è®¾å¤‡ä¸Šçš„Plexè½¯ä»¶æä¾›åƒæ˜¯Bilibiliæˆ–Netflixä¸€æ ·çš„ä¸²æµæœåŠ¡ã€‚å½¢è±¡ç‚¹è¯´å°±æ˜¯ï¼Œä½ è‡ªå·±æ­å»ºäº†ä¸€ä¸ªç®€å•çš„è§†é¢‘ç½‘ç«™ï¼Œæ•°æ®åº“æ˜¯ä½ ç”µè„‘ä¸Šçš„å†…å®¹ï¼Œä¾›ä½ è‡ªå·±ä½¿ç”¨ã€‚</p><p>å¦å¤–ï¼ŒPlexä¸ä»…æ”¯æŒå†…ç½‘è®¿é—®ï¼Œåœ¨å¤–ç½‘è®¿é—®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å†…ç½‘è®¿é—®è¦æ±‚ç»ˆç«¯è®¾å¤‡è¿æ¥åˆ°å’Œä½ çš„ç”µè„‘åŒä¸€ä¸ªWi-Fiï¼Œè€Œå¤–ç½‘åˆ™æ˜¯åªè¦æœ‰ç½‘ç»œè¿æ¥å°±è¡Œã€‚å½“ç„¶ï¼Œå†…ç½‘çš„é€Ÿåº¦å’Œæ¸…æ™°åº¦éƒ½æ˜¯æ›´é«˜çš„ã€‚</p><p>Plexæ”¯æŒåœ¨Windowsï¼ŒMacï¼ŒNASï¼ŒDockerç­‰ä½ç½®å®‰è£…å…¶serverï¼Œå®‰è£…è¿‡ç¨‹ååˆ†ç®€å•ï¼ŒåŸºæœ¬ä¸€è·¯Nextå³å¯ã€‚</p><p>æœ‰äº†å‰é¢çš„è®¾ç½®ï¼Œè¿™é‡Œå°±å¾ˆç®€å•äº†ã€‚å‡è®¾ä½ çš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Anime</span><br><span class="line">|- å·¥ä½œç»†èƒ</span><br><span class="line">|- Season 1</span><br><span class="line">        |- 01.mp4</span><br><span class="line">        |- 02.mp4</span><br><span class="line">        |...</span><br><span class="line">        |- 12.mp4</span><br><span class="line">        |- Season 2</span><br><span class="line">        |- 01.mp4</span><br><span class="line">        |- ...</span><br><span class="line">|- å¶åƒè£è€€</span><br><span class="line">|- 01.mp4</span><br><span class="line">        |- ...</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œä½ æ‰€éœ€è¦åšçš„åªæ˜¯ï¼šåˆ›å»ºä¸€ä¸ªè´¦æˆ·ï¼Œç„¶åå¯åŠ¨ä½ çš„æœåŠ¡å™¨é¡µé¢ï¼ˆåœ°å€æ è¾“å…¥<a href="https://www.plex.tv/">plex.tv</a>ï¼Œå³ä¸Šè§’Launchå³å¯ï¼Œæˆ–æ˜¯ç›´æ¥ç‚¹å‡»<a href="https://app.plex.tv/desktop#">Link</a>ï¼‰ï¼š</p><p><img src="/2021/02/01/seed-anime-system/image-20210130123759950.png" alt="image-20210130123759950" style="zoom:50%;"></p><p>ç‚¹å‡»<code>+</code>å·ï¼Œæ–°å»ºä¸€ä¸ªåº“ï¼Œ</p><p><img src="/2021/02/01/seed-anime-system/image-20210130123947605.png" alt="image-20210130123947605" style="zoom:50%;"></p><p>ç®€å•ä¸¤æ­¥ï¼Œå®Œæˆï¼</p><p>å½“ç„¶æˆ‘ä»¬è¿™é‡Œä»‹ç»çš„ä»…ä»…æ˜¯æ·»åŠ å‰§é›†çš„æ–¹æ³•ï¼Œç”µå½±åº“ã€éŸ³ä¹åº“å’Œå›¾ç‰‡åº“çš„æ·»åŠ æ–¹æ³•ç±»ä¼¼ã€‚ä½ å®Œå…¨å¯ä»¥æŠŠä½ çš„ç…§ç‰‡æ–‡ä»¶å¤¹æ”¾åˆ°Plexä¸Šï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹çœ‹åˆ°ä½ çš„ç…§ç‰‡å•¦ï¼å¦å¤–ï¼Œç”±äº<strong>æœåŠ¡å™¨</strong>æ˜¯ä½ è‡ªå·±çš„ç”µè„‘ï¼Œå®ƒå¹¶ä¸ä¼šä¸Šä¼ ä½ çš„æ–‡ä»¶åˆ°æŸä¸ªäº‘ç«¯ï¼Œæ‰€ä»¥å®‰å…¨æ€§ä¹Ÿæ˜¯è¾ƒæœ‰ä¿éšœçš„ã€‚</p><p>å…¶ä¸­ç”µå½±å’Œç”µè§†èŠ‚ç›®åº“çš„æœ€å¤§åŒºåˆ«æ˜¯æ˜¯å¦åˆ†é›†å’Œåˆ†å­£ã€‚ç”µå½±çš„è§£æé’ˆå¯¹çš„æ˜¯å•ä¸ªçš„è§†é¢‘æ–‡ä»¶ï¼Œè€Œå‰§é›†çš„è§£æé’ˆå¯¹çš„æ˜¯æŸä¸ªå­æ–‡ä»¶å¤¹ã€‚</p><p>ä¹‹åï¼Œä½ å¯ä»¥è¿›å…¥ä½ çš„åº“ï¼ŒæŸ¥çœ‹æ•ˆæœã€‚å¾ˆå¤§ä¸€éƒ¨åˆ†å†…å®¹ä¼šç›´æ¥æˆåŠŸæŠ“å–å…ƒæ•°æ®å¾—åˆ°æ¼‚äº®çš„å°é¢ç­‰å†…å®¹ï¼Œå¦ä¸€äº›åˆ™ä¼šå¤±è´¥ã€‚å¯¹äºå¤±è´¥çš„å†…å®¹ï¼Œå¦‚æœä½ ä¸åœ¨æ„å…¶å®ä¹Ÿä¸å½±å“è§‚çœ‹ï¼Œåªæ˜¯æ²¡æœ‰å°é¢å’Œä»‹ç»ç­‰ã€‚å¦‚æœä½ ä»‹æ„ï¼Œå¯ä»¥é€‰æ‹©æ‰‹åŠ¨ååŠ©åŒ¹é…ï¼š</p><figure><img src="/2021/02/01/seed-anime-system/image-20210130125127348.png" alt="image-20210130125127348"><figcaption aria-hidden="true">image-20210130125127348</figcaption></figure><p>åŒ¹é…å¤±è´¥çš„ä¸»è¦åŸå› æ˜¯å‘½åé—®é¢˜ã€‚åœ¨<code>ä¿®å¤åŒ¹é…-æœç´¢é€‰é¡¹</code>ä¸­å¯ä»¥æ›´æ”¹ç”¨äºæœç´¢çš„å‘½åã€‚å¦å¤–ï¼Œæœ‰çš„æ—¶å€™æ˜¯å› ä¸ºæœç´¢çš„æ•°æ®åº“ä¸­æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œæ­¤æ—¶ï¼Œä½ å¯ä»¥åˆ‡æ¢<code>ä»£ç†</code>ï¼Œå¾ˆå¤šæ—¶å€™æ˜¯å¯ä»¥æ‰¾åˆ°åŒ¹é…çš„ã€‚å¦‚æœä½ çš„å‘½åæ˜¯æ—¥è¯­æˆ–è‹±è¯­ï¼Œé‚£ä¹ˆæŠŠæœç´¢çš„è¯­è¨€ç›¸åº”ä¿®æ”¹ã€‚ä¹‹åç‚¹å‡»æœç´¢å³å¯ã€‚</p><h2 id="å…¶ä»–">å…¶ä»–</h2><h3 id="æ³¨æ„">æ³¨æ„</h3><ul><li>è¯¥æ–¹æ³•é€‚ç”¨ä½†ä¸ä»…é€‚ç”¨äºåŠ¨æ¼«ã€‚å…¶ä»–ç±»å‹å½±è§†å‰§é›†ä¹Ÿå¯ï¼Œåªè¦ä½ èƒ½æ‰¾åˆ°åˆé€‚çš„è®¢é˜…æºã€‚</li><li>æœ¬æ–‡æ¶‰åŠçš„æ‰€æœ‰è„šæœ¬éƒ½å¯ä»¥åœ¨è¯¥<a href="https://github.com/miracleyoo/anime_renamer">GitHub</a>åº“ä¸Šæ‰¾åˆ°ã€‚</li><li>åŠ¨æ¼«æ­£ç‰ˆåŒ–äº‹ä¸šä¸æ˜“ï¼Œå„å¤§ç½‘ç«™éƒ½æŠ•å…¥äº†å·¨å¤§çš„èµ„æºæ¥å»ºè®¾æ›´å…¨çš„æ­£ç‰ˆèµ„æºåº“ï¼Œè¯·å°½æœ€å¤§å¯èƒ½æ”¯æŒæ­£ç‰ˆã€‚è¯·å°†æœ¬æ–¹æ³•ä¸»è¦ç”¨äºè§‚çœ‹ç½‘ç›˜è§ç±»å‰§é›†å’Œå­˜åœ¨åˆ å‡çš„å‰§é›†ã€‚</li></ul><h3 id="trouble-shooting">Trouble Shooting</h3><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºutorrentåœ¨ä¸Šä¼ æ—¶ä¼šå ç”¨æ–‡ä»¶ï¼Œæ‰€ä»¥æœ‰ä¸€å®šæ¦‚ç‡é‡å‘½åä¼šå¤±è´¥ã€‚è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚æœä½ è§‰å¾—æœ‰é—®é¢˜çš„æ—¶å€™ï¼Œå…³é—­utorrentè§£é™¤å ç”¨ï¼Œå¾€å¾€éœ€è¦ç­‰ä¸Šå‡ ç§’ï¼Œç„¶åç›´æ¥å°†æ•´ä¸ª<code>Anime</code>æ–‡ä»¶å¤¹ï¼ˆå­˜æ”¾åŠ¨æ¼«çš„æ ¹æ–‡ä»¶å¤¹ï¼‰æ‹–æ”¾åˆ°ä¸‹é¢è¿™ä¸ª<code>cmd</code>æ–‡ä»¶ä¸Šå³å¯ï¼š</p><p><code>rename_episodes.cmd</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> %%i <span class="keyword">in</span> (%*) <span class="keyword">do</span> python &lt;YOUR_SCRIPT_PATH&gt;\reg_match.py --path=%%i</span><br></pre></td></tr></table></figure><p>è¯¥æ–‡ä»¶ä¼šè°ƒç”¨å‰é¢æåˆ°çš„Pythonè„šæœ¬ï¼Œå¹¶å¯¹æ•´ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æœ‰é—®é¢˜çš„æ–‡ä»¶åè¿›è¡Œé‡å‘½åã€‚ä½ ä¹Ÿå¯ä»¥å°†æœ‰é—®é¢˜çš„å­ç›®å½•æˆ–ç‰¹å®šæ–‡ä»¶æ‹–æ”¾ä¸Šå»ï¼Œæˆ–æ˜¯åŒæ—¶æ‹–æ”¾å¤šä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹ã€‚Pythonè„šæœ¬ä¸­æœ‰ç€ç›¸åº”çš„é€‚é…ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;å‰è¨€&lt;/strong&gt;ï¼šä½ å–œæ¬¢çš„ç•ªå‰§æ›´æ–°äº†ã€‚æ˜¯ä½ å–œæ¬¢çš„å­—å¹•ç»„çš„é«˜æ¸…èµ„æºã€‚é‡Œé¢æ²¡æœ‰æ”¾è‚†çš„åœ£å…‰å’Œæš—ç‰§ã€‚å°½ç®¡å®ƒä¹Ÿè®¸æ²¡åœ¨å›½å†…æ”¾é€ã€‚ä½ å¯ä»¥åœ¨ä»»ä½•è®¾å¤‡ä¸Šè§‚çœ‹å®ƒï¼Œå¹¶ä¸”å¯ä»¥æ— ç¼åˆ‡æ¢ã€‚ç”µè§†ï¼Œæ‰‹æœºï¼ŒiPadï¼Œç”µè„‘éƒ½æ²¡æœ‰é—®é¢˜ã€‚å®ƒå¾ˆå¿«ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°†æ˜¯æœ¬ç¯‡ä»‹ç»çš„å…¨è‡ªåŠ¨å…¨å¹³å°è®¢é˜…è¿½ç•ªç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;å‡ºäºå„ç§åŸå› ï¼Œæœ‰è®¸å¤šç•ªå‰§åœ¨Bç«™å¹¶æ‰¾ä¸åˆ°ã€‚å³ä½¿å¼€äº†å¤§ä¼šå‘˜ï¼Œä»å›½å¤–é©¾æ¢¯å›å›½ï¼Œè¿˜æ˜¯æ— æ³•çœ‹åˆ°ä¸€äº›å–œæ¬¢çš„å†…å®¹ã€‚ä½†åŒæ—¶ï¼Œå„å¤§åŠ¨æ¼«ç§å­ç«™å´æä¾›äº†å‡ ä¹æ— æ‰€ä¸åŒ…çš„èµ„æºï¼Œå…¶ä¸­åŒ…æ‹¬æ–°ç•ªã€‚ä½†ä¾é ç§å­è¿½ç•ªæœ€å¸¸è§çš„é—®é¢˜å°±æ˜¯éš¾ä»¥trackï¼Œç»å¸¸ä¼šå¿˜è®°æ›´æ–°ï¼Œè€Œä¸”æ¯æ¬¡éƒ½éœ€è¦ç»è¿‡ä¸€ä¸ª&lt;code&gt;æœç´¢-ä¸‹è½½ç§å­-ä¸‹è½½-æ•´ç†-è§‚çœ‹&lt;/code&gt;çš„è¿‡ç¨‹ï¼Œç¡®å®è¿˜æ˜¯å¾ˆåŠé€€çš„ã€‚å¦‚ä½•æ­å»ºä¸€ä¸ªæ˜“äºé…ç½®ã€è¶³å¤Ÿç®€å•ã€å…¨è‡ªåŠ¨åŒ–æŠ“å–ã€ä¸‹è½½ã€ä¸²æµçš„è¿½ç•ªç³»ç»Ÿï¼Œä¾¿æˆä¸ºäº†ä¸€ä¸ªè¿½ç•ªäººçš„æ ¸å¿ƒéœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æœ¬æ–‡å°†ä¼šå¸¦é¢†ä½ è®¤è¯†æ•´å¥—æµç¨‹ï¼Œå¦‚æœä½ è¶³å¤Ÿç»å¸¸æŠ˜è…¾ï¼Œå¤§è‡´ä¸€ä¸ªå°æ—¶ä¹‹å†…å°±å¯ä»¥æ­å»ºå®Œæˆã€‚ç¥ä½ å¥½è¿:)&lt;/p&gt;
&lt;p&gt;PS: æœ¬æ–‡æ¶‰åŠçš„æ‰€æœ‰è„šæœ¬éƒ½å¯ä»¥åœ¨è¯¥&lt;a href=&quot;https://github.com/miracleyoo/anime_renamer&quot;&gt;GitHub&lt;/a&gt;åº“ä¸Šæ‰¾åˆ°ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="acg" scheme="https://www.miracleyoo.com/tags/acg/"/>
    
    <category term="anime" scheme="https://www.miracleyoo.com/tags/anime/"/>
    
    <category term="system" scheme="https://www.miracleyoo.com/tags/system/"/>
    
    <category term="torrent" scheme="https://www.miracleyoo.com/tags/torrent/"/>
    
  </entry>
  
  <entry>
    <title>Git Submodule æ”»ç•¥</title>
    <link href="https://www.miracleyoo.com/2020/10/22/git-sub-module/"/>
    <id>https://www.miracleyoo.com/2020/10/22/git-sub-module/</id>
    <published>2020-10-23T02:26:00.000Z</published>
    <updated>2021-03-12T22:26:24.061Z</updated>
    
    <content type="html"><![CDATA[<h2 id="tldr">TL;DR</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add submodule</span></span><br><span class="line">git submodule add</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clone a project with submodules</span></span><br><span class="line">git <span class="built_in">clone</span> --recursive</span><br><span class="line"></span><br><span class="line"><span class="comment"># Update when submodeule remote repo changed</span></span><br><span class="line">git submodule update --remote</span><br><span class="line"></span><br><span class="line"><span class="comment"># When cloned without recursive</span></span><br><span class="line">git submodule init</span><br><span class="line">git submodule update</span><br><span class="line"></span><br><span class="line"><span class="comment"># Push submodule change to its remote origin master</span></span><br><span class="line"><span class="built_in">cd</span> &lt;submodule_name&gt;</span><br><span class="line">git add -A .</span><br><span class="line">git commit -m <span class="string">&quot;xxx&quot;</span></span><br><span class="line">git checkout &lt;detached branch name/number&gt;</span><br><span class="line">git merge master</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="å®šä¹‰">å®šä¹‰</h2><p><code>git submodule</code>å…è®¸ç”¨æˆ·å°†ä¸€ä¸ª Git ä»“åº“ä½œä¸ºå¦ä¸€ä¸ª Git ä»“åº“çš„å­ç›®å½•ã€‚ å®ƒèƒ½è®©ä½ å°†å¦ä¸€ä¸ªä»“åº“å…‹éš†åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ŒåŒæ—¶è¿˜ä¿æŒæäº¤çš„ç‹¬ç«‹æ€§ã€‚</p><h2 id="ä½œç”¨">ä½œç”¨</h2><p>åœ¨æˆ‘è¿™é‡Œï¼Œå®ƒçš„ä½œç”¨éå¸¸æ˜ç¡®ï¼Œå³ç»™åœ¨å„ä¸ªé¡¹ç›®ä¸­éƒ½ä¼šç”¨åˆ°çš„ä»£ç æ®µä¸€ä¸ªå…¬å…±æ –æ¯åœ°ï¼Œåšåˆ°â€œä¸€å¤„æ”¹ï¼Œå¤„å¤„æ”¹â€ã€‚</p><h2 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h2><h3 id="æ·»åŠ ">æ·»åŠ </h3><p><code>git submodule add</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›´æ¥cloneï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ªsomeSubmoduleç›®å½•å­˜æ”¾ä»“åº“å†…å®¹</span></span><br><span class="line">git submodule add https://github.com/miracleyoo/someSubmodule</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ–‡ä»¶ç›®å½•</span></span><br><span class="line">git submodule add https://github.com/miracleyoo/someSubmodule  src/submodulePath</span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œä¹‹åï¼Œå­æ¨¡å—ç›®å½•è¿˜æ˜¯ç©ºçš„ï¼ˆä¼¼ä¹æ–°ç‰ˆä¸ä¼šäº†ï¼‰ï¼Œæ­¤æ—¶éœ€è¦æ‰§è¡Œï¼š</p><p><code>git submodule update --init --recursive</code></p><p>æ¥çœŸæ­£å°†å­æ¨¡å—ä¸­çš„å†…å®¹cloneä¸‹æ¥ã€‚åŒæ—¶ï¼Œå¦‚æœä½ çš„ä¸»ç›®å½•åœ¨å…¶ä»–æœºå™¨ä¹Ÿæœ‰äº†ä¸€ä»½cloneï¼Œå®ƒä»¬ä¹Ÿéœ€è¦æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤æ¥æŠŠè¿œç«¯å…³äºå­æ¨¡å—çš„æ›´æ”¹å®é™…åº”ç”¨ã€‚</p><h3 id="cloneæ—¶å­æ¨¡å—åˆå§‹åŒ–">Cloneæ—¶å­æ¨¡å—åˆå§‹åŒ–</h3><p><code>clone</code>çˆ¶ä»“åº“çš„æ—¶å€™åŠ ä¸Š<code>--recursive</code>ï¼Œä¼šè‡ªåŠ¨åˆå§‹åŒ–å¹¶æ›´æ–°ä»“åº“ä¸­çš„æ¯ä¸€ä¸ªå­æ¨¡å—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive</span><br></pre></td></tr></table></figure><p>æˆ–ï¼š</p><p>å¦‚æœå·²ç»æ­£å¸¸çš„<code>clone</code>äº†ï¼Œé‚£ä¹Ÿå¯ä»¥åšä»¥ä¸‹è¡¥æ•‘ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git submodule init</span><br><span class="line">git submodule update</span><br></pre></td></tr></table></figure><p>æ­£å¸¸<code>clone</code>åŒ…å«å­æ¨¡å—çš„å‡½æ•°ä¹‹åï¼Œç”±äº.submoduleæ–‡ä»¶çš„å­˜åœ¨<code>someSubmodule</code>å·²ç»è‡ªåŠ¨ç”Ÿæˆï¼Œä½†æ˜¯é‡Œé¢æ˜¯ç©ºçš„ã€‚ä¸Šé¢çš„ä¸¤æ¡å‘½ä»¤åˆ†åˆ«ï¼š</p><ol type="1"><li>åˆå§‹åŒ–çš„æœ¬åœ°é…ç½®æ–‡ä»¶</li><li>ä»è¯¥é¡¹ç›®ä¸­æŠ“å–æ‰€æœ‰æ•°æ®å¹¶æ£€å‡ºåˆ°ä¸»é¡¹ç›®ä¸­ã€‚</li></ol><h3 id="æ›´æ–°">æ›´æ–°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule update --remote</span><br></pre></td></tr></table></figure><p>Git å°†ä¼šè¿›å…¥æ‰€æœ‰å­æ¨¡å—ï¼Œåˆ†åˆ«æŠ“å–å¹¶æ›´æ–°ï¼Œé»˜è®¤æ›´æ–°masteråˆ†æ”¯ã€‚</p><p>ä¸å¸¦<code>--remote</code>çš„<code>update</code>åªä¼šåœ¨æœ¬åœ°æ²¡æœ‰å­æ¨¡å—æˆ–å®ƒæ˜¯ç©ºçš„çš„æ—¶å€™æ‰ä¼šæœ‰æ•ˆæœã€‚</p><h3 id="æ¨é€å­æ¨¡å—ä¿®æ”¹">æ¨é€å­æ¨¡å—ä¿®æ”¹</h3><p>è¿™é‡Œæœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå°±æ˜¯ä¸»repoä¸­çš„å­æ¨¡å—è¢«æ‹‰åˆ°æœ¬åœ°æ—¶é»˜è®¤æ˜¯ä¸€ä¸ªå­æ¨¡å—è¿œç¨‹ä»“åº“masteråˆ†æ”¯çš„<code>detached branch</code>ã€‚è¿™ä¸ªåˆ†æ”¯æ˜¯masterçš„æ‹·è´ï¼Œä½†å®ƒä¸ä¼šè¢«æ¨é€åˆ°è¿œç«¯ã€‚å¦‚æœåœ¨å­æ¨¡å—ä¸­åšäº†ä¿®æ”¹ï¼Œå¹¶ä¸”å·²ç»<code>add</code>ï¼Œ<code>commit</code>ï¼Œé‚£ä½ ä¼šå‘ç°å½“ä½ æƒ³è¦<code>push</code>çš„æ—¶å€™ä¼šæŠ¥é”™ï¼š<code>Updates were rejected because a pushed branch tip is behind its remote</code>ã€‚è¿™ä¾¿æ˜¯æ‰€è°“çš„<code>detached branch</code>çš„æœ€ç›´æ¥çš„ä½“ç°ã€‚</p><p>è§£å†³æ–¹æ³•æ˜¯ï¼šåœ¨å­æ¨¡å—ä¸­å…ˆ<code>git checkout master</code>ï¼Œç„¶ååœ¨<code>git merge &lt;detached branch name/number&gt;</code>ï¼Œæœ€å<code>git push -u origin master</code>å³å¯ã€‚</p><p>è¿™é‡Œè§£é‡Šä¸€ä¸‹<code>&lt;detached branch name/number&gt;</code>è¿™ä¸ªä¸œè¥¿å¯ä»¥ä½¿ç”¨<code>git branch</code>å‘½ä»¤æŸ¥çœ‹ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯<code>zsh</code>ï¼Œé‚£ä¹ˆé—®é¢˜å°±æ›´ç®€å•äº†ï¼Œç›´æ¥åœ¨å‘½ä»¤æç¤ºç¬¦å¤„å°±å¯ä»¥æ‰¾åˆ°ã€‚</p><figure><img src="/2020/10/22/git-sub-module/image-20200704184550817.png" alt="image-20200704184550817"><figcaption aria-hidden="true">image-20200704184550817</figcaption></figure><figure><img src="/2020/10/22/git-sub-module/image-20200704184656815.png" alt="image-20200704184656815"><figcaption aria-hidden="true">image-20200704184656815</figcaption></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><p><a href="https://juejin.im/post/5d5ca6e06fb9a06b1a568e32">æ¥è¯´è¯´å‘çˆ¹çš„ git submodule</a></p></li><li><p><a href="https://juejin.im/post/5ca47a84e51d4565372e46e0">Git submoduleä½¿ç”¨æŒ‡å—ï¼ˆä¸€ï¼‰</a></p></li><li><p><a href="https://github.blog/author/jaw6/">Working with submodules</a></p></li><li><p><a href="https://stackoverflow.com/questions/18770545/why-is-my-git-submodule-head-detached-from-master">Why is my Git Submodule HEAD detached from master?</a></p></li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;tldr&quot;&gt;TL;DR&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Add submodule&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git submodule add&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Clone a project with submodules&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; --recursive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Update when submodeule remote repo changed&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git submodule update --remote&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# When cloned without recursive&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git submodule init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git submodule update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Push submodule change to its remote origin master&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; &amp;lt;submodule_name&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git add -A .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git commit -m &lt;span class=&quot;string&quot;&gt;&amp;quot;xxx&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout &amp;lt;detached branch name/number&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git merge master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git push -u origin master&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="git" scheme="https://www.miracleyoo.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Multi-Spectral Imaging æ•°æ®é‡‡é›†å‰æœŸè°ƒç ”</title>
    <link href="https://www.miracleyoo.com/2020/10/16/hsi-pre-data-collection/"/>
    <id>https://www.miracleyoo.com/2020/10/16/hsi-pre-data-collection/</id>
    <published>2020-10-16T23:57:04.000Z</published>
    <updated>2021-03-12T22:04:46.936Z</updated>
    
    <content type="html"><![CDATA[<h2 id="equipment">Equipment</h2><h3 id="flir-blackfly-s-rgb-camera">FLIR Blackfly S RGB Camera</h3><ol type="1"><li><p>Spectral Range:</p><ul><li>Blue: 460 nm</li><li>Green: 530 nm</li><li>Red: 625 nm</li></ul></li><li><p>Resolution: 720 Ã— 540</p></li><li><p>FPS: 522</p><span id="more"></span></li><li><p>Dimensions [W x H x L]: 29 mm Ã— 29 mm Ã— 30 mm</p></li><li><p>Official Link: <a href="https://www.flir.com/products/blackfly-s-usb3/">Link</a></p></li></ol><h3 id="ximea-mq022hg-im-sm5x5-nir-multispectral-camera">XIMEA MQ022HG-IM-SM5X5-NIR Multispectral Camera</h3><ol type="1"><li>Spectral Range: 665~975nm</li><li>Resolution:<ul><li>Original: 2048 Ã— 1088</li><li>Spatial: 409 Ã— 217</li></ul></li><li>FPS: up to 170 cubes/sec</li><li>Sensor size: 2/3"</li><li>Dimensions WxHxD: 26 x 26 x 31 mm</li><li>Pixel size: 5.5 Âµm</li><li>Python multispectral processing lib: <a href="http://www.spectralpython.net/#documentation">Link</a></li><li>Camera control official python lib: <a href="https://www.ximea.com/support/wiki/apis/Python">Link</a></li><li>Official brief specification: <a href="https://www.ximea.com/files/brochures/xiSpec-Hyperspectral-cameras-2015-brochure.pdf">Link</a></li><li>Official Page: <a href="https://www.ximea.com/en/products/hyperspectral-cameras-based-on-usb3-xispec/mq022hg-im-sm5x5-nir">Link</a></li></ol><table><thead><tr class="header"><th>Full Specifications:</th><th></th></tr></thead><tbody><tr class="odd"><td><strong>Part Number</strong></td><td>MQ022HG-IM-SM5X5-NIR</td></tr><tr class="even"><td><strong>Resolution</strong></td><td>Original: 2048 Ã— 1088 Spatial: 409 Ã— 217</td></tr><tr class="odd"><td><strong>Frame rates</strong></td><td>up to 170 cubes/sec</td></tr><tr class="even"><td><strong>Sensor type</strong></td><td>CMOS, Hyperspectral filters added at wafer-level</td></tr><tr class="odd"><td><strong>Sensor model</strong></td><td>IMEC SNm5x5</td></tr><tr class="even"><td><strong>Sensor size</strong></td><td>2/3"</td></tr><tr class="odd"><td><strong>Sensor active area</strong></td><td>25 Bands</td></tr><tr class="even"><td><strong>Readout Method</strong></td><td>Snapshot Mosaic</td></tr><tr class="odd"><td><strong>Pixel size</strong></td><td>5.5 Âµm</td></tr><tr class="even"><td><strong>ADC -Bits per pixel</strong></td><td>8, 10 bit RAW pixel data</td></tr><tr class="odd"><td><strong>Data interface</strong></td><td>USB 3.1 Gen1 or PCI Express (xiX camera model)</td></tr><tr class="even"><td><strong>Data I/O</strong></td><td>GPIO IN, OUT</td></tr><tr class="odd"><td><strong>Power consumption</strong></td><td>1.6 Watt</td></tr><tr class="even"><td><strong>Lens mount</strong></td><td>C or CS Mount</td></tr><tr class="odd"><td><strong>Weight</strong></td><td>32 grams</td></tr><tr class="even"><td><strong>Dimensions WxHxD</strong></td><td>26 x 26 x 31 mm</td></tr><tr class="odd"><td><strong>Operating temperature</strong></td><td>50 Â°C</td></tr><tr class="even"><td><strong>Spectral range</strong></td><td>665-975 nm</td></tr><tr class="odd"><td><strong>Customs tariff code</strong></td><td>8525.80 30 (EU) / 8525.80 40 (USA)</td></tr><tr class="even"><td><strong>ECCN</strong></td><td>EAR99</td></tr></tbody></table><h3 id="seek-compact-pro-thermal-camera">Seek Compact Pro Thermal Camera</h3><ol type="1"><li>Seek Compact Pro: 7500~14000 nm</li><li>Resolution: <strong>320 x 240</strong></li><li>Field of view: <strong>32Â°</strong></li><li>Frame rate: <strong>&lt; 9 Hz</strong></li><li>Focusable lens</li><li>Platform: Android or iOS (Linux 3rd-party binary library)</li><li>Specification Sheet: <a href="https://www.thermal.com/uploads/1/0/1/3/101388544/compactpro-sellsheet-website.pdf">Link</a></li></ol><h2 id="introduction">Introduction</h2><p>Full spectrum:</p><figure><img src="/2020/10/16/hsi-pre-data-collection/2880px-EM_spectrum.svg.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2020/10/16/hsi-pre-data-collection/2880px-EM_Spectrum_Properties_edit_zh.svg.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2020/10/16/hsi-pre-data-collection/Atmospheric_electromagnetic_opacity.svg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2020/10/16/hsi-pre-data-collection/200px-Light_spectrum.svg.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h3 id="different-infrared"><strong>Different Infrared:</strong></h3><table><colgroup><col style="width: 14%"><col style="width: 15%"><col style="width: 11%"><col style="width: 15%"><col style="width: 12%"><col style="width: 15%"><col style="width: 15%"></colgroup><thead><tr class="header"><th style="text-align: center;">Division name</th><th style="text-align: center;">Abbreviation</th><th style="text-align: center;">Wavelength</th><th style="text-align: center;">Frequency</th><th style="text-align: center;">Photon energy</th><th style="text-align: center;">Temperature[<a href="https://en.wikipedia.org/wiki/Infrared#cite_note-â€ -15">i]</a></th><th style="text-align: center;">Characteristics</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">Near-infrared</td><td style="text-align: center;">NIR, IR-A <em><a href="https://en.wikipedia.org/wiki/DIN">DIN</a></em></td><td style="text-align: center;">0.75â€“1.4 <a href="https://en.wikipedia.org/wiki/Îœm">Î¼m</a></td><td style="text-align: center;">214â€“400 <a href="https://en.wikipedia.org/wiki/Terahertz_(unit)">THz</a></td><td style="text-align: center;">886â€“1653 <a href="https://en.wikipedia.org/wiki/MeV">meV</a></td><td style="text-align: center;">3,864â€“2,070 <a href="https://en.wikipedia.org/wiki/Kelvin">K</a> (3,591â€“1,797 <a href="https://en.wikipedia.org/wiki/Celsius">Â°C</a>)</td><td style="text-align: center;">Defined by water absorption,[<em><a href="https://en.wikipedia.org/wiki/Wikipedia:Please_clarify">clarification needed</a></em>] and commonly used in <a href="https://en.wikipedia.org/wiki/Fiber_optic">fiber optic</a> telecommunication because of low attenuation losses in the SiO2 glass (<a href="https://en.wikipedia.org/wiki/Silica">silica</a>) medium. <a href="https://en.wikipedia.org/wiki/Image_intensifier">Image intensifiers</a> are sensitive to this area of the spectrum; examples include <a href="https://en.wikipedia.org/wiki/Night_vision">night vision</a> devices such as night vision goggles. <a href="https://en.wikipedia.org/wiki/Near-infrared_spectroscopy">Near-infrared spectroscopy</a> is another common application.</td></tr><tr class="even"><td style="text-align: center;">Short-wavelength infrared</td><td style="text-align: center;">SWIR, IR-B <em>DIN</em></td><td style="text-align: center;">1.4â€“3 Î¼m</td><td style="text-align: center;">100â€“214 THz</td><td style="text-align: center;">413â€“886 meV</td><td style="text-align: center;">2,070â€“966 <a href="https://en.wikipedia.org/wiki/Kelvin">K</a> (1,797â€“693 <a href="https://en.wikipedia.org/wiki/Celsius">Â°C</a>)</td><td style="text-align: center;">Water absorption increases significantly at 1450 nm. The 1530 to 1560 nm range is the dominant spectral region for long-distance telecommunications.</td></tr><tr class="odd"><td style="text-align: center;">Mid-wavelength infrared</td><td style="text-align: center;">MWIR, IR-C <em>DIN</em>; MidIR.[<a href="https://en.wikipedia.org/wiki/Infrared#cite_note-rdmag20120908-16">15]</a> Also called intermediate infrared (IIR)</td><td style="text-align: center;">3â€“8 Î¼m</td><td style="text-align: center;">37â€“100 THz</td><td style="text-align: center;">155â€“413 meV</td><td style="text-align: center;">966â€“362 <a href="https://en.wikipedia.org/wiki/Kelvin">K</a> (693â€“89 <a href="https://en.wikipedia.org/wiki/Celsius">Â°C</a>)</td><td style="text-align: center;">In guided missile technology the 3â€“5 Î¼m portion of this band is the atmospheric window in which the homing heads of passive IR 'heat seeking' missiles are designed to work, homing on to the <a href="https://en.wikipedia.org/wiki/Infrared_signature">Infrared signature</a> of the target aircraft, typically the jet engine exhaust plume. This region is also known as thermal infrared.</td></tr><tr class="even"><td style="text-align: center;">Long-wavelength infrared</td><td style="text-align: center;">LWIR, IR-C <em>DIN</em></td><td style="text-align: center;">8â€“15 Î¼m</td><td style="text-align: center;">20â€“37 THz</td><td style="text-align: center;">83â€“155 meV</td><td style="text-align: center;">362â€“193 <a href="https://en.wikipedia.org/wiki/Kelvin">K</a> (89 â€“ âˆ’80 <a href="https://en.wikipedia.org/wiki/Celsius">Â°C</a>)</td><td style="text-align: center;">The "thermal imaging" region, in which sensors can obtain a completely passive image of objects only slightly higher in temperature than room temperature - for example, the human body - based on thermal emissions only and requiring no illumination such as the sun, moon, or infrared illuminator. This region is also called the "thermal infrared".</td></tr><tr class="odd"><td style="text-align: center;"><a href="https://en.wikipedia.org/wiki/Far_infrared">Far infrared</a></td><td style="text-align: center;">FIR</td><td style="text-align: center;">15â€“1000 Î¼m</td><td style="text-align: center;">0.3â€“20 THz</td><td style="text-align: center;">1.2â€“83 meV</td><td style="text-align: center;">193â€“3 <a href="https://en.wikipedia.org/wiki/Kelvin">K</a> (âˆ’80.15 â€“ âˆ’270.15 <a href="https://en.wikipedia.org/wiki/Celsius">Â°C</a>)</td><td style="text-align: center;">(see also <a href="https://en.wikipedia.org/wiki/Far-infrared_laser">far-infrared laser</a> and <a href="https://en.wikipedia.org/wiki/Far_infrared">far infrared</a>)</td></tr></tbody></table><h2 id="thermal">Thermal</h2><h3 id="dataset">Dataset</h3><ol type="1"><li><p><a href="https://www.flir.com/oem/adas/adas-dataset-form/">FREE FLIR Thermal Dataset for Algorithm Training</a></p><figure><img src="/2020/10/16/hsi-pre-data-collection/image-20200716161001770.png" alt="image-20200716161001770"><figcaption aria-hidden="true">image-20200716161001770</figcaption></figure><figure><img src="/2020/10/16/hsi-pre-data-collection/image-20200716161013251.png" alt="image-20200716161013251"><figcaption aria-hidden="true">image-20200716161013251</figcaption></figure></li><li><p><a href="https://soonminhwang.github.io/rgbt-ped-detection/">KAIST Multispectral Pedestrian Detection Benchmark</a> [2018] <a href="https://www-users.cs.umn.edu/~jsyoon/JaeShin_homepage/kaist_multispectral.pdf">Paper</a></p><p>Contain day and night scenarios. Human with bounding box. RGB-Thermal pair.</p><p>The KAIST Multispectral Pedestrian Dataset consists of 95k color-thermal pairs (640x480, 20Hz) taken from a vehicle. All the pairs are manually annotated (person, people, cyclist) for the total of 103,128 dense annotations and 1,182 unique pedestrians.</p><figure><img src="/2020/10/16/hsi-pre-data-collection/teaser.png" alt="teaserImage"><figcaption aria-hidden="true">teaserImage</figcaption></figure></li></ol><h2 id="real-multispectral">Real-Multispectral</h2><ol type="1"><li><p><a href="https://sites.google.com/site/hyperspectralcolorimaging/dataset">Hyperspectral Images Database</a> [2017]</p><p><strong>Visible Range MSI</strong></p><p>NUS hyperspectral images database: 52 Outdoor Scene, 35 Indoor Scene, 33 Individual Fruit Scene, 11 Group Fruit Scene, 13 Real vs Fake Fruit Scene, 44 color Charts &amp; Patches Scene.</p></li></ol><p>It consists of various indoor and outdoor scenes taken with a SPECIM hyperspectral camera and multiple consumer cameras. For consumer cameras, camera-specific RAW format that is free of any manipulation, is available. For easier classification, this hyperspectral camera dataset has been categorized into the following categories:</p><ul><li><a href="https://sites.google.com/site/hyperspectralcolorimaging/dataset/general-scenes">General Scenes (Outdoor &amp; Indoor)</a></li><li><a href="https://sites.google.com/site/hyperspectralcolorimaging/dataset/fruits">Fruits</a></li><li><a href="https://sites.google.com/site/hyperspectralcolorimaging/dataset/color-patches">Color Charts and Patches</a></li></ul><p>Additionally, our spectral data can be visualized using the professional software by <a href="http://scyllarus.research.nicta.com.au/">Scyllarus Matlab/C++ toolbox</a>.</p><p>Relevant Code <a href="https://github.com/trangreyle/gene-color-mapping">GitHub</a></p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729094343425.png" alt="image-20200729094343425" style="zoom: 50%;"></p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729094355733.png" alt="image-20200729094355733" style="zoom:50%;"></p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729094407105.png" alt="image-20200729094407105" style="zoom:50%;"></p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729094457881.png" alt="image-20200729094457881" style="zoom:50%;"></p><ol start="2" type="1"><li><p><a href="https://biic.wvu.edu/data-sets/multispectral-dataset">Multispectral Dataset from west virginia university</a></p><ol type="1"><li>SWIR Biometrics Dataset: <strong>SWIR</strong></li><li>WVU Multispectral Face Database: Three types of camera are used: <strong>RGB, Multi(RGB+NIR), SWIR</strong></li><li>Multispectral Imaging (Iris) Database:</li></ol></li><li><p><a href="https://www.mi.t.u-tokyo.ac.jp/static/projects/mil_multispectral/">Multispectral Image Recognition</a></p><ol type="1"><li>Multi-spectral Object Detection</li></ol><p><strong>RGB, Near-infrared (NIR), Mid-wavelength infrared (MIR), and Far infrared (FIR)</strong> from the left. Objects are labeled and bounding box predicted.</p><figure><img src="/2020/10/16/hsi-pre-data-collection/det_result.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol start="2" type="1"><li>Multi-spectral Semantic Segmentation</li></ol><p>RGB-Thermal dataset with semantic segmentation</p><figure><img src="/2020/10/16/hsi-pre-data-collection/predictionExamples_good.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p><a href="https://projects.ics.forth.gr/cvrl/msi/">Multispectral Imaging (MSI) datasets</a>: Painting multispectral images. Not paired. Not ordinary objects.</p><figure><img src="/2020/10/16/hsi-pre-data-collection/image-20200727175214182.png" alt="image-20200727175214182"><figcaption aria-hidden="true">image-20200727175214182</figcaption></figure></li><li><p><a href="https://www.cs.columbia.edu/CAVE/databases/multispectral/">CAVE Multispectral Image Database</a></p><p><strong>Visible Range MSI:</strong> <strong>400nm to 700nm</strong></p><p>It only has 32 multispectral &amp; RGB image pairs... Be careful to use it. Each image has 31 bands, and they are separated.</p><table><thead><tr class="header"><th>Camera</th><th><a href="http://www.ccd.com/alta_u260.html">Cooled CCD camera (Apogee Alta U260)</a></th></tr></thead><tbody><tr class="odd"><td>Resolution</td><td>512 x 512 pixel</td></tr><tr class="even"><td>Filter</td><td><a href="http://www.cri-inc.com/products/varispec.asp">VariSpec liquid crystal tunable filter</a></td></tr><tr class="odd"><td>Illuminant</td><td>CIE Standard Illuminant D65</td></tr><tr class="even"><td>Range of wevelength</td><td>400nm - 700nm</td></tr><tr class="odd"><td>Steps</td><td>10nm</td></tr><tr class="even"><td>Number of band</td><td>31 band</td></tr><tr class="odd"><td>Focal length</td><td>f/1.4</td></tr><tr class="even"><td>Focus</td><td>Fixed (focused using 550nm image)</td></tr><tr class="odd"><td>Image format</td><td>PNG (16bit)</td></tr></tbody></table><figure><img src="/2020/10/16/hsi-pre-data-collection/teaser-20200727174750119.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p><a href="http://www.cvc.uab.es/color_calibration/Bristol_Hyper/">Bristol Hyperspectral Images Database</a> [1995]</p><p><strong>Visible Range MSI</strong></p><p>The database consists of <strong>29 scenes</strong>, each composed by <strong>31 spectrally filtered images</strong> (256 x 256 x 256 grey levels). Each scene has been compressed (zipped) and can be downloaded separately by clicking on the corresponding picture. Please bear in mind that all individual images have a 32 bytes header. To download the whole database at once, just click <a href="http://www.cvc.uab.es/color_calibration/Bristol_Hyper/brelstaff.tar.gz">here</a>.</p><p>There is some code and miscellaneous files <a href="http://www.cvc.uab.es/color_calibration/Bristol_Hyper/src/Src.zip">here</a> (these need to be run in order to make use of the images as physical measurements). A more complete description on how the images were gathered and some issues on the camera's technicalities can be found <a href="http://www.cvc.uab.es/color_calibration/Bristol_Hyper/2-TECH.pdf">here</a>.</p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729095320320.png" alt="image-20200729095320320" style="zoom:50%;"></p></li><li><p><a href="http://vision.seas.harvard.edu/hyperspec/">Harvard Real-World Hyperspectral Images</a> [2011]</p><p><strong>Visible Range MSI:</strong> <strong>420nm to 720nm</strong></p><p>The camera uses an integrated liquid crystal tunable filter and is capable of acquiring a hyperspectral image by sequentially tuning the filter through a series of <strong>31 narrow wavelength bands</strong>, each with approximately 10nm bandwidth and centered at steps of 10nm from <strong>420nm to 720nm</strong>.</p><p>The captured dataset includes images of both indoor and outdoor scenes featuring a diversity of objects, materials and scale.</p><p>This is a database of <strong>50</strong> hyperspectral images of indoor and outdoor scenes under daylight illumination, and an additional <strong>25</strong> images under artificial and mixed illumination. The images were captured using a commercial hyperspectral camera (Nuance FX, CRI Inc) with an integrated liquid crystal tunable filter capable of acquiring a hyperspectral image by sequentially tuning the filter through a series of thirty-one narrow wavelength bands, each with approximately 10nm bandwidth and centered at steps of 10nm from 420nm to 720nm. The camera is equipped with an apo-chromatic lens and the images were captured with the smallest viable aperture setting, thus largely avoiding chromatic aberration. All the images are of static scenes, with labels to mask out regions with movement during exposure.</p><p>This database is available for non-commercial research use. The data is available as a series of MATLAB .mat files (one for each image) containing both the images data and masks. Since the size of the download is large (around 5.5 + 2.2 GB), we ask that you send an e-mail to the authors at <strong>ayanc[at]eecs[dot]harvard[dot]edu</strong> for the download link. If you use this data in an academic publication, kindly cite the following paper:</p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729100019504.png" alt="image-20200729100019504" style="zoom:50%;"></p></li><li><p><a href="http://colour.cmp.uea.ac.uk/datasets/multispectral.html">UAE multispectral image database</a></p><p><strong>Visible Range MSI:</strong> <strong>400nm to 700nm</strong></p><p>Wavelength range from 400nm to 700nm at 10nm steps (31 samples). The image matrix for each object is 31xWIDTHxHEIGHT. The images have been captured in a VeriVide viewing booth with a black cloth background under CIE illuminant D75. Each image has been captured twice: once with a white tile and once without. The illuminant has been estimated from the white tile and the spectral data divided by this estimate, in order to arrive at reflectance measurements. The images below are displayed sRGB values rendered under a neutral daylight (D65).</p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729100842353.png" alt="image-20200729100842353" style="zoom:33%;"></p></li><li><p><a href="http://personalpages.manchester.ac.uk/staff/david.foster/default.html">Manchester hyperspectral images Dataset<strong>s</strong></a></p><p><strong>Visible Range MSI:</strong> 400, 410, ..., 720 nm</p><p>Multiple MSI datasets included:</p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729101027937.png" alt="image-20200729101027937" style="zoom:50%;"></p><ul><li><p><a href="https://personalpages.manchester.ac.uk/staff/david.foster/Time-Lapse_HSIs/Time-Lapse_HSIs_2015.html">Time-Lapse Hyperspectral Radiance Images of Natural Scenes 2015</a></p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729101135099.png" alt="image-20200729101135099" style="zoom:33%;"></p></li><li><p><a href="https://personalpages.manchester.ac.uk/staff/david.foster/Local_Illumination_HSIs/Local_Illumination_HSIs_2015.html">Hyperspectral Images for Local Illumination in Natural Scenes 2015</a></p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729101232518.png" alt="image-20200729101232518" style="zoom:50%;"></p></li><li><p><a href="https://personalpages.manchester.ac.uk/staff/david.foster/Hyperspectral_images_of_natural_scenes_02.html">Hyperspectral Images of Natural Scenes 2002</a></p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729101343922.png" alt="image-20200729101343922" style="zoom:50%;"></p></li><li><p><a href="https://personalpages.manchester.ac.uk/staff/david.foster/Hyperspectral_images_of_natural_scenes_04.html">Hyperspectral Images of Natural Scenes 2004</a></p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729101441578.png" alt="image-20200729101441578" style="zoom:50%;"></p></li></ul></li><li><p><a href="https://pythonhosted.org/bob.db.cbsr_nir_vis_2/">BOB NIR+VIS Face Database</a> [2013]</p><p>It consists of 725 subjects in total. There are [1-22] VIS and [5-50] NIR face images per subject. The eyes positions are also distributed with the images.</p><p><img src="/2020/10/16/hsi-pre-data-collection/database.png" alt="_images/database.png" style="zoom:33%;"></p></li><li><p><a href="http://icvl.cs.bgu.ac.il/hyperspectral/">ICVL hyperspectral database</a></p></li></ol><p><strong>RGB+NIR Range MSI:</strong> Images were collected at 1392Ã—1300 spatial resolution over 519 spectral bands (<strong>400-1,000nm</strong> at roughly 1.25nm increments)</p><p>The database images were acquired using a Specim PS Kappa DX4 hyperspectral camera and a rotary stage for spatial scanning. At this time it contains 201 images and will continue to grow progressively. For your convenience, <strong>.mat</strong> files are provided, downsampled to 31 spectral channels from 400nm to 700nm at 10nm increments.</p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729102126434.png" alt="image-20200729102126434" style="zoom:50%;"></p><ol start="11" type="1"><li><p><a href="http://colorimaginglab.ugr.es/pages/Data">University of Granada hyperspectral image database</a></p><p><strong>RGB+NIR Range MSI:</strong> Most of the images have spatial resolution of 1000 Ã— 900 pixels. The spectral range is from <strong>400 nm to 1000</strong> nm in 10 nm intervals, resulting in total 61 channels.</p><p><img src="/2020/10/16/hsi-pre-data-collection/image-20200729102332515.png" alt="image-20200729102332515" style="zoom:50%;"></p></li><li><p><a href="http://www.cs.cmu.edu/~ILIM/projects/IM/MSPowder/">SWIRPowder</a>: A 400-1700nm Multispectral Dataset with 100 Powders on Complex Backgrounds</p><p><strong>SWIR(Multi)+RGB+NIR</strong></p><figure><img src="/2020/10/16/hsi-pre-data-collection/result.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2020/10/16/hsi-pre-data-collection/illustration_1.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p><a href="http://www.ok.sc.e.titech.ac.jp/res/MSI/MSIdata31.html">TokyoTech 31-band Hyperspectral Image Dataset</a> [2015]</p><p><strong>Visible Range MSI:</strong> <strong>420nm to 720nm</strong></p><p>Colorful objects with rich textures 30 scenes from 420nm to 720nm at 10nm intervals</p><figure><img src="/2020/10/16/hsi-pre-data-collection/MSimage.png" alt="MSimage"><figcaption aria-hidden="true">MSimage</figcaption></figure><figure><img src="/2020/10/16/hsi-pre-data-collection/image-20200729094232057.png" alt="image-20200729094232057"><figcaption aria-hidden="true">image-20200729094232057</figcaption></figure></li></ol><h2 id="reference">Reference</h2><ul><li><a href="https://jbthomas.org/TechReport/CIC-shortcourseSFA-2017.pdf">Spectral Filter Arrays Technology</a></li><li><a href="https://en.wikipedia.org/wiki/Infrared">Infrared WiKi</a></li></ul><h2 id="electromagnetic-wave-classification">Electromagnetic Wave Classification</h2><p>Î³ = <a href="https://zh.wikipedia.org/wiki/ä¼½é¦¬å°„ç·š">ä¼½é©¬å°„çº¿</a> <strong><a href="https://zh.wikipedia.org/wiki/Xå°„ç·š">Xå°„çº¿</a>ï¼š</strong> HX = ç¡¬<a href="https://zh.wikipedia.org/wiki/Xå°„ç·š">Xå°„çº¿</a> SX = è½¯Xå°„çº¿ <strong><a href="https://zh.wikipedia.org/wiki/ç´«å¤–ç·š">ç´«å¤–çº¿</a>ï¼š</strong> EUV = æç«¯<a href="https://zh.wikipedia.org/wiki/ç´«å¤–ç·š">ç´«å¤–çº¿</a> NUV = è¿‘ç´«å¤–çº¿ <strong><a href="https://zh.wikipedia.org/wiki/ç´…å¤–ç·š">çº¢å¤–çº¿</a>ï¼š</strong> NIR = è¿‘<a href="https://zh.wikipedia.org/wiki/ç´…å¤–ç·š">çº¢å¤–çº¿</a> MIR =ä¸­çº¢å¤–çº¿ FIR = <a href="https://zh.wikipedia.org/wiki/é ç´…å¤–ç·š">è¿œçº¢å¤–çº¿</a></p><p>Typically we define near infrared (<em>NIR</em>) from 780 nm to 1400 nm and shortwave infrared (<em>SWIR</em>) from 1400 nm to 3000 nm.</p><p><strong><a href="https://zh.wikipedia.org/wiki/å¾®æ³¢">å¾®æ³¢</a>ï¼š</strong> EHF = <a href="https://zh.wikipedia.org/wiki/æ¥µé«˜é »">æé«˜é¢‘</a> SHF = <a href="https://zh.wikipedia.org/wiki/è¶…é«˜é »">è¶…é«˜é¢‘</a> UHF = <a href="https://zh.wikipedia.org/wiki/ç‰¹é«˜é »">ç‰¹é«˜é¢‘</a> <strong><a href="https://zh.wikipedia.org/wiki/ç„¡ç·šé›»æ³¢">æ— çº¿ç”µæ³¢</a>ï¼š</strong> VHF = <a href="https://zh.wikipedia.org/wiki/ç”šé«˜é »">ç”šé«˜é¢‘</a> HF = <a href="https://zh.wikipedia.org/wiki/é«˜é »">é«˜é¢‘</a> MF = <a href="https://zh.wikipedia.org/wiki/ä¸­é »">ä¸­é¢‘</a> LF = <a href="https://zh.wikipedia.org/wiki/ä½é »">ä½é¢‘</a> VLF = <a href="https://zh.wikipedia.org/wiki/ç”šä½é¢‘">ç”šä½é¢‘</a> ULF = <a href="https://zh.wikipedia.org/wiki/ç‰¹ä½é »">ç‰¹ä½é¢‘</a> ELF = <a href="https://zh.wikipedia.org/wiki/æ¥µä½é »">æä½é¢‘</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;equipment&quot;&gt;Equipment&lt;/h2&gt;
&lt;h3 id=&quot;flir-blackfly-s-rgb-camera&quot;&gt;FLIR Blackfly S RGB Camera&lt;/h3&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;Spectral Range:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Blue: 460 nm&lt;/li&gt;
&lt;li&gt;Green: 530 nm&lt;/li&gt;
&lt;li&gt;Red: 625 nm&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Resolution: 720 Ã— 540&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;FPS: 522&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;</summary>
    
    
    
    
    <category term="hsi" scheme="https://www.miracleyoo.com/tags/hsi/"/>
    
    <category term="data" scheme="https://www.miracleyoo.com/tags/data/"/>
    
    <category term="camera" scheme="https://www.miracleyoo.com/tags/camera/"/>
    
    <category term="optics" scheme="https://www.miracleyoo.com/tags/optics/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥ç³»ç»˜ç”»æ„å›¾</title>
    <link href="https://www.miracleyoo.com/2020/09/12/illustration-composition/"/>
    <id>https://www.miracleyoo.com/2020/09/12/illustration-composition/</id>
    <published>2020-09-13T00:48:14.000Z</published>
    <updated>2021-03-12T23:12:02.117Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ„å›¾æ³•+å‡ºé•œæ¯”ä¾‹+äººç‰©åŠ¨æ€=å¥½çš„æ„å›¾</strong></p><h2 id="å¸¸è§å•äººæ„å›¾">å¸¸è§å•äººæ„å›¾</h2><h3 id="å¯¹ç§°æ„å›¾">å¯¹ç§°æ„å›¾</h3><p>ä¸»è¦åŒ…å«ï¼šå·¦å³å¯¹ç§°ï¼Œå¯¹è§’çº¿å¯¹ç§°</p><p>ç›¸å¯¹æ¯”è¾ƒä¸­è§„ä¸­çŸ©ï¼Œä½†æ˜¯åŒæ ·çš„ï¼Œé™åˆ¶ä¼šæ¯”è¾ƒå¤§ï¼Œä¹Ÿéœ€è¦æ›´å¤šç»†èŠ‚ä¸Šçš„<strong>ä¸å¯¹ç§°</strong>æ¥ä¸­å’Œæ„å›¾ä¸Šçš„å¯¹ç§°ã€‚è¿™äº›ä¸å¯¹ç§°å…ƒç´ å¾€å¾€æ¥è‡ªäºï¼šäººç‰©åŠ¨æ€ã€é“å…·ã€èƒŒæ™¯å…ƒç´ ã€‚</p><p><img src="/2020/09/12/illustration-composition/image-20200912154217731.png" alt="image-20200912154217731" style="zoom:50%;"></p><span id="more"></span><h3 id="ä¹å®«æ ¼æ„å›¾">ä¹å®«æ ¼æ„å›¾</h3><p>å°†é‡è¦çš„ç‚¹ç½®äºä¹å®«æ ¼çš„ç„¦ç‚¹ä¸Šï¼Œèµ·åˆ°å¼ºåŒ–å…³é”®è¦ç´ çš„ä½œç”¨ï¼Œå¦‚è„¸éƒ¨ã€å…³èŠ‚ç­‰ã€‚</p><figure><img src="/2020/09/12/illustration-composition/image-20200912153443124.png" alt="image-20200912153443124"><figcaption aria-hidden="true">image-20200912153443124</figcaption></figure><h3 id="é»„é‡‘æ¯”ä¾‹æ„å›¾">é»„é‡‘æ¯”ä¾‹æ„å›¾</h3><p>Bæ ¼è¾ƒé«˜ï¼Œäººç‰©çš„äººä½“æ›²çº¿å’Œé»„é‡‘åˆ†å‰²çº¿å¥‘åˆï¼Œèºæ—‹æ­£ä¸­å¤®ç¼©äºäººç‰©è„¸éƒ¨ã€‚è¯¥æ„å›¾è¾ƒä¸ºæœ‰ç‰¹è‰²ï¼Œæœ‰ç€ä¸å¯¹ç§°çš„ç¾æ„Ÿã€‚</p><p><img src="/2020/09/12/illustration-composition/image-20200912153516507.png" alt="image-20200912153516507" style="zoom:50%;"></p><h3 id="å¥½ç”¨æŠ€å·§">å¥½ç”¨æŠ€å·§</h3><ol type="1"><li><p>äººç‰©åŠ¨æ€å’Œé“å…·éƒ½å¯ä»¥è¢«ç”¨æ¥è¡¨è¾¾åŠ¨æ€ã€‚å¦‚æœäººä½“åŠ¨æ€æ¯”è¾ƒå¤æ‚çµåŠ¨ï¼Œè¡£ç‰©å¯ä»¥ç›¸å¯¹ç®€å•ç‚¹ï¼›è€Œå¦‚æœäººç‰©åŠ¨æ€æƒ³ç”»çš„ç®€å•ä¿å®ˆä¸€ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨é“å…·ï¼ˆé•¿è€Œé£˜é€¸çš„å¤´å‘ã€å¤§è€ŒèˆåŠ¨çš„è£™æ‘†ã€é•¿é•¿çš„å¸ƒæ–™...ï¼‰</p><p><img src="/2020/09/12/illustration-composition/image-20200912172118092.png" alt="image-20200912172118092" style="zoom:50%;"></p></li><li><p>åˆ©ç”¨äººç‰©åŠ¨ä½œå¸¦æ¥åŠ¨æ€æ„Ÿï¼ˆé£ï¼‰-&gt; å¤´å‘å’Œè£™æ‘†éšé£é£˜åŠ¨ï¼Œäººç‰©è·³èµ·æ¥æˆ–æµ®äºç©ºä¸­ã€‚è¿™æ ·å¯ä»¥è®©ç”»é¢çœ‹èµ·æ¥æ›´æœ‰æ´»åŠ›å’Œç”Ÿå‘½åŠ›ã€‚</p></li></ol><p><img src="/2020/09/12/illustration-composition/image-20200912172201727.png" alt="image-20200912172201727" style="zoom:50%;"></p><ol type="1"><li></li></ol><h2 id="å‡ºé•œæ¯”ä¾‹">å‡ºé•œæ¯”ä¾‹</h2><p>ä¸€èˆ¬çš„äººç‰©åœ¨æ’ç”»ä¸­çš„å‡ºé•œæ¯”ä¾‹ä¸ºï¼š</p><ol type="1"><li><p>è…°éƒ¨ä»¥ä¸Šï¼šåˆ»ç”»éƒ¨åˆ†æ›´å°‘ï¼Œä½†æ˜¯ç›¸å¯¹çš„ï¼Œå¯¹å¤´éƒ¨å’Œä¸Šèº«è¡£ç‰©çš„åˆ»ç”»å°±ä¼šè¦æ±‚æ›´é«˜ã€‚</p><p><img src="/2020/09/12/illustration-composition/image-20200912153749506.png" alt="image-20200912153749506" style="zoom:50%;"></p></li><li><p>å¤§è…¿ä»¥ä¸Šï¼šå¯ä»¥åˆ»ç”»å‡ ä¹å…¨éƒ¨çš„äººç‰©åŠ¨æ€ã€‚</p><p>ç‰¹ç‚¹ï¼šæ–¹ä¾¿è¡¨ç°èº¯å¹²åŠ¨æ€ï¼Œæ–¹ä¾¿è¡¨è¾¾é€è§†ã€‚</p><p><img src="/2020/09/12/illustration-composition/image-20200912153853701.png" alt="image-20200912153853701" style="zoom:50%;"></p></li><li><p>å…¨èº«ï¼šç”±äºäººä½“æ˜¯ä¸€ä¸ªç»†é•¿çš„ç‰©ä½“ï¼Œå¦‚æœè¦å±•ç°å…¨èº«å¹¶ä¸»è¦ç”±äººç‰©å¡«æ»¡ç”»é¢çš„è¯ï¼Œéœ€è¦ä½œå‡ºå¾ˆå¤§çš„åŠ¨ä½œï¼ˆå¼¯æ›²ï¼‰å’Œå¤§è§’åº¦çš„é€è§†ã€‚</p><p><img src="/2020/09/12/illustration-composition/image-20200912153932298.png" alt="image-20200912153932298" style="zoom:50%;"></p></li></ol><p>ç«–ç‰ˆæ’å›¾ï¼ˆA4ï¼‰ä¸‰ç§æ¯”ä¾‹éƒ½å¾ˆå¤šï¼Œè€Œæ¨ªç‰ˆæ’å›¾ï¼ˆ1080pï¼‰åˆ™åå…¨èº«ã€‚</p><h2 id="å¸¸è§åŒäººæ„å›¾">å¸¸è§åŒäººæ„å›¾</h2><p>æ— è®ºä½¿ç”¨ä»€ä¹ˆæ„å›¾ï¼Œä¸¤ä¸ªäººä¹‹é—´ä¸€å®šæ˜¯æœ‰æŸç§è¾ƒä¸ºäº²è¿‘çš„å…³ç³»çš„ã€‚ç”±äºæœ‰ä¸æ­¢ä¸€ä¸ªäººï¼Œæ­¤æ—¶çš„äººç‰©åŠ¨æ€è‡ªç”±åº¦ä¼šç›¸å¯¹é™ä½ï¼Œè€Œå¯¹æ„å›¾æ³•çš„ä¾èµ–æ›´é«˜ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦æ›´åŠ çµæ´»å‡†ç¡®çš„é€è§†ã€‚ç›¸æ¯”å•äººï¼Œç”»é¢ä¼šæ›´åŠ ä¸°å¯Œï¼Œä¹Ÿä¼šä¾§é‡è¾¹çº¿äººç‰©ä¹‹é—´çš„è”ç³»ã€äº’åŠ¨ã€‚</p><h3 id="å¹³åˆ†å‹">å¹³åˆ†å‹</h3><p>åå®ç”¨å‹ã€‚</p><p>å¾€å¾€ä¼šæœ‰æŸç§å½¢å¼çš„è‚¢ä½“æ¥è§¦ï¼Œè¿™æ ·è®©å…¨å›¾æ˜¾å¾—æ›´åŠ è‡ªç„¶ã€‚å¦‚æœä¸¤ä¸ªäººç«™åœ¨ä¸€èµ·åˆæ²¡æœ‰ä»»ä½•äº’åŠ¨ï¼Œç”»é¢ä¼šæ¯”ä»·å¥‡æ€ªã€‚</p><p>å¦‚æœä¸¤ä¸ªäººçš„èº«é«˜ä½“å‹éƒ½è¿‘ä¼¼ï¼Œé‚£è‡ªç„¶æ˜¯æœ€å¥½ï¼›å¦‚æœèº«é«˜ä½“å‹æœ‰åˆ«ï¼Œé‚£ä¹ˆåˆ™éœ€è¦é€šè¿‡æŸäº›éƒ¨åˆ†ï¼ˆæ¢å‡ºçš„å¤´éƒ¨ï¼Œé£˜é€¸çš„å¤´å‘ã€çªå‡ºçš„è†ç›–ã€èƒŒåŒ…ç­‰é“å…·ï¼‰æ¥å¹³è¡¡ç”»é¢ã€‚</p><p>ç‰¹ç‚¹ï¼šç”»é¢æ˜“äºå¹³è¡¡ã€å®¹æ˜“ç†è§£å¥½ä¸Šæ‰‹ã€‚å¯¹åŠ¨æ€è¦æ±‚ä¸é«˜ã€‚</p><p><img src="/2020/09/12/illustration-composition/image-20200912155936519.png" alt="image-20200912155936519" style="zoom:50%;"></p><p><img src="/2020/09/12/illustration-composition/image-20200912161613370.png" alt="image-20200912161613370" style="zoom:50%;"></p><h3 id="å…«å¦å‹">å…«å¦å‹</h3><p>åé™è°§ç¾å‹ï¼Œå¼ºè°ƒåŒäººå…³ç³»ã€‚</p><p>ç‰¹ç‚¹ï¼šä¸¤äººä¹‹é—´å¾€å¾€ä¼šæœ‰äº¤å‰å…³ç³»ã€‚æ„å›¾æœ‰ç‰¹å¾ï¼Œç”»é¢ä¸å®¹æ˜“å•è°ƒã€‚</p><p>è¦æ±‚ï¼šå¯¹äººç‰©åŠ¨æ€è¦æ±‚æ¯”è¾ƒé«˜ã€‚</p><p><img src="/2020/09/12/illustration-composition/image-20200912161749570.png" alt="image-20200912161749570" style="zoom:50%;"></p><p><img src="/2020/09/12/illustration-composition/image-20200912161941253.png" alt="image-20200912161941253" style="zoom:50%;"></p><h3 id="ç©ºé—´æ„å›¾">ç©ºé—´æ„å›¾</h3><p>åæ°›å›´ã€‚</p><p>ç‰¹ç‚¹ï¼šä¸¤ä¸ªäººç‰©ç”±ä¸æ‘„åƒæœºé•œå¤´çš„è¿œè¿‘äº§ç”Ÿäº†è¿œè¿‘ã€å¤§å°çš„åŒºåˆ«ã€‚è®©ç”»é¢çš„ç©ºé—´æ„Ÿæ›´è¶³ï¼Œä»è€Œå¯¹åŠ¨æ€è¦æ±‚ä¸é«˜ã€‚</p><p><img src="/2020/09/12/illustration-composition/image-20200912162117364.png" alt="image-20200912162117364" style="zoom:50%;"></p><h2 id="å¸¸è§å¤šäººæ„å›¾">å¸¸è§å¤šäººæ„å›¾</h2><p>æ™®é€šæ’ç”»ä¸­ä½¿ç”¨ç›¸å¯¹è¾ƒå°‘ï¼Œå¤šç”¨äºåŠ¨ç”»æµ·æŠ¥ã€æ¸¸æˆç™»å½•ç•Œé¢ã€‚</p><h3 id="æ²¡æœ‰ç»å¯¹ä¸»è§’çš„æ—¶å€™">æ²¡æœ‰ç»å¯¹ä¸»è§’çš„æ—¶å€™</h3><h4 id="å¹¶æ’æ„å›¾åŠå…¶å˜å½¢">å¹¶æ’æ„å›¾åŠå…¶å˜å½¢</h4><p>äººç‰©åŸºæœ¬åˆ†å¸ƒåœ¨åŒä¸€è·ç¦»ï¼Œå¤„äºåŒä¸€ç›´/æ›²çº¿ä¸Šã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ol type="1"><li>æœ‰ç€æ˜æ˜¾èµ°åŠ¿ï¼ˆä¸ºäº†è®©ç”»é¢æœ‰åºï¼‰</li><li>é›†ä¸­</li></ol><figure><img src="/2020/09/12/illustration-composition/image-20200912162754564.png" alt="image-20200912162754564"><figcaption aria-hidden="true">image-20200912162754564</figcaption></figure><p><img src="/2020/09/12/illustration-composition/image-20200912162706717.png" alt="image-20200912162706717" style="zoom:80%;"></p><h3 id="æœ‰ç»å¯¹ä¸»è§’">æœ‰ç»å¯¹ä¸»è§’</h3><p>ä»¥ä¸»è§’ä¸ºä¸­å¿ƒæ‰©æ•£ã€‚</p><p><img src="/2020/09/12/illustration-composition/image-20200912163421619.png" alt="image-20200912163421619" style="zoom:50%;"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;æ„å›¾æ³•+å‡ºé•œæ¯”ä¾‹+äººç‰©åŠ¨æ€=å¥½çš„æ„å›¾&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å¸¸è§å•äººæ„å›¾&quot;&gt;å¸¸è§å•äººæ„å›¾&lt;/h2&gt;
&lt;h3 id=&quot;å¯¹ç§°æ„å›¾&quot;&gt;å¯¹ç§°æ„å›¾&lt;/h3&gt;
&lt;p&gt;ä¸»è¦åŒ…å«ï¼šå·¦å³å¯¹ç§°ï¼Œå¯¹è§’çº¿å¯¹ç§°&lt;/p&gt;
&lt;p&gt;ç›¸å¯¹æ¯”è¾ƒä¸­è§„ä¸­çŸ©ï¼Œä½†æ˜¯åŒæ ·çš„ï¼Œé™åˆ¶ä¼šæ¯”è¾ƒå¤§ï¼Œä¹Ÿéœ€è¦æ›´å¤šç»†èŠ‚ä¸Šçš„&lt;strong&gt;ä¸å¯¹ç§°&lt;/strong&gt;æ¥ä¸­å’Œæ„å›¾ä¸Šçš„å¯¹ç§°ã€‚è¿™äº›ä¸å¯¹ç§°å…ƒç´ å¾€å¾€æ¥è‡ªäºï¼šäººç‰©åŠ¨æ€ã€é“å…·ã€èƒŒæ™¯å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2020/09/12/illustration-composition/image-20200912154217731.png&quot; alt=&quot;image-20200912154217731&quot; style=&quot;zoom:50%;&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="art" scheme="https://www.miracleyoo.com/tags/art/"/>
    
    <category term="painting" scheme="https://www.miracleyoo.com/tags/painting/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥ç³»äººä½“ç»˜ç”»æ€»ç»“</title>
    <link href="https://www.miracleyoo.com/2020/08/21/illustration-human-body/"/>
    <id>https://www.miracleyoo.com/2020/08/21/illustration-human-body/</id>
    <published>2020-08-22T00:50:24.000Z</published>
    <updated>2021-03-12T22:51:22.670Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ—¥ç³»ç”»é£ä¸ç°å®çš„åŒºåˆ«">æ—¥ç³»ç”»é£ä¸ç°å®çš„åŒºåˆ«</h2><ul><li>çœŸå®çš„â€œ<strong>ä¸‰åº­äº”çœ¼</strong>â€ï¼š<ul><li>ä¸‰åº­ï¼š<strong>d(å‘é™…çº¿, çœ‰éª¨) = d(çœ‰éª¨, é¼»åº•) = d(é¼»åº•, ä¸‹å·´)</strong></li><li>äº”çœ¼ï¼š<strong>çœ¼å®½=çœ¼é—´è·=çœ¼ç›åˆ°é¢éƒ¨è½®å»“çš„è·ç¦»</strong></li></ul></li><li>çœ¼ç›çš„é•¿åº¦ç›¸å¯¹çœŸå®æ¯”ä¾‹æ›´é•¿çš„ï¼Œå¹¶ä¸ç¬¦åˆä¸‰åº­äº”çœ¼ä¸­çš„äº”çœ¼æ¯”ä¾‹ã€‚è€Œæ˜¯çœ¼ç›å®½åº¦å’Œçœ¼é—´è·å¤§ä½“ç›¸åŒä¸”è¾ƒé•¿ï¼Œè€Œçœ¼ç›ä¸¤è¾¹åˆ°è„¸éƒ¨è½®å»“çš„è·ç¦»æ›´çŸ­ã€‚</li></ul><p><img src="/2020/08/21/illustration-human-body/Screenshot%2520-%25202020-06-12%252022.46.34.png" alt="Screenshot - 2020-06-12 22.46.34" style="zoom:50%;"></p><span id="more"></span><h2 id="æ—¥ç³»ç”·ç”Ÿä¸å¥³ç”Ÿåˆ»ç”»çš„ç‰¹ç‚¹ä¸åŒºåˆ«">æ—¥ç³»ç”·ç”Ÿä¸å¥³ç”Ÿåˆ»ç”»çš„ç‰¹ç‚¹ä¸åŒºåˆ«</h2><h3 id="å¥³ç”Ÿ">å¥³ç”Ÿ</h3><ul><li>å¤´éƒ¨çš„é«˜å®½æ¯”åå°ï¼Œè„¸éƒ¨åçŸ­ã€‚</li><li>é¢éƒ¨ç›¸å¯¹è¾ƒåœ†ï¼Œä½¿ç”¨æ›´å¤šçš„æ›²çº¿ã€‚</li><li>äº”å®˜ç›¸å¯¹ä¸‹ç§»ï¼Œç•™å‡ºæ›´é«˜çš„é¢å¤´æ”¾åˆ˜æµ·ã€‚</li><li>çœ¼ç›æ˜¯åˆ»ç”»çš„é‡ç‚¹ï¼Œå®ƒå¾ˆå¤§ã€‚</li><li>çœ¼å‹ååœ†çš„å±…å¤šã€‚</li><li>å¼±åŒ–é¼»å­ã€å˜´å·´ã€<strong>çœ‰æ¯›</strong>ç­‰çš„åˆ»ç”»ã€‚</li><li>çœ‰æ¯›å’Œçœ¼ç›é—´è·è¾ƒå¤§ã€‚</li><li>è¡¨æƒ…æ–¹é¢æ›´å¤šçš„è¡¨ç°å‡ºèŒã€å¯çˆ±ã€ç”œç¾ï¼Œæ€»ä½“åç¾å‹ã€‚</li></ul><h3 id="ç”·ç”Ÿ">ç”·ç”Ÿ</h3><ul><li>å¤´éƒ¨çš„é«˜å®½æ¯”æ›´å¤§ï¼Œè„¸éƒ¨è¾ƒé•¿ï¼Œæˆ–æ˜¯æ›´åå‘çœŸå®æ¯”ä¾‹ã€‚</li><li>é¢éƒ¨å¤–è½®å»“ä½¿ç”¨æ›´å¤šçš„ç›´çº¿ã€é”åˆ©çš„çº¿æ¡ã€‚</li><li>è„¸å‹æ›´æ–¹æ­£/ç›´ã€‚</li><li>çœ¼ç›ç›¸å¯¹å¥³ç”Ÿæ¥è¯´è¾ƒå°ï¼Œæˆ–è¯´è¾ƒç»†ï¼Œé«˜åº¦è¾ƒä½ï¼Œä½†é•¿åº¦è¿˜æ˜¯ç›¸å¯¹çœŸå®æ¯”ä¾‹æ›´é•¿çš„ï¼Œå¹¶ä¸ç¬¦åˆä¸‰åº­äº”çœ¼ä¸­çš„äº”çœ¼æ¯”ä¾‹ï¼Œè€Œæ˜¯çœ¼ç›å®½åº¦å’Œçœ¼é—´è·å¤§ä½“ç›¸åŒä¸”è¾ƒé•¿ï¼Œè€Œçœ¼ç›ä¸¤è¾¹åˆ°è„¸éƒ¨è½®å»“çš„è·ç¦»æ›´çŸ­ã€‚</li><li>çœ¼å‹åå¹³è¡Œå››è¾¹å½¢çš„å±…å¤šã€‚</li><li>åŒæ ·çœ‰æ¯›ä¹Ÿè¢«ç€é‡åˆ»ç”»ï¼Œæ„åœ¨è¡¨ç°ç”·ç”Ÿçš„è‹±æ°”ã€å¸…æ°”ç­‰ã€‚</li><li>çœ‰æ¯›å’Œçœ¼ç›é—´è·å°ã€‚</li><li>å¼±åŒ–é¼»å­å’Œå˜´å·´çš„åˆ»ç”»ï¼Œä½†åˆæ¯”å¥³ç”Ÿå¼ºä¸€ç‚¹ï¼Œå¥³ç”Ÿå¾€å¾€å¯ä»¥å½’ç»“ä¸ºä¸€ä¸ªç‚¹ï¼Œè€Œç”·ç”Ÿè¿˜æ˜¯è¦åˆ»ç”»çš„ã€‚ä¸­è€å¹´ç”·äººé¼»å­ç”šè‡³éå¸¸æ˜æ˜¾ã€‚</li><li>è¡¨æƒ…æ–¹é¢æ›´åå‘äºé…·ã€å¸…ã€å†·ã€ä¸è€çƒ¦çš„æ„Ÿè§‰ã€‚</li></ul><h2 id="æ—¥ç³»å¹´é¾„å¯¹é¢éƒ¨ç”»æ³•çš„å½±å“">æ—¥ç³»å¹´é¾„å¯¹é¢éƒ¨ç”»æ³•çš„å½±å“</h2><h3 id="ç”·ç”Ÿ-1">ç”·ç”Ÿ</h3><ul><li>å¹´è½»äººçš„ç”¨çº¿ä¼šç›¸å¯¹åœ†æ¶¦ï¼Œè¶Šå¹´é•¿çº¿æ¡è¶Šé”‹åˆ©ã€‚</li><li>å¹´é•¿è€…çš„é¢éƒ¨è½¬æŠ˜ç‚¹ä¼šæ›´å‘ä¸Šéƒ¨é æ‹¢ï¼Œäº”å®˜ä¹Ÿç›¸å¯¹å‘ä¸Šã€‚</li><li>å¹´é•¿è€…çš„çœ¼ç›æ›´çª„ï¼ŒåŒæ ·æ˜¯æ›´åŠ é”åˆ©çš„æ„Ÿè§‰ï¼›è€Œå¹´è½»äººå¯ä»¥ç¨å¾®çœ¼ç›å¤§ä¸€ç‚¹ï¼Œé«˜ä¸€ç‚¹ï¼Œåœ†ä¸€ç‚¹ã€‚</li><li>å¹´é•¿è€…çš„çœ‰æ¯›ä¼šæ›´å°–é”æœ‰åŠ›ã€‚</li><li>å¹´é•¿è€…çš„ä¸‹å·´ä¼šæ›´å®½ä¸€äº›ã€‚</li></ul><p><img src="/2020/08/21/illustration-human-body/image-20200613182651960.png" alt="image-20200613182651960" style="zoom:50%;"></p><h3 id="å¥³ç”Ÿ-1">å¥³ç”Ÿ</h3><ul><li>åŒæ ·ï¼Œå¹´é•¿è€…æœ€é‡è¦çš„æ˜¯è„¸éƒ¨è½¬æŠ˜ç‚¹ä¸Šç§»ã€‚</li><li>å¹´é•¿è€…äº”å®˜ä¸Šç§»ã€‚</li><li>å¹´é•¿è€…çœ¼ç›å˜çª„ã€‚</li><li>æ›²çº¿æ›´åŠ æœ‰åŠ›ã€‚</li></ul><p><img src="/2020/08/21/illustration-human-body/image-20200613184807549.png" alt="image-20200613184807549" style="zoom:50%;"></p><h3 id="æ€»ç»“">æ€»ç»“</h3><ul><li>åœ¨å¹´é¾„å˜åŒ–çš„åˆ»ç”»ä¸Šï¼Œæ›´åŠ ç€é‡åœ°å»åˆ»ç”»æ€§åˆ«çš„ç‰¹ç‚¹ï¼Œå¡ç‚¹å’Œè½¬æŠ˜æ›´é‡ã€‚</li></ul><p><img src="/2020/08/21/illustration-human-body/image-20200613185226577.png" alt="image-20200613185226577" style="zoom:50%;"></p><ul><li>è§’è‰²è®¾å®šæ˜¯ä¸€ä¸ªæŠŠæ–‡å­—è®¾å®šè½¬ä¸ºæ ‡ç­¾åŒ–çš„é¢„è®¾äººä½“ç‰¹å¾çš„è¿‡ç¨‹ã€‚æ¯”å¦‚ä¸åŒçš„çœ¼å‹ã€ä¸åŒçš„ç«æ¯›è¡¨ç°ã€ä¸åŒçš„çœ‰æ¯›è¡¨ç°ã€ä¸åŒçš„é¢éƒ¨å¤–è½®å»“ç­‰ã€‚</li></ul><h2 id="çœ‰çœ¼ç»“æ„">çœ‰çœ¼ç»“æ„</h2><p><img src="/2020/08/21/illustration-human-body/image-20200614093652461.png" alt="image-20200614093652461" style="zoom:50%;"></p><ul><li>ç”·ç”Ÿçœ‰æ¯›ç²—ï¼Œç¦»çœ¼ç›è¿‘ã€‚ç”»çš„æ—¶å€™è¦å‹ä½ã€å¾€ä¸‹æ”¾ã€‚</li><li>å¥³ç”Ÿçœ‰æ¯›ç»†ï¼Œç¦»çœ¼ç›è¿œã€‚ç”»çš„æ—¶å€™è¦æé«˜ã€å¾€ä¸Šèµ°ã€‚å¥³ç”Ÿçœ‰æ¯›å¾ˆå¤šæ—¶å€™æ›´åƒæ˜¯ä¸€æ¡çº¿ã€‚</li><li>çœ‰çœ¼çš„ä¾§è§†å›¾å¤§è‡´æ˜¯æ­£è§†å›¾å®½åº¦çš„<span class="math inline">\(\frac{1}{2}\)</span>ã€‚</li></ul><p><img src="/2020/08/21/illustration-human-body/image-20200614094501368.png" alt="image-20200614094501368" style="zoom:50%;"></p><h2 id="å£é¼»çš„ç”»æ³•">å£é¼»çš„ç”»æ³•</h2><ul><li>å˜´è§’å¤„è¦å¡ç‚¹ï¼ˆåŠ é‡ï¼‰ï¼Œæ— è®ºå˜´å¤šä¹ˆå°ï¼Œæ”¹å¡ç‚¹çš„éƒ½è¦å¡ã€‚å˜´çš„ä¸­é—´è¦ç›¸å¯¹ç”»çš„è¾ƒè™šï¼Œè‹¥éšè‹¥ç°æ„Ÿè§‰ã€‚</li><li>ä¸çœŸå®çš„äººä¸åŒï¼Œæ—¥ç³»ç”»æ³•ä¸­å¾€å¾€ä¸åˆ»ç”»ä¸Šå˜´å”‡ï¼Œä½†æœ‰æ—¶è¿˜æ˜¯ä¼šæŠŠä¸‹å˜´å”‡ç”¨ä¸€æ ¹çº¿å¸¦è¿‡ã€‚</li><li>å¼ å¼€çš„å˜´æœ€å¥½ç”»å‡ºç‰™é½¿å’ŒèˆŒå¤´ã€‚</li><li>å¾®ç¬‘æœ€å¥½ç”»å‡ºå·¦å³æ–œå‘ä¸‹ç®­å¤´çš„å½¢çŠ¶ã€‚åŒç†ï¼Œå¾®å¾®å™˜å˜´è¦ç”»å‡ºå·¦å³æ–œå‘ä¸Šç®­å¤´çš„å½¢çŠ¶ã€‚</li><li>ä¾§é¢å¼ å¼€çš„å˜´æ˜¯æ¢¯å½¢çš„ã€‚</li><li>é¼»å°–ä¹Ÿéœ€è¦å¡ç‚¹ã€‚</li><li>ç”·æ€§çš„é¼»å­é•¿ï¼Œå˜´å·´å®½ï¼›å¥³æ€§çš„é¼»å­å°ã€çŸ­ï¼Œå˜´å·´çª„ã€‚</li><li>è™½ç„¶å¥³ç”Ÿé¼»å­å¾ˆå¤šéƒ½æ˜¯ä¸€ä¸ªç‚¹ï¼Œä½†è¿™ä¸ªç‚¹æ˜¯æœ‰æ–¹å‘å’Œè½»é‡çš„ã€‚æ–¹å‘æ˜¯é¢éƒ¨æœå‘ï¼Œè€Œè½»é‡åˆ™æ˜¯ç‚¹çš„èµ·ç¬”é‡ï¼ˆä¸Šæ–¹ï¼‰ï¼Œè½ç¬”è½»ï¼ˆä¸‹æ–¹ï¼‰ã€‚</li></ul><h3 id="ç”·æ€§å£é¼»ç¤ºä¾‹">ç”·æ€§å£é¼»ç¤ºä¾‹</h3><p><img src="/2020/08/21/illustration-human-body/image-20200614150816122.png" alt="image-20200614150816122" style="zoom:50%;"></p><h3 id="å¥³æ€§å£é¼»ç¤ºä¾‹">å¥³æ€§å£é¼»ç¤ºä¾‹</h3><p><img src="/2020/08/21/illustration-human-body/image-20200614150929840.png" alt="image-20200614150929840" style="zoom:50%;"></p><h2 id="é¢éƒ¨ç¤ºä¾‹">é¢éƒ¨ç¤ºä¾‹</h2><h3 id="å¥³ç”Ÿ-2">å¥³ç”Ÿ</h3><p><img src="/2020/08/21/illustration-human-body/image-20200614204900408.png" alt="image-20200614204900408" style="zoom:50%;"></p><h3 id="ç”·ç”Ÿ-2">ç”·ç”Ÿ</h3><p><img src="/2020/08/21/illustration-human-body/image-20200615124628061.png" alt="image-20200615124628061" style="zoom:50%;"></p><h2 id="æ•´ä½“æ³¨æ„äº‹é¡¹">æ•´ä½“æ³¨æ„äº‹é¡¹</h2><ol type="1"><li>ç»˜åˆ¶æ­¥éª¤ï¼šæ‰¾å‚è€ƒ-&gt;æ‰“å‹-&gt;ç»†åŒ–-&gt;è°ƒæ•´</li><li>ç”»çš„è¿‡ç¨‹ä¸­è¦ä¸æ–­é‡å¤ä¸€ä¸‹å‡ ä¸ªæ£€æŸ¥ï¼š<ul><li>å¤´éƒ¨çš„è§’åº¦</li><li>è§’è‰²æ€§æ ¼ç›¸å¯¹åº”çš„äº”å®˜å½¢çŠ¶</li><li>ä¸æ–­æ”¾å¤§ç¼©å°å»çœ‹ä½ç½®å’Œé€è§†</li></ul></li></ol><h2 id="å¤´å‘çš„ç»˜åˆ¶">å¤´å‘çš„ç»˜åˆ¶</h2><ol type="1"><li><p>ç»˜åˆ¶çš„é¡ºåºï¼š</p><ol type="1"><li>è§‚å¯Ÿå‚è€ƒ</li><li>ç¡®å®šå‘å¿ƒï¼ˆåˆ˜æµ·ä¸­å¿ƒç‚¹ï¼‰æˆ–å‘ä¸­çº¿ä½ç½®</li><li>åˆ†å—ç”»è‰å›¾</li><li>ç»†åŒ–</li></ol></li><li><p>å¤´å‘å¤šæ ·æ€§çš„ä½“ç°ï¼š</p><ol type="1"><li>ç²—ç»†å˜æ¢</li><li>ä¸èƒ½è¿‡äºå¯¹ç§°ï¼ˆç²—ç»†ã€ä½ç½®é«˜ä½ã€å¤´å‘çš„æ ¹æ•°ï¼‰</li><li>å¤´å‘çš„æ–¹å‘ï¼ˆå‘æ—‹ã€è´´å¤´å¼¯æ›²ã€å‘†æ¯›å’Œä¸è§„åˆ™å‘ï¼‰</li><li>åŠ¨æ€å˜åŒ–</li></ol><p><img src="/2020/08/21/illustration-human-body/Screenshot%2520-%25202020-07-08%252023.03.30.png" alt="Screenshot - 2020-07-08 23.03.30" style="zoom:50%;"></p></li><li><p>å¤´å‘çš„æœ€å¤§åˆ†å—å¯åˆ†ä¸ºï¼šå‰å‘ï¼ˆåˆ˜æµ·ï¼‰ã€ä¸­å‘ï¼ˆä¸€èˆ¬åˆ°è„¸æˆ–è‚©çš„ä¾§é¢å¤´å‘ï¼‰å’Œåå‘ã€‚å‰ä¸­éƒ½å¯ä»¥æ²¡æœ‰ï¼Œä½†åå‘ä¸€å®šæœ‰ã€‚</p></li><li><p>å„ç§å‘å‹å¯ä»¥çœ‹åšå„ç§å‰ä¸­åå‘çš„ç»„åˆã€‚</p></li><li><p>åå‘ä¸èƒ½ç´§è´´å¤´çš®ï¼Œè¦é¢„ç•™ä¸€å®šè·ç¦»ã€ä½“ç°è“¬æ¾æ„Ÿã€‚</p></li><li><p>å¥½çš„å‘å‹çš„ç»˜åˆ¶å…¶å‰ªå½±ä¹Ÿæ˜¯å¾ˆå¥½çœ‹çš„ã€‚</p></li><li><p>æ³¨æ„å‘æ¢¢åœ¨è„–å­å‘¨å›´è¡Œç¨‹ä¸€ä¸ªåœ†ï¼Œè€Œä¸æ˜¯ç›´çº¿ã€‚è¿™ç‚¹åœ¨çŸ­å‘æƒ…å†µä¸‹å°¤å…¶æ˜æ˜¾ã€‚</p></li><li><p>é¢ˆéƒ¨åé¢ä¼šæœ‰çŸ­å°çš„å¤´å‘ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200709105324243.png" alt="image-20200709105324243" style="zoom:33%;"></p></li><li><p>å‘æ¢¢æ˜¯å¤´å‘çš„çµé­‚ã€‚ä¸åŒç§ç±»çš„å¤´å‘å…¶å‘æ¢¢å·®è·ç”±å…¶ä¹‹å¤§ï¼Œæ¯”å¦‚ç›´çº¿å‹ã€å°–é”å‹ã€æŠ˜å å‹ç­‰ã€‚</p></li><li><p>å‘æ¢¢éƒ¨åˆ†ï¼Œå°¤å…¶æ˜¯åå‘ï¼Œå°½é‡å¾€é‡Œæ”¶ï¼Œé™¤éå‘å‹å°±æ˜¯ç¿˜çš„ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200709095740444.png" alt="image-20200709095740444" style="zoom:50%;"></p></li><li><p>é•¿å·å‘ä¼šåå‘æˆç†Ÿé­…åŠ›çš„æ°”è´¨ã€é•¿ç›´å‘åå‘å†·é…·é«˜è´µã€çŸ­ç›´å‘æ›´å¤šåå‘æ¸…çº¯æ„Ÿå’Œå­¦ç”Ÿæ„Ÿã€çŸ­å·å‘åå¯çˆ±æ´»åŠ›ã€‚</p></li><li><p>å·å‘çš„åŸºç¡€æ˜¯ä¸€æ’®å¤´å‘ï¼Œæ¯ä¸€æ’®å¤´å‘çš„åŸºç¡€æ˜¯Så‹çº¿ï¼Œåˆ†æ¸…æ¥šé‡Œå¤–ã€‚å…ˆç”»å¤§çš„Sï¼Œæœ€åç”»è£…é¥°çº¿ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200709102107872.png" alt="image-20200709102107872" style="zoom:50%;"></p></li><li><p>ç”»é•¿å‘ï¼Œå°¤å…¶æ˜¯é•¿å·å‘ï¼Œæœ€é‡è¦çš„æ˜¯å³ä½¿çº¿æ¡ä¹±ï¼Œä¹Ÿä¸èƒ½è¢«çº¿æ¡å¸¦èŠ‚å¥ï¼Œè¦ææ¸…æ¥šæ¯ä¸€ç‰‡å¤´å‘çš„ä»å±å…³ç³»ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200709102245876.png" alt="image-20200709102245876" style="zoom:33%;"></p></li></ol><h3 id="è¾«å­">è¾«å­</h3><ol type="1"><li><p>ç»˜åˆ¶è¾«å­çš„æ—¶å€™è¦å°¤å…¶æ³¨æ„çº¿æ¡çš„è™šå®ï¼Œè¥é€ ç©¿æ’æ„Ÿã€‚åŠ ç»†èŠ‚çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„ç¢å‘ä¹Ÿè¦é¡ºç€è¾«å­çš„å¤§ä½“èµ°åŠ¿ç»˜åˆ¶ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200709104609283.png" alt="image-20200709104609283" style="zoom:50%;"></p></li><li><p>é©¬å°¾è¾«ï¼šå¹´é¾„è¶Šå¤§ã€é©¬å°¾è¶Šä½ã€‚é©¬å°¾æœå‘æ–œå‘ä¸Šçš„è¾«å­è¦å…ˆä¸Šå‡åä¸‹é™ã€‚</p></li><li><p>ç›¸è¾ƒäºæŠ«æ•£å‘ï¼Œè¾«å­çš„ç¿»è½¬æ›´å¤šã€‚</p></li><li><p>è¾«å­ä¸­ï¼Œæ€»ä¼šæœ‰ä¸€äº›çŸ­çš„ã€ç¢çš„å¤´å‘ä¸æ— æ³•è¢«æ‰åˆ°è¾«å­ä¸»æµä¸­ï¼Œä»–ä»¬æ„æˆäº†æœ‰æ•ˆçš„ç»†èŠ‚ã€‚</p><figure><img src="/2020/08/21/illustration-human-body/image-20200709105414092.png" alt="image-20200709105414092"><figcaption aria-hidden="true">image-20200709105414092</figcaption></figure></li></ol><h3 id="ç”·æ€§å¤´å‘">ç”·æ€§å¤´å‘</h3><ol type="1"><li><p>ç”·æ€§å¤´å‘å¦‚æœæ˜¯å‘å¤–ç¿˜ï¼Œæ˜¾å¾—æœ‰æ”»æ°”ï¼›å‘å†…å·ï¼Œæ˜¾å¾—æ¸©æŸ”å’Œå—æ°”ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200709121121242.png" alt="image-20200709121121242" style="zoom:50%;"></p></li><li><p>é•¿å‘çš„ç”·æ€§è§’è‰²ï¼Œå¯ä»¥ç›´æ¥å‚ç…§å¥³æ€§å¤´å‘ç”»æ³•ã€‚</p></li></ol><h3 id="å‘å‹è®¾è®¡">å‘å‹è®¾è®¡</h3><ol type="1"><li><p>è®¾è®¡æµç¨‹ï¼š</p><ol type="1"><li>åˆ†å—</li><li>åˆ†ç»„ï¼ˆä½¿ç”¨ä¸åŒçš„å…ƒç´ ï¼‰</li><li>ç»„åˆè®¾è®¡</li><li>ä¸åŒçš„å‘å‹å‡ºæ¥ä¸ŠãŒã‚Šï½</li></ol><p><img src="/2020/08/21/illustration-human-body/image-20200709113650623.png" alt="image-20200709113650623" style="zoom:50%;"></p></li></ol><h2 id="å‘é¥°ä¸å…¶ä»–è£…é¥°é“å…·çš„ç»˜åˆ¶">å‘é¥°ä¸å…¶ä»–è£…é¥°é“å…·çš„ç»˜åˆ¶</h2><h3 id="è´è¶ç»“å’Œè´è¶ç»“ç±»ä¼¼ç‰©åˆ†ç±»">è´è¶ç»“å’Œè´è¶ç»“ç±»ä¼¼ç‰©åˆ†ç±»</h3><ol type="1"><li>å›ºå®šå½¢çŠ¶çš„ï¼Œå³å–çš„æ—¶å€™å°±æ˜¯æ‰“å¥½çš„é‚£ç§è´è¶ç»“ã€‚å®å¿ƒã€è¾ƒå¤§ï¼Œå¸¸ç”¨ä½œå¤´é¥°å’Œé¢†ç»“ã€‚</li><li>æ‰‹æ‰“çš„ç©ºå¿ƒè´è¶ç»“ã€‚åŒæ ·è¾ƒå¤§ï¼Œé™¤äº†å¤´é¥°å’Œé¢†ç»“ï¼Œè¿˜å¯ä»¥ç”¨ä½œå›´è£™åé¢ç­‰ã€‚</li><li>é£˜å¸¦ã€‚ç”±ä¸€æ ¹ç»†é•¿æ‰å¹³çš„å¸¦å­æ‰“å‡ºæ¥çš„è´è¶ç»“ã€‚æ˜“éšé£é£˜åŠ¨ï¼Œä¸”ç”±äºä½“ç§¯è¾ƒå°ï¼Œéœ€ä»”ç»†æ§åˆ¶ã€‚</li><li>å°å‹ç‚¹ç¼€å¼çš„è´è¶ç»“ã€‚ç”¨ä½œå°å‹è£…é¥°ç‰©ï¼Œå‡ºç°åœ¨å¤´ä¸Šï¼ˆå‘å¡ï¼‰ã€è¡£æœä¸Šã€å£è¢‹ä¸Šç­‰ç­‰ã€‚</li><li>ä»¥ä¸Šçš„ç»„åˆå’Œå˜å½¢ã€‚</li></ol><p><img src="/2020/08/21/illustration-human-body/image-20200719014529861.png" alt="image-20200719014529861" style="zoom: 60%;"></p><p><img src="/2020/08/21/illustration-human-body/image-20200719014444973.png" alt="image-20200719014444973" style="zoom:50%;"></p><p><img src="/2020/08/21/illustration-human-body/image-20200719014416132.png" alt="image-20200719014416132" style="zoom:50%;"></p><p><img src="/2020/08/21/illustration-human-body/image-20200719014348797.png" alt="image-20200719014348797" style="zoom:50%;"></p><p><img src="/2020/08/21/illustration-human-body/image-20200719014322885.png" alt="image-20200719014322885" style="zoom:68%;"></p><h3 id="å‘åº“">å‘åº“ï¼š</h3><ol type="1"><li>æ³¨æ„ä¸èƒ½æ²¿ç€å¤´éƒ¨è½®å»“ç”»ã€‚</li><li>åº”è¯¥å…ˆæ‰¾å‡ºæ¥é¢éƒ¨ç«–ç›´è½®å»“çº¿ï¼Œç„¶åä¿è¯å‘åº“ä¸å®ƒå‚ç›´ã€‚</li><li>å°¤å…¶æ³¨æ„é€è§†ç°è±¡ï¼Œå‘åº“çš„æœ«ç«¯ç»“æŸäºè€³æœµåé¢ã€‚</li></ol><figure><img src="/2020/08/21/illustration-human-body/image-20200719103005141.png" alt="image-20200719103005141"><figcaption aria-hidden="true">image-20200719103005141</figcaption></figure><h3 id="å¸½å­">å¸½å­</h3><ol type="1"><li><p>åå¤´é¡¶ï¼ˆæ­£ï¼‰ï¼šæ£’çƒå¸½ã€ç¤¼å¸½ã€ç”°å›­é£</p></li><li><p>åè„‘å‹ºï¼šè´é›·å¸½ã€å¤ªé˜³å¸½</p></li><li><p>æ£’çƒå¸½çš„ç”»æ³•ï¼š</p><ul><li>å¸½å­çš„ä¸­çº¿ä¸å¤´éƒ¨ä¸­çº¿å¹³é½</li><li>æ³¨æ„å¸½å­çš„å¤–å½¢</li><li>é€‚å½“çš„ç»™å¸½æªå¢åŠ åšåº¦</li></ul><p><img src="/2020/08/21/illustration-human-body/image-20200719104600298.png" alt="image-20200719104600298" style="zoom:33%;"></p></li><li><p>å¤ªé˜³å¸½çš„ç”»æ³•ï¼š</p><ul><li>ä½ç½®åè„‘å</li><li>*å¸½æªçš„å½¢çŠ¶</li><li>é€‚å½“çš„è£…é¥°ï¼šç¼å¸¦ã€è´è¶ç»“ã€é²œèŠ±ç­‰</li><li>ç”»çš„æ—¶å€™å³ä½¿åé¢çš„å¸½æªéƒ¨åˆ†è¢«è„‘è¢‹é®æŒ¡ï¼Œè¿˜æ˜¯è¦å…ˆç”»å‡ºæ¥ã€ç¡®ä¿å·¦å³æ˜¯è¿ç€çš„çº¿ã€‚</li></ul></li></ol><h3 id="çœ¼é•œ">çœ¼é•œ</h3><ol type="1"><li><p>å¯çˆ±é£ï¼šé•œæ¡†åå¤§ã€ååœ†ã€å¯ä»¥æŠ¹é™¤ä¸Šçœ¼é•œæ¡†ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥é¿å…çœ¼é•œæŒ¡ä½çœ¼ç›ã€‚</p><figure><img src="/2020/08/21/illustration-human-body/image-20200719110203120.png" alt="image-20200719110203120"><figcaption aria-hidden="true">image-20200719110203120</figcaption></figure></li><li><p>æˆç†Ÿé£ï¼šçœ¼å‹æœ¬æ¥å°±åå°ï¼Œçœ¼é•œä¹Ÿå°±åçª„ã€‚</p><figure><img src="/2020/08/21/illustration-human-body/image-20200719110140108.png" alt="image-20200719110140108"><figcaption aria-hidden="true">image-20200719110140108</figcaption></figure></li><li><p>æ€§æ„Ÿé£ï¼šæ— é•œæ¡†ã€åçª„ã€‚</p><figure><img src="/2020/08/21/illustration-human-body/image-20200719110242408.png" alt="image-20200719110242408"><figcaption aria-hidden="true">image-20200719110242408</figcaption></figure></li><li><p>æäº‹æ´¾ï¼šé•œç‰‡åå…‰ã€‚ã€‚ã€‚å¦‚æŸ¯å—å¼€å§‹æ¨ç†ã€å‚æœ¬å¤§ä½¬ç­‰ã€‚</p><figure><img src="/2020/08/21/illustration-human-body/image-20200719110419553.png" alt="image-20200719110419553"><figcaption aria-hidden="true">image-20200719110419553</figcaption></figure></li><li><p>ç”»æ³•è¦ç‚¹ï¼š</p><ul><li>ä¸¤ä¸ªå…³é”®æ”¯ç‚¹ï¼šé¼»æ¢ã€è€³æœµ</li><li>çœ¼é•œä¸­çº¿å‘ˆç›´çº¿å‹ï¼šé•œç‰‡é€è§†ä¿æŒä¸€è‡´</li><li>åœ¨ç”»çœ¼ç›ä¹‹å‰å…ˆç”»å‡ºæ¥ä¸€ä¸ªèƒ½åŒ…è£¹ä½ä¸¤ä¸ªé•œç‰‡çš„çŸ©å½¢å¤–æ¡†</li></ul></li></ol><h2 id="è¡¨æƒ…">è¡¨æƒ…</h2><h3 id="åˆ†ç±»">åˆ†ç±»</h3><ol type="1"><li><p>å¾®ç¬‘ï¼ˆå°´å°¬è€Œä¸å¤±ç¤¼è²Œçš„ï¼‰</p><p><img src="/2020/08/21/illustration-human-body/image-20200724113228668.png" alt="image-20200724113228668" style="zoom:50%;"></p><ol type="1"><li>å£å‹å°±å¤–å…«å­—ç‚¹ä¸¤ç‚¹å°±å¥½ï¼Œæ³¨æ„å¡ç‚¹</li></ol></li><li><p>å¼€å£ç¬‘</p><p><img src="/2020/08/21/illustration-human-body/image-20200724113253860.png" alt="image-20200724113253860" style="zoom:50%;"></p><ol type="1"><li>å¼€å£æ˜¯æ¢¯å½¢ç±»ä¼¼ç‰©</li><li>å¼€å£çš„å¤§å°è¦å¤šå°è¯•ï¼Œå› ä¸ºä¸åŒäººç‰©é€‚åˆçš„å¤§å°å¹¶ä¸ç›¸åŒ</li></ol></li><li><p>ç‹‚ç¬‘</p><p><img src="/2020/08/21/illustration-human-body/image-20200724113443615.png" alt="image-20200724113443615" style="zoom:50%;"></p></li><li><p>é—­çœ¼ç¬‘</p><ol type="1"><li>çœ¼ç›å³ä½¿é—­ä¸Šäº†ä¹Ÿä¸æ˜¯ä¸€æ¡å•è°ƒçš„çº¿ï¼Œè€Œæ˜¯æœ‰å½¢çŠ¶æœ‰ç»†èŠ‚çš„</li><li>é‚£æ¡çº¿åœ¨ä¹‹å‰ä¸Šä¸‹çœ¼ç‘ä¸­é—´</li></ol></li><li><p>æ€’ï¼ˆæ”»æ°”ã€å‚²æ…¢ã€ç››æ°”å‡Œäººï¼‰</p><p><img src="/2020/08/21/illustration-human-body/image-20200724113521388.png" alt="image-20200724113521388" style="zoom:50%;"></p><ol type="1"><li>çœ¼è§’ä¸Šæ‰¬</li><li>çœ‰æ¯›å¤–å…«å­—ï¼Œä¹Ÿæ˜¯ä¸Šæ‰¬</li><li>å˜´ä¸­é—´å‘ä¸Šå¼¯æ›²ï¼ˆå³æ›²çº¿å‘ä¸Šå‡¸ï¼‰</li></ol></li><li><p>å“€ï¼ˆå—æ°”ã€å¯æ€œï¼‰</p><p><img src="/2020/08/21/illustration-human-body/image-20200724113548199.png" alt="image-20200724113548199" style="zoom:50%;"></p><ol type="1"><li>çœ¼è§’å‘ä¸‹æ’‡</li><li>çœ‰æ¯›æ­£å…«å­—</li><li>å˜´ä¼šå¾ˆå°</li></ol></li><li><p>ä¸‰æ— å°‘å¥³</p><p><img src="/2020/08/21/illustration-human-body/image-20200724113639102.png" alt="image-20200724113639102" style="zoom:50%;"></p><ol type="1"><li>æ— å£æ— å¿ƒæ— è¡¨æƒ…</li><li>å˜´éƒ¨å¾ˆå°å¾ˆå°ï¼Œä¸€èˆ¬å°±æ˜¯ä¸€ä¸ªç‚¹</li><li>ç”±äºæœ¬æ¥è§’è‰²å°±ä¸æ€ä¹ˆæœ‰è¡¨æƒ…ï¼Œæ‰€ä»¥çœ¼ç›å’Œçœ‰æ¯›ç§»ä¸€ç›´éƒ½æ˜¯æ”¾æ¾çŠ¶æ€</li></ol></li><li><p>é‚ªé­…ä¸€ç¬‘ï¼ˆè‰²æ°”ï¼‰</p><p><img src="/2020/08/21/illustration-human-body/image-20200724111805983.png" alt="image-20200724111805983" style="zoom:42%;"></p><ol type="1"><li>é¢éƒ¨çº¢æ™•</li><li>ç‰¹åˆ¶ç¬‘å®¹</li></ol></li><li><p>å¾®å¾®å“­æ³£</p><p><img src="/2020/08/21/illustration-human-body/image-20200724112336854.png" alt="image-20200724112336854" style="zoom:33%;"></p><ol type="1"><li>å§”å±ˆ+æŠ¿å˜´</li><li>å°‘é‡çœ¼è§’æ³ªèŠ±</li><li>é¢é¢Šçº¢æ™•</li></ol></li><li><p>å¤§å“­</p><p><img src="/2020/08/21/illustration-human-body/image-20200724110336117.png" alt="image-20200724110336117" style="zoom:33%;"></p><ol type="1"><li>å§”å±ˆåŠ å¼ºç‰ˆï¼Œçœ‰æ¯›ç»§ç»­å…«å­—</li><li>çœ¼ç›é«˜åº¦å‡å°ï¼Œä¸‹çœ¼ç‘å‘ä¸ŠæŒ¤å‹</li><li>æœ‰çœ¼æ³ªå…ƒç´ </li><li>å˜´å¼ å¼€ï¼Œéœ²ç‰™é½¿</li><li>é¢é¢Šçº¢æ™•</li></ol></li><li><p>å®³ç¾</p><ol type="1"><li>å¤§ç‰‡çš„é¢éƒ¨çº¢æ™•ï¼Œå¯ä»¥è¦†ç›–çœ¼ç›ä¸‹é¢ä¸€é•¿æ¡åŒ…æ‹¬é¼»å­ä½ç½®</li></ol></li><li><p>å‚²å¨‡</p><p><img src="/2020/08/21/illustration-human-body/image-20200724112224823.png" alt="image-20200724112224823" style="zoom:33%;"></p><ol type="1"><li>å®³ç¾+æ€’</li><li>å¯ä»¥ç”¨å¾®æ±—ç‚¹ç¼€</li><li>å°è™ç‰™</li></ol></li><li><p>ç—…å¨‡ï¼ˆè¯¡å¼‚ï¼‰</p><p><img src="/2020/08/21/illustration-human-body/image-20200724110015171.png" alt="image-20200724110015171" style="zoom:33%;"></p><ol type="1"><li>çœ¼çƒå’Œä¸Šçœ¼ç‘ä¸æ˜¯è¿ç€çš„ï¼Œä¹‹é—´éš”ç€ä¸€ç‚¹çœ¼ç™½</li><li>å˜´éƒ¨æœ‰ä¸å¯¹ç§°å…ƒç´ </li><li>è§†è§’å¯åä»°è§†</li></ol></li></ol><h3 id="å¤æ‚è¡¨æƒ…æ„æˆ">å¤æ‚è¡¨æƒ…æ„æˆ</h3><ol type="1"><li>åŸºç¡€è¡¨æƒ…ï¼ˆä¸åŒç¨‹åº¦çš„ç¬‘ã€å“­ã€å“€ï¼‰</li><li>ä¸åŒè§’åº¦ã€èº«ä½“è½¬å‘ï¼ˆæ¯”å¦‚è¡¨ç°å§”å±ˆã€æƒ¹äººæ€œçˆ±ã€å“­æ³£å¯ä»¥é‡‡ç”¨ä¿¯è§†ï¼Œè€Œè¡¨ç°æƒŠæ‚šå’Œæ¶å½¹åˆ™å¯ä½¿ç”¨ä»°è§†ï¼Œå…ƒæ°”å¯çˆ±çµåŠ¨å¯ç”¨å„ç§ä¾§è§†å›¾ç­‰ï¼‰</li><li>è‚¢ä½“åŠ¨ä½œï¼ˆå¦‚æ‰‹éƒ¨åŠ¨ä½œï¼‰</li></ol><h3 id="æ¼«ç”»ä¸æ’ç”»çš„åŒºåˆ«">æ¼«ç”»ä¸æ’ç”»çš„åŒºåˆ«</h3><ul><li>ç›¸è¾ƒäºæ¼«ç”»ï¼Œæ’ç”»æ›´åå‘äºæ•´ä½“äººç‰©çš„å”¯ç¾æ€§ï¼Œè¡¨æƒ…ä¸€èˆ¬ä¸ä¼šå¾ˆå¤¸å¼ ï¼Œç¬‘è„¸ä¼šå æ®å¤§åŠã€‚</li><li>æ¼«ç”»åˆ™ç›¸å¯¹æŸç¼šè¾ƒå°ï¼Œå¯ä»¥ç”»å„ç§å„æ ·å¥‡å¥‡æ€ªæ€ªçš„å¤¸å¼ è¡¨æƒ…æ¥å‡¸æ˜¾äººç‰©å¿ƒæƒ…å’Œæ¨åŠ¨å‰§æƒ…ã€‚</li></ul><p><img src="/2020/08/21/illustration-human-body/image-20200724120144027.png" alt="image-20200724120144027" style="zoom:50%;"></p><h2 id="è¡£ç‰©çš„ç”»æ³•">è¡£ç‰©çš„ç”»æ³•</h2><h3 id="è¡£æœçš„åˆ†ç±»">è¡£æœçš„åˆ†ç±»</h3><p><strong>å¥³ç”Ÿï¼š</strong> åˆ¶æœï¼ˆJKï¼‰ã€å¥³ä»†è£…ã€æ³³è£…ã€å’Œé£æœé¥°ï¼ˆå’Œæœã€æµ´è¡£ï¼‰ã€LOLITAã€idolï¼ˆèˆå°è£…ï¼‰</p><p><strong>ç”·ç”Ÿï¼š</strong> è¡¬è¡«ã€è¥¿æœã€å«è¡£ã€Tæ¤</p><h3 id="ç”»æ³•è¦ç‚¹">ç”»æ³•è¦ç‚¹</h3><ol type="1"><li>æ³¨æ„ä¸äººç‰©å½¢ä½“çš„å…³ç³»ï¼Œä¸è¦ç›´æ¥ç”»è¡£æœ</li><li>å—åŠ›æƒ…å†µ</li><li>æ­é…ã€å…ƒç´ ç»„åˆ</li><li>è®¾è®¡ï¼ˆé¥°å“ï¼‰</li><li>å‚ä¸æ„å›¾</li></ol><h3 id="è¡£è¤¶">è¡£è¤¶</h3><h4 id="è¡£è¤¶çš„æˆå› ">è¡£è¤¶çš„æˆå› </h4><ul><li>è¡£è¤¶æ˜¯å—æ”¯æ’‘ç‚¹å’Œåœ°å¿ƒå¼•åŠ›çš„æ‹‰åŠ›å½±å“è€Œå½¢æˆçš„è¤¶çš±ã€‚</li><li>å¦‚æœæ²¡æœ‰å†…éƒ¨ç»“æ„å°±æ²¡æœ‰å¸ƒçº¹è¡£è¤¶çš„å­˜åœ¨ã€‚</li><li>æ‹‰ä¼¸çš„åŠ›æŠ¹å¹³è¡£è¤¶ï¼Œæ”¶ç¼©çš„åŠ›å½¢æˆè¡£è¤¶ã€‚</li></ul><p><img src="/2020/08/21/illustration-human-body/image-20200726104737094.png" alt="image-20200726104737094" style="zoom:33%;"></p><h4 id="è¡£è¤¶å¤šçš„åœ°æ–¹">è¡£è¤¶å¤šçš„åœ°æ–¹</h4><ul><li>å’Œå†…éƒ¨æ”¯æ’‘ç‰©ä¹‹é—´ç©ºé—´è¾ƒå¤§çš„åœ°æ–¹ï¼ˆå®½æ¾é¢†å£ã€å¤äººè¡£æœã€å®½æ¾è¢–å­ã€å«è¡£è…°éƒ¨ï¼‰ï¼ˆç›¸åï¼šç´§èº«è¡£ã€å†…è¡£ã€ä¸è¢œï¼‰</li><li>å—åˆ°æ”¶ç¼©å¤–åŠ›æ˜æ˜¾çš„åœ°æ–¹ï¼ˆè…°å¸¦å¤„ã€è¢–å£ã€æ’¸èµ·æ¥çš„è¢–å­ã€å…³èŠ‚å†…ç¼©ä¾§ï¼‰ï¼ˆç›¸åï¼šå…³èŠ‚ç»·ç´§ä¾§ï¼‰</li></ul><p><img src="/2020/08/21/illustration-human-body/Screenshot%2520-%25202020-07-26%252010.48.59.png" alt="Screenshot - 2020-07-26 10.48.59" style="zoom:50%;"></p><ul><li><p>äººä½“ä¸­è¡£è¤¶å¤šçš„ä½ç½®åˆ—ä¸¾ï¼š</p><ul><li>é¢†å£</li><li>è…‹ä¸‹</li><li>å¼¯æ›²çš„èƒ³è†Šè…¿çš„å†…ä¾§</li><li>è…°éƒ¨</li><li>è£†éƒ¨ï¼ˆè£¤è¤¶ã€è£™è¤¶ï¼‰</li><li>è£¤è„š</li><li>å…¶ä»–æ‰€æœ‰çš„æœ‰è½¬æŠ˜çš„åœ°æ–¹</li><li>å¦¹å­èƒ¸éƒ¨ä¸‹éƒ¨</li><li>è…°å¸¦ã€ç»³å¸¦å¤„</li><li>æ‰£å­å¤„</li></ul><p><img src="/2020/08/21/illustration-human-body/image-20200726110314572.png" alt="image-20200726110314572" style="zoom:33%;"></p></li></ul><h3 id="è¤¶çš±ç†è®º">è¤¶çš±ç†è®º</h3><h4 id="ä¸€ç‚¹æ”¯æ’‘">ä¸€ç‚¹æ”¯æ’‘</h4><p>è¤¶çš±å½¢çŠ¶ï¼šæ”¾å°„çŠ¶</p><figure><img src="/2020/08/21/illustration-human-body/image-20200726111529235.png" alt="image-20200726111529235"><figcaption aria-hidden="true">image-20200726111529235</figcaption></figure><h5 id="å¸¸è§ä½ç½®">å¸¸è§ä½ç½®</h5><ul><li>è‚©éƒ¨</li><li>èƒ¸éƒ¨ä¸­ä¸‹ä¾§</li><li>ç»³å¸¦</li><li>è†ç›–</li><li>æ‰‹è‚˜</li></ul><h4 id="ä¸¤ç‚¹æ”¯æ’‘">ä¸¤ç‚¹æ”¯æ’‘</h4><p>ä¸¤ç‚¹æ”¯æ’‘å¯ä»¥çœ‹åšä¸¤ä¸ªä¸€ç‚¹æ”¯æ’‘å»æ‰å†…ä¾§çš„çº¿ç„¶åè¿èµ·æ¥ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200726112319409.png" alt="image-20200726112319409" style="zoom:40%;"></p><h5 id="å¸¸è§ä½ç½®-1">å¸¸è§ä½ç½®ï¼š</h5><ul><li>é¢†å£</li><li>è…°éƒ¨ï¼ˆèƒ¯ï¼‰</li><li>å®½æ¾çš„XXï¼ˆè¢–å­ã€è£¤å­ã€è…°ï¼‰</li></ul><p><img src="/2020/08/21/illustration-human-body/image-20200726112701126.png" alt="image-20200726112701126" style="zoom:33%;"></p><p><img src="/2020/08/21/illustration-human-body/image-20200726112803185.png" alt="image-20200726112803185" style="zoom:33%;"></p><h3 id="è¤¶çš±ç”»æ³•">è¤¶çš±ç”»æ³•</h3><h4 id="ç©¿æ’">ç©¿æ’</h4><p>ç®€å•çš„è¯´ï¼Œç©¿æ’å°±æ˜¯Aæ’åˆ°äº†Bé‡Œé¢ã€‚ç”±äºè¤¶çš±å¼¯æ›²ï¼Œæœ‰æ—¶å€™ä¼šé¼“èµ·æ¥çªå‡ºä¸€å—ï¼Œå…¶æ•ˆæœå°±æ˜¯ä¸‹æ¸¸çš„å¸ƒæ–™æ’è¿›äº†ä¸Šæ¸¸çš„å¸ƒæ–™æ‰€å½¢æˆçš„è¤¶å­é‡Œé¢ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200726120758174.png" alt="image-20200726120758174" style="zoom:50%;"></p><p><img src="/2020/08/21/illustration-human-body/image-20200726120727471.png" alt="image-20200726120727471" style="zoom:50%;"></p><p>ç”±äºè§†è§’çš„ä¸åŒï¼Œè®©ç©¿æ’å‘ˆç°å‡º2ä¸­ç»˜åˆ¶ç»“æ„ã€‚</p><p>è¿ç”¨èŒƒå›´ï¼šè¡£è¢–ã€è…°éƒ¨ã€æ‰‹è‚˜ï¼ˆå¼¯æ›²ï¼‰ã€è…¿éƒ¨ï¼ˆå¼¯æ›²ï¼‰ã€‚ã€‚ã€‚</p><h4 id="å †å ">å †å </h4><p>å †å ï¼Œå³æŠŠè¿‡é•¿çš„éƒ¨åˆ†å †èµ·æ¥ã€‚å…¶å½¢å¦‚é˜¶æ¢¯ï¼Œä½†å„é˜¶å½¢å¼‚ã€‚è®ºå…¶èµ°çº¿ï¼Œè«æœ‰å®Œå…¨å¹³è¡Œè€…ï¼Œç›®ä¹‹æ‰€åŠï¼Œçš†ä¸ºäº¤é”™å‘ä¸‹ï¼›é—´æœ‰å†…é™·ï¼Œè‹¥å°æ°´æ´¼ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200726141313049.png" alt="image-20200726141313049" style="zoom:50%;"></p><h4 id="è£ç¼çº¿">è£ç¼çº¿</h4><ul><li><p>ä½œç”¨ï¼šåˆ†æ‘Šæ‹‰åŠ›ã€‚å‡è®¾å¦‚æœæ²¡æœ‰è£ç¼çº¿æ—¶åªæœ‰å‡ ä¸ªå¤§çš„è¡£è¤¶çº¹è·¯ï¼Œæ­¤æ—¶åŠ ä¸Šä¸€æ ¹è£ç¼çº¿ï¼Œåˆ™åœ¨åŸæ¥çš„è¤¶çš±çº¹è·¯åŸºç¡€ä¸Šä¼šå‡ºç°è®¸å¤šç»†å°çš„è¤¶å­ï¼Œæ­¤å³ä¸ºæ‰€è°“â€œåˆ†æ‘Šæ‹‰åŠ›â€ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200730133455227.png" alt="image-20200730133455227" style="zoom:33%;"></p></li></ul><h4 id="é›·åŒº">é›·åŒº</h4><ol type="1"><li>è¤¶çš±å¤ªå°‘ï¼ŒçŠ¶ä¼¼é“çš®ï¼ˆå¸ƒçš„è´¨æ„Ÿï¼‰</li><li>è¡£è¤¶è¿‡å¤šï¼Œå¦‚ç€ç ´å¸ƒï¼ˆä¸ç¾è§‚ï¼‰</li><li>è¡£è¤¶ä½ç½®ä¸å¯¹</li><li>çº¿æ¡å¤ªå®æˆ–å¤ªè™š</li></ol><h4 id="æœè£…çš„è´¨æ„Ÿè½¯ä¸ç¡¬">æœè£…çš„è´¨æ„Ÿï¼šè½¯ä¸ç¡¬</h4><ul><li>è½¯çš„è¡£æœï¼ˆå¦‚æ°´æ‰‹æœã€Tæ¤ï¼‰ï¼š<ul><li>è¤¶çš±ç›¸å¯¹åå¤š</li><li>è¤¶çš±è§„å¾‹æ€§å¼±</li><li>è¤¶çš±çº¿æ¡æŸ”è½¯</li><li>å¸ƒçº¹åå¤š</li></ul></li><li>ç¡¬çš„è¡£æœï¼ˆå¦‚è¥¿æœã€åˆ¶æœï¼‰ï¼š<ul><li>è¤¶çš±ç›¸å¯¹è¾ƒå°‘</li><li>è¤¶çš±è§„å¾‹ç›¸å¯¹è¾ƒå¼º</li><li>è¤¶çš±çº¿æ¡åç¡¬</li><li>å¸ƒçº¹åå°‘</li></ul></li><li>å®é™…åŒºåˆ†æ–¹æ³•ï¼šçº¿æ¡</li></ul><h3 id="è¡£ç‰©ç»˜åˆ¶æ³¨æ„äº‹é¡¹">è¡£ç‰©ç»˜åˆ¶æ³¨æ„äº‹é¡¹</h3><h4 id="åšåº¦">åšåº¦</h4><p>å¸ƒæ˜¯æœ‰åšåº¦çš„ï¼Œæˆ‘ä»¬ç”»å¸ƒçš„æ—¶å€™è¦æ³¨æ„åœ¨å‚ä¸‹çš„è¾¹è§’å¤„çº¿ä¸çº¿çš„äº¤æ±‡å¤„ä¸è¦æ¥æ­»ï¼Œç•™å‡ºä¸€å®šçš„ç©ºéš™ä»¥ä½“ç°å¸ƒæ–™çš„åšåº¦ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200730134510170.png" alt="image-20200730134510170" style="zoom:33%;"></p><h4 id="è™šå®">è™šå®</h4><p>æˆ‘ä»¬åœ¨ç”»è¡£è¤¶çš„æ—¶å€™è¦æ³¨æ„çº¿çš„è™šå®å˜åŒ–ã€‚äº¤ä»£æ¸…æ¥šçº¿çš„è™šå®ï¼Œè¡£çº¹ä¼šæ›´æœ‰æ´»åŠ›ï¼Œæ›´ç”ŸåŠ¨ã€‚</p><p>å¤–ç²—é‡Œç»†ï¼Œä¸»è¦è¤¶çš±ç²—ã€æ¬¡è¦è¡£çº¹ç»†ã€‚</p><h4 id="å¤§å°å¯¹æ¯”">å¤§å°å¯¹æ¯”</h4><p>æˆ‘ä»¬ç”»è¡£çº¹çš„æ—¶å€™ä¹Ÿè¦æ³¨æ„æœ‰å¤§å°å¯¹æ¯”ï¼Œä¸è¦æŠŠæ¯ä¸€ä¸ªçº¹è·¯ç”»çš„ä¸€æ ·å¤§ï¼Œè¿™æ ·ä¼šæ˜¾å¾—å‘†æ¿æ— è¶£ã€‚</p><p><img src="/2020/08/21/illustration-human-body/image-20200730135011004.png" alt="image-20200730135011004" style="zoom:33%;"></p><h3 id="jkåˆ¶æœçš„ç”»æ³•">JKåˆ¶æœçš„ç”»æ³•</h3><h4 id="åˆ†ç±»-1">åˆ†ç±»</h4><p><strong>ä¸Šè¡£</strong>ï¼šæ°´æ‰‹æœã€è¡¬è¡«+ï¼ˆâˆ…ã€é’ˆç»‡è¡«ã€è¥¿æœã€é©¬ç”²ã€èƒŒå¿ƒï¼‰</p><p><strong>è£™å­</strong>ï¼šæ ¼å­è£™ã€å‡€è‰²è£™ã€å‡€è‰²+æ¡çº¹</p><p><strong>é¢†é¥°</strong>ï¼šé¢†ç»³ã€é¢†å¸¦ã€é¢†ç»“ã€é¢†å·¾</p><h4 id="å˜åŒ–">å˜åŒ–</h4><p><strong>é¢†å£</strong>ï¼šåœ†é¢†ã€å°–é¢†ï¼›é•¿é¢†å£ã€çŸ­é¢†å£ï¼ˆå‘ä¸‹å»¶ä¼¸é•¿åº¦ï¼‰ï¼›é¢†å­ä¸Šå¸¦æ¡çº¹ã€ä¸å¸¦æ¡çº¹</p><p><img src="/2020/08/21/illustration-human-body/image-20200811011515263.png" alt="image-20200811011515263" style="zoom:50%;"></p><p><img src="/2020/08/21/illustration-human-body/image-20200811011529584.png" alt="image-20200811011529584" style="zoom: 33%;"></p><p><strong>ç™¾è¤¶è£™å †å æ–¹å¼</strong>ï¼šä¸Šä¸‹ä¸Šä¸‹å¼ã€é˜¶æ¢¯å¼</p><p><img src="/2020/08/21/illustration-human-body/image-20200811011403507.png" alt="image-20200811011403507" style="zoom: 33%;"></p><h4 id="ç‰¹ç‚¹">ç‰¹ç‚¹</h4><ol type="1"><li>æ°´æ‰‹æœå¹¶ä¸æ˜¯æ”¶è…°ç´§èº«çš„ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ç›¸å¯¹è¾ƒç¡¬çš„æè´¨ã€åœ¨èƒ¸éƒ¨ä»¥ä¸‹æ›´åå‘çº¿æ€§å»¶ä¼¸çš„ã€‚</li></ol><h4 id="ç¤ºä¾‹">ç¤ºä¾‹</h4><p><img src="/2020/08/21/illustration-human-body/image-20200811013940137.png" alt="image-20200811013940137" style="zoom:33%;"></p><h3 id="èŠ±è¾¹çš„ç”»æ³•">èŠ±è¾¹çš„ç”»æ³•</h3><p><img src="/2020/08/21/illustration-human-body/image-20200811112029242.png" alt="image-20200811112029242" style="zoom:33%;"></p><h3 id="æœè£…çš„è®¾è®¡">æœè£…çš„è®¾è®¡</h3><ol type="1"><li>å…ƒç´ çš„ç»„åˆâ€”â€”ä¸»å…ƒç´ ã€è¾…å…ƒç´ ã€‚å¦‚ä»¥å’Œé£ä¸ºä¸»ï¼Œä½†è¾…ä»¥èŠ±è¾¹å’Œå®½æ¾è£™æ‘†ç­‰Lolitaçš„è®¾è®¡ã€‚</li><li>å˜å½¢ï¼šæ‰“ç ´ä¼ ç»Ÿï¼Œæ±‚å¼‚ã€‚å¦‚ä¼ ç»Ÿçš„å’Œæœè¢–å­éƒ½å¾ˆé•¿ï¼Œé¢†ç»“éƒ½åœ¨é¢†å­ä¸‹é¢ï¼Œè€Œæ±‚å¼‚çš„è®¾è®¡å°±å¯ä»¥æŠŠå’Œæœçš„è¢–å­ç¼©çŸ­ã€é¢†ç»“ç›´æ¥ç»‘åœ¨é¢ˆéƒ¨ã€‚</li><li>åˆ‡å‰²ï¼šè¡£æœçš„è™šä¸å®ã€‚è¿™é‡Œçš„å®æŒ‡çš„æ˜¯æœ‰å¸ƒæ–™è¦†ç›–çš„åœ°æ–¹ï¼Œè€Œè™šåˆ™æ˜¯æŒ‡åˆ‡å¼€éœ²å‡ºã€æ²¡æœ‰å¸ƒæ–™è¦†ç›–çš„ä½ç½®ã€‚è™šçš„ä½ç½®å¾€å¾€å¯ä»¥å‡ºç°åœ¨è‚©éƒ¨ã€è…°éƒ¨ã€è…¿éƒ¨ã€èƒ³è†Šç­‰ã€‚</li><li>å¯¹æ¯”ï¼š<ol type="1"><li>ä½“ç§¯çš„å¯¹æ¯”ï¼ˆå¤§ã€å°ï¼‰</li><li>é•¿åº¦çš„å¯¹æ¯”ï¼ˆé•¿ã€çŸ­ï¼‰</li><li>å¨‡å°çš„è§’è‰²ç©¿å®½æ¾è¾ƒå¤§çš„æœè£…ï¼ˆå¦‚åŸƒç½—èŠ’é˜¿è€å¸ˆã€ç‚¹å…”ã€å°åŸ‹ï¼‰ã€‚å®½å¤§çš„è¡£æœæ›´æ˜¾å¾—è§’è‰²æœ¬èº«çš„å¨‡å°ã€‚</li><li>æ€§æ„Ÿçš„è§’è‰²äº§å¸ƒæ–™è¾ƒå°‘çš„è¡£æœï¼Œçªå‡ºå…¶èº«æ</li></ol></li><li>å‰ªå½±ï¼šæ•´ä½“ä¸Šçªå‡ºä¸»å…ƒç´ </li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æ—¥ç³»ç”»é£ä¸ç°å®çš„åŒºåˆ«&quot;&gt;æ—¥ç³»ç”»é£ä¸ç°å®çš„åŒºåˆ«&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;çœŸå®çš„â€œ&lt;strong&gt;ä¸‰åº­äº”çœ¼&lt;/strong&gt;â€ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸‰åº­ï¼š&lt;strong&gt;d(å‘é™…çº¿, çœ‰éª¨) = d(çœ‰éª¨, é¼»åº•) = d(é¼»åº•, ä¸‹å·´)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;äº”çœ¼ï¼š&lt;strong&gt;çœ¼å®½=çœ¼é—´è·=çœ¼ç›åˆ°é¢éƒ¨è½®å»“çš„è·ç¦»&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;çœ¼ç›çš„é•¿åº¦ç›¸å¯¹çœŸå®æ¯”ä¾‹æ›´é•¿çš„ï¼Œå¹¶ä¸ç¬¦åˆä¸‰åº­äº”çœ¼ä¸­çš„äº”çœ¼æ¯”ä¾‹ã€‚è€Œæ˜¯çœ¼ç›å®½åº¦å’Œçœ¼é—´è·å¤§ä½“ç›¸åŒä¸”è¾ƒé•¿ï¼Œè€Œçœ¼ç›ä¸¤è¾¹åˆ°è„¸éƒ¨è½®å»“çš„è·ç¦»æ›´çŸ­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/2020/08/21/illustration-human-body/Screenshot%2520-%25202020-06-12%252022.46.34.png&quot; alt=&quot;Screenshot - 2020-06-12 22.46.34&quot; style=&quot;zoom:50%;&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="art" scheme="https://www.miracleyoo.com/tags/art/"/>
    
    <category term="painting" scheme="https://www.miracleyoo.com/tags/painting/"/>
    
    <category term="human-body" scheme="https://www.miracleyoo.com/tags/human-body/"/>
    
  </entry>
  
  <entry>
    <title>Cascade, Recursive, Residual and Dense è¾¨æ</title>
    <link href="https://www.miracleyoo.com/2020/08/05/cascade-recursive/"/>
    <id>https://www.miracleyoo.com/2020/08/05/cascade-recursive/</id>
    <published>2020-08-06T00:00:45.000Z</published>
    <updated>2021-03-12T22:03:25.619Z</updated>
    
    <content type="html"><![CDATA[<h2 id="cascade">Cascade</h2><p>ç›¸å½“äºProgressive Optimizationï¼Œæ¯ä¸ªé˜¶æ®µéƒ½ä¼šè¾“å‡ºä¸€ä¸ªå’Œæœ€ç»ˆç»“æœå½¢çŠ¶ç›¸åŒçš„Matrixï¼Œå¦‚ç›®æ ‡åˆ†å¸ƒçš„å›¾åƒã€BBoxç­‰ï¼Œç„¶åä¸‹ä¸€ä¸ªblockçš„ä½œç”¨åˆ™æ˜¯è¾“å…¥è¿™ä¸ªMatrixå’Œå‰é¢æå–çš„Featuresï¼Œè¾“å‡ºRefinedåçš„Matrixï¼Œè¯¥æ­¥éª¤ä¸æ–­é‡å¤ã€‚æ ¸å¿ƒæ˜¯é€æ­¥ä¼˜åŒ–ã€‚</p><span id="more"></span><h2 id="recursive">Recursive</h2><p>ç›¸å½“äºæŠŠä¸€å—Conv blocké‡å¤äº†å¥½å¤šæ¬¡ï¼Œæ¯æ¬¡çš„æƒé‡æ˜¯å…±äº«çš„ã€‚æ ¸å¿ƒä½œç”¨æ˜¯èŠ‚çœå†…å­˜å’Œå‚æ•°é‡ã€èŠ‚çœè¿ç®—æ—¶é—´ã€‚åŒæ—¶å®ƒä¹Ÿå«æœ‰æ—¶åŸŸç‰¹å¾ã€‚</p><h2 id="residual">Residual</h2><p>ä¿ç•™ä¸€æ¡â€œä¿¡æ¯é«˜é€Ÿå…¬è·¯â€ï¼Œä½¿å¾—å‰ä¸€è½®çš„è¾“å‡ºå¯ä»¥ç›´æ¥ç‚¹åŠ åˆ°ç»è¿‡äº†æ–°ä¸€è½®çš„Blockå·ç§¯è¿‡åçš„ç»“æœä¸Šã€‚æ ¸å¿ƒä½œç”¨æ˜¯è§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼ŒåŒæ—¶åœ¨ç½‘ç»œçš„å„å±‚ä¿ç•™äº†ä¸åŒå±‚çº§çš„ä¿¡æ¯ã€‚å˜å½¢æœ‰å¦‚Residual in Residualã€‚</p><figure><img src="/2020/08/05/cascade-recursive/v2-862e1c2dcb24f10d264544190ad38142_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><blockquote><p>ResNetç½‘ç»œçš„çŸ­è·¯è¿æ¥æœºåˆ¶ï¼ˆå…¶ä¸­+ä»£è¡¨çš„æ˜¯å…ƒç´ çº§ç›¸åŠ æ“ä½œï¼‰</p></blockquote><h2 id="dense">Dense</h2><p>æ¯ä¸ªConv Blockçš„è¾“å‡ºä¼šåœ¨Channelç»´ä¸Šå’Œåé¢æ‰€æœ‰Conv Blockçš„è¾“å‡ºConcateåˆ°ä¸€èµ·ã€‚æ³¨æ„å’ŒResidualç»“æ„çš„åŒºåˆ«ï¼Œå‰è€…æ˜¯ç›´æ¥é€ç‚¹ç›¸åŠ ï¼Œè€ŒDenseåˆ™æ˜¯å¹¶åˆ°Channelç»´åº¦ä¸Šã€‚</p><figure><img src="/2020/08/05/cascade-recursive/v2-2cb01c1c9a217e56c72f4c24096fe3fe_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><blockquote><p>DenseNetç½‘ç»œçš„å¯†é›†è¿æ¥æœºåˆ¶ï¼ˆå…¶ä¸­cä»£è¡¨çš„æ˜¯channelçº§è¿æ¥æ“ä½œï¼‰</p></blockquote><figure><img src="/2020/08/05/cascade-recursive/v2-0a9db078f505b469973974aee9c27605_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><blockquote><p>DenseNetçš„å‰å‘è¿‡ç¨‹</p></blockquote><figure><img src="/2020/08/05/cascade-recursive/v2-c81da515c8fa9796601fde82e4d36f61_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><blockquote><p>åŸå›¾</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;cascade&quot;&gt;Cascade&lt;/h2&gt;
&lt;p&gt;ç›¸å½“äºProgressive Optimizationï¼Œæ¯ä¸ªé˜¶æ®µéƒ½ä¼šè¾“å‡ºä¸€ä¸ªå’Œæœ€ç»ˆç»“æœå½¢çŠ¶ç›¸åŒçš„Matrixï¼Œå¦‚ç›®æ ‡åˆ†å¸ƒçš„å›¾åƒã€BBoxç­‰ï¼Œç„¶åä¸‹ä¸€ä¸ªblockçš„ä½œç”¨åˆ™æ˜¯è¾“å…¥è¿™ä¸ªMatrixå’Œå‰é¢æå–çš„Featuresï¼Œè¾“å‡ºRefinedåçš„Matrixï¼Œè¯¥æ­¥éª¤ä¸æ–­é‡å¤ã€‚æ ¸å¿ƒæ˜¯é€æ­¥ä¼˜åŒ–ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="deep-learning" scheme="https://www.miracleyoo.com/tags/deep-learning/"/>
    
  </entry>
  
  <entry>
    <title>IoU, AP, mAPç­‰å¯¹æ¯”</title>
    <link href="https://www.miracleyoo.com/2020/07/14/iou-ap-map/"/>
    <id>https://www.miracleyoo.com/2020/07/14/iou-ap-map/</id>
    <published>2020-07-15T01:01:42.000Z</published>
    <updated>2021-03-12T22:15:03.097Z</updated>
    
    <content type="html"><![CDATA[<h1 id="iou-ap-map-map0.5-map0.5-0.95-average-map">IoU, AP, mAP, mAP@0.5, mAP@[0.5: 0.95], Average mAP</h1><h2 id="tldr">TL;DR</h2><ol type="1"><li>IoUï¼šä¸¤ä¸ªæ¡†æ¡†é‡å éƒ¨åˆ†é¢ç§¯/ä¸¤ä¸ªæ¡†æ¡†åˆå¹¶åçš„æ€»é¢ç§¯â€‹</li><li>APï¼šç»˜åˆ¶Recall-Precisionå›¾ï¼Œç»è¿‡å¹³æ»‘åæ›²çº¿çš„ä¸‹é¢å…¨é¢ç§¯ã€‚è¿™ä¸ªå›¾çš„ç»˜åˆ¶æ–¹æ³•æ˜¯ï¼šæŒ‰ç…§æ¯ä¸ªé¢„æµ‹ç»“æœçš„Confidenceä»ä¸Šå¾€ä¸‹æ’åˆ—ï¼Œå…ˆåªå–ä¸€ä¸ªç”»å‡ºå›¾ä¸Šå·¦ä¸Šè§’ç¬¬ä¸€ä¸ªç‚¹ï¼Œç„¶åæ˜¯åªå–å‰ä¸¤ä¸ªï¼Œç›´åˆ°å–å®Œã€‚</li><li>mAPï¼šAPæ˜¯é’ˆå¯¹æŸä¸€ä¸ªç±»çš„ï¼Œè€ŒmAPæ˜¯æŠŠå„ä¸ªç±»çš„APåšä¸€ä¸ªå¹³å‡ã€‚</li><li>mAP@0.5ï¼šå½“IoUé˜ˆå€¼ä¸º0.5æ—¶çš„mAPã€‚</li><li>mAP@[0.5:0.95]ï¼šCOCOè¦æ±‚IoUé˜ˆå€¼åœ¨[0.5, 0.95]åŒºé—´å†…æ¯éš”0.05å–ä¸€æ¬¡ï¼Œè¿™æ ·å°±å¯ä»¥è®¡ç®—å‡º10ä¸ªç±»ä¼¼äºPASCALçš„mAPï¼Œç„¶åè¿™10ä¸ªè¿˜è¦å†åšå¹³å‡ã€‚</li></ol><span id="more"></span><h2 id="æŸ¥å‡†ç‡precisionå’ŒæŸ¥å…¨ç‡recall"><strong>æŸ¥å‡†ç‡ï¼ˆPrecisionï¼‰å’ŒæŸ¥å…¨ç‡ï¼ˆrecallï¼‰</strong></h2><p>æŸ¥å‡†ç‡ï¼ˆPrecisionï¼‰æ˜¯æŒ‡åœ¨æ‰€æœ‰é¢„æµ‹ä¸ºæ­£ä¾‹ä¸­çœŸæ­£ä¾‹çš„æ¯”ç‡ï¼Œä¹Ÿå³é¢„æµ‹çš„å‡†ç¡®æ€§ã€‚</p><p>æŸ¥å…¨ç‡ï¼ˆRecallï¼‰æ˜¯æŒ‡åœ¨æ‰€æœ‰æ­£ä¾‹ä¸­è¢«æ­£ç¡®é¢„æµ‹çš„æ¯”ç‡ï¼Œä¹Ÿå³é¢„æµ‹æ­£ç¡®çš„è¦†ç›–ç‡ã€‚</p><p>ä¸€ä¸ªæ ·æœ¬æ¨¡å‹é¢„æµ‹æŒ‰æ­£ç¡®ä¸å¦åˆ†ç±»å¦‚ä¸‹ï¼š</p><p>çœŸæ­£ä¾‹ï¼š <span class="math inline">\(TP=True\space Positive\)</span></p><p>çœŸåä¾‹ï¼š <span class="math inline">\(TN=True\space Negative\)</span></p><p>å‡æ­£ä¾‹ï¼š<span class="math inline">\(FP=False\space Positive\)</span></p><p>å‡åä¾‹ï¼š<span class="math inline">\(FN=False\space Negative\)</span></p><p><strong>åˆ™ï¼ŒæŸ¥å‡†ç‡å’ŒæŸ¥å…¨ç‡è®¡ç®—å…¬å¼ï¼š</strong></p><p><strong>æŸ¥å‡†ç‡</strong>ï¼š<span class="math inline">\(Precision=\frac{TP}{TP+FP}\)</span></p><p><strong>æŸ¥å…¨ç‡</strong>ï¼š<span class="math inline">\(Recall=\frac{TP}{TP+FN}\)</span></p><h2 id="äº¤å¹¶æ¯”iouintersection-over-union"><strong>äº¤å¹¶æ¯”IoU(Intersection over union)</strong></h2><p>äº¤å¹¶æ¯”IoUè¡¡é‡çš„æ˜¯ä¸¤ä¸ªåŒºåŸŸçš„é‡å ç¨‹åº¦ï¼Œæ˜¯ä¸¤ä¸ªåŒºåŸŸé‡å éƒ¨åˆ†é¢ç§¯å äºŒè€…æ€»é¢ç§¯ï¼ˆé‡å éƒ¨åˆ†åªè®¡ç®—ä¸€æ¬¡ï¼‰çš„æ¯”ä¾‹ã€‚å¦‚ä¸‹å›¾ï¼Œä¸¤ä¸ªçŸ©å½¢æ¡†çš„IoUæ˜¯äº¤å‰é¢ç§¯ï¼ˆä¸­é—´å›¾ç‰‡çº¢è‰²éƒ¨åˆ†ï¼‰ä¸åˆå¹¶é¢ç§¯ï¼ˆå³å›¾çº¢è‰²éƒ¨åˆ†ï¼‰é¢ç§¯ä¹‹æ¯”ã€‚</p><p><img src="/2020/07/14/iou-ap-map/v2-11ed1bf4a882ee38f9ea1f73a2593472_1440w.jpg" alt="img">IoUè®¡ç®—é‡å åº¦</p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯IoU=0.5ï¼Œå¹¶ä¸æ„å‘³ç€æ¯ä¸ªæ¡†åˆšå¥½æœ‰50%ä¸å¦å¤–ä¸€ä¸ªæ¡†äº¤å‰éƒ¨åˆ†ï¼Œè€Œæ˜¯æ¯ä¸ªæ¡†å¤§çº¦æœ‰2/3è¢«äº¤å‰ã€‚æœ‰ç‚¹åç›´è§‰ã€‚</p><p>æˆ‘å½“åˆçœ‹åˆ°IoUï¼Œéå¸¸ç–‘æƒ‘ä¸ºå•¥ä¸æŒ‰äº¤å‰é¢ç§¯å æ¯ä¸ªæ¡†çš„æ¯”ä¾‹ï¼ˆIoA ä¹Ÿå³Intersection over Areaï¼‰å–å¤§å€¼è®¡ç®—é‡å åº¦ï¼Œæ›´ç¬¦åˆç›´è§‰ã€‚å…¶å®è¿™ç§ç®—æ³•åªååº”å°å›¾ç‰‡çš„è¢«é®ç›–åº¦ï¼Œå¹¶ä¸èƒ½åæ˜ äº’ç›¸ä¹‹é—´çš„é‡å åº¦ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸å¯å–ã€‚å¦‚ä¸‹å›¾ï¼Œæ©™è‰²éƒ¨åˆ†è¾ƒå°ï¼ŒIoAå¾ˆå¤§ï¼Œä½†å¯¹äºè“è‰²éƒ¨åˆ†ï¼ŒIoAå°±å¾ˆå°ï¼ŒåªæŒ‰æ©™è‰²å–IoAæ˜¾ç„¶æœ‰å¤±åé©³ã€‚</p><p><img src="/2020/07/14/iou-ap-map/v2-284022eaa7bbb8dd7b4f8488e0495fcd_1440w.jpg" alt="img">IoAè®¡ç®—é‡å åº¦</p><h2 id="å•ç±»åˆ«apaverage-precisionçš„è®¡ç®—"><strong>å•ç±»åˆ«AP(Average Precision)çš„è®¡ç®—</strong></h2><p>ç‰©ä½“æ£€æµ‹ä¸­çš„æ¯ä¸€ä¸ªé¢„æµ‹ç»“æœåŒ…å«ä¸¤éƒ¨åˆ†ï¼Œé¢„æµ‹æ¡†ï¼ˆbounding boxï¼‰å’Œç½®ä¿¡æ¦‚ç‡ï¼ˆPcï¼‰ã€‚bounding boxé€šå¸¸ä»¥çŸ©å½¢é¢„æµ‹æ¡†çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡è¡¨ç¤ºï¼Œå³x_min, y_min, x_max, y_maxï¼Œå¦‚ä¸‹å›¾ã€‚ç½®ä¿¡æ¦‚ç‡Pcæœ‰ä¸¤å±‚æ„æ€ï¼Œä¸€æ˜¯æ‰€é¢„æµ‹bounding boxçš„ç±»åˆ«ï¼ŒäºŒæ˜¯è¿™ä¸ªç±»åˆ«çš„ç½®ä¿¡æ¦‚ç‡ï¼Œå¦‚ä¸‹å›¾ä¸­çš„P_dog=0.88ï¼Œä»£è¡¨é¢„æµ‹ç»¿è‰²æ¡†ä¸ºdogï¼Œå¹¶ä¸”ç½®ä¿¡æ¦‚ç‡ä¸º88%ã€‚</p><figure><img src="/2020/07/14/iou-ap-map/v2-8e1e070d1a59043a349eb1f921ea1e1c_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>é‚£ä¹ˆï¼Œæ€ä¹ˆæ‰å«é¢„æµ‹æ­£ç¡®å‘¢ï¼Ÿæ˜¾è€Œæ˜“è§çš„ï¼Œå¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ol type="1"><li>ç±»åˆ«æ­£ç¡®ä¸”ç½®ä¿¡åº¦å¤§äºä¸€å®šé˜€å€¼ï¼ˆP_thresholdï¼‰</li><li>é¢„æµ‹æ¡†ä¸çœŸå®æ¡†ï¼ˆground truthï¼‰çš„IoUå¤§äºä¸€å®šé˜€å€¼ï¼ˆIoU_thresholdï¼‰</li></ol><p>å¦‚ä¸‹å›¾ï¼Œå‡å¦‚P_threshold=0.6ï¼ŒIoU_threshold=0.5ï¼Œåˆ™ç»¿è‰²æ¡†é¢„æµ‹æ­£ç¡®ï¼Œè®°ä¸ºTrue Positiveã€‚</p><figure><img src="/2020/07/14/iou-ap-map/v2-fa34f541cee564e83435562297e768ab_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è€Œåœ¨è¡¡é‡æ¨¡å‹æ€§èƒ½æ—¶ï¼ŒIoU_thresholdå…ˆå–ä¸€ä¸ªå®šå€¼ï¼Œç„¶åç»¼åˆè€ƒè™‘å„ç§P_thresholdå–å€¼æ—¶çš„æ€§èƒ½ï¼Œè¿›è€Œå¾—åˆ°ä¸€ä¸ªä¸P_thresholdé€‰å®šæ— å…³çš„æ¨¡å‹æ€§èƒ½è¡¡é‡æ ‡å‡†ã€‚</p><p><strong>APæ˜¯è®¡ç®—å•ç±»åˆ«çš„æ¨¡å‹å¹³å‡å‡†ç¡®åº¦ã€‚</strong></p><p>å‡å¦‚ç›®æ ‡ç±»åˆ«ä¸ºDogï¼Œæœ‰5å¼ ç…§ç‰‡ï¼Œå…±åŒ…å«7åªDogï¼Œä¹Ÿå³GTï¼ˆGround Truthï¼‰æ•°é‡ä¸º7ï¼Œç»æ¨¡å‹é¢„æµ‹ï¼Œå¾—åˆ°äº†Dogçš„10ä¸ªé¢„æµ‹ç»“æœï¼Œé€‰å®šIoU_threshold=0.5ï¼Œç„¶åæŒ‰confidenceä»é«˜åˆ°ä½æ’åºï¼Œå¦‚ä¸‹å›¾ã€‚å…¶ä¸­ï¼ŒBBè¡¨ç¤ºBounding Boxåºå·ï¼ŒGT=1è¡¨ç¤ºæœ‰GTä¸æ‰€é¢„æµ‹çš„Bounding Boxçš„IoU&gt;=IoU_thresholdï¼ŒBounding Boxåºå·ç›¸åŒä»£è¡¨æ‰€å¯¹åº”çš„GTæ˜¯åŒä¸€ä¸ªã€‚</p><table><thead><tr class="header"><th>Rank</th><th>BB</th><th>confidence</th><th>GT</th></tr></thead><tbody><tr class="odd"><td>1</td><td>BB1</td><td>0.9</td><td>1</td></tr><tr class="even"><td>2</td><td>BB2</td><td>0.8</td><td>1</td></tr><tr class="odd"><td>3</td><td>BB1</td><td>0.8</td><td>1</td></tr><tr class="even"><td>4</td><td>BB3</td><td>0.5</td><td>0</td></tr><tr class="odd"><td>5</td><td>BB4</td><td>0.4</td><td>0</td></tr><tr class="even"><td>6</td><td>BB5</td><td>0.4</td><td>1</td></tr><tr class="odd"><td>7</td><td>BB6</td><td>0.3</td><td>0</td></tr><tr class="even"><td>8</td><td>BB7</td><td>0.2</td><td>0</td></tr><tr class="odd"><td>9</td><td>BB8</td><td>0.1</td><td>1</td></tr><tr class="even"><td>10</td><td>BB9</td><td>0.1</td><td>1</td></tr></tbody></table><p>å› æ­¤ï¼Œå¦‚æœè®¾ç½®P_threshold=0ï¼Œåˆ™æœ‰ TP=5 (BB1, BB2, BB5, BB8, BB9)ï¼ŒFP=5 (é‡å¤æ£€æµ‹åˆ°çš„BB1ä¹Ÿç®—FP)ã€‚é™¤äº†è¡¨é‡Œæ£€æµ‹åˆ°çš„5ä¸ªGTä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰2ä¸ªGTæ²¡è¢«æ£€æµ‹åˆ°ï¼Œå› æ­¤: FN = 2.</p><p>ç„¶åä¾æ¬¡ä»ä¸Šåˆ°ä¸‹è®¾å®šå¯¹åº”çš„rankä¸ºæ­£ååˆ†ç•Œçº¿ï¼Œæ­¤rankä¹‹å‰ï¼ˆåŒ…å«æ­¤rankï¼‰çš„é¢„æµ‹ä¸ºæ­£ï¼Œæ­¤rankä¹‹åçš„é¢„æµ‹ä¸ºåï¼Œç„¶åè®¡ç®—å¯¹åº”çš„Precisionå’ŒRecallï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">rank=1  precision=1.00 and recall=0.14</span><br><span class="line">--------------------------------------</span><br><span class="line">rank=2  precision=1.00 and recall=0.29</span><br><span class="line">--------------------------------------</span><br><span class="line">rank=3  precision=0.66 and recall=0.29</span><br><span class="line">--------------------------------------</span><br><span class="line">rank=4  precision=0.50 and recall=0.29</span><br><span class="line">--------------------------------------</span><br><span class="line">rank=5  precision=0.40 and recall=0.29</span><br><span class="line">--------------------------------------</span><br><span class="line">rank=6  precision=0.50 and recall=0.43</span><br><span class="line">--------------------------------------</span><br><span class="line">rank=7  precision=0.43 and recall=0.43</span><br><span class="line">--------------------------------------</span><br><span class="line">rank=8  precision=0.38 and recall=0.43</span><br><span class="line">--------------------------------------</span><br><span class="line">rank=9  precision=0.44 and recall=0.57</span><br><span class="line">--------------------------------------</span><br><span class="line">rank=10 precision=0.50 and recall=0.71</span><br><span class="line">--------------------------------------</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚rank=4æ—¶ï¼ŒTP=2 (BB1, BB2)ï¼Œåˆ™</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Precision=2/4=0.5ï¼ŒRecall=TP/GT=2/7=0.29</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œéšç€é¢„æµ‹æ­£ååˆ†å‰²çº¿çš„å‘ä¸‹ç§»åŠ¨ï¼ŒRecallç¨³æ­¥å˜å¤§ï¼ŒPrecisionæ•´ä½“å‡å°ï¼Œå±€éƒ¨ä¸Šä¸‹è·³åŠ¨ï¼ŒPRæ›²çº¿å¦‚ä¸‹å›¾ï¼š</p><figure><img src="/2020/07/14/iou-ap-map/v2-0a899369aeab8824dc3dd3e4fe572cd3_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>AP(Average Precision)çš„è®¡ç®—åŸºæœ¬ç­‰åŒäºè®¡ç®—PRæ›²çº¿ä¸‹çš„é¢ç§¯ï¼Œä½†ç•¥æœ‰ä¸åŒã€‚éœ€è¦å…ˆå°†PRæ›²çº¿å¹³æ»‘åŒ–ã€‚</p><p>æ–¹æ³•æ˜¯ï¼ŒæŸ¥å…¨ç‡rå¯¹åº”çš„æŸ¥å‡†ç‡pï¼Œå–æŸ¥å…¨ç‡å¤§äºç­‰äºræ—¶æœ€å¤§çš„æŸ¥å‡†ç‡pã€‚å³ï¼Œ <span class="math display">\[tex=p(r)=\max_{\tilde{r}\geq r}{p(\tilde{r})}\]</span> å¹³æ»‘åçš„æ›²çº¿å¦‚ä¸‹å›¾ä¸­çš„ç»¿è‰²æ›²çº¿ï¼š</p><figure><img src="/2020/07/14/iou-ap-map/v2-666e46a022e32981aeb07b85958803cc_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¯¹äºAP(Average Precision)çš„è®¡ç®—æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><p><strong>1. VOC2010ä¹‹å‰çš„æ–¹æ³•</strong></p><p>AP =ï¼ˆå¹³æ»‘åPRæ›²çº¿ä¸Šï¼ŒRecallåˆ†åˆ«ç­‰äº0ï¼Œ0.1ï¼Œ0.2ï¼Œâ€¦ , 1.0ç­‰11å¤„Precisionçš„å¹³å‡å€¼ï¼‰ã€‚ <span class="math display">\[AP=\frac{1}{11}\sum_{r\subseteq\left\{0,0.1,..,1.0\right\}}{p\left(r\right)}\]</span></p><p>è¿™é‡Œåˆ™æœ‰ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AP = (1 + 1 + 1 + 0.5 + 0.5 + 0.5 + 0.5 + 0.5 + 0 + 0 + 0) / 11 = 0.5</span><br></pre></td></tr></table></figure><p><strong>2. VOC2010åŠä»¥åçš„æ–¹æ³•</strong></p><p>AP=å¹³æ»‘åPRæ›²çº¿ä¸‹åŒ…å›´çš„é¢ç§¯</p><p>è¿™é‡Œåˆ™æœ‰ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AP = (0.14-0) * 1 + (0.29-0.14) * 1 + (0.43-0.29) * 0.5 + (0.57-0.43) * 0.5 + (0.71-0.57) * 0.5 + (1-0.71) * 0 = 0.5</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¸¤ç§æ–¹æ¡ˆå¾—å‡ºçš„APå€¼ç›¸åŒï¼Œä½†é€šå¸¸æ˜¯ä¸åŒçš„ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ä¸Šè¿°APçš„è®¡ç®—å¹¶æ²¡æœ‰æ˜¾å¼è®¾å®š<code>P_threshold</code>ï¼Œè€Œæ˜¯é€šè¿‡ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æŒ‡å®šæ¯ä¸€ä¸ªrankä¸ºæ­£ååˆ†ç•Œçº¿æ¥å˜ç›¸çš„åæ˜ <code>P_threshold</code>ä¸åŒå–å€¼ã€‚</p><h2 id="mapçš„è®¡ç®—"><strong>mAPçš„è®¡ç®—</strong></h2><p>ä¸Šè¿°è®¡ç®—çš„APåªæ˜¯é’ˆå¯¹dogè¿™ä¸ªç±»åˆ«ï¼Œç‰©ä½“æ£€æµ‹é€šå¸¸æœ‰å¤šä¸ªç±»åˆ«ï¼Œæ¨¡å‹æ€§èƒ½è‚¯å®šæ˜¯å¤šä¸ªç±»åˆ«å‡†åº¦çš„ç»¼åˆåº¦é‡ã€‚</p><p><strong>1. VOCæ•°æ®é›†ä¸­çš„mAP</strong></p><p>VOCæ•°æ®é›†ä¸­çš„mAPè®¡ç®—çš„æ˜¯<code>IoU_threshold=0.5</code>æ—¶å„ä¸ªç±»åˆ«APçš„å‡å€¼ã€‚</p><p><strong>2. COCOæ•°æ®é›†ä¸­çš„mAP</strong></p><p>æ£€æµ‹æ˜¯å¦æ­£ç¡®æœ‰ä¸¤ä¸ªè¶…å‚æ•°ï¼Œ<code>P_threshold</code>å’Œ<code>IoU_threshold</code>ã€‚APæ˜¯å›ºå®šäº†<code>IoU_threshold</code>ï¼Œå†ç»¼åˆè€ƒè™‘å„ä¸ª<code>P_threshold</code>ä¸‹çš„æ¨¡å‹å¹³å‡å‡†ç¡®åº¦ã€‚</p><p>VOCè®¤ä¸º<code>IoU_threshold</code>å›ºå®šä¸€ä¸ªå•å€¼0.5å³å¯ï¼ŒCOCOåˆ™è®¤ä¸ºå›ºå®šäº†<code>IoU_threshold</code>çš„å–å€¼ï¼Œæ— æ³•è¡¡é‡<code>IoU_threshold</code>å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“ã€‚</p><p>æ¯”å¦‚ï¼Œ</p><p>Aæ¨¡å‹åœ¨<code>IoU_threshold=0.5</code>æ—¶ï¼Œ<code>mAP=0.4</code>ã€‚</p><p>Bæ¨¡å‹åœ¨<code>IoU_threshold=0.7</code>æ—¶ï¼Œ<code>mAP</code>åŒæ ·ä¸º0.4ã€‚</p><p>ä¾æ®VOCçš„æ ‡å‡†ï¼ŒABæ¨¡å‹çš„æ€§èƒ½ä¸€æ ·ï¼Œä½†æ˜¾ç„¶Bæ¨¡å‹çš„æ¡†æ›´å‡†ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚</p><p>COCOåœ¨VOCæ ‡å‡†çš„åŸºç¡€ä¸Šï¼Œå–<code>IoU_threshold=0.5ï¼Œ0.55ï¼Œ 0.6ï¼Œâ€¦ , 0.95</code>æ—¶å„ä¸ªmAPçš„å‡å€¼ã€‚</p><h2 id="reference">Reference</h2><ol type="1"><li><a href="https://arleyzhang.github.io/articles/c521a01c/">ç›®æ ‡æ£€æµ‹è¯„ä»·æ ‡å‡†-AP mAP</a></li><li><a href="http://blog.sina.com.cn/s/blog_9db078090102whzw.html">å¤šæ ‡ç­¾å›¾åƒåˆ†ç±»ä»»åŠ¡çš„è¯„ä»·æ–¹æ³•-mAP</a></li><li><a href="https://zhuanlan.zhihu.com/p/56961620">è¯¦è§£object detectionä¸­çš„mAP</a></li><li><a href="https://blog.csdn.net/luke_sanjayzzzhong/article/details/89851944">å¯¹äºç›®æ ‡æ£€æµ‹ä¸­mAP@0.5çš„ç†è§£</a></li><li><a href="https://datascience.stackexchange.com/questions/16797/what-does-the-notation-map-5-95-mean">What does the notation mAP@[.5:.95] mean?</a></li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;iou-ap-map-map0.5-map0.5-0.95-average-map&quot;&gt;IoU, AP, mAP, mAP@0.5, mAP@[0.5: 0.95], Average mAP&lt;/h1&gt;
&lt;h2 id=&quot;tldr&quot;&gt;TL;DR&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;IoUï¼šä¸¤ä¸ªæ¡†æ¡†é‡å éƒ¨åˆ†é¢ç§¯/ä¸¤ä¸ªæ¡†æ¡†åˆå¹¶åçš„æ€»é¢ç§¯â€‹&lt;/li&gt;
&lt;li&gt;APï¼šç»˜åˆ¶Recall-Precisionå›¾ï¼Œç»è¿‡å¹³æ»‘åæ›²çº¿çš„ä¸‹é¢å…¨é¢ç§¯ã€‚è¿™ä¸ªå›¾çš„ç»˜åˆ¶æ–¹æ³•æ˜¯ï¼šæŒ‰ç…§æ¯ä¸ªé¢„æµ‹ç»“æœçš„Confidenceä»ä¸Šå¾€ä¸‹æ’åˆ—ï¼Œå…ˆåªå–ä¸€ä¸ªç”»å‡ºå›¾ä¸Šå·¦ä¸Šè§’ç¬¬ä¸€ä¸ªç‚¹ï¼Œç„¶åæ˜¯åªå–å‰ä¸¤ä¸ªï¼Œç›´åˆ°å–å®Œã€‚&lt;/li&gt;
&lt;li&gt;mAPï¼šAPæ˜¯é’ˆå¯¹æŸä¸€ä¸ªç±»çš„ï¼Œè€ŒmAPæ˜¯æŠŠå„ä¸ªç±»çš„APåšä¸€ä¸ªå¹³å‡ã€‚&lt;/li&gt;
&lt;li&gt;mAP@0.5ï¼šå½“IoUé˜ˆå€¼ä¸º0.5æ—¶çš„mAPã€‚&lt;/li&gt;
&lt;li&gt;mAP@[0.5:0.95]ï¼šCOCOè¦æ±‚IoUé˜ˆå€¼åœ¨[0.5, 0.95]åŒºé—´å†…æ¯éš”0.05å–ä¸€æ¬¡ï¼Œè¿™æ ·å°±å¯ä»¥è®¡ç®—å‡º10ä¸ªç±»ä¼¼äºPASCALçš„mAPï¼Œç„¶åè¿™10ä¸ªè¿˜è¦å†åšå¹³å‡ã€‚&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    
    <category term="machine-learning" scheme="https://www.miracleyoo.com/tags/machine-learning/"/>
    
    <category term="deep-learning" scheme="https://www.miracleyoo.com/tags/deep-learning/"/>
    
  </entry>
  
  <entry>
    <title>Pytorchå®˜æ–¹æ¨¡å‹å®ç°åˆ†æ</title>
    <link href="https://www.miracleyoo.com/2020/07/11/pytorch-official-network-analysis/"/>
    <id>https://www.miracleyoo.com/2020/07/11/pytorch-official-network-analysis/</id>
    <published>2020-07-11T20:08:17.000Z</published>
    <updated>2021-03-12T22:08:45.249Z</updated>
    
    <content type="html"><![CDATA[<h2 id="resnet">Resnet</h2><h3 id="å¦‚ä½•åº”å¯¹ä¸åŒå°ºå¯¸è¾“å…¥">å¦‚ä½•åº”å¯¹ä¸åŒå°ºå¯¸è¾“å…¥</h3><p>åœ¨ç½‘ç»œæœ€åæ·»åŠ ä¸€ä¸ª<code>AdaptiveAvgPool2d(output_size)</code>å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ— è®ºè¾“å…¥å›¾ç‰‡å½¢çŠ¶å¦‚ä½•ï¼Œæœ€ç»ˆéƒ½ä¼šè½¬æ¢ä¸ºç»™å®šè¾“å‡ºå°ºå¯¸ã€‚è€ŒResnetä¸­ï¼Œè¿™ä¸ª<code>output_size</code>è¢«è®¾ç½®ä¸ºäº†<code>(1,1)</code>ï¼Œå³æ— è®ºè¾“å…¥çš„å›¾ç‰‡å°ºå¯¸ä¸ºå¤šå°‘ï¼Œåªè¦å…¶å¤§å°è¶³ä»¥æ‰›å¾—ä½ç½‘ç»œå‰é¢çš„ä¸€ç³»åˆ—pooling layersï¼Œåˆ°æœ€åçš„è¾“å‡ºå°ºå¯¸å¤§äºç­‰äº<code>(1,1)</code>ï¼Œå…¶æ¯ä¸ªChannelå°±ä¼šè¢«è¿™ä¸€å±‚å‹ç¼©æˆä¸€ä¸ªç‚¹ï¼Œå³æœ€ååªä¼šå¾—åˆ°ä¸€ä¸ªä¸Channelæ•°ç›®ç›¸ç­‰çš„å‘é‡ã€‚è¿™ä¸ªå‘é‡è¢«é€åˆ°äº†FCå±‚ã€‚</p><span id="more"></span><h3 id="å¦‚ä½•åº”å¯¹channelæ•°ç›®ä¸åˆé€‚é—®é¢˜">å¦‚ä½•åº”å¯¹Channelæ•°ç›®ä¸åˆé€‚é—®é¢˜</h3><p>ç”±äºå…¼å®¹äº†å„ç§å¤§å°å’Œå°ºå¯¸çš„æ¨¡å‹ï¼Œæ‰€ä»¥æœ‰æ—¶éš¾å…ä¼šå‡ºç°å¦‚Channelæ•°ç›®æ— æ³•è¢«4æ•´é™¤ï¼ˆBottleNeck Layerè¦æ±‚ï¼‰çš„æƒ…å†µã€‚è¿™é‡Œï¼Œå®ƒä½¿ç”¨äº†<code>1x1 conv</code>çš„æ–¹æ³•ã€‚ç”±äºæ¯ä¸ªblockçš„è¾“å‡ºéƒ½è¦åŠ åˆ°è¾“å…¥ä¸Šï¼Œå¦‚æœè¿™ä¸ªæ•´é™¤ä¸äº†ï¼Œç»“æœå°±æ˜¯Channelæ•°ç›®ä¸åŒ¹é…æ— æ³•åšResidualã€‚è¿™é‡Œçš„æ“ä½œæ˜¯ï¼Œå¦‚æœè¾“å‡º<code>Channelæ•°*4 != è¾“å…¥Channelæ•°</code>ï¼Œé‚£ä¹ˆå°±ç›´æ¥è®©è¾“å…¥å…ˆç”¨<code>1x1 conv</code>æ”¹å˜ç»´åº¦åˆ°<code>è¾“å‡ºChannelæ•°*4</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> stride != <span class="number">1</span> <span class="keyword">or</span> self.inplanes != planes * block.expansion:</span><br><span class="line">    downsample = nn.Sequential(</span><br><span class="line">        conv1x1(self.inplanes, planes * block.expansion, stride),</span><br><span class="line">        norm_layer(planes * block.expansion),</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•åº”å¯¹ä¸åŒæ€»layeræ•°çš„resnetä½¿ç”¨ä¸åŒçš„layer-blockçš„é—®é¢˜">å¦‚ä½•åº”å¯¹ä¸åŒæ€»Layeræ•°çš„Resnetä½¿ç”¨ä¸åŒçš„Layer Blockçš„é—®é¢˜</h3><p>åœ¨Resnetä¸­ï¼Œresnet18, 34ä½¿ç”¨çš„æ˜¯åŒå±‚<code>3x3 conv</code>çš„<code>Basic Block</code>ï¼Œè€Œresnet50, 101, 152åˆ™ä½¿ç”¨çš„æ˜¯<code>1x1conv -&gt; 3x3 conv -&gt; 1x1 conv</code>çš„ç»“æ„ã€‚ä¸ºäº†è·å¾—æœ€å¤§çš„å…¼å®¹æ€§ï¼Œè¿™é‡Œå®˜æ–¹æ¨¡å‹å°†<code>Basic Block</code>å’Œ<code>Bottleneck Block</code>åˆ†åˆ«å®šä¹‰ä¸ºä¸¤ä¸ªclassï¼Œå³å­æ¨¡å—ï¼Œç„¶åå¯¹äºä¸åŒå°ºå¯¸çš„resnetåˆ†åˆ«è¾“å…¥ä¸åŒçš„æ¨¡å—ã€‚</p><h3 id="ä¸ºä»€ä¹ˆå®šä¹‰äº†conv3x3å’Œconv1x1ä¸¤ä¸ªå‡½æ•°">ä¸ºä»€ä¹ˆå®šä¹‰äº†conv3x3å’Œconv1x1ä¸¤ä¸ªå‡½æ•°</h3><p>è¿™ä¸¤ä¸ªå‡½æ•°çœ‹ä¼¼ç”»è›‡æ·»è¶³å¤šæ­¤ä¸€ä¸¾ï¼Œä½†å®é™…ä¸Šåœ¨æˆ‘çš„ç†è§£ä¸­ï¼Œä»–ä»¬é¿å…äº†ä¸€äº›é‡å¤å˜é‡çš„è¾“å…¥ï¼Œæ›´ç›´è§‚åœ°åæ˜ äº†è¯¥å±‚çš„åŠŸèƒ½ï¼š<code>1x1</code>æˆ–<code>3x3</code>ï¼Œä¹Ÿæ½œåœ¨åœ°é¿å…äº†ä¸€äº›é”™è¯¯ï¼Œå¹¶ä¼˜åŒ–äº†ç†è§£ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;resnet&quot;&gt;Resnet&lt;/h2&gt;
&lt;h3 id=&quot;å¦‚ä½•åº”å¯¹ä¸åŒå°ºå¯¸è¾“å…¥&quot;&gt;å¦‚ä½•åº”å¯¹ä¸åŒå°ºå¯¸è¾“å…¥&lt;/h3&gt;
&lt;p&gt;åœ¨ç½‘ç»œæœ€åæ·»åŠ ä¸€ä¸ª&lt;code&gt;AdaptiveAvgPool2d(output_size)&lt;/code&gt;å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ— è®ºè¾“å…¥å›¾ç‰‡å½¢çŠ¶å¦‚ä½•ï¼Œæœ€ç»ˆéƒ½ä¼šè½¬æ¢ä¸ºç»™å®šè¾“å‡ºå°ºå¯¸ã€‚è€ŒResnetä¸­ï¼Œè¿™ä¸ª&lt;code&gt;output_size&lt;/code&gt;è¢«è®¾ç½®ä¸ºäº†&lt;code&gt;(1,1)&lt;/code&gt;ï¼Œå³æ— è®ºè¾“å…¥çš„å›¾ç‰‡å°ºå¯¸ä¸ºå¤šå°‘ï¼Œåªè¦å…¶å¤§å°è¶³ä»¥æ‰›å¾—ä½ç½‘ç»œå‰é¢çš„ä¸€ç³»åˆ—pooling layersï¼Œåˆ°æœ€åçš„è¾“å‡ºå°ºå¯¸å¤§äºç­‰äº&lt;code&gt;(1,1)&lt;/code&gt;ï¼Œå…¶æ¯ä¸ªChannelå°±ä¼šè¢«è¿™ä¸€å±‚å‹ç¼©æˆä¸€ä¸ªç‚¹ï¼Œå³æœ€ååªä¼šå¾—åˆ°ä¸€ä¸ªä¸Channelæ•°ç›®ç›¸ç­‰çš„å‘é‡ã€‚è¿™ä¸ªå‘é‡è¢«é€åˆ°äº†FCå±‚ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="deep-learning" scheme="https://www.miracleyoo.com/tags/deep-learning/"/>
    
    <category term="pytorch" scheme="https://www.miracleyoo.com/tags/pytorch/"/>
    
  </entry>
  
  <entry>
    <title>Attention ä»åˆ†ç±»åˆ°å®ç°ç»†èŠ‚</title>
    <link href="https://www.miracleyoo.com/2020/07/06/attention-wiki/"/>
    <id>https://www.miracleyoo.com/2020/07/06/attention-wiki/</id>
    <published>2020-07-07T00:13:30.000Z</published>
    <updated>2021-03-12T22:16:17.487Z</updated>
    
    <content type="html"><![CDATA[<p>Attentionçš„æœ¬è´¨å¯ä»¥çœ‹åšåŠ æƒæ±‚å’Œã€‚</p><h2 id="attention-çš„-n-ç§ç±»å‹">Attention çš„ N ç§ç±»å‹</h2><figure><img src="/2020/07/06/attention-wiki/image-20200705230846450.png" alt="image-20200705230846450"><figcaption aria-hidden="true">image-20200705230846450</figcaption></figure><p>Attention æœ‰å¾ˆå¤šç§ä¸åŒçš„ç±»å‹ï¼šSoft Attentionã€Hard Attentionã€é™æ€ Attentionã€åŠ¨æ€ Attentionã€Self Attention ç­‰ç­‰ã€‚ä¸Šå›¾ä¸ºå„ç§Attentionçš„åˆ†ç±»ï¼Œä¸‹é¢æ˜¯è¿™äº›ä¸åŒçš„ Attention çš„è§£é‡Šã€‚</p><p>ç”±äºè¿™ç¯‡æ–‡ç« ã€Š<a href="https://zhuanlan.zhihu.com/p/35739040">Attention ç”¨äº NLP çš„ä¸€äº›å°ç»“</a>ã€‹å·²ç»æ€»ç»“çš„å¾ˆå¥½çš„ï¼Œä¸‹é¢å°±ç›´æ¥å¼•ç”¨äº†ï¼š</p><p>æœ¬èŠ‚ä»è®¡ç®—åŒºåŸŸã€æ‰€ç”¨ä¿¡æ¯ã€ç»“æ„å±‚æ¬¡å’Œæ¨¡å‹ç­‰æ–¹é¢å¯¹ Attention çš„å½¢å¼è¿›è¡Œå½’ç±»ã€‚</p><span id="more"></span><h3 id="è®¡ç®—åŒºåŸŸ"><strong>1. è®¡ç®—åŒºåŸŸ</strong></h3><p>æ ¹æ® Attention çš„è®¡ç®—åŒºåŸŸï¼Œå¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ç§ï¼š</p><p>1ï¼‰<strong>Soft</strong> Attentionï¼Œè¿™æ˜¯æ¯”è¾ƒå¸¸è§çš„ Attention æ–¹å¼ï¼Œå¯¹æ‰€æœ‰ key æ±‚æƒé‡æ¦‚ç‡ï¼Œæ¯ä¸ª key éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„æƒé‡ï¼Œæ˜¯ä¸€ç§å…¨å±€çš„è®¡ç®—æ–¹å¼ï¼ˆä¹Ÿå¯ä»¥å« Global Attentionï¼‰ã€‚è¿™ç§æ–¹å¼æ¯”è¾ƒç†æ€§ï¼Œå‚è€ƒäº†æ‰€æœ‰ key çš„å†…å®¹ï¼Œå†è¿›è¡ŒåŠ æƒã€‚ä½†æ˜¯è®¡ç®—é‡å¯èƒ½ä¼šæ¯”è¾ƒå¤§ä¸€äº›ã€‚</p><p>2ï¼‰<strong>Hard</strong> Attentionï¼Œè¿™ç§æ–¹å¼æ˜¯ç›´æ¥ç²¾å‡†å®šä½åˆ°æŸä¸ª keyï¼Œå…¶ä½™ key å°±éƒ½ä¸ç®¡äº†ï¼Œç›¸å½“äºè¿™ä¸ª key çš„æ¦‚ç‡æ˜¯ 1ï¼Œå…¶ä½™ key çš„æ¦‚ç‡å…¨éƒ¨æ˜¯ 0ã€‚å› æ­¤è¿™ç§å¯¹é½æ–¹å¼è¦æ±‚å¾ˆé«˜ï¼Œè¦æ±‚ä¸€æ­¥åˆ°ä½ï¼Œå¦‚æœæ²¡æœ‰æ­£ç¡®å¯¹é½ï¼Œä¼šå¸¦æ¥å¾ˆå¤§çš„å½±å“ã€‚å¦ä¸€æ–¹é¢ï¼Œå› ä¸ºä¸å¯å¯¼ï¼Œä¸€èˆ¬éœ€è¦ç”¨å¼ºåŒ–å­¦ä¹ çš„æ–¹æ³•è¿›è¡Œè®­ç»ƒã€‚ï¼ˆæˆ–è€…ä½¿ç”¨ gumbel softmax ä¹‹ç±»çš„ï¼‰</p><p>3ï¼‰<strong>Local</strong> Attentionï¼Œè¿™ç§æ–¹å¼å…¶å®æ˜¯ä»¥ä¸Šä¸¤ç§æ–¹å¼çš„ä¸€ä¸ªæŠ˜ä¸­ï¼Œå¯¹ä¸€ä¸ªçª—å£åŒºåŸŸè¿›è¡Œè®¡ç®—ã€‚å…ˆç”¨ Hard æ–¹å¼å®šä½åˆ°æŸä¸ªåœ°æ–¹ï¼Œä»¥è¿™ä¸ªç‚¹ä¸ºä¸­å¿ƒå¯ä»¥å¾—åˆ°ä¸€ä¸ªçª—å£åŒºåŸŸï¼Œåœ¨è¿™ä¸ªå°åŒºåŸŸå†…ç”¨ Soft æ–¹å¼æ¥ç®— Attentionã€‚</p><h3 id="æ‰€ç”¨ä¿¡æ¯"><strong>2. æ‰€ç”¨ä¿¡æ¯</strong></h3><p>å‡è®¾æˆ‘ä»¬è¦å¯¹ä¸€æ®µåŸæ–‡è®¡ç®— Attentionï¼Œè¿™é‡ŒåŸæ–‡æŒ‡çš„æ˜¯æˆ‘ä»¬è¦åš attention çš„æ–‡æœ¬ï¼Œé‚£ä¹ˆæ‰€ç”¨ä¿¡æ¯åŒ…æ‹¬å†…éƒ¨ä¿¡æ¯å’Œå¤–éƒ¨ä¿¡æ¯ï¼Œå†…éƒ¨ä¿¡æ¯æŒ‡çš„æ˜¯åŸæ–‡æœ¬èº«çš„ä¿¡æ¯ï¼Œè€Œå¤–éƒ¨ä¿¡æ¯æŒ‡çš„æ˜¯é™¤åŸæ–‡ä»¥å¤–çš„é¢å¤–ä¿¡æ¯ã€‚</p><p>1ï¼‰<strong>General</strong> Attentionï¼Œè¿™ç§æ–¹å¼åˆ©ç”¨åˆ°äº†å¤–éƒ¨ä¿¡æ¯ï¼Œå¸¸ç”¨äºéœ€è¦æ„å»ºä¸¤æ®µæ–‡æœ¬å…³ç³»çš„ä»»åŠ¡ï¼Œquery ä¸€èˆ¬åŒ…å«äº†é¢å¤–ä¿¡æ¯ï¼Œæ ¹æ®å¤–éƒ¨ query å¯¹åŸæ–‡è¿›è¡Œå¯¹é½ã€‚</p><p>ç®€å•åˆ¤å®šä¾æ®ï¼š<strong>è®¡ç®—Attentionæ—¶ï¼Œæœ‰æ²¡æœ‰ç”¨åˆ°é™¤äº†è¢«Attentionå‘é‡ä»¥å¤–çš„å‘é‡ã€‚</strong></p><p>æ¯”å¦‚åœ¨é˜…è¯»ç†è§£ä»»åŠ¡ä¸­ï¼Œéœ€è¦æ„å»ºé—®é¢˜å’Œæ–‡ç« çš„å…³è”ï¼Œå‡è®¾ç°åœ¨ baseline æ˜¯ï¼Œå¯¹é—®é¢˜è®¡ç®—å‡ºä¸€ä¸ªé—®é¢˜å‘é‡ qï¼ŒæŠŠè¿™ä¸ª q å’Œæ‰€æœ‰çš„æ–‡ç« è¯å‘é‡æ‹¼æ¥èµ·æ¥ï¼Œè¾“å…¥åˆ° LSTMä¸­è¿›è¡Œå»ºæ¨¡ã€‚é‚£ä¹ˆåœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œæ–‡ç« æ‰€æœ‰è¯å‘é‡å…±äº«åŒä¸€ä¸ªé—®é¢˜å‘é‡ï¼Œç°åœ¨æˆ‘ä»¬æƒ³è®©æ–‡ç« æ¯ä¸€æ­¥çš„è¯å‘é‡éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„é—®é¢˜å‘é‡ï¼Œä¹Ÿå°±æ˜¯ï¼Œåœ¨æ¯ä¸€æ­¥ä½¿ç”¨æ–‡ç« åœ¨è¯¥æ­¥ä¸‹çš„è¯å‘é‡å¯¹é—®é¢˜æ¥ç®— attentionï¼Œè¿™é‡Œé—®é¢˜å±äºåŸæ–‡ï¼Œæ–‡ç« è¯å‘é‡å°±å±äºå¤–éƒ¨ä¿¡æ¯ã€‚</p><figure><img src="/2020/07/06/attention-wiki/v2-1e08348b226f4e2f08c89ae6e5d7fcda_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>2ï¼‰<strong>Self</strong> Attentionï¼Œè¿™ç§æ–¹å¼åªä½¿ç”¨å†…éƒ¨ä¿¡æ¯ï¼Œkey å’Œ value ä»¥åŠ query åªå’Œè¾“å…¥åŸæ–‡æœ‰å…³ï¼Œåœ¨ self attention ä¸­ï¼Œkey=value=queryã€‚æ—¢ç„¶æ²¡æœ‰å¤–éƒ¨ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨åŸæ–‡ä¸­çš„æ¯ä¸ªè¯å¯ä»¥è·Ÿè¯¥å¥å­ä¸­çš„æ‰€æœ‰è¯è¿›è¡Œ Attention è®¡ç®—ï¼Œç›¸å½“äºå¯»æ‰¾åŸæ–‡å†…éƒ¨çš„å…³ç³»ã€‚</p><p>è¿˜æ˜¯ä¸¾é˜…è¯»ç†è§£ä»»åŠ¡çš„ä¾‹å­ï¼Œä¸Šé¢çš„ baseline ä¸­æåˆ°ï¼Œå¯¹é—®é¢˜è®¡ç®—å‡ºä¸€ä¸ªå‘é‡ qï¼Œé‚£ä¹ˆè¿™é‡Œä¹Ÿå¯ä»¥ç”¨ä¸Š attentionï¼Œåªç”¨é—®é¢˜è‡ªèº«çš„ä¿¡æ¯å»åš attentionï¼Œè€Œä¸å¼•å…¥æ–‡ç« ä¿¡æ¯ã€‚</p><p>åŒæ ·æ˜¯åœ¨Encoder-Decoderæ¨¡å‹ä¸­ï¼Œå®ƒçš„å®ç°æ–¹æ³•æ˜¯Encoderéƒ¨åˆ†å †å äº†ä¸¤å±‚ã€‚</p><p><img src="/2020/07/06/attention-wiki/v2-2c7e48868e98202b6c3af3a7aa4ea987_1440w.jpg" alt="img" style="zoom:50%;"></p><h3 id="ç»“æ„å±‚æ¬¡"><strong>3. ç»“æ„å±‚æ¬¡</strong></h3><p>ç»“æ„æ–¹é¢æ ¹æ®æ˜¯å¦åˆ’åˆ†å±‚æ¬¡å…³ç³»ï¼Œåˆ†ä¸ºå•å±‚ attentionï¼Œå¤šå±‚ attention å’Œå¤šå¤´ attentionï¼š</p><p>1ï¼‰å•å±‚ Attentionï¼Œè¿™æ˜¯æ¯”è¾ƒæ™®éçš„åšæ³•ï¼Œç”¨ä¸€ä¸ª query å¯¹ä¸€æ®µåŸæ–‡è¿›è¡Œä¸€æ¬¡ attentionã€‚</p><p>2ï¼‰å¤šå±‚ Attentionï¼Œä¸€èˆ¬ç”¨äºæ–‡æœ¬å…·æœ‰å±‚æ¬¡å…³ç³»çš„æ¨¡å‹ï¼Œå‡è®¾æˆ‘ä»¬æŠŠä¸€ä¸ª document åˆ’åˆ†æˆå¤šä¸ªå¥å­ï¼Œåœ¨ç¬¬ä¸€å±‚ï¼Œæˆ‘ä»¬åˆ†åˆ«å¯¹æ¯ä¸ªå¥å­ä½¿ç”¨ attention è®¡ç®—å‡ºä¸€ä¸ªå¥å‘é‡ï¼ˆä¹Ÿå°±æ˜¯å•å±‚ attentionï¼‰ï¼›åœ¨ç¬¬äºŒå±‚ï¼Œæˆ‘ä»¬å¯¹æ‰€æœ‰å¥å‘é‡å†åš attention è®¡ç®—å‡ºä¸€ä¸ªæ–‡æ¡£å‘é‡ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªå•å±‚ attentionï¼‰ï¼Œæœ€åå†ç”¨è¿™ä¸ªæ–‡æ¡£å‘é‡å»åšä»»åŠ¡ã€‚</p><p>3ï¼‰å¤šå¤´ Attentionï¼Œè¿™æ˜¯ Attention is All You Need ä¸­æåˆ°çš„ multi-head attentionï¼Œç”¨åˆ°äº†å¤šä¸ª query å¯¹ä¸€æ®µåŸæ–‡è¿›è¡Œäº†å¤šæ¬¡ attentionï¼Œæ¯ä¸ª query éƒ½å…³æ³¨åˆ°åŸæ–‡çš„ä¸åŒéƒ¨åˆ†ï¼Œç›¸å½“äºé‡å¤åšå¤šæ¬¡å•å±‚ attentionï¼š<span class="math display">\[head_i=Attention(q_i,K,V)\]</span></p><p>æœ€åå†æŠŠè¿™äº›ç»“æœæ‹¼æ¥èµ·æ¥ï¼š<span class="math inline">\(MultiHead(Q, K, V)=Concat(head_1,head_2,head_3,...,head_n)W^O\)</span></p><figure><img src="/2020/07/06/attention-wiki/v2-3cd76d3e0d8a20d87dfa586b56cc1ad3_1440w.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h3 id="æ¨¡å‹æ–¹é¢"><strong>4. æ¨¡å‹æ–¹é¢</strong></h3><p>ä»æ¨¡å‹ä¸Šçœ‹ï¼ŒAttention ä¸€èˆ¬ç”¨åœ¨ CNN å’Œ LSTM ä¸Šï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿›è¡Œçº¯ Attention è®¡ç®—ã€‚</p><h4 id="cnnattention"><strong>1ï¼‰CNN+Attention</strong></h4><p>CNN çš„å·ç§¯æ“ä½œå¯ä»¥æå–é‡è¦ç‰¹å¾ï¼Œæˆ‘è§‰å¾—è¿™ä¹Ÿç®—æ˜¯ Attention çš„æ€æƒ³ï¼Œä½†æ˜¯ CNN çš„å·ç§¯æ„Ÿå—è§†é‡æ˜¯å±€éƒ¨çš„ï¼Œéœ€è¦é€šè¿‡å åŠ å¤šå±‚å·ç§¯åŒºå»æ‰©å¤§è§†é‡ã€‚å¦å¤–ï¼ŒMax Pooling ç›´æ¥æå–æ•°å€¼æœ€å¤§çš„ç‰¹å¾ï¼Œä¹Ÿåƒæ˜¯ hard attention çš„æ€æƒ³ï¼Œç›´æ¥é€‰ä¸­æŸä¸ªç‰¹å¾ã€‚</p><p>CNN ä¸ŠåŠ  Attention å¯ä»¥åŠ åœ¨è¿™å‡ æ–¹é¢ï¼š</p><ol type="a"><li><p>åœ¨å·ç§¯æ“ä½œå‰åš attentionï¼Œæ¯”å¦‚ Attention-Based BCNN-1ï¼Œè¿™ä¸ªä»»åŠ¡æ˜¯æ–‡æœ¬è•´å«ä»»åŠ¡éœ€è¦å¤„ç†ä¸¤æ®µæ–‡æœ¬ï¼ŒåŒæ—¶å¯¹ä¸¤æ®µè¾“å…¥çš„åºåˆ—å‘é‡è¿›è¡Œ attentionï¼Œè®¡ç®—å‡ºç‰¹å¾å‘é‡ï¼Œå†æ‹¼æ¥åˆ°åŸå§‹å‘é‡ä¸­ï¼Œä½œä¸ºå·ç§¯å±‚çš„è¾“å…¥ã€‚</p></li><li><p>åœ¨å·ç§¯æ“ä½œååš attentionï¼Œæ¯”å¦‚ Attention-Based BCNN-2ï¼Œå¯¹ä¸¤æ®µæ–‡æœ¬çš„å·ç§¯å±‚çš„è¾“å‡ºåš attentionï¼Œä½œä¸º pooling å±‚çš„è¾“å…¥ã€‚</p></li><li><p>åœ¨ pooling å±‚åš attentionï¼Œä»£æ›¿ max poolingã€‚æ¯”å¦‚ Attention poolingï¼Œé¦–å…ˆæˆ‘ä»¬ç”¨ LSTM å­¦åˆ°ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å¥å‘é‡ï¼Œä½œä¸º queryï¼Œç„¶åç”¨ CNN å…ˆå­¦ä¹ åˆ°ä¸€ä¸ªç‰¹å¾çŸ©é˜µä½œä¸º keyï¼Œå†ç”¨ query å¯¹ key äº§ç”Ÿæƒé‡ï¼Œè¿›è¡Œ attentionï¼Œå¾—åˆ°æœ€åçš„å¥å‘é‡ã€‚</p></li></ol><h4 id="lstmattention"><strong>2ï¼‰LSTM+Attention</strong></h4><p>LSTM å†…éƒ¨æœ‰ Gate æœºåˆ¶ï¼Œå…¶ä¸­ input gate é€‰æ‹©å“ªäº›å½“å‰ä¿¡æ¯è¿›è¡Œè¾“å…¥ï¼Œforget gate é€‰æ‹©é—å¿˜å“ªäº›è¿‡å»ä¿¡æ¯ï¼Œæˆ‘è§‰å¾—è¿™ç®—æ˜¯ä¸€å®šç¨‹åº¦çš„ Attention äº†ï¼Œè€Œä¸”å·ç§°å¯ä»¥è§£å†³é•¿æœŸä¾èµ–é—®é¢˜ï¼Œå®é™…ä¸Š LSTM éœ€è¦ä¸€æ­¥ä¸€æ­¥å»æ•æ‰åºåˆ—ä¿¡æ¯ï¼Œåœ¨é•¿æ–‡æœ¬ä¸Šçš„è¡¨ç°æ˜¯ä¼šéšç€ step å¢åŠ è€Œæ…¢æ…¢è¡°å‡ï¼Œéš¾ä»¥ä¿ç•™å…¨éƒ¨çš„æœ‰ç”¨ä¿¡æ¯ã€‚</p><p>LSTM é€šå¸¸éœ€è¦å¾—åˆ°ä¸€ä¸ªå‘é‡ï¼Œå†å»åšä»»åŠ¡ï¼Œå¸¸ç”¨æ–¹å¼æœ‰ï¼š</p><ol type="a"><li><p>ç›´æ¥ä½¿ç”¨æœ€åçš„ hidden stateï¼ˆå¯èƒ½ä¼šæŸå¤±ä¸€å®šçš„å‰æ–‡ä¿¡æ¯ï¼Œéš¾ä»¥è¡¨è¾¾å…¨æ–‡ï¼‰</p></li><li><p>å¯¹æ‰€æœ‰ step ä¸‹çš„ hidden state è¿›è¡Œç­‰æƒå¹³å‡ï¼ˆå¯¹æ‰€æœ‰ step ä¸€è§†åŒä»ï¼‰ã€‚</p></li><li><p>Attention æœºåˆ¶ï¼Œå¯¹æ‰€æœ‰ step çš„ hidden state è¿›è¡ŒåŠ æƒï¼ŒæŠŠæ³¨æ„åŠ›é›†ä¸­åˆ°æ•´æ®µæ–‡æœ¬ä¸­æ¯”è¾ƒé‡è¦çš„ hidden state ä¿¡æ¯ã€‚æ€§èƒ½æ¯”å‰é¢ä¸¤ç§è¦å¥½ä¸€ç‚¹ï¼Œè€Œæ–¹ä¾¿å¯è§†åŒ–è§‚å¯Ÿå“ªäº› step æ˜¯é‡è¦çš„ï¼Œä½†æ˜¯è¦å°å¿ƒè¿‡æ‹Ÿåˆï¼Œè€Œä¸”ä¹Ÿå¢åŠ äº†è®¡ç®—é‡ã€‚</p></li></ol><h4 id="çº¯-attention"><strong>3ï¼‰çº¯ Attention</strong></h4><p>Attention is all you needï¼Œæ²¡æœ‰ç”¨åˆ° CNN/RNNï¼Œä¹ä¸€å¬ä¹Ÿæ˜¯ä¸€è‚¡æ¸…æµäº†ï¼Œä½†æ˜¯ä»”ç»†ä¸€çœ‹ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€å †å‘é‡å»è®¡ç®— attentionã€‚æœ¬æ–‡æå‡ºäº†Transformerã€‚Transformer ä¹Ÿå¯ä»¥è§†ä¸ºä¸€ç§è‡ªå¸¦Attentionæœºåˆ¶çš„RNNã€‚å®ƒä½¿ç”¨äº†é—®é¢˜ã€é”®ã€å€¼ä¸‰ä¸ªå‘é‡ï¼Œè®©æƒé‡çš„è®¡ç®—å˜å¾—æ›´åŠ ç»†è‡´ã€‚</p><p>Transformerå¯ä»¥è¯´æ˜¯é›†è¿‘äº›å¹´çš„ç ”ç©¶ä¹‹äºå¤§æˆã€‚é‡Œé¢æ¶‰åŠåˆ°å¾ˆå¤šå¾ˆå¤šæŠ€æœ¯ç‚¹ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>Feed Forward Network</li><li>ResNetçš„æ€æƒ³</li><li>Positional Embedding è§£å†³è¾“å…¥æ—¶åºé—®é¢˜</li><li>Layer Normalization</li><li>Decoderä¸­çš„Masked Self-Attention</li></ul><figure><img src="/2020/07/06/attention-wiki/transformer_resideual_layer_norm_3.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p><img src="/2020/07/06/attention-wiki/self-attention-output.png" alt="img" style="zoom:50%;"></p><p><img src="/2020/07/06/attention-wiki/self-attention-matrix-calculation.png" alt="img" style="zoom:50%;"></p><p><img src="/2020/07/06/attention-wiki/self-attention-matrix-calculation-2.png" alt="img" style="zoom:50%;"></p><h3 id="ç›¸ä¼¼åº¦è®¡ç®—æ–¹å¼"><strong>5. ç›¸ä¼¼åº¦è®¡ç®—æ–¹å¼</strong></h3><p>åœ¨åš attention çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®— query å’ŒæŸä¸ª key çš„åˆ†æ•°ï¼ˆç›¸ä¼¼åº¦ï¼‰ï¼Œå¸¸ç”¨æ–¹æ³•æœ‰ï¼š</p><p>1ï¼‰ç‚¹ä¹˜ï¼šæœ€ç®€å•çš„æ–¹æ³•ï¼Œ <span class="math inline">\(s(q,k)=q^Tk\)</span></p><p>2ï¼‰çŸ©é˜µç›¸ä¹˜ï¼š <span class="math inline">\(s(q,k)=q^TWk\)</span></p><p>3ï¼‰cos ç›¸ä¼¼åº¦ï¼š <span class="math display">\[s(q,k)=\frac{q^T}{||q||Â·||k||}\]</span></p><p>4ï¼‰ä¸²è”æ–¹å¼ï¼šæŠŠ q å’Œ k æ‹¼æ¥èµ·æ¥ï¼Œ <span class="math display">\[s(q,k)=W[q;k]\]</span></p><p>5ï¼‰ç”¨å¤šå±‚æ„ŸçŸ¥æœºä¹Ÿå¯ä»¥ï¼š <span class="math display">\[s(q,k)=v^T_atanh(Wq+Uk)\]</span></p><h2 id="encoder-decoderæ¨¡å‹ç»“æ„">Encoder-Decoderæ¨¡å‹ç»“æ„</h2><p>ä»¥æœºå™¨ç¿»è¯‘æ¨¡å‹ä¸ºä¾‹ï¼š<a href="https://pytorch.org/tutorials/intermediate/seq2seq_translation_tutorial.html">åŸæ–‡</a></p><figure><img src="/2020/07/06/attention-wiki/seq2seq.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2020/07/06/attention-wiki/image-20200705230609732.png" alt="image-20200705230609732"><figcaption aria-hidden="true">image-20200705230609732</figcaption></figure><ul><li>Encoderçš„è¾“å…¥æ˜¯å¥å­ä¸­æ¯ä¸ªè¯å¯¹åº”çš„æ•°å­—ç¼–å·çš„åºåˆ—ï¼Œè¾“å‡ºçš„æ˜¯RNNæ¯ä¸€ä¸ªCellçš„ç›¸åº”Output Vectorï¼ˆæˆ–æ˜¯ä¸€æ¬¡åªè¾“å…¥ä¸€ä¸ªè¯çš„ç¼–å·ï¼Œç„¶åæ¯æ¬¡å¾—åˆ°ä¸€ä¸ªOutputï¼Œæœ€åæ‹¼æˆä¸€ä¸ªListï¼‰ã€‚å…¶RNNçš„åˆå§‹Hidden Layeræ˜¯éšæœºåˆå§‹åŒ–ï¼ˆRandomã€å…¨0ï¼‰çš„ã€‚</li><li>Decoderçš„ç¬¬ä¸€ä¸ªè¾“å…¥æ˜¯å¥å­èµ·å§‹ç¬¦<SOS>ï¼Œæ•°å­—ç¼–ç å¯ä»¥ä¸º0ï¼Œç„¶åHidden Layerä½¿ç”¨Encoderçš„æœ€åä¸€ä¸ªHidden Layer Valueåˆå§‹åŒ–ã€‚æ¯æ¬¡åªè¾“å…¥ä¸€ä¸ªInputæ•°å­—ç¼–å·ï¼Œç„¶åä¸‹ä¸€æ¬¡çš„Inputæˆ–ä½¿ç”¨ä¸Šæ¬¡çš„é¢„æµ‹ç»“æœï¼Œæˆ–æ˜¯ä½¿ç”¨Output Labelçš„ç›¸åº”å€¼ã€‚å‰è€…è¢«ç§°ä½œ<em>Teacher Forcing</em>ï¼Œåè€…æ˜¯<em>Without Teacher Forcing</em>ã€‚</SOS></li><li>Attentionæ˜¯åŠ åœ¨Decoderä¸Šçš„ã€‚Decoder çš„inputä¼šå…ˆåšembeddingï¼Œä¹‹åä¹ˆembeddingå’ŒHidden Layerå‚æ•°Concateåˆ°ä¸€èµ·ï¼Œå†è¿‡ä¸€ä¸ªFCï¼ˆ<strong>è¿‡FCå°±ç›¸å½“äºä¹˜ä¸Šäº†ä¸€ä¸ªå˜æ¢çŸ©é˜µäº†</strong>ï¼‰å°±å¾—åˆ°äº†Attentionã€‚è¿™ä¸ªç®—å‡ºæ¥çš„Attentionå†å’ŒEncoderçš„outputåšä¸€ä¸ª<code>torch.bmm</code>çŸ©é˜µä¹˜æ³•ï¼ˆ<span class="math inline">\([Batch\_Size*1*Length]*[Batch\_Size*Length*Hidden\_Size]\)</span>ï¼‰ï¼Œå¾—åˆ°ä¸€ä¸ªå‘é‡([<span class="math inline">\(Batch\_Size*1*Hidden\_Size\)</span>])ï¼Œè¿™ä¸ªæ•°å€¼å³ä¸ºè¯¥inputè¿‡äº†Attentionåçš„å€¼ã€‚è¯¥å€¼å†å’Œembeddingåçš„å€¼([<span class="math inline">\(Batch\_Size*1*Hidden\_Size\)</span>]) ä½¿ç”¨Concateæ‹¼åˆ°ä¸€èµ·ï¼Œè¿‡ä¸€ä¸ªFCï¼Œè¾“å‡ºä¸€ä¸ª([<span class="math inline">\(Batch\_Size*1*Hidden\_Size\)</span>])çš„å‘é‡ï¼Œå®ƒä¾¿æ˜¯æ–½åŠ äº†Attentionåçš„Inputã€‚è¿™é‡Œæœ¬è´¨ä¸Šä½¿ç”¨äº†å‰é¢æåˆ°çš„æƒå€¼è®¡ç®—æ–¹æ³•ä¸­çš„ <strong>ä¸²è”æ–¹å¼</strong>ã€‚</li><li>ç®€å•è¯´ï¼Œdecoderçš„inputå’Œhidden layeråªæ˜¯ç”¨æ¥è®¡ç®—encoderå„ä¸ªcellçš„outputçš„æƒé‡çš„ã€‚æ¯ä¸ªoutputæœ‰ç€hidden_sizeç»´åº¦ï¼Œä»–ä»¬æœ€ç»ˆæŒ‰ç…§attentionä½œä¸ºåŠ æƒæ±‚å’Œã€‚æˆ–æ˜¯è¯´ï¼š<strong>Decoderä¸­æ¯ä¸€ä¸ªCellï¼Œå»Encoderä¸­å¯»æ‰¾æœ€ç›¸å…³çš„è®°å¿†ã€‚</strong></li></ul><h2 id="ç½‘ç»œç»“æ„">ç½‘ç»œç»“æ„</h2><h3 id="embedding"><code>Embedding</code></h3><p><code>torch.nn.Embedding(*num_embeddings: int*, *embedding_dim: int*)</code></p><blockquote><p>To summarize <code>num_embeddings</code> is total number of unique elements in the vocabulary, and <code>embedding_dim</code> is the size of each embedded vector once passed through the embedding layer. Therefore, you can have a tensor of 10+ elements, as long as each element in the tensor is in the range <code>[0, 9]</code>, because you defined a vocabulary size of 10 elements.</p></blockquote><p>å³ç¬¬ä¸€ä¸ªæ•°<code>num_embedding</code>æŒ‡çš„æ˜¯ä½ çš„è¾“å…¥ä¸­æœ‰å¤šå°‘å¯èƒ½çš„å€¼ï¼Œæˆ–è€…è¯´è¯­æ–™åº“çš„å¤§å°ï¼›ç¬¬äºŒä¸ªæ•°<code>embedding_dim</code>æŒ‡çš„æ˜¯ç»™å®šä¸€ä¸ªinputï¼ˆä¸€ä¸ªdigitï¼‰ï¼Œè¾“å‡ºå‡ ä¸ªdigitã€‚</p><h3 id="bmm"><code>BMM</code></h3><p><code>torch.bmm(*input*, *mat2*, *deterministic=False*, *out=None*) â†’ Tensor</code></p><blockquote><p>Performs a batch matrix-matrix product of matrices stored in <code>input</code> and <code>mat2</code>.</p><p><code>input</code> and <code>mat2</code> must be 3-D tensors each containing the same number of matrices.</p><p>If <code>input</code> is a <span class="math inline">\((b \times n \times m)\)</span> tensor, <code>mat2</code> is a <span class="math inline">\((b \times m \times p)\)</span> tensor, <code>out</code> will be a <span class="math inline">\((b \times n \times p)\)</span>tensor.</p></blockquote><p>ç®€å•è¯´ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯åœ¨ä¸åŠ¨batchç»´åº¦çš„æƒ…å†µä¸‹å¯¹å…¶ä»–ç»´åº¦æ‰§è¡ŒçŸ©é˜µä¹˜æ³•ã€‚</p><h2 id="self-attention-ä¸-general-attentionåœ¨å®ç°ä¸Šçš„åŒºåˆ«">Self-Attention ä¸ General Attentionåœ¨å®ç°ä¸Šçš„åŒºåˆ«</h2><p>Self Attention æœ¬è´¨ä¸Šæ˜¯ä¹˜ä¸Šä¸€ä¸ªå’Œè¾“å…¥å‘é‡éœ€è¦åŠ Attentionçš„ç»´åº¦ç­‰é•¿çš„å‘é‡ï¼ˆ<code>nn.Parameter(torch.Tensor(1, D), requires_grad=True)</code>ï¼‰ï¼Œå¹¶åšçŸ©é˜µç›¸ä¹˜ã€‚å¦‚è¾“å…¥æ˜¯ä¸€ä¸ªé•¿ä¸ºLçš„å¥å­ï¼Œå¥å­ä¸­æ¯ä¸ªè¯çš„Embeddingé•¿åº¦æ˜¯Dï¼Œ batchä¸ºBï¼Œå³(B, L, D)ï¼Œ é‚£ä¹ˆè‹¥æ˜¯è¦å¯¹å¥å­çš„é•¿åº¦ç»´åº¦åšAttentionï¼Œåˆ™éœ€è¦ä¹˜ä¸€ä¸ªshapeä¸º(B, D, 1)çš„å‘é‡ï¼Œå¾—åˆ°çš„Output shapeä¸º(B, L, 1)ã€‚ä¹‹åè¿˜éœ€åšsoftmaxï¼Œå¥å­é•¿åº¦maskï¼Œç»“æœé™¤ä»¥å•è¯ä¸ªæ•°ä¿è¯æ‰€æœ‰weightåŠ èµ·æ¥ç­‰äºä¸€ï¼Œç„¶åå†ä½¿ç”¨è¿™ä¸ªoutputç‚¹ä¹˜inputï¼Œå³å¯å¾—åˆ°å’Œinput shapeç›¸åŒï¼Œä½†è¢«åŠ äº†Attentionåçš„å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Attention</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Pytorch self-attention layer code inspired from:</span></span><br><span class="line"><span class="string">    Link:</span></span><br><span class="line"><span class="string">        https://discuss.pytorch.org/t/self-attention-on-words-and-masking/5671/4</span></span><br><span class="line"><span class="string">    Original Web Page:</span></span><br><span class="line"><span class="string">        https://www.kaggle.com/dannykliu/lstm-with-attention-clr-in-pytorch</span></span><br><span class="line"><span class="string">    Usage:</span></span><br><span class="line"><span class="string">        In __init__():</span></span><br><span class="line"><span class="string">            self.atten1 = Attention(hidden_dim*2, batch_first=True) # 2 is bidrectional</span></span><br><span class="line"><span class="string">        In forward():</span></span><br><span class="line"><span class="string">            x, _ = self.atten1(x, lengths)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, hidden_size, batch_first=<span class="literal">True</span>, device=<span class="literal">None</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Attention, self).__init__()</span><br><span class="line"></span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line">        self.batch_first = batch_first</span><br><span class="line">        <span class="keyword">if</span> device <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.device = <span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.device = device</span><br><span class="line"></span><br><span class="line">        self.att_weights = nn.Parameter(</span><br><span class="line">            torch.Tensor(<span class="number">1</span>, hidden_size), requires_grad=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        stdv = <span class="number">1.0</span> / np.sqrt(self.hidden_size)</span><br><span class="line">        <span class="keyword">for</span> weight <span class="keyword">in</span> self.att_weights:</span><br><span class="line">            nn.init.uniform_(weight, -stdv, stdv)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_mask</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, inputs, lengths</span>):</span></span><br><span class="line">        <span class="keyword">if</span> self.batch_first:</span><br><span class="line">            batch_size, max_len = inputs.size()[:<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            max_len, batch_size = inputs.size()[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># apply attention layer</span></span><br><span class="line">        weights = torch.bmm(inputs,</span><br><span class="line">                            self.att_weights  <span class="comment"># (1, hidden_size)</span></span><br><span class="line">                            .permute(<span class="number">1</span>, <span class="number">0</span>)  <span class="comment"># (hidden_size, 1)</span></span><br><span class="line">                            .unsqueeze(<span class="number">0</span>)  <span class="comment"># (1, hidden_size, 1)</span></span><br><span class="line">                            <span class="comment"># (batch_size, hidden_size, 1)</span></span><br><span class="line">                            .repeat(batch_size, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">                            )</span><br><span class="line"></span><br><span class="line">        attentions = torch.softmax(F.relu(weights.squeeze()), dim=-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># create mask based on the sentence lengths</span></span><br><span class="line">        mask = torch.ones(attentions.size(), requires_grad=<span class="literal">True</span>).to(self.device)</span><br><span class="line">        <span class="keyword">for</span> i, l <span class="keyword">in</span> <span class="built_in">enumerate</span>(lengths):  <span class="comment"># skip the first sentence</span></span><br><span class="line">            <span class="keyword">if</span> l &lt; max_len:</span><br><span class="line">                mask[i, l:] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># apply mask and renormalize attention scores (weights)</span></span><br><span class="line">        masked = attentions * mask</span><br><span class="line">        _sums = masked.<span class="built_in">sum</span>(-<span class="number">1</span>).unsqueeze(-<span class="number">1</span>)  <span class="comment"># sums per row</span></span><br><span class="line"></span><br><span class="line">        attentions = masked.div(_sums)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># apply attention weights</span></span><br><span class="line">        weighted = torch.mul(</span><br><span class="line">            inputs, attentions.unsqueeze(-<span class="number">1</span>).expand_as(inputs))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># get the final fixed vector representations of the sentences</span></span><br><span class="line">        representations = weighted.<span class="built_in">sum</span>(<span class="number">1</span>).squeeze()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> representations, attentions</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è€ŒGeneral Attentionçš„æœ¬è´¨åˆ™æ˜¯ä¸€ä¸ªFCï¼ˆå³ä¸€ä¸ªæ˜ å°„çŸ©é˜µï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EncoderRNN</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, input_size, hidden_size</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(EncoderRNN, self).__init__()</span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line"></span><br><span class="line">        self.embedding = nn.Embedding(input_size, hidden_size)</span><br><span class="line">        self.gru = nn.GRU(hidden_size, hidden_size)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, <span class="built_in">input</span>, hidden</span>):</span></span><br><span class="line">        embedded = self.embedding(<span class="built_in">input</span>).view(<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">        output = embedded</span><br><span class="line">        output, hidden = self.gru(output, hidden)</span><br><span class="line">        <span class="keyword">return</span> output, hidden</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initHidden</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> torch.zeros(<span class="number">1</span>, <span class="number">1</span>, self.hidden_size, device=device)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AttnDecoderRNN</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, hidden_size, output_size, dropout_p=<span class="number">0.1</span>, max_length=MAX_LENGTH</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(AttnDecoderRNN, self).__init__()</span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line">        self.output_size = output_size</span><br><span class="line">        self.dropout_p = dropout_p</span><br><span class="line">        self.max_length = max_length</span><br><span class="line"></span><br><span class="line">        self.embedding = nn.Embedding(self.output_size, self.hidden_size)</span><br><span class="line">        self.attn = nn.Linear(self.hidden_size * <span class="number">2</span>, self.max_length)</span><br><span class="line">        self.attn_combine = nn.Linear(self.hidden_size * <span class="number">2</span>, self.hidden_size)</span><br><span class="line">        self.dropout = nn.Dropout(self.dropout_p)</span><br><span class="line">        self.gru = nn.GRU(self.hidden_size, self.hidden_size)</span><br><span class="line">        self.out = nn.Linear(self.hidden_size, self.output_size)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># input: (1)</span></span><br><span class="line">    <span class="comment"># hidden: (1, D)</span></span><br><span class="line">    <span class="comment"># encoder_outputs: (L, D)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, <span class="built_in">input</span>, hidden, encoder_outputs</span>):</span></span><br><span class="line">        embedded = self.embedding(<span class="built_in">input</span>).view(<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>) <span class="comment"># (1, 1, D)</span></span><br><span class="line">        embedded = self.dropout(embedded) <span class="comment"># (1, 1, D)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># (1, 2D) -&gt; (1, L)</span></span><br><span class="line">        attn_weights = F.softmax(</span><br><span class="line">            self.attn(torch.cat((embedded[<span class="number">0</span>], hidden[<span class="number">0</span>]), <span class="number">1</span>)), dim=<span class="number">1</span>) </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># (1, 1, L) x (1, L, D) -&gt; (1, 1, D)</span></span><br><span class="line">        attn_applied = torch.bmm(attn_weights.unsqueeze(<span class="number">0</span>),</span><br><span class="line">                                 encoder_outputs.unsqueeze(<span class="number">0</span>)) </span><br><span class="line"></span><br><span class="line">        output = torch.cat((embedded[<span class="number">0</span>], attn_applied[<span class="number">0</span>]), <span class="number">1</span>) <span class="comment"># (1, 2D)</span></span><br><span class="line">        output = self.attn_combine(output).unsqueeze(<span class="number">0</span>) <span class="comment"># (1, 1, D)</span></span><br><span class="line"></span><br><span class="line">        output = F.relu(output) <span class="comment"># (1, 1, D)</span></span><br><span class="line">        output, hidden = self.gru(output, hidden) <span class="comment"># (1, D)</span></span><br><span class="line"></span><br><span class="line">        output = F.log_softmax(self.out(output[<span class="number">0</span>]), dim=<span class="number">1</span>) <span class="comment"># (1, output_size)</span></span><br><span class="line">        <span class="keyword">return</span> output, hidden, attn_weights</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initHidden</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> torch.zeros(<span class="number">1</span>, <span class="number">1</span>, self.hidden_size, device=device)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">teacher_forcing_ratio = <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span>(<span class="params">input_tensor, target_tensor, encoder, decoder, encoder_optimizer, decoder_optimizer, criterion, max_length=MAX_LENGTH</span>):</span></span><br><span class="line">    encoder_hidden = encoder.initHidden()</span><br><span class="line"></span><br><span class="line">    encoder_optimizer.zero_grad()</span><br><span class="line">    decoder_optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">    input_length = input_tensor.size(<span class="number">0</span>)</span><br><span class="line">    target_length = target_tensor.size(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    encoder_outputs = torch.zeros(max_length, encoder.hidden_size, device=device)</span><br><span class="line"></span><br><span class="line">    loss = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ei <span class="keyword">in</span> <span class="built_in">range</span>(input_length):</span><br><span class="line">        encoder_output, encoder_hidden = encoder(</span><br><span class="line">            input_tensor[ei], encoder_hidden)</span><br><span class="line">        encoder_outputs[ei] = encoder_output[<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    decoder_input = torch.tensor([[SOS_token]], device=device)</span><br><span class="line"></span><br><span class="line">    decoder_hidden = encoder_hidden</span><br><span class="line"></span><br><span class="line">    use_teacher_forcing = <span class="literal">True</span> <span class="keyword">if</span> random.random() &lt; teacher_forcing_ratio <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> use_teacher_forcing:</span><br><span class="line">        <span class="comment"># Teacher forcing: Feed the target as the next input</span></span><br><span class="line">        <span class="keyword">for</span> di <span class="keyword">in</span> <span class="built_in">range</span>(target_length):</span><br><span class="line">            decoder_output, decoder_hidden, decoder_attention = decoder(</span><br><span class="line">                decoder_input, decoder_hidden, encoder_outputs)</span><br><span class="line">            loss += criterion(decoder_output, target_tensor[di])</span><br><span class="line">            decoder_input = target_tensor[di]  <span class="comment"># Teacher forcing</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># Without teacher forcing: use its own predictions as the next input</span></span><br><span class="line">        <span class="keyword">for</span> di <span class="keyword">in</span> <span class="built_in">range</span>(target_length):</span><br><span class="line">            decoder_output, decoder_hidden, decoder_attention = decoder(</span><br><span class="line">                decoder_input, decoder_hidden, encoder_outputs)</span><br><span class="line">            topv, topi = decoder_output.topk(<span class="number">1</span>)</span><br><span class="line">            decoder_input = topi.squeeze().detach()  <span class="comment"># detach from history as input</span></span><br><span class="line"></span><br><span class="line">            loss += criterion(decoder_output, target_tensor[di])</span><br><span class="line">            <span class="keyword">if</span> decoder_input.item() == EOS_token:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    loss.backward()</span><br><span class="line"></span><br><span class="line">    encoder_optimizer.step()</span><br><span class="line">    decoder_optimizer.step()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> loss.item() / target_length</span><br></pre></td></tr></table></figure><h2 id="reference">Reference</h2><ol type="1"><li><a href="https://pytorch.org/tutorials/intermediate/seq2seq_translation_tutorial.html">NLP FROM SCRATCH: TRANSLATION WITH A SEQUENCE TO SEQUENCE NETWORK AND ATTENTION</a></li><li><a href="https://easyai.tech/ai-definition/attention/">Attention æœºåˆ¶ -- EasyAI</a></li><li><a href="https://zhuanlan.zhihu.com/p/35739040">Attentionç”¨äºNLPçš„ä¸€äº›å°ç»“</a></li><li><a href="https://github.com/EvilPsyCHo/Attention-PyTorch">Attention-PyTorch</a></li><li><a href="https://github.com/AuCson/PyTorch-Batch-Attention-Seq2seq/blob/master/attentionRNN.py">Pytorch Batch Attention Seq-2-Seq</a></li><li><a href="https://zhuanlan.zhihu.com/p/47282410">Attentionæœºåˆ¶è¯¦è§£ï¼ˆäºŒï¼‰â€”â€”Self-Attentionä¸Transformer</a></li><li><a href="https://jalammar.github.io/illustrated-transformer/">The Illustrated Transformer</a></li><li><a href="https://jalammar.github.io/visualizing-neural-machine-translation-mechanics-of-seq2seq-models-with-attention/">Visualizing A Neural Machine Translation Model (Mechanics of Seq2seq Models With Attention)</a></li><li><a href="https://www.zhihu.com/question/68482809">çŸ¥ä¹ï¼šç›®å‰ä¸»æµçš„attentionæ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ</a></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;Attentionçš„æœ¬è´¨å¯ä»¥çœ‹åšåŠ æƒæ±‚å’Œã€‚&lt;/p&gt;
&lt;h2 id=&quot;attention-çš„-n-ç§ç±»å‹&quot;&gt;Attention çš„ N ç§ç±»å‹&lt;/h2&gt;
&lt;figure&gt;
&lt;img src=&quot;/2020/07/06/attention-wiki/image-20200705230846450.png&quot; alt=&quot;image-20200705230846450&quot;&gt;&lt;figcaption aria-hidden=&quot;true&quot;&gt;image-20200705230846450&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Attention æœ‰å¾ˆå¤šç§ä¸åŒçš„ç±»å‹ï¼šSoft Attentionã€Hard Attentionã€é™æ€ Attentionã€åŠ¨æ€ Attentionã€Self Attention ç­‰ç­‰ã€‚ä¸Šå›¾ä¸ºå„ç§Attentionçš„åˆ†ç±»ï¼Œä¸‹é¢æ˜¯è¿™äº›ä¸åŒçš„ Attention çš„è§£é‡Šã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºè¿™ç¯‡æ–‡ç« ã€Š&lt;a href=&quot;https://zhuanlan.zhihu.com/p/35739040&quot;&gt;Attention ç”¨äº NLP çš„ä¸€äº›å°ç»“&lt;/a&gt;ã€‹å·²ç»æ€»ç»“çš„å¾ˆå¥½çš„ï¼Œä¸‹é¢å°±ç›´æ¥å¼•ç”¨äº†ï¼š&lt;/p&gt;
&lt;p&gt;æœ¬èŠ‚ä»è®¡ç®—åŒºåŸŸã€æ‰€ç”¨ä¿¡æ¯ã€ç»“æ„å±‚æ¬¡å’Œæ¨¡å‹ç­‰æ–¹é¢å¯¹ Attention çš„å½¢å¼è¿›è¡Œå½’ç±»ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="machine-learning" scheme="https://www.miracleyoo.com/tags/machine-learning/"/>
    
    <category term="deep-learning" scheme="https://www.miracleyoo.com/tags/deep-learning/"/>
    
    <category term="attention" scheme="https://www.miracleyoo.com/tags/attention/"/>
    
  </entry>
  
  <entry>
    <title>ACGç›¸å…³AIé¡¹ç›®-è®ºæ–‡-ä»£ç -æ•°æ®-èµ„æº</title>
    <link href="https://www.miracleyoo.com/2020/07/06/acg-dl/"/>
    <id>https://www.miracleyoo.com/2020/07/06/acg-dl/</id>
    <published>2020-07-06T18:19:16.000Z</published>
    <updated>2021-03-12T22:19:50.299Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®ºæ–‡">è®ºæ–‡</h2><p>[<a href>Paper</a>] [<a href>Code</a>] [20XX]</p><h3 id="è‡ªåŠ¨å‹¾çº¿-çº¿ç¨¿">è‡ªåŠ¨å‹¾çº¿-çº¿ç¨¿</h3><ol type="1"><li><p>Learning to Simplify: Fully Convolutional Networks for Rough Sketch Cleanup [<a href="http://www.f.waseda.jp/hfs/SimoSerraSIGGRAPH2016.pdf">Paper</a>] [<a href="https://github.com/bobbens/sketch_simplification">Code</a>] [<a href="https://medium.com/coinmonks/simplifying-rough-sketches-using-deep-learning-c404459622b9">Blog</a>] [2015]</p><ul><li><p>æ—©ç¨»ç”°å¤§å­¦15å¹´ç»å…¸è®ºæ–‡ã€‚</p></li><li><p>ç²—ç³™æ‰‹ç¨¿æ˜ å°„åˆ°ç²¾æçº¿ç¨¿ã€‚</p></li><li><p>ä½¿ç”¨çš„æ˜¯è‡ªå»ºæ•°æ®é›†ï¼Œç»™å®šç²¾è‡´çº¿ç¨¿è®©ç”»å¸ˆå»ç…§ç€æç²—ç¨¿ï¼Œè¿™æ ·é¿å…äº†ä»çº¿ç¨¿æåˆ°ç²¾ç¨¿æ—¶å€™æ·»åŠ å’Œå¤§æ”¹äº†å¾ˆå¤šçº¿æ¡ã€‚æ•°æ®é›†æ²¡æœ‰å¼€æº......ä¸è¿‡ä¼¼ä¹ä½œè€…ç»™äº†è®­ç»ƒå¥½çš„æƒé‡ã€‚</p><span id="more"></span></li><li><p>We found that the standard approach, which we denote as direct dataset construction, of asking artists to draw a rough sketch and then produce a clean version of the sketch ended up with a lot of changes in the figure, i.e., output lines are greatly changed with respect to their input lines, or new lines are added in the output. This results in very noisy training data that does not perform well. In order to avoid this issue, we found that the best approach is the inverse dataset construction approach, that is, given a clean simplified sketch drawing, the artist is asked to make a rough version of that sketch.</p></li></ul><p><img src="/2020/07/06/acg-dl/image-20200705025359787.png" alt="image-20200705025359787" style="zoom:50%;"></p><p><img src="/2020/07/06/acg-dl/image-20200705025440435.png" alt="image-20200705025440435" style="zoom:50%;"></p></li></ol><h3 id="è‡ªåŠ¨çº¿ç¨¿ä¸Šè‰²">è‡ªåŠ¨çº¿ç¨¿ä¸Šè‰²</h3><ol type="1"><li><p>Scribbler: Controlling Deep Image Synthesis with Sketch and Color [<a href="http://openaccess.thecvf.com/content_cvpr_2017/papers/Sangkloy_Scribbler_Controlling_Deep_CVPR_2017_paper.pdf">Paper</a>] [<a href>Code</a>] [2017]</p></li><li><p>User-Guided Deep Anime Line Art Colorization with Conditional Adversarial Networks [<a href="https://arxiv.org/pdf/1808.03240.pdf">Paper</a>] [<a href="https://github.com/orashi/AlacGAN">Code</a>] [2018]</p><ul><li>æ—¢æ”¯æŒç›´æ¥ä»çº¿ç¨¿è½¬æ¢ä¸ºè‰²ç¨¿ï¼Œä¹Ÿæ”¯æŒç”¨æˆ·äº¤äº’ç”»ç‚¹ç”Ÿæˆè‰²ç¨¿ã€‚</li><li>ç”Ÿæˆå™¨å’Œæ£€æµ‹å™¨çš„è¾“å…¥è¿›è¡Œäº†åˆ›æ–°ã€‚ç”Ÿæˆå™¨çš„è¾“å…¥æ˜¯çº¿ç¨¿ã€ç”¨æˆ·è‰²ç‚¹å›¾ã€è¿˜æœ‰ä¸€ä¸ªçº¿ç¨¿çš„ç‰¹å¾Mapã€‚æ£€æµ‹å™¨çš„è¾“å…¥æ˜¯ä¸¤å¯¹ï¼šï¼ˆçœŸå®è‰²ç¨¿ï¼Œçº¿ç¨¿ç‰¹å¾ï¼‰ä¸ï¼ˆç”Ÿæˆè‰²ç¨¿ï¼Œçº¿ç¨¿ç‰¹å¾ï¼‰ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯é¿å…äº†ç›´æ¥è®©åˆ¤åˆ«å™¨çœ‹åˆ°åŸå§‹çº¿ç¨¿ï¼Œä»è€Œä¸€å®šç¨‹åº¦ä¸Šé¿å…äº†è¿‡æ‹Ÿåˆã€‚</li><li>çº¿ç¨¿æ˜¯é€šè¿‡XDoGè½¬æ¢è‰²ç¨¿å¾—æ¥ã€‚</li><li>Comment from <a href="https://www.reddit.com/r/AnimeResearch/comments/962ziu/userguided_deep_anime_line_art_colorization_with/">reddit</a>: I don't have it locally but it should be easy to make an 'illustration dataset' simply by using a tag like <a href="https://danbooru.donmai.us/posts?utf8=âœ“&amp;tags=-monochrome+&amp;ms=1"><code>-monochrome</code></a> to filter out any line-art. It's easy to make a line-art dataset because that's also a tag: <code>lineart</code>. Finally, you don't need to half-ass the pairs dataset with fake pairs using XDoG because you can just use <a href="https://danbooru.donmai.us/wiki_pages/21859">parent-child relationships</a> to find all sets of related images, and then extract all pairs of monochrome vs non-monochrome, which will usually give you sketch to completed image. Or there are tags just for this, like <a href="https://danbooru.donmai.us/posts?utf8=âœ“&amp;tags=colored+&amp;ms=1"><code>colored</code></a>, for human colorization of BW images (and you can again use the parent/child relationships to filter more).</li></ul><p><img src="/2020/07/06/acg-dl/image-20200705104853930.png" alt="image-20200705104853930" style="zoom:33%;"></p><p><img src="/2020/07/06/acg-dl/image-20200705104922846.png" alt="image-20200705104922846" style="zoom:33%;"></p><p><img src="/2020/07/06/acg-dl/image-20200705105004118.png" alt="image-20200705105004118" style="zoom:33%;"></p></li><li><p>Line Art Correlation Matching Network for Automatic Animation Colorization</p></li></ol><h3 id="ç…§ç‰‡è½¬åŠ¨æ¼«">ç…§ç‰‡è½¬åŠ¨æ¼«</h3><ol type="1"><li>CartoonGAN: Generative Adversarial Networks for Photo Cartoonization [<a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Chen_CartoonGAN_Generative_Adversarial_CVPR_2018_paper.pdf">Paper</a>] [<a href>Code</a>] [2018]<ul><li>Unpaired image dataset training.</li><li>Two loss: In generator, a semantic loss defined as an â„“1 sparse regularization in the <strong>high-level feature maps</strong> of the VGG network. In discriminator, an edge-promoting adversarial loss for preserving <strong>clear edges</strong></li><li>Built a new set of data which is animation images with edge blurred. Traditional GAN discriminator only discriminate photo from carton(or real from false), but this discriminator has three classes: Normal Photo, Real Carton Image, and Blurred edge carton image.</li></ul></li></ol><h3 id="åŠ¨æ¼«å›¾ç‰‡embedding">åŠ¨æ¼«å›¾ç‰‡Embedding</h3><ol type="1"><li>illustration2vec (i2v)ã€‚[<a href="https://www.gwern.net/docs/anime/2015-saito.pdf">Paper</a>] [<a href="https://github.com/rezoo/illustration2vec">Code</a>] [2015]<ul><li>ä½¿ç”¨äº†VGGç½‘ç»œå°†ä»»æ„åŠ¨æ¼«å›¾ç‰‡å‹ç¼©ä¸ºä¸€ä¸ªé•¿åº¦ä¸º4096çš„Vectorã€‚</li><li>åŒæ ·ï¼Œç”±äºè®­ç»ƒæ—¶Yä¸ºæ ‡ç­¾ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨è¯¥ç½‘ç»œä¸ºåŠ¨æ¼«å›¾ç‰‡æ‰“æ ‡ã€‚</li><li>è®­ç»ƒå›¾ç‰‡æ¥è‡ªäºDanbooruå’ŒSafebooruä¸¤ä¸ªç½‘ç«™ã€‚å…±è®¡ä½¿ç”¨äº†1,287,596å¼ å›¾ç‰‡å’Œå®ƒä»¬çš„metadataã€‚</li><li>æ ‡ç­¾åˆ†ä¸ºå››ç±»ï¼š<code>General tags</code>, <code>copyright tags</code>,<code>character tags</code>å’Œ<code>rating tags</code>ã€‚ç¬¬ä¸€ä¸ªæ˜¯å›¾ç‰‡æœ¬èº«çš„ç‰¹å¾ï¼Œå¦‚â€œæ­¦å™¨â€ï¼Œâ€œå¾®ç¬‘â€ï¼Œç¬¬äºŒä¸ªæ˜¯ç‰ˆæƒæ–¹ï¼Œå¦‚â€œVOCALOIDâ€ï¼›ç¬¬ä¸‰ä¸ªæ˜¯è§’è‰²åå­—ï¼Œå¦‚â€œhatsune mikuâ€æœ€åä¸€ä¸ªç±»åˆ«è¡¨ç¤ºæ˜¯18ç¦ã€æ“¦è¾¹çƒè¿˜æ˜¯å…¨å¹´é¾„å›¾ç‰‡ã€‚</li></ul></li></ol><h3 id="ç®€ç¬”ç”»è½¬ç…§ç‰‡">ç®€ç¬”ç”»è½¬ç…§ç‰‡</h3><ol type="1"><li><p>Deep Learning for Free-Hand Sketch: A Survey and A Toolbox [<a href="https://arxiv.org/pdf/2001.02600.pdf">Paper</a>] [<a href="https://github.com/PengBoXiangShang/torchsketch/">Code</a>] [2020]</p><figure><img src="/2020/07/06/acg-dl/image-20200705105458250.png" alt="image-20200705105458250"><figcaption aria-hidden="true">image-20200705105458250</figcaption></figure><figure><img src="/2020/07/06/acg-dl/image-20200705105522568.png" alt="image-20200705105522568"><figcaption aria-hidden="true">image-20200705105522568</figcaption></figure></li></ol><h3 id="å…¶ä»–gan">å…¶ä»–GAN</h3><ol type="1"><li><p>Style GAN [<a href="https://arxiv.org/pdf/1812.04948.pdf">Paper</a>] [<a href="https://github.com/NVlabs/stylegan">Code</a>] [2019]</p><ul><li>NVIDIAå‡ºå“</li><li>å®ƒå¯ä»¥è¿ç»­æ§åˆ¶ç”Ÿæˆå›¾ç‰‡çš„å„ç§ç‹¬ç«‹å‚æ•°ï¼</li><li>ä¹‹å‰çš„GANéƒ½æ˜¯Inputä½¿ç”¨ä¸€ä¸ªéšæœºå™ªå£°ï¼Œè€ŒNVIDIAè¿™ç¯‡è¿™æ˜¯åœ¨è®¸å¤šå±‚ä¸­é—´éƒ½æ·»åŠ ä¸€æ³¢å™ªå£°ã€‚å±‚æ•°è¶Šé åï¼Œè¿™äº›å™ªå£°æ§åˆ¶çš„ç‰¹å¾å°±è¶Šç»†èŠ‚ã€‚</li><li>gwernè®­ç»ƒå¥½çš„äºŒæ¬¡å…ƒStyleGANæ¨¡å‹ï¼š<a href="https://drive.google.com/file/d/1z8N_-xZW9AU45rHYGj1_tDHkIkbnMW-R/view">Link</a></li></ul><p><img src="/2020/07/06/acg-dl/image-20200705105910579.png" alt="image-20200705105910579" style="zoom:33%;"></p><p><img src="/2020/07/06/acg-dl/v2-3fffd4e8d8e16d7da045de536f6d0e95_1440w.jpg" alt="img" style="zoom:33%;"></p><p><img src="/2020/07/06/acg-dl/image-20200705105951584.png" alt="image-20200705105951584" style="zoom:33%;"></p></li><li><p><a href="https://github.com/zhangqianhui/AdversarialNetsPapers">AdversarialNetsPapers å„ç§GANçš„Papers</a></p></li><li><p><a href="https://github.com/tjwei/GANotebooks">GANotebooks å„ç§GANçš„Jupyter Notebookæ•™ç¨‹</a></p></li><li><p><a href="https://github.com/jayleicn/animeGAN">animeGAN A simple PyTorch Implementation of GAN, focusing on anime face drawing.</a></p></li></ol><h2 id="æ•°æ®é›†">æ•°æ®é›†</h2><h3 id="çº¯åŠ¨æ¼«å›¾ç‰‡">çº¯åŠ¨æ¼«å›¾ç‰‡</h3><ol type="1"><li><p>Danbooru2019. [<a href="https://www.gwern.net/Danbooru2019">Release</a>] [<a href="https://github.com/fire-eggs/Danbooru2019">Code</a>] [2019]</p><ul><li>Original or 3x512x512</li><li>~3TB or 295GB</li><li>3.69M or 2828400 images</li><li>108M tag instances (of 392k defined tags, ~29/image).</li><li>Covering Danbooru from 24 May 2005 through 31 December 2019 (final ID: #3,734,659).</li><li>Image files &amp; a JSON export of the metadata.</li></ul></li><li><p>Anime Face Dataset [<a href="https://www.kaggle.com/splcher/animefacedataset">Link</a>][2019]</p><ul><li>æ•°æ®æ¥æºï¼š<a href="www.getchu.com">Getchu</a></li><li>åŒ…å«å›¾ç‰‡æ•°ç›®ï¼š 63,632</li><li>åªåŒ…å«è„¸éƒ¨æˆªå–å›¾ç‰‡</li><li>å¤§å°ï¼š395.95MB</li><li>æ¯å¼ å›¾ç‰‡åˆ†è¾¨ç‡ï¼š90 * 90 ~ 120 * 120</li></ul><p><img src="/2020/07/06/acg-dl/test.jpg" alt="anime girls" style="zoom:50%;"></p></li></ol><h3 id="çº¿ç¨¿-è‰²ç¨¿å¯¹">çº¿ç¨¿-è‰²ç¨¿å¯¹</h3><ol type="1"><li>Danbooru Sketch Pair 128x [<a href="https://www.kaggle.com/wuhecong/danbooru-sketch-pair-128x">Link</a>] [2019]<ul><li>9.58GB</li><li>647K images. 323K sketch-color pairs</li><li>Image size: 3x128x128</li><li>æœ‰çš„æ˜¯æ’ç”»ï¼Œæœ‰çš„æ˜¯æ¼«ç”»ã€‚</li><li>åšå®¢ï¼šSketch to Color Anime: An application of Conditional GAN. [<a href="https://medium.com/@raviranjankr165/sketch-to-color-anime-an-application-of-conditional-gan-e40f59c66281">Link</a>] [<a href="https://github.com/ravi-1654003/Sketch2Color-conditional-GAN">Code</a>] [2020]</li></ul></li></ol><h3 id="æ¨èä¸è¯„ä»·">æ¨èä¸è¯„ä»·</h3><ol type="1"><li><p>Anime Recommendations Database [<a href="https://www.kaggle.com/CooperUnion/anime-recommendations-database">Link</a>] [2016]</p><ul><li>æ•°æ®æ¥æºäºï¼š<a href="https://myanimelist.net/">Link</a></li><li>å¤§å°ï¼š107.14MB</li><li>This data set contains information on user preference data from 73,516 users on 12,294 anime.</li></ul><p><img src="/2020/07/06/acg-dl/image-20200705024244220.png" alt="image-20200705024244220" style="zoom: 33%;"></p></li></ol><h2 id="åšå®¢">åšå®¢</h2><ol type="1"><li><a href="https://zhuanlan.zhihu.com/p/24767059">GANå­¦ä¹ æŒ‡å—ï¼šä»åŸç†å…¥é—¨åˆ°åˆ¶ä½œç”ŸæˆDemo</a></li><li><a href="https://medium.com/@jonathan_hui/gan-whats-generative-adversarial-networks-and-its-application-f39ed278ef09">GANâ€Šâ€”â€ŠWhat is Generative Adversary Networks GAN?</a></li><li><a href="https://www.leiphone.com/news/201709/i9qlcvWrpitOacjf.html">å¯èƒ½æ˜¯è¿‘æœŸæœ€å¥½ç©çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼šCycleGANçš„åŸç†ä¸å®éªŒè¯¦è§£</a></li><li><a href="https://makegirlsmoe.github.io/main/2017/08/14/news-english.html">è¾“å…¥å„ç§å‚æ•°ç”ŸæˆåŠ¨æ¼«äººç‰©å¤´åƒå®˜æ–¹åšå®¢</a></li><li><a href="https://www.jiqizhixin.com/articles/2017-08-20-4">å®…ç”·çš„ç¦éŸ³ï¼šç”¨GANè‡ªåŠ¨ç”ŸæˆäºŒæ¬¡å…ƒèŒå¦¹å­</a></li><li><a href="https://qiita.com/rezoolab/items/5cc96b6d31153e0c86bc">Chainerã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«ã‚¤ãƒ©ã‚¹ãƒˆã‚’æã‹ã›ã‚‹</a></li><li><a href="https://www.jqr.com/article/000215">æ—‹è½¬å§ï¼æ¢è£…å°‘å¥³ï¼šä¸€ç§å¯ç”Ÿæˆé«˜åˆ†è¾¨ç‡å…¨èº«åŠ¨ç”»çš„GAN</a></li><li><a href="https://www.jianshu.com/p/f31d9fc1d677">ä¸è¦æ€‚ï¼Œå°±æ˜¯GAN</a></li><li><a href="https://medium.com/@jonathan_hui/gan-some-cool-applications-of-gans-4c9ecca35900">GANâ€Šâ€”â€ŠSome cool applications of GANs</a></li><li><a href="https://zhuanlan.zhihu.com/p/30532830">çœ¼è§å·²ä¸ä¸ºå®ï¼Œè¿„ä»Šæœ€çœŸå®çš„GANï¼šProgressive Growing of GANs</a></li><li><a href="https://zhuanlan.zhihu.com/p/33752313">é€šä¿—ç†è§£ç”Ÿæˆå¯¹æŠ—ç½‘ç»œGAN</a></li><li><a href="https://zhuanlan.zhihu.com/p/27012520">ä»å¤´å¼€å§‹GAN</a></li><li><a href="https://junyanz.github.io/CycleGAN/">Cycle GAN ä½œè€…å®˜ç½‘</a></li><li><a href="https://www.jiqizhixin.com/articles/2018-04-17-5">å¦‚ä½•ä»é›¶å¼€å§‹æ„å»ºæ·±åº¦å­¦ä¹ é¡¹ç›®ï¼Ÿè¿™é‡Œæœ‰ä¸€ä»½è¯¦ç»†çš„æ•™ç¨‹</a></li><li><a href="https://zhuanlan.zhihu.com/p/27145954">å¸¦ä½ ç†è§£CycleGANï¼Œå¹¶ç”¨TensorFlowè½»æ¾å®ç°</a></li></ol><h2 id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº</h2><h3 id="æ–‡å­—è½¬è¯­éŸ³">æ–‡å­—è½¬è¯­éŸ³</h3><ol type="1"><li><a href="http://sinsy.jp/">Sinsy</a>: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸæ¥½è­œ(MusicXML)ã«åŸºã¥ã„ã¦ä»»æ„ã®æ­Œå£°ã‚’ç”Ÿæˆã™ã‚‹HMM/DNNæ­Œå£°åˆæˆã‚·ã‚¹ãƒ†ãƒ ï¼ŒSinsyï¼ˆã—ãƒã‚“ã—ãƒï¼‰ã§ã™ï¼<ul><li>æ”¯æŒæ—¥è¯­ã€ä¸­æ–‡ã€è‹±è¯­ã€‚</li><li>è¾“å…¥ç‰¹å®šæ ¼å¼çš„ä¹è°±ï¼Œè¾“å‡ºç›¸å½“ä¸é”™çš„å”±è¯éŸ³é¢‘æ–‡ä»¶ã€‚</li><li><a href="https://pypi.org/project/sinsy-cli/">sinsy-cli</a>: ä½¿ç”¨å‘½ä»¤è¡Œè°ƒç”¨Sinsyè¿›è¡Œåˆæˆã€‚å®‰è£…ï¼š<code>pip install sinsy-cli</code></li><li>ä»‹ç»åšå®¢ï¼š<a href="http://blog.pcedev.com/2016/02/18/hands-sinsy-solution-song-vocal-synthesis-using-open-source-software/">Hands on Sinsy, a free software solution for song vocal synthesis</a></li></ul></li><li><a href="https://www.animenewsnetwork.com/interest/2013-10-22/vocaloducer-automatically-creates-songs-from-lyrics">Vocaloducer</a>ã€‚</li></ol><h3 id="åŠ¨æ¼«äººè„¸æ£€æµ‹åˆ‡å‰²">åŠ¨æ¼«äººè„¸æ£€æµ‹åˆ‡å‰²</h3><ol type="1"><li><a href="https://github.com/nagadomi/lbpcascade_animeface">è‡ªåŠ¨åŒ–åŠ¨æ¼«äººç‰©è„¸éƒ¨åˆ‡å‰²ä¿å­˜</a> <img src="/2020/07/06/acg-dl/43184241-ed3f1af8-9022-11e8-8800-468b002c73d9.png" alt="result"></li></ol><h3 id="å¤´åƒç”Ÿæˆ">å¤´åƒç”Ÿæˆ</h3><ol type="1"><li><a href="https://make.girls.moe/">è¾“å…¥å„ç§å‚æ•°ç”ŸæˆåŠ¨æ¼«äººç‰©å¤´åƒ</a></li><li><a href="https://github.com/Aixile/chainer-cyclegan">Chainer-CycleGAN åŠ¨æ¼«äººç‰©å¤´å‘è½¬é“¶è‰²</a></li></ol><h3 id="å›¾åƒè¶…åˆ†è¾¨ç‡">å›¾åƒè¶…åˆ†è¾¨ç‡</h3><ol type="1"><li><a href="http://waifu2x.udp.jp">Waifu2x åŠ¨æ¼«å›¾ç‰‡æ— æŸæ”¾å¤§</a></li></ol><h3 id="è‡ªåŠ¨çº¿ç¨¿ä¸Šè‰²-1">è‡ªåŠ¨çº¿ç¨¿ä¸Šè‰²</h3><ol type="1"><li><p><a href="https://github.com/pfnet/PaintsChainer">PaintsChainer</a>: Paints Chainer is a line drawing colorizer using chainer. Using CNN, you can colorize your sketch semi-automatically .</p><ul><li>ä½œè€…æä¾›äº†ç›´æ¥æ­å»ºç½‘ç«™server çš„ä»£ç ã€‚</li><li>è¿™é‡Œæ˜¯æ­å»ºå¥½çš„<a href="http://paintschainer.preferred.tech/">ç«™ç‚¹</a>ã€‚</li><li>è¯¥ç½‘ç«™ä¹Ÿæä¾›è‰å›¾æˆ–ç…§ç‰‡æå–çº¿ç¨¿åŠŸèƒ½ã€‚</li></ul><figure><img src="/2020/07/06/acg-dl/sample.png" alt="image"><figcaption aria-hidden="true">image</figcaption></figure></li></ol><h3 id="ç…§ç‰‡ç”»é£è¿ç§»">ç…§ç‰‡ç”»é£è¿ç§»</h3><ol type="1"><li><p><a href="https://deepart.io/">Repaint your picture in the style of your favorite artist</a></p><figure><img src="/2020/07/06/acg-dl/image-20200705105719731.png" alt="image-20200705105719731"><figcaption aria-hidden="true">image-20200705105719731</figcaption></figure></li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;è®ºæ–‡&quot;&gt;è®ºæ–‡&lt;/h2&gt;
&lt;p&gt;[&lt;a href&gt;Paper&lt;/a&gt;] [&lt;a href&gt;Code&lt;/a&gt;] [20XX]&lt;/p&gt;
&lt;h3 id=&quot;è‡ªåŠ¨å‹¾çº¿-çº¿ç¨¿&quot;&gt;è‡ªåŠ¨å‹¾çº¿-çº¿ç¨¿&lt;/h3&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;Learning to Simplify: Fully Convolutional Networks for Rough Sketch Cleanup [&lt;a href=&quot;http://www.f.waseda.jp/hfs/SimoSerraSIGGRAPH2016.pdf&quot;&gt;Paper&lt;/a&gt;] [&lt;a href=&quot;https://github.com/bobbens/sketch_simplification&quot;&gt;Code&lt;/a&gt;] [&lt;a href=&quot;https://medium.com/coinmonks/simplifying-rough-sketches-using-deep-learning-c404459622b9&quot;&gt;Blog&lt;/a&gt;] [2015]&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;æ—©ç¨»ç”°å¤§å­¦15å¹´ç»å…¸è®ºæ–‡ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç²—ç³™æ‰‹ç¨¿æ˜ å°„åˆ°ç²¾æçº¿ç¨¿ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä½¿ç”¨çš„æ˜¯è‡ªå»ºæ•°æ®é›†ï¼Œç»™å®šç²¾è‡´çº¿ç¨¿è®©ç”»å¸ˆå»ç…§ç€æç²—ç¨¿ï¼Œè¿™æ ·é¿å…äº†ä»çº¿ç¨¿æåˆ°ç²¾ç¨¿æ—¶å€™æ·»åŠ å’Œå¤§æ”¹äº†å¾ˆå¤šçº¿æ¡ã€‚æ•°æ®é›†æ²¡æœ‰å¼€æº......ä¸è¿‡ä¼¼ä¹ä½œè€…ç»™äº†è®­ç»ƒå¥½çš„æƒé‡ã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ol&gt;</summary>
    
    
    
    
    <category term="deep-learning" scheme="https://www.miracleyoo.com/tags/deep-learning/"/>
    
    <category term="acg" scheme="https://www.miracleyoo.com/tags/acg/"/>
    
    <category term="anime" scheme="https://www.miracleyoo.com/tags/anime/"/>
    
    <category term="paper" scheme="https://www.miracleyoo.com/tags/paper/"/>
    
  </entry>
  
  <entry>
    <title>PSæ··åˆæ¨¡å¼åŸç†ä¸ç¤ºä¾‹</title>
    <link href="https://www.miracleyoo.com/2020/05/24/ps-blend/"/>
    <id>https://www.miracleyoo.com/2020/05/24/ps-blend/</id>
    <published>2020-05-24T22:39:00.000Z</published>
    <updated>2021-03-12T22:39:53.306Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¨¡å¼å®˜æ–¹ä»‹ç»">æ¨¡å¼å®˜æ–¹ä»‹ç»</h2><p><strong>æ­£ç‰‡å åº•</strong></p><p>æŸ¥çœ‹<strong>æ¯ä¸ªé€šé“</strong>ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶å°†åŸºè‰²ä¸æ··åˆè‰²è¿›è¡Œæ­£ç‰‡å åº•ã€‚ç»“æœè‰²æ€»æ˜¯è¾ƒæš—çš„é¢œè‰²ã€‚ä»»ä½•é¢œè‰²ä¸é»‘è‰²æ­£ç‰‡å åº•äº§ç”Ÿé»‘è‰²ã€‚ä»»ä½•é¢œè‰²ä¸ç™½è‰²æ­£ç‰‡å åº•ä¿æŒä¸å˜ã€‚å½“æ‚¨ç”¨é»‘è‰²æˆ–ç™½è‰²ä»¥å¤–çš„é¢œè‰²ç»˜ç”»æ—¶ï¼Œç»˜ç”»å·¥å…·ç»˜åˆ¶çš„è¿ç»­æè¾¹äº§ç”Ÿé€æ¸å˜æš—çš„é¢œè‰²ã€‚è¿™ä¸ä½¿ç”¨å¤šä¸ªæ ‡è®°ç¬”åœ¨å›¾åƒä¸Šç»˜å›¾çš„æ•ˆæœç›¸ä¼¼ã€‚</p><p><img src="/2020/05/24/ps-blend/image-20200519225738854.png" alt="image-20200519225738854" style="zoom:33%;"></p><p>å¦‚å›¾ï¼Œé‡ç‚¹æ˜¯<strong>åˆ†é€šé“</strong>ï¼Œæ‰€æœ‰çš„æ¨¡å¼æ··åˆéƒ½æ˜¯åŸºäºé€šé“çš„ã€‚å³çº¢è‰²çš„åº•è‰²ï¼Œå¾€ä¸ŠåŠ è“è‰²å’Œç»¿è‰²ç»“æœéƒ½æ˜¯é»‘è‰²ã€‚å› ä¸ºRGBé€šé“ç›¸äº’é—´çš„æš—è‰²éƒ½æ˜¯é»‘è‰²ã€‚å½“ç„¶ï¼Œå®ƒä»¬ä¸é»‘è‰²å åŠ ä¹Ÿæ˜¯é»‘è‰²çš„ã€‚</p><span id="more"></span><p><strong>æ»¤è‰²</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶å°†æ··åˆè‰²çš„äº’è¡¥è‰²ä¸åŸºè‰²è¿›è¡Œæ­£ç‰‡å åº•ã€‚ç»“æœè‰²æ€»æ˜¯è¾ƒäº®çš„é¢œè‰²ã€‚ç”¨é»‘è‰²è¿‡æ»¤æ—¶é¢œè‰²ä¿æŒä¸å˜ã€‚ç”¨ç™½è‰²è¿‡æ»¤å°†äº§ç”Ÿç™½è‰²ã€‚æ­¤æ•ˆæœç±»ä¼¼äºå¤šä¸ªæ‘„å½±å¹»ç¯ç‰‡åœ¨å½¼æ­¤ä¹‹ä¸ŠæŠ•å½±ã€‚</p><p><strong>æ­£å¸¸</strong></p><p>ç¼–è¾‘æˆ–ç»˜åˆ¶æ¯ä¸ªåƒç´ ï¼Œä½¿å…¶æˆä¸ºç»“æœè‰²ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ï¼ˆåœ¨å¤„ç†ä½å›¾å›¾åƒæˆ–ç´¢å¼•é¢œè‰²å›¾åƒæ—¶ï¼Œâ€œæ­£å¸¸â€æ¨¡å¼ä¹Ÿç§°ä¸º<em>é˜ˆå€¼</em>ã€‚ï¼‰</p><p><strong>æº¶è§£</strong></p><p>ç¼–è¾‘æˆ–ç»˜åˆ¶æ¯ä¸ªåƒç´ ï¼Œä½¿å…¶æˆä¸ºç»“æœè‰²ã€‚ä½†æ˜¯ï¼Œæ ¹æ®ä»»ä½•åƒç´ ä½ç½®çš„ä¸é€æ˜åº¦ï¼Œç»“æœè‰²ç”±åŸºè‰²æˆ–æ··åˆè‰²çš„åƒç´ éšæœºæ›¿æ¢ã€‚</p><p><strong>èƒŒå</strong></p><p>ä»…åœ¨å›¾å±‚çš„é€æ˜éƒ¨åˆ†ç¼–è¾‘æˆ–ç»˜ç”»ã€‚æ­¤æ¨¡å¼ä»…åœ¨å–æ¶ˆé€‰æ‹©äº†â€œé”å®šé€æ˜åŒºåŸŸâ€çš„å›¾å±‚ä¸­ä½¿ç”¨ï¼Œç±»ä¼¼äºåœ¨é€æ˜çº¸çš„é€æ˜åŒºåŸŸèƒŒé¢ç»˜ç”»ã€‚</p><p><strong>æ¸…é™¤</strong></p><p>ç¼–è¾‘æˆ–ç»˜åˆ¶æ¯ä¸ªåƒç´ ï¼Œä½¿å…¶é€æ˜ã€‚æ­¤æ¨¡å¼å¯ç”¨äºå½¢çŠ¶å·¥å…·ï¼ˆå½“é€‰å®šå¡«å……åŒºåŸŸ <img src="/2020/05/24/ps-blend/P_VectorShapeFilled_Md_N.png" alt="img"> æ—¶ï¼‰ã€æ²¹æ¼†æ¡¶å·¥å…· <img src="/2020/05/24/ps-blend/P_Fill_Lg_N.png" alt="img">ã€ç”»ç¬”å·¥å…· <img src="/2020/05/24/ps-blend/P_Brush_Lg_N.png" alt="img">ã€é“…ç¬”å·¥å…· <img src="/2020/05/24/ps-blend/P_Draw_Lg_N.png" alt="img">ã€â€œå¡«å……â€å‘½ä»¤å’Œâ€œæè¾¹â€å‘½ä»¤ã€‚æ‚¨å¿…é¡»ä½äºå–æ¶ˆé€‰æ‹©äº†â€œé”å®šé€æ˜åŒºåŸŸâ€çš„å›¾å±‚ä¸­æ‰èƒ½ä½¿ç”¨æ­¤æ¨¡å¼ã€‚</p><p><strong>å˜æš—</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶é€‰æ‹©åŸºè‰²æˆ–æ··åˆè‰²ä¸­è¾ƒæš—çš„é¢œè‰²ä½œä¸ºç»“æœè‰²ã€‚å°†æ›¿æ¢æ¯”æ··åˆè‰²äº®çš„åƒç´ ï¼Œè€Œæ¯”æ··åˆè‰²æš—çš„åƒç´ ä¿æŒä¸å˜ã€‚</p><p><strong>é¢œè‰²åŠ æ·±</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶é€šè¿‡å¢åŠ äºŒè€…ä¹‹é—´çš„å¯¹æ¯”åº¦ä½¿åŸºè‰²å˜æš—ä»¥åæ˜ å‡ºæ··åˆè‰²ã€‚ä¸ç™½è‰²æ··åˆåä¸äº§ç”Ÿå˜åŒ–ã€‚</p><p><strong>çº¿æ€§åŠ æ·±</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶é€šè¿‡å‡å°äº®åº¦ä½¿åŸºè‰²å˜æš—ä»¥åæ˜ æ··åˆè‰²ã€‚ä¸ç™½è‰²æ··åˆåä¸äº§ç”Ÿå˜åŒ–ã€‚</p><p><strong>å˜äº®</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶é€‰æ‹©åŸºè‰²æˆ–æ··åˆè‰²ä¸­è¾ƒäº®çš„é¢œè‰²ä½œä¸ºç»“æœè‰²ã€‚æ¯”æ··åˆè‰²æš—çš„åƒç´ è¢«æ›¿æ¢ï¼Œæ¯”æ··åˆè‰²äº®çš„åƒç´ ä¿æŒä¸å˜ã€‚</p><p><strong>é¢œè‰²å‡æ·¡</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶é€šè¿‡å‡å°äºŒè€…ä¹‹é—´çš„å¯¹æ¯”åº¦ä½¿åŸºè‰²å˜äº®ä»¥åæ˜ å‡ºæ··åˆè‰²ã€‚ä¸é»‘è‰²æ··åˆåˆ™ä¸å‘ç”Ÿå˜åŒ–ã€‚</p><p><strong>çº¿æ€§å‡æ·¡ï¼ˆæ·»åŠ ï¼‰</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶é€šè¿‡å¢åŠ äº®åº¦ä½¿åŸºè‰²å˜äº®ä»¥åæ˜ æ··åˆè‰²ã€‚ä¸é»‘è‰²æ··åˆåˆ™ä¸å‘ç”Ÿå˜åŒ–ã€‚</p><p><strong>å åŠ </strong></p><p>å¯¹é¢œè‰²è¿›è¡Œæ­£ç‰‡å åº•æˆ–è¿‡æ»¤ï¼Œå…·ä½“å–å†³äºåŸºè‰²ã€‚å›¾æ¡ˆæˆ–é¢œè‰²åœ¨ç°æœ‰åƒç´ ä¸Šå åŠ ï¼ŒåŒæ—¶ä¿ç•™åŸºè‰²çš„æ˜æš—å¯¹æ¯”ã€‚ä¸æ›¿æ¢åŸºè‰²ï¼Œä½†åŸºè‰²ä¸æ··åˆè‰²ç›¸æ··ä»¥åæ˜ åŸè‰²çš„äº®åº¦æˆ–æš—åº¦ã€‚</p><p><strong>æŸ”å…‰</strong></p><p>ä½¿é¢œè‰²å˜æš—æˆ–å˜äº®ï¼Œå…·ä½“å–å†³äºæ··åˆè‰²ã€‚æ­¤æ•ˆæœä¸å‘æ•£çš„èšå…‰ç¯ç…§åœ¨å›¾åƒä¸Šç›¸ä¼¼ã€‚å¦‚æœæ··åˆè‰²ï¼ˆå…‰æºï¼‰æ¯” 50% ç°è‰²äº®ï¼Œåˆ™å›¾åƒå˜äº®ï¼Œå°±åƒè¢«å‡æ·¡äº†ä¸€æ ·ã€‚å¦‚æœæ··åˆè‰²ï¼ˆå…‰æºï¼‰æ¯” 50% ç°è‰²æš—ï¼Œåˆ™å›¾åƒå˜æš—ï¼Œå°±åƒè¢«åŠ æ·±äº†ä¸€æ ·ã€‚ä½¿ç”¨çº¯é»‘è‰²æˆ–çº¯ç™½è‰²ä¸Šè‰²ï¼Œå¯ä»¥äº§ç”Ÿæ˜æ˜¾å˜æš—æˆ–å˜äº®çš„åŒºåŸŸï¼Œä½†ä¸èƒ½ç”Ÿæˆçº¯é»‘è‰²æˆ–çº¯ç™½è‰²ã€‚</p><p><strong>å¼ºå…‰</strong></p><p>å¯¹é¢œè‰²è¿›è¡Œæ­£ç‰‡å åº•æˆ–è¿‡æ»¤ï¼Œå…·ä½“å–å†³äºæ··åˆè‰²ã€‚æ­¤æ•ˆæœä¸è€€çœ¼çš„èšå…‰ç¯ç…§åœ¨å›¾åƒä¸Šç›¸ä¼¼ã€‚å¦‚æœæ··åˆè‰²ï¼ˆå…‰æºï¼‰æ¯” 50% ç°è‰²äº®ï¼Œåˆ™å›¾åƒå˜äº®ï¼Œå°±åƒè¿‡æ»¤åçš„æ•ˆæœã€‚è¿™å¯¹äºå‘å›¾åƒæ·»åŠ é«˜å…‰éå¸¸æœ‰ç”¨ã€‚å¦‚æœæ··åˆè‰²ï¼ˆå…‰æºï¼‰æ¯” 50% ç°è‰²æš—ï¼Œåˆ™å›¾åƒå˜æš—ï¼Œå°±åƒæ­£ç‰‡å åº•åçš„æ•ˆæœã€‚è¿™å¯¹äºå‘å›¾åƒæ·»åŠ é˜´å½±éå¸¸æœ‰ç”¨ã€‚ç”¨çº¯é»‘è‰²æˆ–çº¯ç™½è‰²ä¸Šè‰²ä¼šäº§ç”Ÿçº¯é»‘è‰²æˆ–çº¯ç™½è‰²ã€‚</p><p><strong>äº®å…‰</strong></p><p>é€šè¿‡å¢åŠ æˆ–å‡å°å¯¹æ¯”åº¦æ¥åŠ æ·±æˆ–å‡æ·¡é¢œè‰²ï¼Œå…·ä½“å–å†³äºæ··åˆè‰²ã€‚å¦‚æœæ··åˆè‰²ï¼ˆå…‰æºï¼‰æ¯” 50% ç°è‰²äº®ï¼Œåˆ™é€šè¿‡å‡å°å¯¹æ¯”åº¦ä½¿å›¾åƒå˜äº®ã€‚å¦‚æœæ··åˆè‰²æ¯” 50% ç°è‰²æš—ï¼Œåˆ™é€šè¿‡å¢åŠ å¯¹æ¯”åº¦ä½¿å›¾åƒå˜æš—ã€‚</p><p><strong>çº¿æ€§å…‰</strong></p><p>é€šè¿‡å‡å°æˆ–å¢åŠ äº®åº¦æ¥åŠ æ·±æˆ–å‡æ·¡é¢œè‰²ï¼Œå…·ä½“å–å†³äºæ··åˆè‰²ã€‚å¦‚æœæ··åˆè‰²ï¼ˆå…‰æºï¼‰æ¯” 50% ç°è‰²äº®ï¼Œåˆ™é€šè¿‡å¢åŠ äº®åº¦ä½¿å›¾åƒå˜äº®ã€‚å¦‚æœæ··åˆè‰²æ¯” 50% ç°è‰²æš—ï¼Œåˆ™é€šè¿‡å‡å°äº®åº¦ä½¿å›¾åƒå˜æš—ã€‚</p><p><strong>ç‚¹å…‰</strong></p><p>æ ¹æ®æ··åˆè‰²æ›¿æ¢é¢œè‰²ã€‚å¦‚æœæ··åˆè‰²ï¼ˆå…‰æºï¼‰æ¯” 50% ç°è‰²äº®ï¼Œåˆ™æ›¿æ¢æ¯”æ··åˆè‰²æš—çš„åƒç´ ï¼Œè€Œä¸æ”¹å˜æ¯”æ··åˆè‰²äº®çš„åƒç´ ã€‚å¦‚æœæ··åˆè‰²æ¯” 50% ç°è‰²æš—ï¼Œåˆ™æ›¿æ¢æ¯”æ··åˆè‰²äº®çš„åƒç´ ï¼Œè€Œæ¯”æ··åˆè‰²æš—çš„åƒç´ ä¿æŒä¸å˜ã€‚è¿™å¯¹äºå‘å›¾åƒæ·»åŠ ç‰¹æ®Šæ•ˆæœéå¸¸æœ‰ç”¨ã€‚</p><p><strong>å®è‰²æ··åˆ</strong></p><p>å°†æ··åˆé¢œè‰²çš„çº¢è‰²ã€ç»¿è‰²å’Œè“è‰²é€šé“å€¼æ·»åŠ åˆ°åŸºè‰²çš„ RGB å€¼ã€‚å¦‚æœé€šé“çš„ç»“æœæ€»å’Œå¤§äºæˆ–ç­‰äº 255ï¼Œåˆ™å€¼ä¸º 255ï¼›å¦‚æœå°äº 255ï¼Œåˆ™å€¼ä¸º 0ã€‚å› æ­¤ï¼Œæ‰€æœ‰æ··åˆåƒç´ çš„çº¢è‰²ã€ç»¿è‰²å’Œè“è‰²é€šé“å€¼è¦ä¹ˆæ˜¯ 0ï¼Œè¦ä¹ˆæ˜¯ 255ã€‚æ­¤æ¨¡å¼ä¼šå°†æ‰€æœ‰åƒç´ æ›´æ”¹ä¸ºä¸»è¦çš„åŠ è‰²ï¼ˆçº¢è‰²ã€ç»¿è‰²æˆ–è“è‰²ï¼‰ã€ç™½è‰²æˆ–é»‘è‰²ã€‚</p><p><strong>å·®å€¼</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶ä»åŸºè‰²ä¸­å‡å»æ··åˆè‰²ï¼Œæˆ–ä»æ··åˆè‰²ä¸­å‡å»åŸºè‰²ï¼Œå…·ä½“å–å†³äºå“ªä¸€ä¸ªé¢œè‰²çš„äº®åº¦å€¼æ›´å¤§ã€‚ä¸ç™½è‰²æ··åˆå°†åè½¬åŸºè‰²å€¼ï¼›ä¸é»‘è‰²æ··åˆåˆ™ä¸äº§ç”Ÿå˜åŒ–ã€‚</p><p><strong>æ’é™¤</strong></p><p>åˆ›å»ºä¸€ç§ä¸â€œå·®å€¼â€æ¨¡å¼ç›¸ä¼¼ä½†å¯¹æ¯”åº¦æ›´ä½çš„æ•ˆæœã€‚ä¸ç™½è‰²æ··åˆå°†åè½¬åŸºè‰²å€¼ã€‚ä¸é»‘è‰²æ··åˆåˆ™ä¸å‘ç”Ÿå˜åŒ–ã€‚</p><p><strong>å‡å»</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶ä»åŸºè‰²ä¸­å‡å»æ··åˆè‰²ã€‚åœ¨ 8 ä½å’Œ 16 ä½å›¾åƒä¸­ï¼Œä»»ä½•ç”Ÿæˆçš„è´Ÿç‰‡å€¼éƒ½ä¼šå‰ªåˆ‡ä¸ºé›¶ã€‚</p><p><strong>åˆ’åˆ†</strong></p><p>æŸ¥çœ‹æ¯ä¸ªé€šé“ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶ä»åŸºè‰²ä¸­åˆ’åˆ†æ··åˆè‰²ã€‚</p><p><strong>è‰²ç›¸</strong></p><p>ç”¨åŸºè‰²çš„æ˜äº®åº¦å’Œé¥±å’Œåº¦ä»¥åŠæ··åˆè‰²çš„è‰²ç›¸åˆ›å»ºç»“æœè‰²ã€‚</p><p><strong>é¥±å’Œåº¦</strong></p><p>ç”¨åŸºè‰²çš„æ˜äº®åº¦å’Œè‰²ç›¸ä»¥åŠæ··åˆè‰²çš„é¥±å’Œåº¦åˆ›å»ºç»“æœè‰²ã€‚åœ¨æ—  (0) é¥±å’Œåº¦ï¼ˆç°åº¦ï¼‰åŒºåŸŸä¸Šç”¨æ­¤æ¨¡å¼ç»˜ç”»ä¸ä¼šäº§ç”Ÿä»»ä½•å˜åŒ–ã€‚</p><p><strong>é¢œè‰²</strong></p><p>ç”¨åŸºè‰²çš„æ˜äº®åº¦ä»¥åŠæ··åˆè‰²çš„è‰²ç›¸å’Œé¥±å’Œåº¦åˆ›å»ºç»“æœè‰²ã€‚è¿™æ ·å¯ä»¥ä¿ç•™å›¾åƒä¸­çš„ç°é˜¶ï¼Œå¹¶ä¸”å¯¹äºç»™å•è‰²å›¾åƒä¸Šè‰²å’Œç»™å½©è‰²å›¾åƒç€è‰²éƒ½ä¼šéå¸¸æœ‰ç”¨ã€‚</p><p><strong>æ˜åº¦</strong></p><p>ç”¨åŸºè‰²çš„è‰²ç›¸å’Œé¥±å’Œåº¦ä»¥åŠæ··åˆè‰²çš„æ˜äº®åº¦åˆ›å»ºç»“æœè‰²ã€‚æ­¤æ¨¡å¼åˆ›å»ºä¸â€œé¢œè‰²â€æ¨¡å¼ç›¸åçš„æ•ˆæœã€‚</p><p><strong>æµ…è‰²</strong></p><p>æ¯”è¾ƒæ··åˆè‰²å’ŒåŸºè‰²çš„æ‰€æœ‰é€šé“å€¼çš„æ€»å’Œå¹¶æ˜¾ç¤ºå€¼è¾ƒå¤§çš„é¢œè‰²ã€‚â€œæµ…è‰²â€ä¸ä¼šç”Ÿæˆç¬¬ä¸‰ç§é¢œè‰²ï¼ˆå¯ä»¥é€šè¿‡â€œå˜äº®â€æ··åˆè·å¾—ï¼‰ï¼Œå› ä¸ºå®ƒå°†ä»åŸºè‰²å’Œæ··åˆè‰²ä¸­é€‰å–æœ€å¤§çš„é€šé“å€¼æ¥åˆ›å»ºç»“æœè‰²ã€‚</p><p><strong>æ·±è‰²</strong></p><p>æ¯”è¾ƒæ··åˆè‰²å’ŒåŸºè‰²çš„æ‰€æœ‰é€šé“å€¼çš„æ€»å’Œå¹¶æ˜¾ç¤ºå€¼è¾ƒå°çš„é¢œè‰²ã€‚â€œæ·±è‰²â€ä¸ä¼šç”Ÿæˆç¬¬ä¸‰ç§é¢œè‰²ï¼ˆå¯ä»¥é€šè¿‡â€œå˜æš—â€æ··åˆè·å¾—ï¼‰ï¼Œå› ä¸ºå®ƒå°†ä»åŸºè‰²å’Œæ··åˆè‰²ä¸­é€‰å–æœ€å°çš„é€šé“å€¼æ¥åˆ›å»ºç»“æœè‰²ã€‚</p><h2 id="å…¬å¼">å…¬å¼</h2><figure><img src="/2020/05/24/ps-blend/365c8ef854384f00b13c69e81eb2d41b.jpg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æ³¨é‡Šï¼š</p><p>1.æ··åˆæ¨¡å¼çš„æ•°å­¦è®¡ç®—å…¬å¼ï¼Œå¦å¤–è¿˜ä»‹ç»äº†ä¸é€æ˜åº¦ã€‚</p><p>2.è¿™äº›å…¬å¼ä»…é€‚ç”¨äºRGBå›¾åƒï¼Œå¯¹äºLabé¢œè‰²å›¾åƒè€Œè¨€ï¼Œè¿™äº›å…¬å¼å°†ä¸å†é€‚ç”¨ã€‚</p><p>3.åœ¨å…¬å¼ä¸­â€”â€”</p><p>A ä»£è¡¨ä¸‹é¢å›¾å±‚çš„é¢œè‰²å€¼ï¼Œä¹Ÿç§°ä¸ºåŸºè‰²ï¼›</p><p>B ä»£è¡¨ä¸Šé¢å›¾å±‚çš„é¢œè‰²å€¼ï¼Œä¹Ÿæˆä¸ºæ··åˆè‰²ï¼›</p><p>C ä»£è¡¨æ··åˆå›¾å±‚çš„é¢œè‰²å€¼ï¼Œä¹Ÿç§°ä¸ºç»“æœè‰²ï¼›</p><p>D è¡¨ç¤ºè¯¥å±‚çš„é€æ˜åº¦ã€‚</p><h2 id="è¯¦ç»†ä¸¾ä¾‹æ¨ç†">è¯¦ç»†ä¸¾ä¾‹æ¨ç†</h2><p>æˆ‘ä»¬å…ˆå»ºç«‹ä¸¤ä¸ªå›¾å±‚ï¼š</p><p>å½“å‰é€‰ä¸­å±‚ï¼ˆActive Layerï¼‰ä¸º<strong>Aå±‚</strong>ï¼Œæˆ–ç§°â€œ<strong>æ··åˆè‰²</strong> blend colorâ€</p><p>ä¸‹å±‚ï¼ˆBackground Layerï¼‰ä¸º<strong>Bå±‚</strong>ï¼Œæˆ–ç§°â€œ<strong>åŸºè‰²</strong> base colorâ€ï¼Œä¸¤è€…æ··åˆå¾—åˆ°â€œ<strong>ç»“æœè‰²</strong> Result colorâ€</p><figure><img src="/2020/05/24/ps-blend/v2-49a088eef8b2851abc6bb5809dff666c_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="æ··åˆæ¨¡å¼çš„åŸºæœ¬åŸç†"><strong>æ··åˆæ¨¡å¼çš„åŸºæœ¬åŸç†</strong></h2><p>å–Aå±‚ä»»æ„ä¸€ä¸ªåƒç´ a [R1, G1, B1]ï¼Œä¸Bå±‚å¯¹åº”ä½ç½®çš„åƒç´ b [R2, G2, B2] è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œå¾—åˆ°c [R3, G3, B3]</p><ul><li>R1 æŸç§è¿ç®— R2 = R3</li><li>G1 æŸç§è¿ç®— G2 = G3</li><li>B1 æŸç§è¿ç®— B2 = B3</li></ul><p>Aã€Bä¸¤å±‚<strong>æ‰€æœ‰åƒç´ </strong>éƒ½ç‹¬ç«‹è¿›è¡ŒåŒæ ·çš„è¿ç®—ï¼Œå³å¾—åˆ°æ··åˆåçš„ç»“æœCï¼Œå³æ–°çš„Aå±‚ï¼ˆæ³¨æ„è™½ç„¶Aå±‚ç¼©ç•¥å›¾æ²¡æœ‰å˜ï¼Œä½†ç›´æ–¹å›¾å·²ç»å˜äº†ï¼‰ï¼Œè€ŒBä¿æŒä¸å˜</p><p>ä¸¾ä¸€ä¸ªç®€å•ä¾‹å­ï¼ŒPSé»˜è®¤çš„å›¾å±‚æ··åˆæ¨¡å¼æ˜¯â€œæ­£å¸¸â€ï¼Œåœ¨ä¸é€æ˜åº¦ä¸º100%æ—¶ï¼Œ</p><ul><li>R1 æ­£å¸¸ R2 = R1</li><li>G1 æ­£å¸¸ G2 = G1</li><li>B1 æ­£å¸¸ B2 = B1</li></ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œâ€œæ­£å¸¸â€æ¨¡å¼ä¸‹ï¼ŒAå±‚åœ¨Bå±‚ä¹‹ä¸Šï¼Œçœ‹åˆ°çš„åªæœ‰Aå±‚ï¼Œçœ‹ä¸åˆ°Bå±‚</p><h2 id="æ··åˆæ¨¡å¼çš„åˆ†ç±»"><strong>æ··åˆæ¨¡å¼çš„åˆ†ç±»</strong></h2><p>ä¸€èˆ¬ç³»ï¼šæ­£å¸¸ã€æº¶è§£</p><p>å˜æš—ç³»ï¼šå˜æš—ã€æ·±è‰²ã€æ­£ç‰‡å åº•ã€é¢œè‰²åŠ æ·±ã€çº¿æ€§åŠ æ·±</p><p>å˜äº®ç³»ï¼šå˜äº®ã€æµ…è‰²ã€æ»¤è‰²ã€é¢œè‰²å‡æ·¡ã€çº¿æ€§å‡æ·¡</p><p>å¯¹æ¯”ç³»ï¼šå åŠ ã€å¼ºå…‰ã€æŸ”å…‰ã€äº®å…‰ã€çº¿æ€§å…‰ã€ç‚¹å…‰ã€å®è‰²æ··åˆ</p><ul><li><ul><li>è¯¥ç»„ç‰¹ç‚¹æ˜¯è®©äº®çš„æ›´äº®ï¼Œæš—çš„æ›´æš—ï¼Œæ¯ä¸€ä¸ªâ€œå¯¹æ¯”ç³»â€çš„æ··åˆæ¨¡å¼éƒ½å¯çœ‹ä½œâ€œå˜æš—ç³»â€å’Œâ€œå˜äº®ç³»â€çš„ç»“åˆï¼Œå¦‚â€œå åŠ â€æ˜¯å¯¹è¾ƒæš—çš„åƒç´ è¿›è¡Œâ€œæ­£ç‰‡å åº•â€ï¼Œå¯¹è¾ƒäº®çš„åƒç´ è¿›è¡Œâ€œæ»¤è‰²â€</li></ul></li></ul><p>è´Ÿç‰‡ç³»ï¼šå·®å€¼ã€æ’é™¤</p><p>ç›¸æ¶ˆç³»ï¼šå‡å»ã€åˆ’åˆ†</p><p>HSLç³»ï¼šè‰²ç›¸ã€é¥±å’Œåº¦ã€é¢œè‰²ã€æ˜åº¦</p><h2 id="æ··åˆæ¨¡å¼å½¼æ­¤ä¹‹é—´çš„è”ç³»"><strong>æ··åˆæ¨¡å¼å½¼æ­¤ä¹‹é—´çš„è”ç³»</strong></h2><ol type="1"><li>å¯¹äºå¤§å¤šæ•°æ··åˆæ¨¡å¼ï¼Œå›¾å±‚â€œä¸é€æ˜åº¦â€å’Œâ€œå¡«å……åº¦â€å¯¹æ··åˆæ•ˆæœå½±å“æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ60%çš„ä¸é€æ˜åº¦ï¼Œä¸60%çš„å¡«å……åº¦ï¼Œå¾—åˆ°çš„æ•ˆæœä¸€æ ·ï¼›ä½†ä»¥ä¸‹8ç§æ··åˆæ¨¡å¼æ˜¯ä¾‹å¤–<ul><li>é¢œè‰²åŠ æ·±ã€é¢œè‰²å‡æ·¡</li><li>çº¿æ€§åŠ æ·±ã€çº¿æ€§å‡æ·¡</li><li>äº®å…‰ã€çº¿æ€§å…‰ã€å®è‰²æ··åˆ</li><li>å·®å€¼</li></ul></li><li>ä»¥ä¸‹5ç»„æ··åˆæ¨¡å¼æ˜¯ç›¸åå¯¹åº”å…³ç³»ï¼ˆä»åé¢çš„å…¬å¼å°±å¯ä»¥çœ‹å‡ºï¼‰<ul><li>å˜æš— - å˜äº®</li><li>æ·±è‰² - æµ…è‰²</li><li>æ­£ç‰‡å åº• - æ»¤è‰²</li><li>é¢œè‰²åŠ æ·± - é¢œè‰²å‡æ·¡</li><li>çº¿æ€§åŠ æ·± - çº¿æ€§å‡æ·¡</li></ul></li><li>å…·æœ‰â€œäº’é€†â€å…³ç³»çš„æ··åˆæ¨¡å¼æœ‰ä¸¤ç»„ï¼Œä¸¾ä¾‹ï¼ŒAå±‚åœ¨ä¸Šï¼Œå¯¹Aâ€œå åŠ â€ï¼›Bå±‚åœ¨ä¸Šï¼Œå¯¹Bâ€œå¼ºå…‰â€ï¼šä¸¤ç§æƒ…å†µå¾—åˆ°çš„æ•ˆæœæ˜¯ä¸€æ ·çš„<ul><li>å åŠ  <img src="/2020/05/24/ps-blend/equation.svg" alt="å…¬å¼"> å¼ºå…‰</li><li>é¢œè‰² <img src="/2020/05/24/ps-blend/equation" alt="å…¬å¼"> æ˜åº¦</li></ul></li></ol><h2 id="æ¯ä¸€ç§æ··åˆæ¨¡å¼çš„è¿ç®—æ–¹æ³•"><strong>æ¯ä¸€ç§æ··åˆæ¨¡å¼çš„è¿ç®—æ–¹æ³•</strong></h2><p>å½“é€šé“ä½æ·±åº¦ä¸º8ä½æ—¶ï¼ŒRã€Gã€Bä¸‰é€šé“æ•°å€¼èŒƒå›´åœ¨0åˆ°255ï¼Œæˆ‘ä»¬é™¤ä»¥255ï¼Œå¾—åˆ°0~1èŒƒå›´å†…çš„æ•°å€¼</p><p>æˆ‘ä»¬ç”¨ä¸‹å›¾æ‰€ç¤ºçš„ä¸¤ä¸ª100åƒç´ çš„å›¾å±‚åšå®éªŒ</p><p>Aå±‚æœ‰ä¸€ä¸ªé¢œè‰²ï¼Œ [R, G, B]å€¼åˆ†åˆ«æ˜¯ [102, 153, 204]ï¼Œå³[0.4, 0.6, 0.8]</p><p>Bå±‚æœ‰ä¸¤ä¸ªé¢œè‰²ï¼Œ[0, 51, 102] å’Œ [255, 204, 153]ï¼Œå³ [0, 0.2, 0.4] å’Œ [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-49a088eef8b2851abc6bb5809dff666c_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>é€‰ä¸­Aå±‚ï¼Œè°ƒèŠ‚æ··åˆæ¨¡å¼</p><h2 id="i-æ­£å¸¸ç³»">I æ­£å¸¸ç³»</h2><blockquote><p><strong>æ­£å¸¸ Normal</strong></p></blockquote><p>è®¾ä¸é€æ˜åº¦ä¸ºn</p><p>**<em>c = n*</em>*<em>*a + (1-n)*</em>***b***</p><p>å½“ä¸é€æ˜åº¦ä¸º100%</p><p><strong><em>c = a</em></strong></p><blockquote><p><strong>æº¶è§£ Dissolve</strong></p></blockquote><p>å¯¹æ¯ä¸ªåƒç´ è€Œè¨€ï¼Œå…¶ç»“æœè‰²æ˜¯åŸºè‰²æˆ–æ··åˆè‰²çš„éšæœºå€¼ï¼Œå–å†³äºå…¶â€œä¸é€æ˜åº¦â€ï¼šâ€œä¸é€æ˜åº¦â€é«˜æ—¶ï¼Œæ›´å¤šåƒç´ å–è‡ªå½“å‰å±‚ï¼›ä½æ—¶ï¼Œæ›´å¤šåƒç´ å–è‡ªèƒŒæ™¯å±‚</p><h2 id="ii-å˜æš—å’Œå˜äº®ç³»">II å˜æš—å’Œå˜äº®ç³»</h2><blockquote><p><strong>å˜æš— Darken</strong></p></blockquote><p><em><strong>c = min(a,b)</strong> é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [0.4, 0.6, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-6cd964357c823d7704b86e4aa486b02b_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¾—åˆ°å˜æš—çš„æ•ˆæœ</p><blockquote><p><strong>å˜äº®</strong> <strong>Lighten</strong></p></blockquote><p><em><strong>c = max(a,b)*</strong> </em>é€é€šé“è¿›è¡Œè¿ç®—*</p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0.4, 0.6, 0.8] é¢œè‰²2 [1, 0.8, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-c520d5c07364cbed9ce6b58faf3475c7_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¾—åˆ°å˜äº®çš„æ•ˆæœ</p><blockquote><p><strong>æ·±è‰² Darker Color</strong></p></blockquote><p><em><strong>c = min(a, b)</strong> ä¸‰é€šé“æ•´ä½“è¿›è¡Œè¿ç®—ï¼Œä¸ä¼šäº§ç”Ÿæ–°çš„é¢œè‰²</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-c520d5c07364cbed9ce6b58faf3475c7_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è¯¥æ··åˆæ¨¡å¼ä¸ä¼šäº§ç”Ÿæ–°çš„é¢œè‰²ï¼Œæ³¨æ„ä¸â€œå˜æš—â€çš„åŒºåˆ«</p><blockquote><p><strong>æµ…è‰² Lighter Color</strong></p></blockquote><p><strong><em>c = max(a, b)</em></strong> *ä¸‰é€šé“æ•´ä½“è¿›è¡Œè¿ç®—**ï¼Œä¸ä¼šäº§ç”Ÿæ–°çš„é¢œè‰²*</p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0.4, 0.6, 0.8] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-0734309c8a2c9ef18543c4a3e89b765a_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è¯¥æ··åˆæ¨¡å¼ä¸ä¼šäº§ç”Ÿæ–°çš„é¢œè‰²ï¼Œæ³¨æ„ä¸â€œå˜äº®â€çš„åŒºåˆ«</p><blockquote><p><strong>æ­£ç‰‡å åº• Multiply</strong></p></blockquote><p><em><strong>c = a*b</strong> é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.12, 0.32] é¢œè‰²2 [0.4, 0.48, 0.48]</p><figure><img src="/2020/05/24/ps-blend/v2-ef14152ab9c1ed17b69901e2b2f8fcaa_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¸¸ç”¨çš„åŠ æ·±æ¨¡å¼ï¼Œç”¨äºäº§ç”Ÿé˜´å½±ã€å»é™¤ç™½è‰²å’Œå…¶ä»–æµ…è‰²ã€‚å¦‚åŒå°†æ‰€æœ‰çš„å›¾å±‚éƒ½å åœ¨ä¸€èµ·ï¼Œä¸Šæ–¹ä¸€æŸå…‰æŠ•ä¸‹æ¥åˆ°å±å¹•ä¸Šï¼›â€œé¢œè‰²åŠ æ·±â€å’Œâ€œçº¿æ€§åŠ æ·±â€æ¯”â€œæ­£ç‰‡å åº•â€æ•ˆæœæ›´ä¸ºå¼ºçƒˆ</p><p>ä»»ä½•é¢œè‰²å’Œé»‘è‰²æ··åˆç»“æœéƒ½æ˜¯é»‘çš„ï¼Œä»»ä½•é¢œè‰²è·Ÿç™½è‰²æ··åˆç»“æœéƒ½æ˜¯åŸæ¥çš„é¢œè‰²</p><p>â€œæ­£ç‰‡å åº•â€å³æ‰€è°“â€œå‡è‰²â€æˆ–â€œCMYKâ€æ¨¡å¼ï¼Œç°å®ä¸­ç›¸å½“äºç”¨æŸ“æ–™ã€æ°´å½©ç¬”ç»˜ç”»æ•ˆæœï¼Œå¦‚å›¾æ‰€ç¤º</p><figure><img src="/2020/05/24/ps-blend/v2-8f278da13cf831f924d4638abaf8f4b3_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><blockquote><p><strong>æ»¤è‰² Screen</strong></p></blockquote><p><strong><em>c = 1 âˆ’ (1âˆ’a)*(1âˆ’b)</em></strong><em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0.4, 0.68, 0.88] é¢œè‰²2 [1, 0.92, 0.92]</p><figure><img src="/2020/05/24/ps-blend/v2-3aa136ef959a58faeb862b5b51bdeae3_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¸¸ç”¨çš„å‡æ·¡æ–¹æ³•ï¼Œäº§ç”Ÿå‘å…‰æ•ˆæœã€‚å¦‚åŒå°†æ‰€æœ‰å›¾å±‚åˆ†å¼€æ‘†æ”¾ï¼Œå„æœ‰ä¸€æŸå…‰é€šè¿‡å„å›¾å±‚ï¼Œæ±‡èšåœ¨ä¸€å—å±å¹•ä¸Š</p><p>åŸºè‰²æˆ–æ··åˆè‰²ä¸ºç™½è‰²æ—¶ï¼Œç»“æœä¼šæ˜¯ç™½è‰²ï¼›ä»»ä½•é¢œè‰²å’Œé»‘è‰²æ··åˆï¼Œç»“æœä»åŸæ¥çš„é¢œè‰²</p><p>â€œæ»¤è‰²â€å³æ‰€è°“â€œåŠ è‰²â€æ¨¡å¼ï¼Œç°å®ä¸­ç›¸å½“äºå‘å…‰ä½“å‘å…‰çš„å åŠ æ•ˆæœï¼Œå¦‚å›¾æ‰€ç¤º</p><figure><img src="/2020/05/24/ps-blend/v2-9e577680c0ad20d6d63b1864bfe391ec_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><blockquote><p><strong>é¢œè‰²åŠ æ·± Color Burn</strong></p></blockquote><p><strong><em>c = 1 âˆ’ (1âˆ’b)/a</em></strong> <em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0, 0.25] é¢œè‰²2 [1, 0.67, 0.5]</p><figure><img src="/2020/05/24/ps-blend/v2-a9617aa81abdba4047fea16108777627_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¾—åˆ°çš„æ•ˆæœæ¯”â€œæ­£ç‰‡å åº•â€æ›´æ·±ï¼Œä¸­è°ƒæ›´é«˜é¥±å’Œï¼Œé«˜å…‰å‡å¼±</p><p>ä»»ä½•é¢œè‰²è·Ÿç™½è‰²ï¼ˆB=1ï¼‰æ··åˆç»“æœéƒ½æ˜¯ç™½è‰²</p><blockquote><p><strong>é¢œè‰²å‡æ·¡ Color Dodge</strong></p></blockquote><p><strong><em>c = b / (1âˆ’a)</em></strong><em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.5, 1] é¢œè‰²2 [1, 1, 1]</p><figure><img src="/2020/05/24/ps-blend/v2-3ef666006d4285e56f9c3545cda3c15d_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¾—åˆ°çš„æ•ˆæœæ¯”â€œæ»¤è‰²â€æ›´äº®ï¼Œè‰²å½©å¯¹æ¯”æ›´åŠ å¼ºçƒˆï¼Œä¸­è°ƒæ›´é«˜é¥±å’Œï¼Œé«˜å…‰å¢å¼º</p><p>ä»»ä½•é¢œè‰²è·Ÿé»‘è‰²ï¼ˆB=0ï¼‰æ··åˆç»“æœéƒ½æ˜¯é»‘è‰²</p><blockquote><p><strong>çº¿æ€§åŠ æ·± Linear Burn</strong></p></blockquote><p><strong><em>c = a + b âˆ’ 1</em></strong> <em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0, 0.2] é¢œè‰²2 [0.4, 0.4, 0.4]</p><figure><img src="/2020/05/24/ps-blend/v2-14a6ce57b48355c20df849b97d1e20f7_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¾—åˆ°çš„æ•ˆæœæ¯”â€œé¢œè‰²åŠ æ·±â€æ›´æ·±ï¼Œæ¯”é¢œè‰²åŠ æ·±é¥±å’Œåº¦ä½</p><p>ä»»ä½•é¢œè‰²è·Ÿç™½è‰²ï¼ˆB=1ï¼‰æ··åˆç»“æœéƒ½æ˜¯åŸæ¥çš„é¢œè‰²</p><blockquote><p><strong>çº¿æ€§å‡æ·¡ Linear Dodge</strong></p></blockquote><p><strong><em>c = a+b</em></strong> <em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0.4, 0.8, 1] é¢œè‰²2 [1, 1, 1]</p><figure><img src="/2020/05/24/ps-blend/v2-1f74cf80b6e5cd9087bc3b6c944a904d_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¾—åˆ°çš„æ•ˆæœæ¯”â€œé¢œè‰²å‡æ·¡â€æ›´äº®ï¼Œä½†å¯¹æ¯”ç¨å¼±</p><p>ä»»ä½•é¢œè‰²è·Ÿé»‘è‰²ï¼ˆB=0ï¼‰æ··åˆç»“æœéƒ½æ˜¯åŸæ¥çš„é¢œè‰²</p><h2 id="iii-å¯¹æ¯”ç³»">III å¯¹æ¯”ç³»</h2><p>è¯¥ç»„ç‰¹ç‚¹æ˜¯è®©äº®çš„æ›´äº®ï¼Œæš—çš„æ›´æš—ï¼Œæ¯ä¸€ä¸ªâ€œå¯¹æ¯”ç³»â€çš„æ··åˆæ¨¡å¼éƒ½å¯çœ‹ä½œâ€œå˜æš—ç³»â€å’Œâ€œå˜äº®ç³»â€çš„ç»“åˆï¼Œå¦‚â€œå åŠ â€æ˜¯å¯¹è¾ƒæš—çš„åƒç´ è¿›è¡Œâ€œæ­£ç‰‡å åº•â€ï¼Œå¯¹è¾ƒäº®çš„åƒç´ è¿›è¡Œâ€œæ»¤è‰²â€</p><blockquote><p><strong>å åŠ </strong> <strong>Overlay</strong></p></blockquote><p><em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>*<strong>è‹¥ b &lt;= 0.5: c = 2ab*</strong></p><p>*<strong>è‹¥ b &gt; 0.5: c = 1 - 2(1-a)(1-b)*</strong></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.24, 0.64] é¢œè‰²2[1, 0.84, 0.84]</p><figure><img src="/2020/05/24/ps-blend/v2-24fbd55f5e94ed2b164d839d9d8ee8ab_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç±»ä¼¼äº â€œæ­£ç‰‡å åº•â€+â€œæ»¤è‰²â€çš„ç»“åˆï¼Œä½†æ•ˆæœæ›´æŸ”å’Œ</p><p>Aå±‚åœ¨ä¸Šï¼Œå¯¹Aâ€œå åŠ â€ï¼›Bå±‚åœ¨ä¸Šï¼Œå¯¹Bâ€œå¼ºå…‰â€ï¼šä¸¤ç§æƒ…å†µå¾—åˆ°çš„æ•ˆæœæ˜¯ä¸€æ ·çš„</p><blockquote><p><strong>å¼ºå…‰</strong> <strong>Hard Light</strong></p></blockquote><p><em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>*<strong>è‹¥ a &lt;= 0.5: c = 2ab*</strong></p><p>*<strong>è‹¥ a &gt; 0.5: c = 1 - 2(1-a)(1-b)*</strong></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.36, 0.76] é¢œè‰²2 [0.8, 0.84, 0.84]</p><figure><img src="/2020/05/24/ps-blend/v2-f0b8f5ffd678a80c6712583b6598db8e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç±»ä¼¼äº â€œæ­£ç‰‡å åº•â€+â€œæ»¤è‰²â€çš„ç»“åˆï¼Œä½†æ•ˆæœæ›´æŸ”å’Œ</p><p>Aå±‚åœ¨ä¸Šï¼Œå¯¹Aâ€œå åŠ â€ï¼›Bå±‚åœ¨ä¸Šï¼Œå¯¹Bâ€œå¼ºå…‰â€ï¼šä¸¤ç§æƒ…å†µå¾—åˆ°çš„æ•ˆæœæ˜¯ä¸€æ ·çš„</p><blockquote><p><strong>æŸ”å…‰</strong> <strong>Soft Light</strong></p></blockquote><p><em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>*<strong>è‹¥ a &lt;= 0.5, c = 2ab + <img src="/2020/05/24/ps-blend/equation" alt="å…¬å¼">(1-2a)*</strong></p><p>*<strong>è‹¥ a &gt; 0.5, c = 2b(1-a) + <img src="/2020/05/24/ps-blend/equation.svg" alt="å…¬å¼">(2a-1)*</strong></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.25, 0.54] é¢œè‰²2 [1, 0.82, 0.71]</p><figure><img src="/2020/05/24/ps-blend/v2-78b198e1c2fe8f6c060753318fb849ee_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æ•ˆæœç±»ä¼¼äºâ€œå åŠ â€ï¼Œä½†æ•ˆæœæ›´æŸ”å’Œï¼Œæœ‰é€æ˜çš„å…‰çº¿å’Œé˜´å½±</p><p>ç±»ä¼¼äº â€œæµ…è‰²â€+â€œæ·±è‰²â€çš„ç»“åˆ</p><blockquote><p><strong>äº®å…‰</strong> <strong>Vivid Light</strong></p></blockquote><p><em>é€é€šé“è¿›è¡Œè¿ç®—ï¼Œè¿‘ä¼¼å…¬å¼</em></p><p>*<strong>è‹¥ a &lt;= 0.5, c = 1 + (b-1)/2a*</strong></p><p>*<strong>è‹¥ a &gt; 0.5, c = b / 2(1-a)*</strong></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.25, 1] é¢œè‰²2 [1, 0.996, 1]</p><figure><img src="/2020/05/24/ps-blend/v2-177f7f9a060ef7ccf2938c6ef9120350_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç±»ä¼¼äºâ€œå®è‰²æ··åˆâ€ï¼Œä½†æ•ˆæœé€šå¸¸æ›´åŠ å‰§çƒˆ</p><p>ç±»ä¼¼äº â€œé¢œè‰²å‡æ·¡â€+â€œé¢œè‰²åŠ æ·±â€çš„ç»“åˆ</p><blockquote><p><strong>çº¿æ€§å…‰</strong> <strong>Linear Light</strong></p></blockquote><p><em><strong>c = b + 2a -1*</strong> </em>é€é€šé“è¿›è¡Œè¿ç®—ï¼Œè¿‘ä¼¼å…¬å¼*</p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.4, 0.996] é¢œè‰²2 [0.8, 0.996, 1]</p><figure><img src="/2020/05/24/ps-blend/v2-3e6f6616a8249f8e78a8553edc728d63_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç±»ä¼¼äºâ€œäº®å…‰â€ï¼Œä½†æ•ˆæœé€šå¸¸æ›´åŠ å‰§çƒˆ</p><p>ç±»ä¼¼äº â€œçº¿æ€§åŠ æ·±â€+â€œçº¿æ€§å‡æ·¡â€çš„ç»“æœ</p><blockquote><p><strong>ç‚¹å…‰</strong> <strong>Pin Light</strong></p></blockquote><p><em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>*<strong>è‹¥ a &gt; 0.5, c = max ( 2(a-0.5) , b )*</strong></p><p>*<strong>è‹¥ a &lt;= 0.5, c = min ( 2a , b )*</strong></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.2, 0.6] é¢œè‰²2 [0.796, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-fa86d21780209cf5b58e727fd33ef18f_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è¯¥æ··åˆæ¨¡å¼è¾ƒä¸ºå¼ºçƒˆï¼Œå®¹æ˜“å½¢æˆè‰²å—è‰²æ–‘å’Œå™ªç‚¹</p><p>ç±»ä¼¼äº â€œå˜äº®â€+â€œå˜æš—â€çš„ç»“åˆ</p><blockquote><p><strong>å®è‰²æ··åˆ</strong> <strong>Hard Mix</strong></p></blockquote><p><em><strong>è‹¥ a+b &gt;= 1, c = 1; å¦åˆ™ c=0*</strong> </em>é€é€šé“è¿›è¡Œè¿ç®—*</p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0, 1] é¢œè‰²2 [1, 1, 1]</p><figure><img src="/2020/05/24/ps-blend/v2-ec227746d961f540cc8f70547614bffa_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç»“æœåªæœ‰8ä¸ªé¢œè‰²ï¼šRã€Gã€Bã€Cã€Mã€Y ã€Kã€White</p><p>å¦‚æœâ€œå¡«å……åº¦â€ä¸ä¸º100ï¼Œç»“æœè‰²ä¼šå¤šäº8</p><h2 id="iv-è´Ÿç‰‡ç³»">IV è´Ÿç‰‡ç³»</h2><blockquote><p><strong>å·®å€¼ Difference</strong></p></blockquote><p><em><strong>c = |b - a|</strong> é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0.4, 0.4, 0.4] é¢œè‰²2 [0.6, 0.2, 0.2]</p><figure><img src="/2020/05/24/ps-blend/v2-abd81b87e3014ae47f3deaea3958a5a1_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ä¼šæœ‰ä¸€å®šè´Ÿç‰‡æ•ˆæœ</p><blockquote><p><strong>æ’é™¤ Exclusion</strong></p></blockquote><p><strong><em>c = a + b - 2ab</em></strong> <em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0.4, 0.56, 0.56] é¢œè‰²2 [0.6, 0.44, 0.44]</p><figure><img src="/2020/05/24/ps-blend/v2-097f5e2b9c9646d69f6a07ce66783459_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ä¼šæœ‰ä¸€å®šè´Ÿç‰‡æ•ˆæœ</p><h2 id="v-ç›¸æ¶ˆç³»">V ç›¸æ¶ˆç³»</h2><blockquote><p><strong>å‡å»Subtract</strong></p></blockquote><p><strong><em>c = bâˆ’a</em></strong><em>é€é€šé“è¿›è¡Œè¿ç®—</em></p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0, 0] é¢œè‰²2 [0.6, 0.2, 0]</p><figure><img src="/2020/05/24/ps-blend/v2-897968ab0abc87cf22279786051c46ab_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å˜æ·±æ•ˆæœ</p><p>å¸¸ç»“åˆâ€œåº”ç”¨å›¾åƒâ€ï¼Œç”¨äºé«˜ä½é¢‘æ³•è°ƒè‰²</p><blockquote><p><strong>åˆ’åˆ†Divide</strong></p></blockquote><p><em><strong>c = b/a*</strong> </em>é€é€šé“è¿›è¡Œè¿ç®—*</p><p>B: é¢œè‰²1 [0, 0.2, 0.4] é¢œè‰²2 [1, 0.8, 0.6]</p><figure><img src="/2020/05/24/ps-blend/v2-9d6d881e09d25ea68d31b4aeb0a42584_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>A: [0.4, 0.6, 0.8]</p><figure><img src="/2020/05/24/ps-blend/v2-a97a64c70b7213f2179afa2c4969eb7e_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C: é¢œè‰²1 [0, 0.33, 0.5] é¢œè‰²2 [1, 1, 0.75]</p><figure><img src="/2020/05/24/ps-blend/v2-fc94414ecd4e5b95cb0ea5912858589c_720w.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å˜äº®æ•ˆæœ</p><h2 id="æ±‡æ€»åœ¨ä¸€å¼ a4çº¸ä¸Š">æ±‡æ€»åœ¨ä¸€å¼ A4çº¸ä¸Š</h2><figure><img src="/2020/05/24/ps-blend/v2-9777e7ee9933926f8cd3a50d905a592f_r.jpg" alt="preview"><figcaption aria-hidden="true">preview</figcaption></figure><h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2><ul><li>Adobeä¸­æ–‡å®˜ç½‘</li><li><a href="https://zhuanlan.zhihu.com/p/94081709">Photoshopå›¾å±‚æ··åˆæ¨¡å¼è¯¦è§£</a></li><li>å¦å¤–ä¸€ç¯‡çŸ¥ä¹æ–‡ç« ï¼Œç”±äºå†™çš„æ—¶å€™å¿˜äº†ï¼Œç°åœ¨å®åœ¨æ‰¾ä¸åˆ°äº†ã€‚ã€‚è¦æ˜¯å¼•ç”¨éƒ¨åˆ†åŸä½œè€…æ¥äº†è¯·æ‰¾æˆ‘claimã€‚</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æ¨¡å¼å®˜æ–¹ä»‹ç»&quot;&gt;æ¨¡å¼å®˜æ–¹ä»‹ç»&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ­£ç‰‡å åº•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹&lt;strong&gt;æ¯ä¸ªé€šé“&lt;/strong&gt;ä¸­çš„é¢œè‰²ä¿¡æ¯ï¼Œå¹¶å°†åŸºè‰²ä¸æ··åˆè‰²è¿›è¡Œæ­£ç‰‡å åº•ã€‚ç»“æœè‰²æ€»æ˜¯è¾ƒæš—çš„é¢œè‰²ã€‚ä»»ä½•é¢œè‰²ä¸é»‘è‰²æ­£ç‰‡å åº•äº§ç”Ÿé»‘è‰²ã€‚ä»»ä½•é¢œè‰²ä¸ç™½è‰²æ­£ç‰‡å åº•ä¿æŒä¸å˜ã€‚å½“æ‚¨ç”¨é»‘è‰²æˆ–ç™½è‰²ä»¥å¤–çš„é¢œè‰²ç»˜ç”»æ—¶ï¼Œç»˜ç”»å·¥å…·ç»˜åˆ¶çš„è¿ç»­æè¾¹äº§ç”Ÿé€æ¸å˜æš—çš„é¢œè‰²ã€‚è¿™ä¸ä½¿ç”¨å¤šä¸ªæ ‡è®°ç¬”åœ¨å›¾åƒä¸Šç»˜å›¾çš„æ•ˆæœç›¸ä¼¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2020/05/24/ps-blend/image-20200519225738854.png&quot; alt=&quot;image-20200519225738854&quot; style=&quot;zoom:33%;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚å›¾ï¼Œé‡ç‚¹æ˜¯&lt;strong&gt;åˆ†é€šé“&lt;/strong&gt;ï¼Œæ‰€æœ‰çš„æ¨¡å¼æ··åˆéƒ½æ˜¯åŸºäºé€šé“çš„ã€‚å³çº¢è‰²çš„åº•è‰²ï¼Œå¾€ä¸ŠåŠ è“è‰²å’Œç»¿è‰²ç»“æœéƒ½æ˜¯é»‘è‰²ã€‚å› ä¸ºRGBé€šé“ç›¸äº’é—´çš„æš—è‰²éƒ½æ˜¯é»‘è‰²ã€‚å½“ç„¶ï¼Œå®ƒä»¬ä¸é»‘è‰²å åŠ ä¹Ÿæ˜¯é»‘è‰²çš„ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="art" scheme="https://www.miracleyoo.com/tags/art/"/>
    
    <category term="painting" scheme="https://www.miracleyoo.com/tags/painting/"/>
    
    <category term="ps" scheme="https://www.miracleyoo.com/tags/ps/"/>
    
  </entry>
  
  <entry>
    <title>PSç¬”åˆ·æ¢ç©¶</title>
    <link href="https://www.miracleyoo.com/2020/05/20/ps-brush/"/>
    <id>https://www.miracleyoo.com/2020/05/20/ps-brush/</id>
    <published>2020-05-21T05:29:01.000Z</published>
    <updated>2021-03-12T22:45:09.885Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é€‰é¡¹ç ”ç©¶">é€‰é¡¹ç ”ç©¶</h2><p>ç”±äºå¤šæ¬¡æœç´¢å’Œç ”ç©¶ç”»ç¬”è®¾ç½®å’Œç¬”åˆ·çš„åˆ¶ä½œæ–¹æ³•ï¼Œä½†å‡æ„Ÿè§‰ç½‘ä¸Šæ‰€è®²ä¸€çŸ¥åŠè§£å±…å¤šï¼Œè¿™æ¬¡ç‰¹æ„æ‰¾æ—¶é—´å…¨éƒ¨æ•´ç†äº†ä¸€éã€‚éš¾ç†è§£çš„ã€å¯èƒ½å¹¶ä¸å¸¸ç”¨çš„æ”¾åœ¨å‰é¢ç€é‡è®²ï¼Œå®¹æ˜“ç†è§£çš„ã€å¸¸ç”¨çš„åˆ™æ”¾åœ¨åé¢ã€‚</p><h3 id="æ‚è‰²noise">æ‚è‰²(Noise)</h3><p>ä¸ºä¸ªåˆ«ç”»ç¬”ç¬”å°–å¢åŠ é¢å¤–çš„éšæœºæ€§ã€‚å½“åº”ç”¨äºæŸ”ç”»ç¬”ç¬”å°–ï¼ˆåŒ…å«ç°åº¦å€¼çš„ç”»ç¬”ç¬”å°–ï¼‰æ—¶ï¼Œæ­¤é€‰é¡¹æœ€æœ‰æ•ˆã€‚</p><span id="more"></span><h3 id="æ¹¿è¾¹wet-edges">æ¹¿è¾¹(Wet Edges)</h3><p>æ²¿ç”»ç¬”æè¾¹çš„è¾¹ç¼˜å¢å¤§æ²¹å½©é‡ï¼Œä»è€Œåˆ›å»ºæ°´å½©æ•ˆæœã€‚</p><h3 id="å–·æªå»ºç«‹airbrushbuild-up">å–·æª/å»ºç«‹(Airbrush/Build-up)</h3><p>å°†æ¸å˜è‰²è°ƒåº”ç”¨äºå›¾åƒï¼ŒåŒæ—¶æ¨¡æ‹Ÿä¼ ç»Ÿçš„å–·æªæŠ€æœ¯ã€‚â€œç”»ç¬”â€é¢æ¿ä¸­çš„â€œå–·æªâ€é€‰é¡¹ä¸é€‰é¡¹æ ä¸­çš„â€œå–·æªâ€é€‰é¡¹ç›¸å¯¹åº”ã€‚å–·æªçš„æœ¬è´¨ç‰¹ç‚¹æ˜¯ï¼šå½“ä½ çš„ç¬”/é¼ æ ‡åœ¨ä¸€ä¸ªç‚¹æŒ‰ä½åœç•™çš„æ—¶å€™ï¼Œé¢œè‰²ä¼šä¸æ–­åŠ æ·±ï¼Œå½±å“åŒºåŸŸä¹Ÿè¶Šæ¥è¶Šå¤§ã€‚å¦‚æœæ²¡æœ‰å‹¾é€‰å–·æª/å»ºç«‹é€‰é¡¹ï¼ŒæŒ‰å¤šä¹…éƒ½æ˜¯ä¸€æ ·çš„é¢œè‰²æ·±åº¦ã€‚ä»æŸç§æ„ä¹‰ä¸Šè®²ï¼Œå–·æªæ•ˆæœåœ¨â€œç¬”å‹â€ä¹‹å¤–åŠ å…¥äº†ä¸€ä¸ªâ€œåœç•™æ—¶é—´â€ç»´åº¦ã€‚</p><h3 id="å¹³æ»‘smoothing">å¹³æ»‘(Smoothing)</h3><p>åœ¨ç”»ç¬”æè¾¹ä¸­ç”Ÿæˆæ›´å¹³æ»‘çš„æ›²çº¿ã€‚å½“ä½¿ç”¨å…‰ç¬”è¿›è¡Œå¿«é€Ÿç»˜ç”»æ—¶ï¼Œæ­¤é€‰é¡¹æœ€æœ‰æ•ˆï¼›ä½†æ˜¯å®ƒåœ¨æè¾¹æ¸²æŸ“ä¸­å¯èƒ½ä¼šå¯¼è‡´è½»å¾®çš„æ»åã€‚</p><h3 id="ä¿æŠ¤çº¹ç†protect-texture">ä¿æŠ¤çº¹ç†(Protect Texture)</h3><p>å°†ç›¸åŒå›¾æ¡ˆå’Œç¼©æ”¾æ¯”ä¾‹åº”ç”¨äºå…·æœ‰çº¹ç†çš„æ‰€æœ‰ç”»ç¬”é¢„è®¾ã€‚é€‰æ‹©æ­¤é€‰é¡¹åï¼Œåœ¨ä½¿ç”¨å¤šä¸ªçº¹ç†ç”»ç¬”ç¬”å°–ç»˜ç”»æ—¶ï¼Œå¯ä»¥æ¨¡æ‹Ÿå‡ºä¸€è‡´çš„ç”»å¸ƒçº¹ç†ã€‚</p><h3 id="ç”»ç¬”ç¬”åŠ¿é€‰é¡¹">ç”»ç¬”ç¬”åŠ¿é€‰é¡¹</h3><p>ç”»ç¬”ç¬”åŠ¿é€‰é¡¹å¯è®©æ‚¨è·å¾—ç±»ä¼¼å…‰ç¬”çš„æ•ˆæœï¼Œå¹¶å¯è®©æ‚¨æ§åˆ¶ç”»ç¬”çš„è§’åº¦å’Œä½ç½®ã€‚</p><p>è¿™é‡Œè¯´çš„å…‰ç¬”æ˜¯æŒ‡ä¸€ç§åœ¨æ¿ç»˜æ—¶å¯ä»¥æ„ŸçŸ¥ç¬”çš„å€¾æ–œè§’åº¦ã€æ—‹è½¬çš„ç¬”ã€‚<strong>ç”»ç¬”ç¬”åŠ¿</strong>é€‰é¡¹å›ºå®šä¸”å‰¥å¤ºäº†æ¿ç»˜ç¬”æ—‹è½¬ã€å€¾æ–œã€å‹åŠ›çš„èƒ½åŠ›ï¼Œç›´æ¥è®¾å®šä¸ºäº†å®šå€¼ã€‚</p><p><strong>å€¾æ–œ X</strong></p><p>ç¡®å®šç”»ç¬”ä»å·¦å‘å³å€¾æ–œçš„è§’åº¦ã€‚</p><p><strong>å€¾æ–œ Y</strong></p><p>ç¡®å®šç”»ç¬”ä»å‰å‘åå€¾æ–œçš„è§’åº¦ã€‚</p><p><strong>æ—‹è½¬</strong></p><p>ç¡®å®šç¡¬æ¯›åˆ·çš„æ—‹è½¬è§’åº¦ã€‚</p><p><strong>å‹åŠ›</strong></p><p>ç¡®å®šåº”ç”¨äºç”»å¸ƒä¸Šç”»ç¬”çš„å‹åŠ›ã€‚</p><p>å¯ç”¨â€œè¦†ç›–â€é€‰é¡¹ä»¥ç»´æŠ¤é™æ€ç”»ç¬”ç¬”åŠ¿ã€‚</p><h2 id="ç”»ç¬”æ•£å¸ƒ">ç”»ç¬”æ•£å¸ƒ</h2><p>â€œç”»ç¬”æ•£å¸ƒâ€å¯ç¡®å®šæè¾¹ä¸­ç¬”è¿¹çš„æ•°ç›®å’Œä½ç½®ã€‚</p><p>ç®€å•çš„è¯´ï¼Œå¼€å¯äº†è¯¥é€‰é¡¹åï¼Œç”»çš„æ—¶å€™ç¬”è¿¹å¹¶ä¸ä¼šä¸¥æ ¼éµå¾ªä½ ç¬”çš„ä¸‹ç¬”ä½ç½®ï¼Œè€Œæ˜¯ä¼šåœ¨xå’Œyè½´ä¸Šæœ‰ä¸€ä¸ªæˆ–å¤šæˆ–å°‘çš„åç§»ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_14.png" alt="Photoshop ç”»ç¬”æ•£å¸ƒ"><figcaption aria-hidden="true">Photoshop ç”»ç¬”æ•£å¸ƒ</figcaption></figure><p>æ— æ•£å¸ƒçš„ç”»ç¬”æè¾¹ï¼ˆå·¦å›¾ï¼‰å’Œæœ‰æ•£å¸ƒçš„ç”»ç¬”æè¾¹ï¼ˆå³å›¾ï¼‰</p><p><strong>æ•£å¸ƒå’Œæ§åˆ¶</strong></p><p>æŒ‡å®šç”»ç¬”ç¬”è¿¹åœ¨æè¾¹ä¸­çš„åˆ†å¸ƒæ–¹å¼ã€‚å½“é€‰æ‹©â€œä¸¤è½´â€æ—¶ï¼Œç”»ç¬”ç¬”è¿¹æŒ‰å¾„å‘åˆ†å¸ƒã€‚å½“å–æ¶ˆé€‰æ‹©â€œä¸¤è½´â€æ—¶ï¼Œç”»ç¬”ç¬”è¿¹å‚ç›´äºæè¾¹è·¯å¾„åˆ†å¸ƒã€‚</p><p>è¦æŒ‡å®šæ•£å¸ƒçš„æœ€å¤§ç™¾åˆ†æ¯”ï¼Œè¯·è¾“å…¥ä¸€ä¸ªå€¼ã€‚è‹¥è¦æŒ‡å®šå¸Œæœ›å¦‚ä½•æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„æ•£å¸ƒå˜åŒ–ï¼Œè¯·ä»â€œæ§åˆ¶â€å¼¹å‡ºå¼èœå•ä¸­é€‰å–ä¸€ä¸ªé€‰é¡¹ï¼š</p><p><strong>å…³</strong></p><p>æŒ‡å®šä¸æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„æ•£å¸ƒå˜åŒ–ã€‚</p><p><strong>æ¸éš</strong></p><p>æŒ‰æŒ‡å®šæ•°é‡çš„æ­¥é•¿å°†ç”»ç¬”ç¬”è¿¹çš„æ•£å¸ƒä»æœ€å¤§æ•£å¸ƒæ¸éšåˆ°æ— æ•£å¸ƒã€‚</p><p><strong>é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€å…‰ç¬”è½®ã€æ—‹è½¬</strong></p><p>ä¾æ®é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€é’¢ç¬”æ‹‡æŒ‡è½®ä½ç½®æˆ–é’¢ç¬”çš„æ—‹è½¬æ¥æ”¹å˜ç”»ç¬”ç¬”è¿¹çš„æ•£å¸ƒã€‚</p><p><strong>è®¡æ•°</strong></p><p>æŒ‡å®šåœ¨æ¯ä¸ªé—´è·é—´éš”åº”ç”¨çš„ç”»ç¬”ç¬”è¿¹æ•°é‡ã€‚</p><h3 id="é¢œè‰²åŠ¨æ€ç”»ç¬”é€‰é¡¹">é¢œè‰²åŠ¨æ€ç”»ç¬”é€‰é¡¹</h3><p>é¢œè‰²åŠ¨æ€å†³å®šæè¾¹è·¯çº¿ä¸­æ²¹å½©é¢œè‰²çš„å˜åŒ–æ–¹å¼ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_18.png" alt="Photoshop æœ‰é¢œè‰²åŠ¨æ€å’Œæ— é¢œè‰²åŠ¨æ€çš„ç”»ç¬”æè¾¹"><figcaption aria-hidden="true">Photoshop æœ‰é¢œè‰²åŠ¨æ€å’Œæ— é¢œè‰²åŠ¨æ€çš„ç”»ç¬”æè¾¹</figcaption></figure><p>æ— é¢œè‰²åŠ¨æ€çš„ç”»ç¬”æè¾¹ï¼ˆå·¦å›¾ï¼‰å’Œæœ‰é¢œè‰²åŠ¨æ€çš„ç”»ç¬”æè¾¹ï¼ˆå³å›¾ï¼‰</p><p>å®ƒä¹Ÿå¯ä»¥ç”¨æ¥åˆ¶ä½œå¦‚ä¸‹çš„å›¾åƒï¼š</p><p><img src="/2020/05/20/ps-brush/image-20200519182011143.png" alt="image-20200519182011143" style="zoom:33%;"></p><p><strong>æ¯ç¬”å°–åº”ç”¨</strong></p><p>æŒ‡å®šä¸ºæè¾¹ä¸­æ¯ä¸ªä¸åŒçš„ç¬”å°–å›¾ç« æ›´æ”¹é¢œè‰²ã€‚</p><p>å¦‚æœå–æ¶ˆé€‰ä¸­ï¼Œåˆ™åœ¨æ¯ä¸ªæè¾¹å¼€å§‹æ—¶å³è¿›è¡ŒåŠ¨æ€æ›´æ”¹ã€‚æ‚¨ä¾¿å¯ä»¥æ›´æ”¹ä¸åŒæè¾¹çš„é¢œè‰²ï¼Œè€Œä¸æ˜¯å¯¹æ¯ä¸ªæè¾¹å†…éƒ¨æ›´æ”¹é¢œè‰²ã€‚</p><p><strong>å‰æ™¯/èƒŒæ™¯æŠ–åŠ¨å’Œæ§åˆ¶</strong></p><p>æŒ‡å®šå‰æ™¯è‰²å’ŒèƒŒæ™¯è‰²ä¹‹é—´çš„æ²¹å½©å˜åŒ–æ–¹å¼ã€‚</p><p>è¦æŒ‡å®šæ²¹å½©é¢œè‰²å¯ä»¥æ”¹å˜çš„ç™¾åˆ†æ¯”ï¼Œè¯·é”®å…¥æ•°å­—æˆ–ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚è‹¥è¦æŒ‡å®šå¸Œæœ›å¦‚ä½•æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„é¢œè‰²å˜åŒ–ï¼Œè¯·ä»â€œæ§åˆ¶â€å¼¹å‡ºå¼èœå•ä¸­é€‰å–ä¸€ä¸ªé€‰é¡¹ï¼š</p><p><strong>å…³</strong></p><p>æŒ‡å®šä¸æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„é¢œè‰²å˜åŒ–ã€‚</p><p><strong>æ¸éš</strong></p><p>æŒ‰æŒ‡å®šæ•°é‡çš„æ­¥é•¿åœ¨å‰æ™¯è‰²å’ŒèƒŒæ™¯è‰²ä¹‹é—´æ”¹å˜æ²¹å½©é¢œè‰²ã€‚</p><p><strong>é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€å…‰ç¬”è½®ã€æ—‹è½¬</strong></p><p>ä¾æ®é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€é’¢ç¬”æ‹‡æŒ‡è½®ä½ç½®æˆ–é’¢ç¬”çš„æ—‹è½¬æ¥æ”¹å˜å‰æ™¯è‰²å’ŒèƒŒæ™¯è‰²ä¹‹é—´çš„æ²¹å½©é¢œè‰²ã€‚</p><p><strong>è‰²ç›¸æŠ–åŠ¨</strong></p><p>æŒ‡å®šæè¾¹ä¸­æ²¹å½©è‰²ç›¸å¯ä»¥æ”¹å˜çš„ç™¾åˆ†æ¯”ã€‚é”®å…¥æ•°å­—ï¼Œæˆ–è€…ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚è¾ƒä½çš„å€¼åœ¨æ”¹å˜è‰²ç›¸çš„åŒæ—¶ä¿æŒæ¥è¿‘å‰æ™¯è‰²çš„è‰²ç›¸. è¾ƒé«˜çš„å€¼å¢å¤§è‰²ç›¸é—´çš„å·®å¼‚ã€‚</p><p><strong>é¥±å’Œåº¦æŠ–åŠ¨</strong></p><p>æŒ‡å®šæè¾¹ä¸­æ²¹å½©é¥±å’Œåº¦å¯ä»¥æ”¹å˜çš„ç™¾åˆ†æ¯”ã€‚é”®å…¥æ•°å­—ï¼Œæˆ–è€…ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚è¾ƒä½çš„å€¼åœ¨æ”¹å˜é¥±å’Œåº¦çš„åŒæ—¶ä¿æŒæ¥è¿‘å‰æ™¯è‰²çš„é¥±å’Œåº¦ã€‚è¾ƒé«˜çš„å€¼å¢å¤§é¥±å’Œåº¦çº§åˆ«ä¹‹é—´çš„å·®å¼‚ã€‚</p><p><strong>äº®åº¦æŠ–åŠ¨</strong></p><p>æŒ‡å®šæè¾¹ä¸­æ²¹å½©äº®åº¦å¯ä»¥æ”¹å˜çš„ç™¾åˆ†æ¯”ã€‚é”®å…¥æ•°å­—ï¼Œæˆ–è€…ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚è¾ƒä½çš„å€¼åœ¨æ”¹å˜äº®åº¦çš„åŒæ—¶ä¿æŒæ¥è¿‘å‰æ™¯è‰²çš„äº®åº¦ã€‚è¾ƒé«˜çš„å€¼å¢å¤§äº®åº¦çº§åˆ«ä¹‹é—´çš„å·®å¼‚ã€‚</p><p><strong>çº¯åº¦</strong></p><p>å¢å¤§æˆ–å‡å°é¢œè‰²çš„é¥±å’Œåº¦ã€‚é”®å…¥ä¸€ä¸ªæ•°å­—ï¼Œæˆ–è€…ä½¿ç”¨æ»‘å—è¾“å…¥ä¸€ä¸ªä»‹äº -100 å’Œ 100 ä¹‹é—´çš„ç™¾åˆ†æ¯”ã€‚å¦‚æœè¯¥å€¼ä¸º -100ï¼Œåˆ™é¢œè‰²å°†å®Œå…¨å»è‰²ï¼›å¦‚æœè¯¥å€¼ä¸º 100ï¼Œåˆ™é¢œè‰²å°†å®Œå…¨é¥±å’Œã€‚</p><h2 id="åŒé‡ç”»ç¬”">åŒé‡ç”»ç¬”</h2><p>åŒé‡ç”»ç¬”ç»„åˆä¸¤ä¸ªç¬”å°–æ¥åˆ›å»ºç”»ç¬”ç¬”è¿¹ã€‚å°†åœ¨<strong>ä¸»ç”»ç¬”çš„ç”»ç¬”æè¾¹å†…</strong>åº”ç”¨ç¬¬äºŒä¸ªç”»ç¬”çº¹ç†ï¼›ä»…ç»˜åˆ¶<strong>ä¸¤ä¸ªç”»ç¬”æè¾¹çš„äº¤å‰åŒºåŸŸ</strong>ã€‚åœ¨â€œç”»ç¬”â€é¢æ¿çš„â€œç”»ç¬”ç¬”å°–å½¢çŠ¶â€éƒ¨åˆ†ä¸­è®¾ç½®ä¸»è¦ç¬”å°–çš„é€‰é¡¹ã€‚ä»â€œç”»ç¬”â€é¢æ¿çš„â€œåŒé‡ç”»ç¬”â€éƒ¨åˆ†é€‰æ‹©å¦ä¸€ä¸ªç”»ç¬”ç¬”å°–ï¼Œç„¶åè®¾ç½®ä»¥ä¸‹ä»»æ„é€‰é¡¹ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_16.png" alt="Photoshop ä¸»ã€è¾…åŠ©ã€åŒé‡ç”»ç¬”æè¾¹"><figcaption aria-hidden="true">Photoshop ä¸»ã€è¾…åŠ©ã€åŒé‡ç”»ç¬”æè¾¹</figcaption></figure><p><strong>A.</strong> ä¸»ç”»ç¬”ç¬”å°–æè¾¹ï¼ˆå°–è§’ 55ï¼‰ã€‚ <strong>B.</strong> è¾…åŠ©ç”»ç¬”ç¬”å°–æè¾¹ï¼ˆè‰ï¼‰ã€‚ <strong>C.</strong> åŒé‡ç”»ç¬”æè¾¹ï¼ˆä½¿ç”¨ä¸¤è€…ï¼‰ã€‚</p><p><strong>æ¨¡å¼</strong></p><p>é€‰æ‹©ä»ä¸»è¦ç¬”å°–å’ŒåŒé‡ç¬”å°–ç»„åˆç”»ç¬”ç¬”è¿¹æ—¶è¦ä½¿ç”¨çš„æ··åˆæ¨¡å¼ã€‚ï¼ˆè¯·å‚é˜…<a href="https://helpx.adobe.com/cn/photoshop/using/blending-modes.html">æ··åˆæ¨¡å¼</a>ã€‚ï¼‰</p><p><strong>ç›´å¾„</strong></p><p>æ§åˆ¶åŒç¬”å°–çš„å¤§å°ã€‚ä»¥åƒç´ ä¸ºå•ä½è¾“å…¥å€¼ï¼Œæˆ–è€…å•å‡»â€œä½¿ç”¨å–æ ·å¤§å°â€æ¥ä½¿ç”¨ç”»ç¬”ç¬”å°–çš„åŸå§‹ç›´å¾„ã€‚(åªæœ‰å½“ç”»ç¬”ç¬”å°–å½¢çŠ¶æ˜¯é€šè¿‡é‡‡é›†å›¾åƒä¸­çš„åƒç´ æ ·æœ¬åˆ›å»ºçš„æ—¶ï¼Œâ€œä½¿ç”¨å–æ ·å¤§å°â€é€‰é¡¹æ‰å¯ç”¨ã€‚)</p><p><strong>é—´è·</strong></p><p>æ§åˆ¶æè¾¹ä¸­åŒç¬”å°–ç”»ç¬”ç¬”è¿¹ä¹‹é—´çš„è·ç¦»ã€‚è‹¥è¦æ›´æ”¹é—´è·ï¼Œè¯·é”®å…¥æ•°å­—ï¼Œæˆ–ä½¿ç”¨æ»‘å—è¾“å…¥ç¬”å°–ç›´å¾„çš„ç™¾åˆ†æ¯”ã€‚</p><p><strong>æ•£å¸ƒ</strong></p><p>æŒ‡å®šæè¾¹ä¸­åŒç¬”å°–ç”»ç¬”ç¬”è¿¹çš„åˆ†å¸ƒæ–¹å¼ã€‚å½“é€‰ä¸­â€œä¸¤è½´â€æ—¶ï¼ŒåŒç¬”å°–ç”»ç¬”ç¬”è¿¹æŒ‰å¾„å‘åˆ†å¸ƒã€‚å½“å–æ¶ˆé€‰æ‹©â€œä¸¤è½´â€æ—¶ï¼ŒåŒç¬”å°–ç”»ç¬”ç¬”è¿¹å‚ç›´äºæè¾¹è·¯å¾„åˆ†å¸ƒã€‚è‹¥è¦æŒ‡å®šæ•£å¸ƒçš„æœ€å¤§ç™¾åˆ†æ¯”ï¼Œè¯·é”®å…¥æ•°å­—æˆ–ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚</p><p><strong>è®¡æ•°</strong></p><p>æŒ‡å®šåœ¨æ¯ä¸ªé—´è·é—´éš”åº”ç”¨çš„åŒç¬”å°–ç”»ç¬”ç¬”è¿¹çš„æ•°é‡ã€‚é”®å…¥æ•°å­—ï¼Œæˆ–è€…ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚</p><h2 id="çº¹ç†ç”»ç¬”é€‰é¡¹">çº¹ç†ç”»ç¬”é€‰é¡¹</h2><p>çº¹ç†ç”»ç¬”åˆ©ç”¨<strong>å›¾æ¡ˆä½¿æè¾¹</strong>çœ‹èµ·æ¥åƒæ˜¯åœ¨å¸¦çº¹ç†çš„ç”»å¸ƒä¸Šç»˜åˆ¶çš„ä¸€æ ·ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_15.png" alt="Photoshop æœ‰çº¹ç†å’Œæ— çº¹ç†çš„ç”»ç¬”æè¾¹"><figcaption aria-hidden="true">Photoshop æœ‰çº¹ç†å’Œæ— çº¹ç†çš„ç”»ç¬”æè¾¹</figcaption></figure><p>æ— çº¹ç†çš„ç”»ç¬”æè¾¹ï¼ˆå·¦å›¾ï¼‰å’Œæœ‰çº¹ç†çš„ç”»ç¬”æè¾¹ï¼ˆå³å›¾ï¼‰</p><p>å•å‡»å›¾æ¡ˆæ ·æœ¬ï¼Œç„¶åä»å¼¹å‡ºå¼é¢æ¿ä¸­é€‰æ‹©å›¾æ¡ˆã€‚è®¾ç½®ä¸‹é¢çš„ä¸€ä¸ªæˆ–å¤šä¸ªé€‰é¡¹ï¼š</p><p><strong>åç›¸</strong></p><p>åŸºäºå›¾æ¡ˆä¸­çš„è‰²è°ƒåè½¬çº¹ç†ä¸­çš„äº®ç‚¹å’Œæš—ç‚¹ã€‚å½“é€‰æ‹©â€œåç›¸â€æ—¶ï¼Œå›¾æ¡ˆä¸­çš„æœ€äº®åŒºåŸŸæ˜¯çº¹ç†ä¸­çš„æš—ç‚¹ï¼Œå› æ­¤æ¥æ”¶æœ€å°‘çš„æ²¹å½©ï¼›å›¾æ¡ˆä¸­çš„æœ€æš—åŒºåŸŸæ˜¯çº¹ç†ä¸­çš„äº®ç‚¹ï¼Œå› æ­¤æ¥æ”¶æœ€å¤šçš„æ²¹å½©ã€‚å½“å–æ¶ˆé€‰æ‹©â€œåç›¸â€æ—¶ï¼Œå›¾æ¡ˆä¸­çš„æœ€äº®åŒºåŸŸæ¥æ”¶æœ€å¤šçš„æ²¹å½©ï¼›å›¾æ¡ˆä¸­çš„æœ€æš—åŒºåŸŸæ¥æ”¶æœ€å°‘çš„æ²¹å½©ã€‚</p><p><strong>æ¯”ä¾‹</strong></p><p>æŒ‡å®šå›¾æ¡ˆçš„ç¼©æ”¾æ¯”ä¾‹ã€‚é”®å…¥æ•°å­—ï¼Œæˆ–è€…ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å›¾æ¡ˆå¤§å°çš„ç™¾åˆ†æ¯”å€¼ã€‚</p><p><strong>ä¸ºæ¯ä¸ªç¬”å°–è®¾ç½®çº¹ç†</strong></p><p>å°†é€‰å®šçš„çº¹ç†å•ç‹¬åº”ç”¨äºç”»ç¬”æè¾¹ä¸­çš„æ¯ä¸ªç”»ç¬”ç¬”è¿¹ï¼Œè€Œä¸æ˜¯ä½œä¸ºæ•´ä½“åº”ç”¨äºç”»ç¬”æè¾¹ï¼ˆç”»ç¬”æè¾¹ç”±æ‹–åŠ¨ç”»ç¬”æ—¶è¿ç»­åº”ç”¨çš„è®¸å¤šç”»ç¬”ç¬”è¿¹æ„æˆï¼‰ã€‚å¿…é¡»é€‰æ‹©æ­¤é€‰é¡¹ï¼Œæ‰èƒ½ä½¿ç”¨â€œæ·±åº¦â€å˜åŒ–é€‰é¡¹ã€‚</p><p><strong>æ¨¡å¼</strong></p><p>æŒ‡å®šç”¨äºç»„åˆç”»ç¬”å’Œå›¾æ¡ˆçš„æ··åˆæ¨¡å¼ã€‚ï¼ˆè¯·å‚é˜…<a href="https://helpx.adobe.com/cn/photoshop/using/blending-modes.html">æ··åˆæ¨¡å¼</a>ã€‚ï¼‰</p><p><strong>æ·±åº¦</strong></p><p>æŒ‡å®šæ²¹å½©æ¸—å…¥çº¹ç†ä¸­çš„æ·±åº¦ã€‚é”®å…¥æ•°å­—ï¼Œæˆ–è€…ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚å¦‚æœæ˜¯ 100%ï¼Œåˆ™çº¹ç†ä¸­çš„æš—ç‚¹ä¸æ¥æ”¶ä»»ä½•æ²¹å½©ã€‚å¦‚æœæ˜¯ 0%ï¼Œåˆ™çº¹ç†ä¸­çš„æ‰€æœ‰ç‚¹éƒ½æ¥æ”¶ç›¸åŒæ•°é‡çš„æ²¹å½©ï¼Œä»è€Œéšè—å›¾æ¡ˆã€‚</p><p><strong>æœ€å°æ·±åº¦</strong></p><p>æŒ‡å®šå°†â€œæ·±åº¦æ§åˆ¶â€è®¾ç½®ä¸ºâ€œæ¸éšâ€ã€â€œé’¢ç¬”å‹åŠ›â€ã€â€œé’¢ç¬”æ–œåº¦â€æˆ–â€œå…‰ç¬”è½®â€å¹¶ä¸”é€‰ä¸­â€œä¸ºæ¯ä¸ªç¬”å°–è®¾ç½®çº¹ç†â€æ—¶æ²¹å½©å¯æ¸—å…¥çš„æœ€å°æ·±åº¦ã€‚</p><p><strong>æ·±åº¦æŠ–åŠ¨å’Œæ§åˆ¶</strong></p><p>æŒ‡å®šå½“é€‰ä¸­â€œä¸ºæ¯ä¸ªç¬”å°–è®¾ç½®çº¹ç†â€æ—¶æ·±åº¦çš„æ”¹å˜æ–¹å¼ã€‚è‹¥è¦æŒ‡å®šæŠ–åŠ¨çš„æœ€å¤§ç™¾åˆ†æ¯”ï¼Œè¯·è¾“å…¥ä¸€ä¸ªå€¼ã€‚è‹¥è¦æŒ‡å®šå¸Œæœ›å¦‚ä½•æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„æ·±åº¦å˜åŒ–ï¼Œè¯·ä»â€œæ§åˆ¶â€å¼¹å‡ºå¼èœå•ä¸­é€‰å–ä¸€ä¸ªé€‰é¡¹ï¼š</p><p><strong>å…³</strong></p><p>æŒ‡å®šä¸æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„æ·±åº¦å˜åŒ–ã€‚</p><p><strong>æ¸éš</strong></p><p>æŒ‰æŒ‡å®šæ•°é‡çš„æ­¥é•¿ä»â€œæ·±åº¦æŠ–åŠ¨â€ç™¾åˆ†æ¯”æ¸éšåˆ°â€œæœ€å°æ·±åº¦â€ç™¾åˆ†æ¯”ã€‚</p><p><strong>é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€å…‰ç¬”è½®ã€æ—‹è½¬</strong></p><p>ä¾æ®é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€é’¢ç¬”æ‹‡æŒ‡è½®ä½ç½®æˆ–é’¢ç¬”æ—‹è½¬è§’åº¦æ¥æ”¹å˜æ·±åº¦ã€‚</p><h4 id="å‡ ä¸ªç¤ºä¾‹">å‡ ä¸ªç¤ºä¾‹ï¼š</h4><p><strong>å‡å»</strong>æ¨¡å¼ï¼š</p><p><img src="/2020/05/20/ps-brush/image-20200519185949006.png" alt="image-20200519185949006" style="zoom:50%;"></p><p><strong>æ­£ç‰‡å åº•</strong>æ¨¡å¼ï¼š</p><p><img src="/2020/05/20/ps-brush/image-20200519185914171.png" alt="image-20200519185914171" style="zoom:50%;"></p><p><strong>é¢œè‰²å‡æ·¡</strong>æ¨¡å¼ï¼š</p><p><img src="/2020/05/20/ps-brush/image-20200519190128765.png" alt="image-20200519190128765" style="zoom:40%;"></p><p><strong>é«˜åº¦</strong>æ¨¡å¼ï¼š</p><p><img src="/2020/05/20/ps-brush/image-20200519190234030.png" alt="image-20200519190234030" style="zoom:33%;"></p><h3 id="ç”»ç¬”å½¢çŠ¶åŠ¨æ€">ç”»ç¬”å½¢çŠ¶åŠ¨æ€</h3><p>å½¢çŠ¶åŠ¨æ€å†³å®šæè¾¹ä¸­ç”»ç¬”ç¬”è¿¹çš„å˜åŒ–ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_13.png" alt="Photoshop æœ‰å½¢çŠ¶åŠ¨æ€å’Œæ— å½¢çŠ¶åŠ¨æ€çš„ç”»ç¬”æè¾¹"><figcaption aria-hidden="true">Photoshop æœ‰å½¢çŠ¶åŠ¨æ€å’Œæ— å½¢çŠ¶åŠ¨æ€çš„ç”»ç¬”æè¾¹</figcaption></figure><p>æ— å½¢çŠ¶åŠ¨æ€ï¼ˆå·¦å›¾ï¼‰å’Œæœ‰å½¢çŠ¶åŠ¨æ€ï¼ˆå³å›¾ï¼‰çš„ç”»ç¬”æè¾¹</p><p><strong>å¤§å°æŠ–åŠ¨å’Œæ§åˆ¶</strong></p><p>æŒ‡å®šæè¾¹ä¸­ç”»ç¬”ç¬”è¿¹å¤§å°çš„æ”¹å˜æ–¹å¼ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://helpx.adobe.com/cn/photoshop/using/creating-modifying-brushes.html">åˆ›å»ºå’Œä¿®æ”¹ç”»ç¬”</a>ã€‚</p><p>è‹¥è¦æŒ‡å®šæŠ–åŠ¨çš„æœ€å¤§ç™¾åˆ†æ¯”ï¼Œè¯·é€šè¿‡é”®å…¥æ•°å­—æˆ–ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚è‹¥è¦æŒ‡å®šå¸Œæœ›å¦‚ä½•æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„å¤§å°å˜åŒ–ï¼Œè¯·ä»â€œæ§åˆ¶â€å¼¹å‡ºå¼èœå•ä¸­é€‰å–ä¸€ä¸ªé€‰é¡¹ï¼š</p><p><strong>å…³</strong></p><p>æŒ‡å®šä¸æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„å¤§å°å˜åŒ–ã€‚</p><p><strong>æ¸éš</strong></p><p>æŒ‰æŒ‡å®šæ•°é‡çš„æ­¥é•¿åœ¨åˆå§‹ç›´å¾„å’Œæœ€å°ç›´å¾„ä¹‹é—´æ¸éšç”»ç¬”ç¬”è¿¹çš„å¤§å°ã€‚æ¯ä¸ªæ­¥é•¿ç­‰äºç”»ç¬”ç¬”å°–çš„ä¸€ä¸ªç¬”è¿¹ã€‚å€¼çš„èŒƒå›´å¯ä»¥ä» 1 åˆ° 9999ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥æ­¥é•¿æ•° 10 ä¼šäº§ç”Ÿ 10 ä¸ªå¢é‡çš„æ¸éšã€‚</p><p><strong>é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦æˆ–å…‰ç¬”è½®</strong></p><p>å¯ä¾æ®é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦æˆ–é’¢ç¬”æ‹‡æŒ‡è½®ä½ç½®ä»¥åœ¨åˆå§‹ç›´å¾„å’Œæœ€å°ç›´å¾„ä¹‹é—´æ”¹å˜ç”»ç¬”ç¬”è¿¹å¤§å°ã€‚</p><p><strong>æœ€å°ç›´å¾„</strong></p><p>æŒ‡å®šå½“å¯ç”¨â€œå¤§å°æŠ–åŠ¨â€æˆ–â€œå¤§å°æ§åˆ¶â€æ—¶ç”»ç¬”ç¬”è¿¹å¯ä»¥ç¼©æ”¾çš„æœ€å°ç™¾åˆ†æ¯”ã€‚å¯é€šè¿‡é”®å…¥æ•°å­—æˆ–ä½¿ç”¨æ»‘å—æ¥è¾“å…¥ç”»ç¬”ç¬”å°–ç›´å¾„çš„ç™¾åˆ†æ¯”å€¼ã€‚</p><p><strong>å€¾æ–œç¼©æ”¾æ¯”ä¾‹</strong></p><p>æŒ‡å®šå½“â€œå¤§å°æŠ–åŠ¨â€è®¾ç½®ä¸ºâ€œé’¢ç¬”æ–œåº¦â€æ—¶ï¼Œåœ¨æ—‹è½¬å‰åº”ç”¨äºç”»ç¬”é«˜åº¦çš„æ¯”ä¾‹å› å­ã€‚é”®å…¥æ•°å­—ï¼Œæˆ–è€…ä½¿ç”¨æ»‘å—è¾“å…¥ç”»ç¬”ç›´å¾„çš„ç™¾åˆ†æ¯”å€¼ã€‚</p><p><strong>è§’åº¦æŠ–åŠ¨å’Œæ§åˆ¶</strong></p><p>æŒ‡å®šæè¾¹ä¸­ç”»ç¬”ç¬”è¿¹è§’åº¦çš„æ”¹å˜æ–¹å¼ã€‚è¯¥é€‰é¡¹å¯ç”¨æ—¶ï¼Œæ¯æ¬¡ä½ é‡æ–°ä¸‹ç¬”ï¼Œéƒ½ä¼šéšæœºæ”¹å˜ä¸€ä¸ªç”»ç¬”è§’åº¦ï¼Œéšæœºç¨‹åº¦ç”±ä½ è®¾ç½®çš„å€¼æ¥å†³å®šã€‚è‹¥è¦æŒ‡å®šæŠ–åŠ¨çš„æœ€å¤§ç™¾åˆ†æ¯”ï¼Œè¯·è¾“å…¥ä¸€ä¸ª 360 åº¦çš„ç™¾åˆ†æ¯”å€¼ã€‚è‹¥è¦æŒ‡å®šå¸Œæœ›å¦‚ä½•æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„è§’åº¦å˜åŒ–ï¼Œè¯·ä»â€œæ§åˆ¶â€å¼¹å‡ºå¼èœå•ä¸­é€‰å–ä¸€ä¸ªé€‰é¡¹ï¼š</p><p><strong>å…³</strong></p><p>æŒ‡å®šä¸æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„è§’åº¦å˜åŒ–ã€‚</p><p><strong>æ¸éš</strong></p><p>æŒ‰æŒ‡å®šæ•°é‡çš„æ­¥é•¿åœ¨ 0 å’Œ 360 åº¦ä¹‹é—´æ¸éšç”»ç¬”ç¬”è¿¹è§’åº¦ã€‚</p><p><strong>é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€å…‰ç¬”è½®ã€æ—‹è½¬</strong></p><p>ä¾æ®é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€é’¢ç¬”æ‹‡æŒ‡è½®ä½ç½®æˆ–é’¢ç¬”çš„æ—‹è½¬åœ¨ 0 åˆ° 360 åº¦ä¹‹é—´æ”¹å˜ç”»ç¬”ç¬”è¿¹çš„è§’åº¦ã€‚</p><p><strong>åˆå§‹æ–¹å‘</strong></p><p>ä½¿ç”»ç¬”ç¬”è¿¹çš„è§’åº¦åŸºäºç”»ç¬”æè¾¹çš„åˆå§‹æ–¹å‘ã€‚</p><p><strong>æ–¹å‘</strong></p><p>ä½¿ç”»ç¬”ç¬”è¿¹çš„è§’åº¦åŸºäºç”»ç¬”æè¾¹çš„æ–¹å‘ã€‚</p><p><strong>åœ†åº¦æŠ–åŠ¨å’Œæ§åˆ¶</strong></p><p>æŒ‡å®šç”»ç¬”ç¬”è¿¹çš„åœ†åº¦åœ¨æè¾¹ä¸­çš„æ”¹å˜æ–¹å¼ã€‚è‹¥è¦æŒ‡å®šæŠ–åŠ¨çš„æœ€å¤§ç™¾åˆ†æ¯”ï¼Œè¯·è¾“å…¥ä¸€ä¸ªæŒ‡æ˜ç”»ç¬”é•¿çŸ­è½´ä¹‹é—´çš„æ¯”ç‡çš„ç™¾åˆ†æ¯”ã€‚è‹¥è¦æŒ‡å®šå¸Œæœ›å¦‚ä½•æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„åœ†åº¦å˜åŒ–ï¼Œè¯·ä»â€œæ§åˆ¶â€å¼¹å‡ºå¼èœå•ä¸­é€‰å–ä¸€ä¸ªé€‰é¡¹ï¼š</p><p><strong>å…³</strong></p><p>æŒ‡å®šä¸æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„åœ†åº¦å˜åŒ–ã€‚</p><p><strong>æ¸éš</strong></p><p>æŒ‰æŒ‡å®šæ•°é‡æ­¥é•¿åœ¨ 100% å’Œâ€œæœ€å°åœ†åº¦â€å€¼ä¹‹é—´æ¸éšç”»ç¬”ç¬”è¿¹çš„åœ†åº¦ã€‚</p><p><strong>é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€å…‰ç¬”è½®ã€æ—‹è½¬</strong></p><p>ä¾æ®é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦ã€é’¢ç¬”æ‹‡æŒ‡è½®ä½ç½®æˆ–é’¢ç¬”çš„æ—‹è½¬åœ¨ 100% å’Œâ€œæœ€å°åœ†åº¦â€å€¼ä¹‹é—´æ”¹å˜ç”»ç¬”ç¬”è¿¹çš„åœ†åº¦ã€‚</p><p><strong>æœ€å°åœ†åº¦</strong></p><p>æŒ‡å®šå½“â€œåœ†åº¦æŠ–åŠ¨â€æˆ–â€œåœ†åº¦æ§åˆ¶â€å¯ç”¨æ—¶ç”»ç¬”ç¬”è¿¹çš„æœ€å°åœ†åº¦ã€‚è¾“å…¥ä¸€ä¸ªæŒ‡æ˜ç”»ç¬”é•¿çŸ­è½´ä¹‹é—´çš„æ¯”ç‡çš„ç™¾åˆ†æ¯”ã€‚</p><p><strong>ç”»ç¬”æŠ•å½±</strong></p><p>æŒ‡å®šå½“æ‚¨ä½¿ç”¨å…‰ç¬”ç»˜ç”»æ—¶ï¼Œå…‰ç¬”å°†æ›´æ”¹ä¸ºå€¾æ–œçŠ¶æ€å¹¶å°†æ—‹è½¬å…‰ç¬”ä»¥æ”¹å˜ç¬”å°–å½¢çŠ¶ã€‚</p><h3 id="ä¼ é€’è½¬æ¢ç”»ç¬”é€‰é¡¹">ä¼ é€’/è½¬æ¢ç”»ç¬”é€‰é¡¹</h3><p>è½¬æ¢ç”»ç¬”é€‰é¡¹ç¡®å®šæ²¹å½©åœ¨æè¾¹è·¯çº¿ä¸­çš„æ”¹å˜æ–¹å¼ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_19.png" alt="Photoshop ä¼ é€’ç”»ç¬”é€‰é¡¹"><figcaption aria-hidden="true">Photoshop ä¼ é€’ç”»ç¬”é€‰é¡¹</figcaption></figure><p>æ— åŠ¨æ€ç»˜ç”»çš„ç”»ç¬”æè¾¹ï¼ˆå·¦å›¾ï¼‰å’Œæœ‰åŠ¨æ€ç»˜ç”»çš„ç”»ç¬”æè¾¹ï¼ˆå³å›¾ï¼‰</p><p><strong>ä¸é€æ˜åº¦æŠ–åŠ¨å’Œæ§åˆ¶</strong></p><p>æŒ‡å®šç”»ç¬”æè¾¹ä¸­æ²¹å½©ä¸é€æ˜åº¦å¦‚ä½•å˜åŒ–ï¼Œæœ€é«˜å€¼ï¼ˆä½†ä¸è¶…è¿‡ï¼‰æ˜¯é€‰é¡¹æ ä¸­æŒ‡å®šçš„ä¸é€æ˜åº¦å€¼ã€‚è¦æŒ‡å®šæ²¹å½©ä¸é€æ˜åº¦å¯ä»¥æ”¹å˜çš„ç™¾åˆ†æ¯”ï¼Œè¯·é”®å…¥æ•°å­—æˆ–ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚è‹¥è¦æŒ‡å®šå¸Œæœ›å¦‚ä½•æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„ä¸é€æ˜åº¦å˜åŒ–ï¼Œè¯·ä»â€œæ§åˆ¶â€å¼¹å‡ºå¼èœå•ä¸­é€‰å–ä¸€ä¸ªé€‰é¡¹ï¼š</p><p><strong>å…³</strong></p><p>æŒ‡å®šä¸æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„ä¸é€æ˜åº¦å˜åŒ–ã€‚</p><p><strong>æ¸éš</strong></p><p>æŒ‰æŒ‡å®šæ•°é‡çš„æ­¥é•¿å°†æ²¹å½©ä¸é€æ˜åº¦ä»é€‰é¡¹æ ä¸­çš„ä¸é€æ˜åº¦å€¼æ¸éšåˆ° 0ã€‚</p><p><strong>é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦æˆ–å…‰ç¬”è½®</strong></p><p>å¯ä¾æ®é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦æˆ–é’¢ç¬”æ‹‡æŒ‡è½®çš„ä½ç½®æ¥æ”¹å˜é¢œæ–™çš„ä¸é€æ˜åº¦ã€‚</p><p><strong>æµé‡æŠ–åŠ¨å’Œæ§åˆ¶</strong></p><p>æŒ‡å®šç”»ç¬”æè¾¹ä¸­æ²¹å½©æµé‡å¦‚ä½•å˜åŒ–ï¼Œæœ€é«˜ï¼ˆä½†ä¸è¶…è¿‡ï¼‰å€¼æ˜¯é€‰é¡¹æ ä¸­æŒ‡å®šçš„æµé‡å€¼ã€‚</p><p>è¦æŒ‡å®šæ²¹å½©æµé‡å¯ä»¥æ”¹å˜çš„ç™¾åˆ†æ¯”ï¼Œè¯·é”®å…¥æ•°å­—æˆ–ä½¿ç”¨æ»‘å—æ¥è¾“å…¥å€¼ã€‚è‹¥è¦æŒ‡å®šå¸Œæœ›å¦‚ä½•æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„æµé‡å˜åŒ–ï¼Œè¯·ä»â€œæ§åˆ¶â€å¼¹å‡ºå¼èœå•ä¸­é€‰å–ä¸€ä¸ªé€‰é¡¹ï¼š</p><p><strong>å…³</strong></p><p>æŒ‡å®šä¸æ§åˆ¶ç”»ç¬”ç¬”è¿¹çš„æµé‡å˜åŒ–ã€‚</p><p><strong>æ¸éš</strong></p><p>æŒ‰æŒ‡å®šæ•°é‡çš„æ­¥é•¿å°†æ²¹å½©æµé‡ä»é€‰é¡¹æ ä¸­çš„æµé‡å€¼æ¸éšåˆ° 0ã€‚</p><p><strong>é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦æˆ–å…‰ç¬”è½®</strong></p><p>å¯ä¾æ®é’¢ç¬”å‹åŠ›ã€é’¢ç¬”æ–œåº¦æˆ–é’¢ç¬”æ‹‡æŒ‡è½®çš„ä½ç½®æ¥æ”¹å˜æ²¹å½©çš„æµé‡ã€‚</p><h3 id="æ ‡å‡†ç”»ç¬”ç¬”å°–å½¢çŠ¶é€‰é¡¹">æ ‡å‡†ç”»ç¬”ç¬”å°–å½¢çŠ¶é€‰é¡¹</h3><p>å¯¹äºæ ‡å‡†ç”»ç¬”ç¬”å°–ï¼Œå¯è®¾ç½®â€œç”»ç¬”è®¾ç½®â€é¢æ¿ä¸­çš„ä»¥ä¸‹é€‰é¡¹ï¼š</p><h4 id="å¤§å°">å¤§å°</h4><p>æ§åˆ¶ç”»ç¬”å¤§å°ã€‚è¾“å…¥ä»¥åƒç´ ä¸ºå•ä½çš„å€¼ï¼Œæˆ–æ‹–åŠ¨æ»‘å—ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_06.png" alt="å…·æœ‰ä¸åŒç›´å¾„å€¼çš„ç”»ç¬”æè¾¹"><figcaption aria-hidden="true">å…·æœ‰ä¸åŒç›´å¾„å€¼çš„ç”»ç¬”æè¾¹</figcaption></figure><h4 id="ä½¿ç”¨å–æ ·å¤§å°">ä½¿ç”¨å–æ ·å¤§å°</h4><p>å°†ç”»ç¬”å¤ä½åˆ°å®ƒçš„åŸå§‹ç›´å¾„ã€‚åªæœ‰åœ¨ç”»ç¬”ç¬”å°–å½¢çŠ¶æ˜¯é€šè¿‡é‡‡é›†å›¾åƒä¸­çš„åƒç´ æ ·æœ¬åˆ›å»ºçš„æƒ…å†µä¸‹ï¼Œæ­¤é€‰é¡¹æ‰å¯ç”¨ã€‚</p><h4 id="ç¿»è½¬-x">ç¿»è½¬ X</h4><p>æ”¹å˜ç”»ç¬”ç¬”å°–åœ¨å…¶ <em>x</em> è½´ä¸Šçš„æ–¹å‘ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_07.png" alt="Photoshop ç¿»è½¬ X"><figcaption aria-hidden="true">Photoshop ç¿»è½¬ X</figcaption></figure><p>å°†ç”»ç¬”ç¬”å°–åœ¨å…¶ x è½´ä¸Šç¿»è½¬ <strong>A.</strong> å¤„åœ¨é»˜è®¤ä½ç½®çš„ç”»ç¬”ç¬”å°– <strong>B.</strong> é€‰ä¸­äº†â€œç¿»è½¬ Xâ€æ—¶ <strong>C.</strong> é€‰ä¸­äº†â€œç¿»è½¬ Xâ€å’Œâ€œç¿»è½¬ Yâ€æ—¶</p><h4 id="ç¿»è½¬-y">ç¿»è½¬ Y</h4><p>æ”¹å˜ç”»ç¬”ç¬”å°–åœ¨å…¶ <em>y</em> è½´ä¸Šçš„æ–¹å‘ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_08.png" alt="Photoshop ç¿»è½¬ Y"><figcaption aria-hidden="true">Photoshop ç¿»è½¬ Y</figcaption></figure><p>å°†ç”»ç¬”ç¬”å°–åœ¨å…¶ y è½´ä¸Šç¿»è½¬ <strong>A.</strong> å¤„åœ¨é»˜è®¤ä½ç½®çš„ç”»ç¬”ç¬”å°– <strong>B.</strong> é€‰ä¸­äº†â€œç¿»è½¬ Yâ€æ—¶ <strong>C.</strong> é€‰ä¸­äº†â€œç¿»è½¬ Yâ€å’Œâ€œç¿»è½¬ Xâ€æ—¶</p><h4 id="è§’åº¦">è§’åº¦</h4><p>æŒ‡å®šæ¤­åœ†ç”»ç¬”æˆ–æ ·æœ¬ç”»ç¬”çš„é•¿è½´ä»æ°´å¹³æ–¹å‘æ—‹è½¬çš„è§’åº¦ã€‚é”®å…¥åº¦æ•°ï¼Œæˆ–åœ¨é¢„è§ˆæ¡†ä¸­æ‹–åŠ¨æ°´å¹³è½´ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_09.png" alt="Photoshop è§’åº¦"><figcaption aria-hidden="true">Photoshop è§’åº¦</figcaption></figure><p>å¸¦è§’åº¦çš„ç”»ç¬”åˆ›å»ºé›•åˆ»çŠ¶æè¾¹</p><h4 id="åœ†åº¦">åœ†åº¦</h4><p>æŒ‡å®šç”»ç¬”çŸ­è½´å’Œé•¿è½´ä¹‹é—´çš„æ¯”ç‡ã€‚è¾“å…¥ç™¾åˆ†æ¯”å€¼ï¼Œæˆ–åœ¨é¢„è§ˆæ¡†ä¸­æ‹–åŠ¨ç‚¹ã€‚100% è¡¨ç¤ºåœ†å½¢ç”»ç¬”ï¼Œ0% è¡¨ç¤ºçº¿æ€§ç”»ç¬”ï¼Œä»‹äºä¸¤è€…ä¹‹é—´çš„å€¼è¡¨ç¤ºæ¤­åœ†ç”»ç¬”ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_10.png" alt="Photoshop åœ†åº¦"><figcaption aria-hidden="true">Photoshop åœ†åº¦</figcaption></figure><p>è°ƒæ•´åœ†åº¦ä»¥å‹ç¼©ç”»ç¬”ç¬”å°–å½¢çŠ¶</p><h4 id="ç¡¬åº¦">ç¡¬åº¦</h4><p>æ§åˆ¶ç”»ç¬”ç¡¬åº¦ä¸­å¿ƒçš„å¤§å°ã€‚é”®å…¥æ•°å­—ï¼Œæˆ–è€…ä½¿ç”¨æ»‘å—è¾“å…¥ç”»ç¬”ç›´å¾„çš„ç™¾åˆ†æ¯”å€¼ã€‚ä¸èƒ½æ›´æ”¹æ ·æœ¬ç”»ç¬”çš„ç¡¬åº¦ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_11.png" alt="Photoshop ç¡¬åº¦"><figcaption aria-hidden="true">Photoshop ç¡¬åº¦</figcaption></figure><p>å…·æœ‰ä¸åŒç¡¬åº¦å€¼çš„ç”»ç¬”æè¾¹</p><h4 id="é—´è·">é—´è·</h4><p>æ§åˆ¶æè¾¹ä¸­ä¸¤ä¸ªç”»ç¬”ç¬”è¿¹ä¹‹é—´çš„è·ç¦»ã€‚å¦‚æœè¦æ›´æ”¹é—´è·ï¼Œè¯·é”®å…¥æ•°å­—ï¼Œæˆ–ä½¿ç”¨æ»‘å—è¾“å…¥ç”»ç¬”ç›´å¾„çš„ç™¾åˆ†æ¯”å€¼ã€‚å½“å–æ¶ˆé€‰æ‹©æ­¤é€‰é¡¹æ—¶ï¼Œå…‰æ ‡çš„é€Ÿåº¦å°†ç¡®å®šé—´è·ã€‚</p><figure><img src="/2020/05/20/ps-brush/pa_12.png" alt="Photoshop é—´è·"><figcaption aria-hidden="true">Photoshop é—´è·</figcaption></figure><p>å¢å¤§é—´è·å¯ä½¿ç”»ç¬”æ€¥é€Ÿæ”¹å˜</p><h4 id="æ³¨æ„">æ³¨æ„:</h4><p>å½“ä½¿ç”¨é¢„è®¾ç”»ç¬”æ—¶ï¼ŒæŒ‰ [ é”®å¯å‡å°ç”»ç¬”å®½åº¦ï¼›æŒ‰ ] é”®å¯å¢åŠ å®½åº¦ã€‚å¯¹äºç¡¬è¾¹åœ†ã€æŸ”è¾¹åœ†å’Œä¹¦æ³•ç”»ç¬”ï¼ŒæŒ‰ Shift+ [ é”®å¯å‡å°ç”»ç¬”ç¡¬åº¦ï¼›æŒ‰ Shift+ ] é”®å¯å¢åŠ ç”»ç¬”ç¡¬åº¦ã€‚</p><h2 id="å¸¸ç”¨è¾¨æ">å¸¸ç”¨è¾¨æ</h2><ul><li>å¸¸ç”¨çš„<strong>19å·ç¬”åˆ·</strong>å…¶å®ä¸»è¦å°±æ˜¯<code>å¤§å°æŠ–åŠ¨</code>+<code>æµé‡æŠ–åŠ¨</code>+<code>å»ºç«‹</code>æ„æˆçš„ã€‚</li><li>å¸¸ç”¨çš„<strong>å–·æª</strong>å°±æ˜¯ <code>æŸ”è§’ç¬”å°–å½¢çŠ¶</code>+ <code>æµé‡æŠ–åŠ¨</code>+<code>å»ºç«‹</code>æ„æˆçš„ã€‚æˆ–è€…è¯´ï¼Œå¹¿ä¹‰ä¸Šçš„å–·æªå¯ä»¥ç”±ä»»æ„ä¸€ä¸ªç¬”åˆ·åŠ ä¸Š<code>å»ºç«‹</code>é€‰é¡¹æ„æˆã€‚</li><li>èƒ½å¦<strong>æ··è‰²</strong>ä¸æ˜¯ç”±ç¬”åˆ·å†³å®šçš„ï¼Œè€Œæ˜¯ç”±<strong>ç¬”çš„ç±»å‹</strong>å†³å®šçš„ã€‚<strong>æ··åˆç”»ç¬”å·¥å…·</strong>å¯ä»¥è®©é¢œè‰²æ··åˆï¼Œè€Œæ™®é€š <strong>ç”»ç¬”å·¥å…·</strong>åˆ™ä¸å¯ä»¥ã€‚æ··åˆç”»ç¬”å·¥å…·çš„æ··è‰²ä¸ä»…ä»…æ˜¯ä¸Šä¸‹é¢œè‰²çš„èåˆï¼Œè€Œä¸”ä¼šæŠŠä¸‹é¢çš„è‰²è°ƒå¸¦åˆ°ç°æœ‰çš„ç¬”åˆ·ä¹‹ä¸­ï¼Œå³ä½¿åé¢æ²¡æœ‰äº†ä¸‹å±‚å…¶ä»–é¢œè‰²ï¼Œç”»ç¬”ä¹Ÿä¼šæŒç»­ç»´æŒæ··è‰²ä¸€æ®µæ—¶é—´ç›´è‡³å®Œå…¨è¡°å‡ã€‚å¦‚ä¸‹å›¾ï¼š</li></ul><figure><img src="/2020/05/20/ps-brush/image-20200519171159376.png" alt="image-20200519171159376"><figcaption aria-hidden="true">image-20200519171159376</figcaption></figure><ul><li>è¦æƒ³å®ç°é¢œè‰²æ··åˆï¼Œæ¯”å¦‚<code>çº¢+ç»¿=é»„</code>ï¼Œä»»ä½•æœ‰é€æ˜åº¦çš„ç¬”åˆ·éƒ½å¯ä»¥å®ç°ã€‚ä½†å¦‚æœæƒ³è®©è¿™äº›é¢œè‰²åƒæ˜¯éƒ½ç²˜åœ¨äº†åˆ·å­ä¸Šä¸€æ ·åé¢ä¼šä¸€èµ·è¹­å‡ºæ¥ï¼Œæˆ–æ˜¯å˜åŒ–æ¶‚æ–™çš„æ¹¿åº¦ï¼Œæˆ–æ˜¯æƒ³è¦â€œæ–°çš„æ¶‚æ–™ä¸Šå»åä¸‹é¢çš„æ¶‚æ–™è¢«æµ¸æ¹¿å¹¶èšé›†åœ¨æ–°ç¬”è¿¹ä¸¤ä¾§â€çš„æ•ˆæœï¼Œåˆ™éœ€è¦ä½¿ç”¨ <strong>æ··åˆç”»ç¬”å·¥å…·</strong>ã€‚</li><li>æ°´å½©çš„æ ¸å¿ƒæ˜¯<code>ä½æµé‡</code>+<code>å»ºç«‹</code>+<code>æ•£å¸ƒ</code>+<code>åŒé‡ç”»ç¬”</code>+<code>æµé‡æŠ–åŠ¨</code>+<code>å¤§å°æŠ–åŠ¨</code>ã€‚å…¶ä¸­ï¼Œåœ¨çº¸ä¸Šæ°¤æ°²æ•£å¼€çš„æ•ˆæœä¸»è¦æ˜¯ç”±åŒé‡ç”»ç¬”ä¸­çš„è¾…åŠ©ç”»ç¬”å®Œæˆçš„</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;é€‰é¡¹ç ”ç©¶&quot;&gt;é€‰é¡¹ç ”ç©¶&lt;/h2&gt;
&lt;p&gt;ç”±äºå¤šæ¬¡æœç´¢å’Œç ”ç©¶ç”»ç¬”è®¾ç½®å’Œç¬”åˆ·çš„åˆ¶ä½œæ–¹æ³•ï¼Œä½†å‡æ„Ÿè§‰ç½‘ä¸Šæ‰€è®²ä¸€çŸ¥åŠè§£å±…å¤šï¼Œè¿™æ¬¡ç‰¹æ„æ‰¾æ—¶é—´å…¨éƒ¨æ•´ç†äº†ä¸€éã€‚éš¾ç†è§£çš„ã€å¯èƒ½å¹¶ä¸å¸¸ç”¨çš„æ”¾åœ¨å‰é¢ç€é‡è®²ï¼Œå®¹æ˜“ç†è§£çš„ã€å¸¸ç”¨çš„åˆ™æ”¾åœ¨åé¢ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ‚è‰²noise&quot;&gt;æ‚è‰²(Noise)&lt;/h3&gt;
&lt;p&gt;ä¸ºä¸ªåˆ«ç”»ç¬”ç¬”å°–å¢åŠ é¢å¤–çš„éšæœºæ€§ã€‚å½“åº”ç”¨äºæŸ”ç”»ç¬”ç¬”å°–ï¼ˆåŒ…å«ç°åº¦å€¼çš„ç”»ç¬”ç¬”å°–ï¼‰æ—¶ï¼Œæ­¤é€‰é¡¹æœ€æœ‰æ•ˆã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="art" scheme="https://www.miracleyoo.com/tags/art/"/>
    
    <category term="painting" scheme="https://www.miracleyoo.com/tags/painting/"/>
    
    <category term="ps" scheme="https://www.miracleyoo.com/tags/ps/"/>
    
  </entry>
  
  <entry>
    <title>Macã€Windowsã€iPadä¸‰ç«¯å®Œç¾è®ºæ–‡ç®¡ç†ã€é˜…è¯»ä¸ç¼–è¾‘ç³»ç»Ÿé…ç½®</title>
    <link href="https://www.miracleyoo.com/2020/04/26/paper-zotero-dropbox/"/>
    <id>https://www.miracleyoo.com/2020/04/26/paper-zotero-dropbox/</id>
    <published>2020-04-27T01:09:00.000Z</published>
    <updated>2021-03-12T09:11:15.702Z</updated>
    
    <content type="html"><![CDATA[<p>ç®¡ç†å¥½è‡ªå·±æ‰‹ä¸­çš„è®ºæ–‡ï¼Œä¸è®©ä»–ä»¬è¢«åå™¬ä¸â€œDownloadâ€æ–‡ä»¶å¤¹çš„èŒ«èŒ«æ–‡ä»¶æµ·æ´‹ä¸­å·²éæ˜“äº‹ï¼Œè€Œèƒ½åœ¨éœ€è¦æ—¶è¿…é€Ÿå®šä½ï¼Œèƒ½åœ¨Windowsçš„Desktopä¸ä¾¿æºçš„MacBookä¸Šæ— ç¼å¯¹æ¥è®ºæ–‡åº“åˆ™éœ€è¦ç›¸å¯¹ç²¾ç»†åŒ–çš„ç®¡ç†ã€‚ç„¶è€Œï¼Œå¾ˆå¤šæ—¶å€™å¹¶ä¸é€‚åˆå±•å¼€è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘æ¥â€œéƒ‘é‡â€åœ°é˜…è¯»ä¸€ç¯‡è®ºæ–‡ï¼Œåœ¨ä¸€äº›ç›¸å¯¹é›¶ç¢çš„æ—¶é—´é‡Œéšæ‰‹æŠ½å‡ºåŒ…ä¸­çš„iPadï¼Œè¯»è¯»å‰é¢é¡ºæ‰‹å­˜ä¸‹çš„è®ºæ–‡ï¼Œåˆ™å¯å¤§å¤§å¢åŠ è‡ªå·±çš„å­¦æœ¯å¹¸ç¦æ„Ÿã€‚</p><span id="more"></span><h2 id="éœ€æ±‚åˆ†æ">éœ€æ±‚åˆ†æ</h2><p>ä¸Šé¢è¿™å‡ ç‚¹ä¹Ÿæ­£æ˜¯æˆ‘å¯¹è®ºæ–‡ç®¡ç†ç³»ç»Ÿçš„è¦æ±‚ã€‚æ³¨æ„è¿™é‡Œæåˆ°çš„æ˜¯â€œç³»ç»Ÿâ€ï¼Œè€Œå¹¶æ˜¯ä¸€ä¸ªå•ä¸€çš„è½¯ä»¶ã€‚è¿™é‡Œæç‚¼ä¸€ä¸‹æ—¥å¸¸å¯¹è®ºæ–‡ç®¡ç†åŠé˜…è¯»çš„éœ€æ±‚ï¼Œæ‚¨å¯ä»¥çœ‹çœ‹å’Œè‡ªå·±çš„éœ€æ±‚æ˜¯å¦å»åˆï¼š</p><ol type="1"><li>ä»¥åˆ†å±‚ç›®å½•çš„å½¢å¼å°†è®ºæ–‡è¿›è¡Œå½’æ¡£ï¼Œå¹¶ä¸”æœ‰æ—¶éœ€è¦è®©åŒä¸€ç¯‡è®ºæ–‡åŒæ—¶å­˜æ”¾äºå¤šä¸ªç›®å½•ä¸­ã€‚</li><li>æ”¯æŒå¤šåŠç›®å½•ï¼ˆå¤š&gt;2ï¼‰ã€‚</li><li>æ”¯æŒä»ç½‘é¡µä¸Šä¾¿æ·åœ°å‚¨å­˜è®ºæ–‡ä»¥åŠæ–‡æ¡£ã€‚</li><li>æ”¯æŒæ‹–å…¥PDFè‡ªåŠ¨å¯»æ‰¾è®ºæ–‡ä¿¡æ¯ã€‚</li><li>éœ€è¦å¯¹è®ºæ–‡çš„PDFåŸä»¶è¿›è¡Œå­˜å‚¨ï¼Œæœ€å¥½èƒ½å¤Ÿè‡ªåŠ¨ä¸‹è½½ç¼ºå¤±çš„PDFã€‚</li><li>éœ€è¦åœ¨Macå’ŒWindowsç«¯éƒ½èƒ½è®¿é—®è®ºæ–‡ç›®å½•ï¼Œä¸”å¯¹PDFæ–‡ä»¶çš„ä¿®æ”¹èƒ½å¤ŸåŒæ­¥ã€‚</li><li>PDFçš„å­˜å‚¨æœ€å¥½å’Œæ•°æ®åº“ç³»ç»Ÿåˆ†ç¦»ï¼Œä»¥ä¾¿æœç´¢ã€å•ç‹¬æ›´æ”¹æˆ–è®¿é—®ã€‚</li><li>éœ€è¦å¯¹è®ºæ–‡è¿›è¡Œå¯è‡ªå®šä¹‰æ ¼å¼çš„è‡ªåŠ¨é‡å‘½åã€‚</li><li>ç•Œé¢ä¸èƒ½å¤ªä¸‘ã€‚</li><li>æ”¯æŒé«˜åº¦è‡ªå®šä¹‰æˆ–æœ‰å……è¶³çš„åŠŸèƒ½ï¼Œæœ€å¥½å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚</li><li>æ”¯æŒå„ç§å¼•æ–‡æ ¼å¼ã€‚</li><li>æ”¯æŒLatexå’ŒWordçš„ä¾¿æ·å¼•ç”¨ï¼ŒWordæœ€å¥½æœ‰æ’ä»¶ã€‚</li><li>æ‹¥æœ‰è¾ƒå¤§çš„äº‘å­˜å‚¨ç©ºé—´ï¼Œè‡³å°‘è¶³ä»¥å­˜å‚¨æ‰€æœ‰çš„PDFæ–‡æ¡£ã€‚</li><li>å¯ä»¥ä»iPadä¸Šè®¿é—®å¹¶ä¸”å¯ä»¥åŒæ­¥ã€ä¸Šä¼ å¯¹è®ºæ–‡çš„æ›´æ”¹ã€‚</li><li>ä¸‰ä¸ªå¹³å°PDFé˜…è¯»å™¨é…ç½®æœ€å¥½ç»Ÿä¸€ï¼Œä»¥å…é«˜äº®ã€æ’å…¥æ–‡æœ¬ç­‰æ ¼å¼ä¸ä¸€ã€‚</li></ol><p>å½’çº³å‡ºçš„è¿™å‡ ç‚¹ä¾¿æ˜¯æˆ‘å¯¹è®ºæ–‡ç®¡ç†ç³»ç»Ÿçš„æ‰€æœ‰éœ€æ±‚äº†ã€‚ä¹‹åä¾¿æ˜¯å¯¹å„ç§è®ºæ–‡ç®¡ç†è½¯ä»¶çš„è¯•ç”¨å’Œç»„åˆã€‚è¿™é‡Œç›´å¥”ä¸»é¢˜ï¼Œç»™å‡ºæˆ‘ç°åœ¨çš„å…¨å¥—ç³»ç»Ÿé…ç½®åŠé€‰æ‹©çš„åŸå› ã€‚</p><h2 id="ç³»ç»Ÿé…ç½®">ç³»ç»Ÿé…ç½®</h2><ul><li>Macä¸Windowsç«¯ä¸»è®ºæ–‡ç®¡ç†è½¯ä»¶ï¼š<a href="https://www.zotero.org/">Zotero</a></li><li>ä¸»è¦æ’ä»¶ï¼š<a href="http://zotfile.com/">zotfile</a>ï¼Œ<a href="https://github.com/retorquere/zotero-better-bibtex">zotero-better-bibtex</a></li><li>Macã€Windowsä¸iPadç»Ÿä¸€PDFåŒæ­¥è½¯ä»¶ï¼šDropbox</li><li>Macã€Windowsä¸iPadç»Ÿä¸€PDFé˜…è¯»å™¨ï¼šAdobe Acrobat</li></ul><h2 id="é€‰ç”¨åŸå› ">é€‰ç”¨åŸå› </h2><h3 id="zotero">Zotero</h3><p>å„å¤§å¹³å°ä¸Šä»¥åŠZoteroå®˜ç½‘å¯¹å…¶è®²è§£éƒ½å¾ˆå¤šä¹Ÿå¾ˆå……åˆ†äº†ï¼Œå¦‚æœä½ èƒ½å¤Ÿå¹¶ä¸”æ„¿æ„èŠ±ä¸Šä¸€äº›æ—¶é—´æ¥è¿›è¡Œè‡ªå®šä¹‰é…ç½®ï¼Œå®ƒå°†æ˜¯ä¸€ä¸ªå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰å¯¹è®ºæ–‡ç®¡ç†éœ€æ±‚çš„ç»ˆæè½¯ä»¶ã€‚æˆ‘è¿™é‡ŒåªæŒ‡å‡ºä¸€äº›æˆ‘è®¤ä¸ºéå¸¸ä¸é”™çš„ç‰¹æ€§ã€‚</p><ol type="1"><li>è·¨å¹³å°ã€‚Macï¼ŒWindowså’ŒLinuxéƒ½æœ‰æ”¯æŒã€‚</li><li>æµè§ˆå™¨è®ºæ–‡æŠ“å–æ’ä»¶å¾ˆå¥½ç”¨ã€‚æ—¢å¯ç›´æ¥æŠ“å–PDFæ–‡ç« ä¹‹åè§£æå‡ºè®ºæ–‡ï¼Œä¹Ÿå¯åœ¨å¦‚Google Scholarç­‰é¡µé¢ç›´æ¥æ‰¹é‡æŠ“å–æ·»åŠ è®ºæ–‡ç´¢å¼•ï¼Œå¹¶å†è‡ªåŠ¨ä¸‹è½½ç›¸åº”çš„PDFã€‚ç”šè‡³åœ¨ä¸€äº›ä½œä¸šæ€§è´¨çš„å°è®ºæ–‡ä¸­æœ‰æ—¶éœ€è¦ç›´æ¥å¼•ç”¨æŸä¸ªç½‘é¡µæˆ–æŸä¸ªæ–‡æ¡£ï¼Œå®ƒä¹Ÿå¯ä»¥ç›´æ¥ç”Ÿæˆæ¡ç›®ã€‚</li><li>æ”¯æŒå¤šçº§ç›®å½•ã€‚è¿™ä¸ªå¤šç†è®ºä¸Šä¼¼ä¹å¯ä»¥æ— é™å¤šä¸‹å»ï¼Œéå¸¸è‡ªç”±ã€‚</li><li>æœ‰å¾ˆå¥½ç”¨çš„Wordæ’ä»¶ï¼Œä½¿ç”¨ä½“éªŒä¸æ»‘æµç•…ã€‚</li><li>æ‹¥æœ‰åœ¨çº¿çš„åºå¤§å¼•ç”¨æ ¼å¼åº“ï¼ŒåŸºæœ¬å¯ä»¥æ‰¾åˆ°æ‰€æœ‰éœ€è¦çš„å¼•æ–‡æ ¼å¼ã€‚</li><li>å¯ä»¥åŠ è½½å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¦‚æ”¯æŒè‡ªå®šä¹‰æ ¼å¼é‡å‘½åçš„zotfileï¼Œé’ˆå¯¹è¾“å‡ºå¼•ç”¨è¿›è¡Œä¼˜åŒ–çš„better-bibtexç­‰ã€‚</li><li>å¯ä»¥å°†æ¡ç›®çš„PDFæ–‡ä»¶å‚¨å­˜ç›®å½•å•åˆ—å‡ºæ¥ï¼Œå­˜åˆ°ä¸€ä¸ªè‡ªå®šä¹‰çš„åœ°æ–¹ï¼Œæ¯”å¦‚Dropboxæ–‡ä»¶å¤¹å†…éƒ¨ã€‚</li></ol><h3 id="dropbox">Dropbox</h3><ol type="1"><li>å› ä¸ºç°åœ¨åœ¨ç¾å›½è¯»ä¹¦ï¼ŒDropboxçš„æœåŠ¡ç›¸å¯¹æ¥è¯´æ˜¯å¿«é€Ÿä¸”ç¨³å®šçš„ã€‚</li><li>Dropboxçš„åŒæ­¥åŠŸèƒ½åšçš„éå¸¸å¥½ï¼Œè¿™ä¹Ÿæ˜¯å…¶åœ¨æ­¤é¢†åŸŸæ·±è€•å¤šå¹´çš„ç»“æœã€‚</li><li>æœ€é‡è¦ä¸€ç‚¹ï¼ŒDropboxåœ¨iPadä¸Šå’ŒAdobe Acrobatæœ‰ç€åŸç”Ÿçš„é›†æˆã€‚åœ¨Dropboxä¸­ä½¿ç”¨Acrobatæ‰“å¼€å¹¶ç¼–è¾‘æ–‡ä»¶ï¼Œå…¶ä¿®æ”¹æ˜¯å¯ä»¥ç›´æ¥åŒæ­¥åˆ°Dropboxäº‘ç«¯çš„ã€‚è¿™ä¸€ç‚¹å¯¹äºç§»åŠ¨ç«¯æµè§ˆå’Œç¼–è¾‘è®ºæ–‡èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</li><li>å…è´¹ç‰ˆè™½ç„¶åªæœ‰2Gåˆå§‹ç©ºé—´ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡é‚€è¯·å¥½å‹æ³¨å†Œè¾¾åˆ°æœ€å¤§çš„18Gã€‚è™½ç„¶ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œä½†æ˜¯å¯¹äºå­˜å‚¨è®ºæ–‡å·²ç»ç»°ç»°æœ‰ä½™äº†ã€‚ï¼ˆå¦è¿™ä¸ªé‚€è¯·æ³¨å†Œé€ç©ºé—´å¯ä»¥ç›´æ¥å»æ·˜å®æœç´¢ï¼Œå¯ä»¥ç”»å¾ˆå°‘çš„é’±å¾—åˆ°å¾ˆå¤šæ³¨å†ŒæœåŠ¡ï¼Œç›´è¾¾18Gã€‚ï¼‰</li></ol><h3 id="adobe-acrobat">Adobe Acrobat</h3><ol type="1"><li>å¤šå¹³å°æ”¯æŒã€‚Macï¼ŒWindowsï¼ŒLinuxï¼ŒiOSï¼ŒAndroidéƒ½æœ‰ç€å¾ˆå¥½çš„æ”¯æŒã€‚</li><li>ä¸“ä¸šï¼Œæ”¯æŒå„ç§ç¼–è¾‘æ–¹å¼ã€‚å¸¸è§çš„é«˜äº®ã€ä¸‹åˆ’çº¿ã€æ·»åŠ æ–‡æœ¬ã€ç”»æ–¹æ¡†ã€åšæ‰¹æ³¨ç­‰è‡ªç„¶éƒ½æ˜¯æ”¯æŒçš„ã€‚</li><li>å¾ˆå¤šé«˜æ ¡éƒ½å’ŒAdobeå…¬å¸æœ‰ç€åè®®ï¼Œä½¿ç”¨å­¦ç”Ÿé‚®ç®±å¯ä»¥ç›´æ¥å…è´¹ä½¿ç”¨å…¨å¥—åŠŸèƒ½ã€‚</li><li>åŒå‰é¢æ‰€è¿°ï¼Œå…¶å’ŒDropboxçš„å…³è”æ€§æ”¯æŒæ˜¯æ•´å¥—ç³»ç»ŸæˆåŠŸçš„å…³é”®ã€‚</li></ol><h3 id="å¯¹æ¯”åŸå› ">å¯¹æ¯”åŸå› </h3><ol type="1"><li>ä¹‹å‰æœ‰åœ¨ç”¨Mendeleyï¼Œä½†æ˜¯å¯¹æ¯”Zoteroï¼Œå°¤å…¶æ˜¯å¯¹æ¯”Zoteroå’Œå…¶ç¬¬ä¸‰æ–¹æ’ä»¶çš„ä¸°å¯ŒåŠŸèƒ½åï¼Œå‰è€…æ˜æ˜¾åŠ›ä¸ä»å¿ƒã€‚å¦å¤–Windowsç‰ˆæœ¬å…¶ç•Œé¢æ²¡æœ‰é’ˆå¯¹é«˜åˆ†è¾¨ç‡è¿›è¡Œé€‚é…ï¼Œå¹¶ä¸”ä½¿ç”¨äº†é»˜è®¤çš„å®‹ä½“ï¼Œæ˜¾ç¤ºè‹±æ–‡ä¸‘é™‹ä¸å ªï¼Œä¸”æ— æ³•æ›´æ”¹ã€‚åœ¨è®ºå›ä¸Šçœ‹åˆ°æœ‰è®¸å¤šå›å‹å‡ å¹´å‰å°±æå‡ºäº†è¿™äº›é—®é¢˜ï¼Œç„¶è€Œæ˜¾ç„¶å¼€å‘è€…å¹¶æ²¡æœ‰åšå‡ºç›¸åº”ã€‚å¯¹æ¯”Zoteroï¼Œå…¶è®ºå›ç¯å¢ƒã€æ´»è·ƒç¨‹åº¦ä»¥åŠé—®é¢˜è§£å†³é€Ÿåº¦éƒ½ä¼šæ›´å¥½ã€‚</li><li>Endnoteæ˜¯æ”¶è´¹è½¯ä»¶ï¼Œæˆ‘å¹¶æ²¡æœ‰æ·±å…¥ä½¿ç”¨ï¼Œè¿™é‡Œä¸å¤šç½®è¯„ï¼Œä½†å„ä½å¯ä»¥å®¹æ˜“æŸ¥åˆ°Endnoteå’ŒZoteroçš„åŒºåˆ«ã€‚</li><li>iPadä¸Šä¹Ÿè€ƒè™‘è¿‡ä½¿ç”¨PDF Reader -- Document Expertä½œä¸ºæµè§ˆå’Œç¼–è¾‘è½¯ä»¶ï¼Œä½†æ˜¯ä»Dropboxæ‰“å¼€çš„æ–‡ä»¶ç¼–è¾‘åæ˜¯ä»¥å‰¯æœ¬çš„å½¢å¼å­˜åœ¨äº†æœ¬åœ°ï¼Œå¹¶æ²¡æœ‰è¢«åŒæ­¥ï¼Œè¿™æ˜¯æ— æ³•æ¥å—çš„ã€‚</li></ol><h2 id="é…ç½®ç»†èŠ‚">é…ç½®ç»†èŠ‚</h2><h3 id="zoteroè®¾ç½®éƒ¨åˆ†">Zoteroè®¾ç½®éƒ¨åˆ†</h3><ol type="1"><li>åœ¨æ‰€æœ‰éœ€è¦åŒæ­¥çš„ç”µè„‘ä¸Šç™»å½•Zoteroçš„è´¦å·ï¼Œå¦‚æ²¡æœ‰ï¼Œè¯·æ³¨å†Œã€‚</li><li>æ‰“å¼€è®¾ç½®ï¼Œæ›´æ”¹<code>Files and Folders</code> ä¸­çš„<code>Base Directory</code>é€‰é¡¹ä¸ºä½ çš„åŒæ­¥ç›˜åœ°å€ï¼Œå¦‚Dropboxï¼ŒOneDriveï¼Œåšæœäº‘ç­‰ã€‚è¯·ä¸è¦åŠ¨ä¸‹é¢çš„<code>Data Directory Location</code>ï¼Œè¿™ä¸ªæ˜¯Zoteroçš„æ€»ä½“æ•°æ®åº“çš„åœ°å€ï¼Œä¸å»ºè®®æ”¾åˆ°äº‘æ–‡ä»¶å¤¹ä¸‹ï¼Œå› ä¸ºåªè¦æœ‰ä¸¤ä¸ªç«¯åŒæ—¶ä½¿ç”¨Zoteroè¿™ä¸ªåŒæ­¥å°±å´©æ‰äº†ã€‚</li></ol><figure><img src="/2020/04/26/paper-zotero-dropbox/image-20191110225913571.png" alt="image-20191110225913571"><figcaption aria-hidden="true">image-20191110225913571</figcaption></figure><ol start="3" type="1"><li>å®‰è£…<a href="http://zotfile.com/">zotfile</a>ã€‚æ›´æ”¹æœ‰å…³æ–‡ä»¶çš„è®¾ç½®ã€‚</li></ol><p>ä»Toolsæ è¿›å…¥ZotFile Preference</p><figure><img src="/2020/04/26/paper-zotero-dropbox/image-20191110230601630.png" alt="image-20191110230601630"><figcaption aria-hidden="true">image-20191110230601630</figcaption></figure><p>æ›´æ”¹PDFæ–‡ä»¶å­˜å‚¨ä½ç½®ã€‚è¿™é‡Œæ˜¯æŠŠæ–‡ä»¶å‚¨å­˜åˆ°äº‘ç›˜çš„å…³é”®æ­¥éª¤ã€‚ä¸Šé¢é‚£ä¸ªæ›´æ”¹æ–‡ä»¶å­˜å‚¨åœ°å€çš„ä½œç”¨æ˜¯æŒ‡å®šæœªæ¥åŠ å…¥çš„PDFæ–‡ä»¶çš„å­˜å‚¨åœ°å€ï¼Œè€Œè¿™é‡Œæ˜¯æŠŠå·²ç»åœ¨åº“çš„æ–‡ä»¶ç§»åŠ¨åˆ°è¿™ä¸ªåœ°å€ã€‚ä¸¤ä¸ªåœ°å€ç›¸åŒã€‚</p><figure><img src="/2020/04/26/paper-zotero-dropbox/image-20191110230944192.png" alt="image-20191110230944192"><figcaption aria-hidden="true">image-20191110230944192</figcaption></figure><p>æ›´æ”¹é‡å‘½åç›¸å…³çš„è®¾ç½®ã€‚è¿™é‡Œçš„%yå°±æ˜¯è®ºæ–‡å‘è¡¨å¹´ä»½ï¼Œ%jæ˜¯æœŸåˆŠåï¼Œ%tæ˜¯è®ºæ–‡æ ‡é¢˜ã€‚è€Œä¸­é—´çš„ä¸‹åˆ’çº¿åˆ™åªæ˜¯å•çº¯çš„ä¼šåœ¨é‡å‘½ååçš„æ–‡ä»¶åä¸­çš„ä¸¤ä¸ªå…ƒç´ ä¹‹é—´åŠ ä¸€ä¸ªä¸‹æ»‘çº¿ç½¢äº†ï¼Œè¿™é‡Œå¯ä»¥æ›¿æ¢åšä»»æ„ã€‚</p><figure><img src="/2020/04/26/paper-zotero-dropbox/image-20191110230654373.png" alt="image-20191110230654373"><figcaption aria-hidden="true">image-20191110230654373</figcaption></figure><p>åœ¨ä½ çš„æ‰€æœ‰éœ€è¦åŒæ­¥çš„ç”µè„‘ä¸Šåšå®Œä¸Šè¿°æ­¥éª¤åï¼Œå¦‚æœä½ ä¹‹å‰æ²¡æœ‰Zoteroæˆ–å®ƒæ˜¯å…¨æ–°çš„æ²¡æœ‰æ¡ç›®ï¼Œé‚£ä½ çš„è®¾å®šå·²ç»ç»“æŸã€‚å¦‚æœåº“ä¸­å·²æœ‰å¾ˆå¤šè®ºæ–‡ï¼Œæƒ³è¦ç›´æ¥ç§»åŠ¨åˆ°Dropboxç›¸åº”ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆè¯·æ‰§è¡Œä¸‹ä¸€æ­¥ï¼š</p><ol start="4" type="1"><li>ç§»åŠ¨ä¸é‡å‘½åå·²æœ‰æ–‡ä»¶</li></ol><figure><img src="/2020/04/26/paper-zotero-dropbox/image-20191110231928468.png" alt="image-20191110231928468"><figcaption aria-hidden="true">image-20191110231928468</figcaption></figure><p>ç‚¹å‡» My Libraryï¼Œå…¨é€‰æ‰€æœ‰æ¡ç›®ï¼Œå³é”®é€‰æ‹©<code>Manage Attachments</code>-&gt;<code>Rename Attachments</code>å¼€å§‹ç§»åŠ¨å’Œé‡å‘½åã€‚</p><figure><img src="/2020/04/26/paper-zotero-dropbox/image-20191110232045736.png" alt="image-20191110232045736"><figcaption aria-hidden="true">image-20191110232045736</figcaption></figure><figure><img src="/2020/04/26/paper-zotero-dropbox/image-20191110232150562.png" alt="image-20191110232150562"><figcaption aria-hidden="true">image-20191110232150562</figcaption></figure><h3 id="ipadè®¾ç½®éƒ¨åˆ†">iPadè®¾ç½®éƒ¨åˆ†</h3><ol type="1"><li>ä¸‹è½½Dropboxå’ŒAcrobatã€‚</li><li>æ‰“å¼€Dropboxï¼Œè¿›å…¥ä½ çš„è®ºæ–‡åŒæ­¥æ–‡ä»¶å¤¹ï¼Œä»»é€‰ä¸€ç¯‡ç‚¹å‡»æ‰“å¼€</li><li>å³ä¸‹è§’æ‰¾åˆ°ä¸€ä¸ªå…‰æ ‡é”®ï¼Œç‚¹å‡»ï¼Œä¼šæç¤ºç”¨Adobe Acrobat Readeræ‰“å¼€ã€‚</li><li>All set.</li></ol><figure><img src="/2020/04/26/paper-zotero-dropbox/IMG_2601.jpg" alt="IMG_2601"><figcaption aria-hidden="true">IMG_2601</figcaption></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç®¡ç†å¥½è‡ªå·±æ‰‹ä¸­çš„è®ºæ–‡ï¼Œä¸è®©ä»–ä»¬è¢«åå™¬ä¸â€œDownloadâ€æ–‡ä»¶å¤¹çš„èŒ«èŒ«æ–‡ä»¶æµ·æ´‹ä¸­å·²éæ˜“äº‹ï¼Œè€Œèƒ½åœ¨éœ€è¦æ—¶è¿…é€Ÿå®šä½ï¼Œèƒ½åœ¨Windowsçš„Desktopä¸ä¾¿æºçš„MacBookä¸Šæ— ç¼å¯¹æ¥è®ºæ–‡åº“åˆ™éœ€è¦ç›¸å¯¹ç²¾ç»†åŒ–çš„ç®¡ç†ã€‚ç„¶è€Œï¼Œå¾ˆå¤šæ—¶å€™å¹¶ä¸é€‚åˆå±•å¼€è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘æ¥â€œéƒ‘é‡â€åœ°é˜…è¯»ä¸€ç¯‡è®ºæ–‡ï¼Œåœ¨ä¸€äº›ç›¸å¯¹é›¶ç¢çš„æ—¶é—´é‡Œéšæ‰‹æŠ½å‡ºåŒ…ä¸­çš„iPadï¼Œè¯»è¯»å‰é¢é¡ºæ‰‹å­˜ä¸‹çš„è®ºæ–‡ï¼Œåˆ™å¯å¤§å¤§å¢åŠ è‡ªå·±çš„å­¦æœ¯å¹¸ç¦æ„Ÿã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="paper" scheme="https://www.miracleyoo.com/tags/paper/"/>
    
    <category term="tool" scheme="https://www.miracleyoo.com/tags/tool/"/>
    
  </entry>
  
  <entry>
    <title>é¿å…è„æ´»ï¼Œå®Œç¾ä½¿ç”¨Markdownåœ¨çŸ¥ä¹ç¼–è¾‘å†…å®¹</title>
    <link href="https://www.miracleyoo.com/2020/04/26/markdown-4-zhihu/"/>
    <id>https://www.miracleyoo.com/2020/04/26/markdown-4-zhihu/</id>
    <published>2020-04-27T01:01:57.000Z</published>
    <updated>2021-03-12T09:09:03.150Z</updated>
    
    <content type="html"><![CDATA[<p>çŸ¥ä¹ä¸Šçš„æœ¬æ–‡é“¾æ¥ï¼š<a href="https://zhuanlan.zhihu.com/p/97455277">Link</a></p><p>é¦–å…ˆåæ§½ä¸€ä¸‹çŸ¥ä¹çš„ç¼–è¾‘å™¨ã€‚è™½ç„¶ä¸ªäººåšå®¢ä¸Šçš„ä¸å°‘å†…å®¹éƒ½æ›¾æœ‰æƒ³è¿‡æ¬åˆ°çŸ¥ä¹ä¸€ä»½ï¼Œä½†æ˜¯çŸ¥ä¹çš„ç¼–è¾‘å™¨çœŸçš„æ˜¯ä»¤äººç»æœ›å¼çš„éš¾ç”¨ã€‚å°½ç®¡ç°åœ¨å¯ä»¥ä½¿ç”¨æ–‡ä»¶å¯¼å…¥åŠŸèƒ½å¯¼å…¥mdæ–‡ä»¶å’ŒWordæ–‡æ¡£ï¼Œä¸”èƒ½æ”¯æŒä¸€äº›ç®€å•çš„Markdownè¯­æ³•ï¼Œä½†æ¯ç§é€”å¾„éƒ½æœ‰ç€æ— æ³•é¿å…çš„ç¼ºç‚¹ï¼Œä»ç»“æœä¸Šæ¥è¯´åˆ™æ˜¯åªèƒ½è¢«è¿«æ¥å—æˆ–æ˜¯ä¸å®Œç¾çš„æ ¼å¼äº¦æˆ–æ˜¯å¤§é‡æ‰‹åŠ¨ä¸”é‡å¤çš„å›¾ç‰‡ä¸Šä¼ ã€‚</p><p>å£è¯´æ— å‡­ï¼Œè¿™é‡Œæ”¾ä¸€ä¸‹å‡ ç§æ–¹æ³•çš„å¯¹æ¯”å›¾æ¥è¯¦è¿°ä¸€ä¸‹é—®é¢˜æ‰€åœ¨ï¼š</p><span id="more"></span><h3 id="typoraä¸­åŸæ–‡ä»¶">Typoraä¸­åŸæ–‡ä»¶</h3><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214174243537.png" alt="image-20191214174243537" style="zoom:50%;"></p><p>è¿™ä»½æµ‹è¯•æ–‡ä»¶è™½ç„¶çŸ­ï¼Œä½†æ˜¯åŸºæœ¬åŒ…å«äº†å¸¸è§å‡ ç§è¦ç´ ï¼šæ ‡é¢˜ã€æ­£æ–‡ã€å›¾ç‰‡ã€è¡¨æ ¼ã€ä»£ç ã€å…¬å¼ã€‚ä¸‹é¢è®©æˆ‘ä»¬çœ‹çœ‹çŸ¥ä¹æ”¯æŒçš„å‡ ç§ä¸Šä¼ æ–¹å¼çš„æ•ˆæœï¼š</p><h3 id="ç›´æ¥å¤åˆ¶typoraä¸­çš„å†…å®¹åˆ°çŸ¥ä¹ç¼–è¾‘å™¨">1. ç›´æ¥å¤åˆ¶Typoraä¸­çš„å†…å®¹åˆ°çŸ¥ä¹ç¼–è¾‘å™¨</h3><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214174118623.png" alt="image-20191214174118623" style="zoom:50%;"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ ‡é¢˜å’Œæ­£æ–‡åŒºåˆ†å¼€äº†ï¼Œä¸è¿‡æ‰€æœ‰çš„æ ‡é¢˜éƒ½å˜æˆäº†ä¸€çº§æ ‡é¢˜ã€‚å¦å¤–æœ¬åœ°çš„å›¾ç‰‡æ— æ³•å¯¼å…¥ï¼Œåªå‰©ä¸‹ä¸€ä¸ªå±•å ä½ç¬¦ã€‚è¡¨æ ¼å…¨ä¹±ï¼Œå…¬å¼ç›´æ¥æ¶ˆå¤±äº†ã€‚ä½†ä»£ç çš„é«˜äº®ä»æ˜¯C++ï¼Œæ­£ç¡®ã€‚</p><h3 id="ç›´æ¥å¯¼å…¥markdownæ–‡ä»¶">2. ç›´æ¥å¯¼å…¥Markdownæ–‡ä»¶</h3><p>ä½ å¯ä»¥åœ¨ç¼–è¾‘å™¨çš„è¿™ä¸ªä½ç½®å¯¼å…¥æ–‡ä»¶ï¼š</p><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214174529632.png" alt="image-20191214174529632" style="zoom:33%;"></p><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214174506716.png" alt="image-20191214174506716" style="zoom:33%;"></p><p>å¯¼å…¥åˆšæ‰æˆ‘ä»¬çœ‹åˆ°çš„æµ‹è¯•æ–‡ä»¶åŸæ¡£çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214174704023.png" alt="image-20191214174704023" style="zoom:50%;"></p><p>åŒå‰ï¼Œæ ‡é¢˜å’Œæ­£æ–‡åŒºåˆ†å¼€äº†ï¼Œä¸è¿‡æ‰€æœ‰çš„æ ‡é¢˜éƒ½å˜æˆäº†ä¸€çº§æ ‡é¢˜ã€‚å¦å¤–æœ¬åœ°çš„å›¾ç‰‡æ— æ³•å¯¼å…¥ï¼Œåªå‰©ä¸‹ä¸€ä¸ªå ä½ç¬¦ã€‚è¡¨æ ¼å…¨ä¹±ï¼Œå…¬å¼æ²¡æœ‰æ¶ˆå¤±ï¼Œä½†ä¹Ÿå¹¶æ²¡æœ‰è¢«æ¸²æŸ“ã€‚ä»£ç çš„é«˜äº®ä»æ˜¯C++ï¼Œæ­£ç¡®ã€‚</p><h3 id="å…ˆä½¿ç”¨typoraå¯¼å‡ºä¸ºwordå†ç”¨çŸ¥ä¹ç¼–è¾‘å™¨å¯¼å…¥word">3. å…ˆä½¿ç”¨Typoraå¯¼å‡ºä¸ºWordï¼Œå†ç”¨çŸ¥ä¹ç¼–è¾‘å™¨å¯¼å…¥Word</h3><p>ä¸Šé¢çš„ä¸¤ç§æœ€ç›´è§‚çš„æ–¹æ³•çš„ä¸€å¤§é—®é¢˜å°±æ˜¯å›¾ç‰‡å¯¼å…¥ä¸è¿›å»ã€‚è€Œå¯¹äºä¸€äº›é•¿ç¯‡çš„ç§‘æŠ€æ–‡ç« ï¼Œå›¾ç‰‡æ—¢å¤šåˆé‡è¦ï¼Œæ‰‹åŠ¨ä¸€ä¸ªä¸ªæ·»åŠ å®¹æ˜“é”™è€Œä¸”æµªè´¹ç§‘ç ”äººå‘˜çš„æ—¶é—´å’Œçƒ­æƒ…ã€‚å½“ç„¶æˆ‘çŸ¥é“å¯¼å…¥Markdownæ—¶å¹¶æ²¡æœ‰é¡ºå¸¦æŠŠå›¾ç‰‡æœ¬èº«å¯¼å…¥è¿›å»ï¼Œä½†æˆ‘ä»è§‰å¾—è¿™æ˜¯çŸ¥ä¹å›¢é˜Ÿåº”è¯¥åšçš„å·¥ä½œï¼Œè€Œä¸”æ˜¯ç›¸å½“åŸºæœ¬çš„å·¥ä½œã€‚å¥½å§ï¼Œæ—¢ç„¶ç°åœ¨ä¸å¯è¡Œï¼Œé‚£ä¹ˆå¯¼å‡ºæˆWordå†å¯¼å…¥è¯¥ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜äº†å§ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼š</p><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214175626414.png" alt="image-20191214175626414" style="zoom:50%;"></p><p>å¥½å®¶ä¼™ï¼Œå›¾ç‰‡å¯¼å…¥è¿›å»äº†ï¼Œè¡¨æ ¼ç›´æ¥ç‚¸é£å¤©äº†ï¼Œè€Œä¸”æ›´å¯æ°”çš„æ˜¯ä»£ç çš„é«˜äº®æ²¡äº†ï¼Œæ ¼å¼ä¹Ÿå‡ºç°äº†é—®é¢˜ã€‚å…¶ä»–çš„å˜›ï¼Œä¸çœ‹ä¸å¾—äº†ï¼Œä¸€çœ‹å‘ç°å…¬å¼ä¼¼ä¹ç›´æ¥æ²¡äº†ï¼Œä¸­é—´è¿˜è«åå…¶å¦™å¤šäº†ä¸€å †ç©ºè¡Œã€‚å½“ç„¶ï¼Œæ ‡é¢˜ç­‰çº§çš„é—®é¢˜è¿˜æ˜¯æ²¡è§£å†³ã€‚</p><p>é‚£æ˜¯Typoraå¯¼å‡ºWordå¯¼å‡ºçš„ä¸å¥½å—ï¼Ÿæˆ‘æ‰“å¼€äº†å¯¼å‡ºçš„Wordæ–‡ä»¶ï¼š</p><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214180048117.png" alt="image-20191214180048117" style="zoom:50%;"></p><p>å…¬å¼å­˜åœ¨ï¼Œé«˜äº®æ­£ç¡®ï¼Œæ ‡é¢˜ç­‰çº§æ­£ç¡®ï¼Œè¡¨æ ¼æ­£ç¡®ï¼Œæ²¡æœ‰å¥‡æ€ªçš„ç©ºè¡Œã€‚è™½ç„¶å’ŒMarkdownæ¸²æŸ“çš„ç»“æœç›¸æ¯”ä¹Ÿå¹¶ä¸å¥½çœ‹è¯´å®è¯ï¼Œä½†è‡³å°‘å®ƒæ˜¯å¯¹çš„ï¼Œè€ŒçŸ¥ä¹ç¼–è¾‘å™¨é”™çš„äº”èŠ±å…«é—¨ã€‚</p><h2 id="é‚£ä¹ˆå¦‚ä½•æ‹¯æ•‘è‡ªå·±çš„åŒæ‰‹å’Œçµé­‚å‘¢">é‚£ä¹ˆï¼Œå¦‚ä½•æ‹¯æ•‘è‡ªå·±çš„åŒæ‰‹å’Œçµé­‚å‘¢ï¼Ÿ</h2><h3 id="é¦–å…ˆè°ƒæ•´å¥½ä½ çš„markdownç¼–è¾‘å™¨">é¦–å…ˆè°ƒæ•´å¥½ä½ çš„Markdownç¼–è¾‘å™¨</h3><p>ä¸ºä»€ä¹ˆè¦é¦–å…ˆè°ƒæ•´å¥½ç¼–è¾‘å™¨å‘¢ï¼Ÿè¿™é‡Œæˆ‘è¯´çš„è°ƒæ•´ä¸»è¦æŒ‡çš„æ˜¯å¯¹å›¾ç‰‡ç®¡ç†æ–¹å¼çš„è°ƒæ•´ã€‚å¦‚æœæ‚¨ä½¿ç”¨Typoraï¼Œå»ºè®®åœ¨åå¥½è®¾ç½®é¡µé¢å°†ç›¸å…³å‚æ•°è°ƒæ•´è‡³å’Œä¸‹å›¾å®Œå…¨ä¸€è‡´ï¼Œä»¥é˜²åé¢å‡ºç°é—®é¢˜ã€‚</p><p>è¿™é‡Œåšçš„å·¥ä½œä¸»è¦æ˜¯å°†æ‰€æœ‰æ¥æºçš„å›¾ç‰‡éƒ½è‡ªåŠ¨ä¿å­˜è‡³åŒåæ–‡ä»¶å¤¹ä¸‹ï¼Œä»¥ç›¸å¯¹è·¯å¾„å‚¨å­˜ã€‚ä½¿ç”¨å…¶ä»–Markdownç¼–è¾‘å™¨çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥å¯¹ç…§è°ƒæ•´ã€‚è¿™ä¹ˆåšçš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿åé¢å¯¹å›¾ç‰‡çš„æ‰¹é‡ä¸Šä¼ ä¸è½¬æ¢ã€‚</p><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214221536561.png" alt="image-20191214221536561" style="zoom:50%;"></p><p>ç›¸ä¿¡å¾ˆå¤šåŒå­¦çœ‹åˆ°è¿™é‡Œå°±ä¼šå‘å‡ºç–‘é—®ï¼Œä¸ºä»€ä¹ˆä¸é€‚ç”¨iPicä¹‹ç±»çš„å›¾åºŠè½¯ä»¶ç›´æ¥ä¸Šä¼ è‡³å›¾åºŠå‘¢ï¼Ÿæ—¢æ–¹ä¾¿åˆèˆ’é€‚ã€‚æˆ‘çš„ç­”æ¡ˆæ˜¯ï¼Œå› ä¸ºæˆ‘åƒè¿‡äºã€‚æˆ‘çš„å†…å®¹ä¹‹å‰ä¸€ç›´ç‹¬å‘äºæˆ‘çš„ä¸ªäººåšå®¢ï¼Œç„¶è€Œä»Šå¹´ä¸­æ—¬ï¼Œçªç„¶ä¹‹é—´æ•´ä¸ªç½‘ç«™æ‰€æœ‰çš„å›¾ç‰‡éƒ½æŒ‚æ‰äº†ï¼Œåªæ˜¾ç¤ºä¸€ä¸ªå ä½ç¬¦å’Œæ— æ³•è®¿é—®çš„æç¤ºï¼Œä¹‹åæˆ‘å‘ç°ä¹‹å‰ä½¿ç”¨çš„æ–°æµªå›¾åºŠåŠ å…¥äº†é˜²ç›—é“¾ï¼Œæ‰€ä»¥å°±GGäº†ã€‚å½“ç„¶åé¢æˆ‘ä¹Ÿç”¨Pythonå†ä¸€æ¬¡è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯¹è§£å†³æ–¹æ³•æ„Ÿå…´è¶£çš„å›¾å½¢å¯ä»¥ç§»æ­¥è¿™é‡Œï¼Œç„¶è€Œè¿™ä¸€æ¬¡çš„æ•™è®­è®©æˆ‘ç†è§£äº†è¿™äº›å›¾åºŠ<strong>å¹¶ä¸å¯æ§</strong>ã€‚å®ƒä»¬éšæ—¶å¯ä»¥å‰¥å¤ºæ‰ä½ åšå®¢ä¸­çš„å…¨éƒ¨å›¾ç‰‡ï¼Œè€Œä½ æ˜¯æ— åŠ›è‡³æçš„ã€‚</p><p>åœ¨é‚£ä¹‹åï¼Œæˆ‘å°±é€‰æ‹©äº†æœ¬åœ°å‚¨å­˜+Githubå¤‡ä»½çš„æ¨¡å¼ï¼Œè¿™æ ·æ—¢å¯ä»¥æ°¸ä¹…æœ‰å®‰å¿ƒçš„æœ¬åœ°æ¡£ï¼Œä¹Ÿæœ‰æ–¹ä¾¿ä½¿ç”¨çš„Githubé“¾æ¥ï¼Œå¯ä»¥è¯´æ˜¯æ—¢æ–¹ä¾¿åˆå®‰å…¨ã€‚</p><h3 id="ä¹‹åè§£å†³å›¾ç‰‡ä¸Šä¼ é—®é¢˜">ä¹‹åè§£å†³å›¾ç‰‡ä¸Šä¼ é—®é¢˜</h3><p>æœ€æ–¹ä¾¿çš„è§£å†³åŠæ³•å³ä¸ºåˆ©ç”¨å¥½GitHubçš„èµ„æºäº†ã€‚å»ºç«‹ä¸€ä¸ªPublicçš„GitHubä»“åº“ï¼Œè¿™é‡Œæˆ‘å‘½åä½œ<strong><a href="https://github.com/miracleyoo/Markdown4Zhihu">Markdown4Zhihu</a></strong>ï¼Œæ³¨æ„ä¸€å®šè¦ä¸ºPublicï¼Œå¦åˆ™çŸ¥ä¹æ— æ³•è®¿é—®è¿™äº›å›¾ç‰‡ã€‚</p><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214221339326.png" alt="image-20191214221339326" style="zoom:50%;"></p><p>å½“ç„¶ï¼Œå¦‚æœä½ è§‰å¾—éº»çƒ¦ï¼Œä¹Ÿå¯ä»¥ç›´æ¥folkæˆ‘å»ºå¥½çš„ä»“åº“ï¼Œä¸€ä¼šå„¿æˆ‘ä»¬è¦æåˆ°çš„â€œä¸€é”®MarkdownçŸ¥ä¹é€‚é…è„šæœ¬â€ä¹Ÿä¼šåœ¨è¿™ä¸ªä»“åº“é‡Œã€‚ä½ åªéœ€è¦å°†ä½ çš„æ–‡ä»¶å’Œç›¸åº”çš„å›¾ç‰‡æ–‡ä»¶å¤¹æ”¾åˆ°è¿™ä¸ª<code>Data</code>å­ç›®å½•ä¸‹ï¼Œå³å¯è°ƒç”¨è„šæœ¬ä¸€é”®è½¬æ¢ï¼Œå¹¶å°†æ¶‰åŠåˆ°çš„å›¾ç‰‡è‡ªåŠ¨æ¨åˆ°ä½ ç›¸åº”çš„GitHubä»“åº“ä¸­ã€‚</p><p><img src="/2020/04/26/markdown-4-zhihu/image-20191214213407292.png" alt="image-20191214213407292" style="zoom:50%;"></p><p>è¿™æ˜¯æˆ‘ä»¬ä½¿ç”¨è„šæœ¬ä¸€é”®è½¬æ¢åçš„ç»“æœã€‚å®ƒå¾ˆå¥½çš„è§£å†³çš„å›¾ç‰‡ä¸Šä¼ çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†ä»£ç æ®µçš„é«˜äº®ï¼ŒåŒæ—¶ï¼Œæ‰€æœ‰çš„è¡Œå†…å…¬å¼å’Œå¤šè¡Œå…¬å¼éƒ½å¾—åˆ°äº†è½¬æ¢ã€‚è½¬æ¢åçš„å…¬å¼åœ¨çŸ¥ä¹ä¸Šä¼ æ–‡ä»¶ä¹‹åï¼Œæ˜¯å¯äº¤äº’çš„ï¼Œå³ä½ å¯ä»¥åœ¨ä¸Šä¼ ä¹‹ååœ¨çŸ¥ä¹ç¼–è¾‘å™¨ä¸­ä¿®æ”¹ä½ çš„å…¬å¼ï¼Œè€Œä¸å¿…é‡æ–°å†æ¥ä¸€éã€‚</p><p>è‡³äºè¡¨æ ¼ï¼Œè¿™ä¸ªçœŸæœ¨å¾—åŠæ³•ï¼Œå› ä¸ºçŸ¥ä¹å‹æ ¹ä¸æ”¯æŒè¡¨æ ¼ä½ è¯´è¿™å’‹æ•´å˜›ã€‚ä½†æ˜¯ä¹Ÿä¸æ˜¯æ²¡æœ‰å¯æ›¿ä»£æ–¹æ¡ˆã€‚å¦‚æœè¡¨æ ¼ä¸æ˜¯å¾ˆå¤šï¼Œä½ å¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œæˆªå›¾ï¼Œåˆ å»åŸä»£ç åç²˜è´´æˆªå›¾ã€‚ä¹‹åå®ƒå°±ä¼šæŒ‰ç…§å›¾ç‰‡æ¨¡å¼è¢«å…¼å®¹ä¸Šå»ã€‚å¦‚æœä½ ä¸æƒ³æˆªå›¾ä¹Ÿå¯ï¼Œåšäº†ç›¸åº”æ“ä½œåä¼šå¾—åˆ°ä¸Šå›¾çš„ç»“æœï¼Œå¯¹äºå°‘é‡è¡¨æ ¼æ¥çœ‹ä¹Ÿæ˜¯OKçš„ã€‚ä½ å¯ä»¥åœ¨<a href="https://zhuanlan.zhihu.com/p/97432671">è¿™é‡Œ</a>çœ‹åˆ°ä¸Šä¼ åˆ°çŸ¥ä¹åçš„æ•ˆæœã€‚</p><h3 id="æœ€åæ˜¯å…·ä½“ä½¿ç”¨æµç¨‹">æœ€åæ˜¯å…·ä½“ä½¿ç”¨æµç¨‹</h3><p>è¿™é‡Œæˆ‘ä»¬å‡è®¾æ‚¨çš„æ–‡ä»¶åä¸º<code>ä¸€ä¸ªæµ‹è¯•æ–‡æ¡£.md</code>ï¼Œå¹¶å°†å…¶å’ŒåŒåå›¾ç‰‡æ–‡ä»¶å¤¹æ”¾åˆ°<code>Data</code>ç›®å½•ä¸‹ï¼ˆå¦‚æœæ–°å»ºæ–‡ä»¶æ—¶å°±ç›´æ¥åœ¨Dataé‡Œé¢å»ºä¼šæ›´åŠ æ–¹ä¾¿ï¼‰ï¼Œæ¥ç€æ‰“å¼€terminal(Linux/MacOS)æˆ–Git Bash(Windows)(æˆ–å…¶ä»–ä»»ä½•æ”¯æŒGitå‘½ä»¤çš„ç»ˆç«¯)ï¼Œ<code>cd</code>è¿›å…¥è¯¥é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œå³<code>Markdown4Zhihu</code>ç›®å½•ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><p><code>python zhihu-publisher.py --input="./Data/ä¸€ä¸ªæµ‹è¯•æ–‡æ¡£.md"</code></p><p>OKï¼Œall set. åœ¨<code>Data</code>ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ª<code>ä¸€ä¸ªæµ‹è¯•æ–‡æ¡£_for_zhihu.md</code>çš„æ–‡ä»¶ï¼Œå°†å®ƒä¸Šä¼ è‡³çŸ¥ä¹ç¼–è¾‘å™¨å³å¯ã€‚</p><p>PS: è„šæœ¬ä½¿ç”¨Python3ï¼ŒPython2å¯èƒ½ä¼šæœ‰æ½œåœ¨é—®é¢˜ã€‚</p><h2 id="æœ€åçš„è¯">æœ€åçš„è¯</h2><p>çŸ¥ä¹çš„å¼€å‘è€…çš„é€»è¾‘å…¶å®æˆ‘çœŸçš„æ¯”è¾ƒè¿·ï¼Œæˆ‘ä»¬å¤§å­¦å­¦ç”Ÿå›¢é˜Ÿçš„è‡ªå»ºè®ºå›éƒ½å¯ä»¥åŸç”Ÿå®Œç¾æ”¯æŒMarkdownå’Œå…¬å¼ï¼Œç„¶è€ŒçŸ¥ä¹å´ä¸€ç›´è¯´è¿™ä¸ªåŠŸèƒ½å¿…è¦æ€§ä¸è¶³å¼ºè°ƒå¼€å‘éš¾åº¦ã€‚åŒæ ·ä»¤äººéš¾å—çš„æ˜¯çŸ¥ä¹çš„æœç´¢ï¼Œå¤šå°‘å¹´è¿‡å»äº†éçƒ­é—¨è¯é¢˜è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„éš¾ç”¨ï¼Œæœç´¢è¿˜æ˜¯å€ŸåŠ©Google çš„ â€œé—®é¢˜+çŸ¥ä¹â€ã€‚ä¸çŸ¥é“è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Œä¸è¿‡è¿˜æ˜¯å¸Œæœ›çŸ¥ä¹å›¢é˜Ÿå…ˆæŠŠè¿™äº›éå¸¸åŸºç¡€çš„ä¸œè¥¿åšå¥½å†å¤§è°ˆç”¨æˆ·ä½“éªŒã€‚</p><p>è¿™æ¬¡çš„è§£å†³æ–¹æ¡ˆéœ€è¦å¯¹GitHubå’Œå‘½ä»¤è¡Œæœ‰åŸºç¡€çš„äº†è§£ï¼Œä¸è¿‡è€ƒè™‘åˆ°ä¼šæ¥è¯»è¿™ç¯‡æ–‡ç« çš„äººåº”è¯¥ç¨‹åºå‘˜å±…å¤šï¼Œé—®é¢˜åº”è¯¥ä¸æ˜¯å¾ˆå¤§ã€‚è„šæœ¬è¿˜æ¯”è¾ƒæ–°ï¼Œå¦‚æœæœ‰bugæ¬¢è¿æå‡ºã€‚æœ€åå†æ”¾ä¸€ä¸‹GitHubé“¾æ¥ï¼Œå¦‚æœå®ƒæœ‰å¸®åˆ°ä½ ï¼Œå¸Œæœ›èƒ½éšæ‰‹ç•™ä¸‹ä¸€ä¸ªstarï¼Œè°¢è°¢ï¼<strong><a href="https://github.com/miracleyoo/Markdown4Zhihu">Markdown4Zhihu</a></strong></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;çŸ¥ä¹ä¸Šçš„æœ¬æ–‡é“¾æ¥ï¼š&lt;a href=&quot;https://zhuanlan.zhihu.com/p/97455277&quot;&gt;Link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåæ§½ä¸€ä¸‹çŸ¥ä¹çš„ç¼–è¾‘å™¨ã€‚è™½ç„¶ä¸ªäººåšå®¢ä¸Šçš„ä¸å°‘å†…å®¹éƒ½æ›¾æœ‰æƒ³è¿‡æ¬åˆ°çŸ¥ä¹ä¸€ä»½ï¼Œä½†æ˜¯çŸ¥ä¹çš„ç¼–è¾‘å™¨çœŸçš„æ˜¯ä»¤äººç»æœ›å¼çš„éš¾ç”¨ã€‚å°½ç®¡ç°åœ¨å¯ä»¥ä½¿ç”¨æ–‡ä»¶å¯¼å…¥åŠŸèƒ½å¯¼å…¥mdæ–‡ä»¶å’ŒWordæ–‡æ¡£ï¼Œä¸”èƒ½æ”¯æŒä¸€äº›ç®€å•çš„Markdownè¯­æ³•ï¼Œä½†æ¯ç§é€”å¾„éƒ½æœ‰ç€æ— æ³•é¿å…çš„ç¼ºç‚¹ï¼Œä»ç»“æœä¸Šæ¥è¯´åˆ™æ˜¯åªèƒ½è¢«è¿«æ¥å—æˆ–æ˜¯ä¸å®Œç¾çš„æ ¼å¼äº¦æˆ–æ˜¯å¤§é‡æ‰‹åŠ¨ä¸”é‡å¤çš„å›¾ç‰‡ä¸Šä¼ ã€‚&lt;/p&gt;
&lt;p&gt;å£è¯´æ— å‡­ï¼Œè¿™é‡Œæ”¾ä¸€ä¸‹å‡ ç§æ–¹æ³•çš„å¯¹æ¯”å›¾æ¥è¯¦è¿°ä¸€ä¸‹é—®é¢˜æ‰€åœ¨ï¼š&lt;/p&gt;</summary>
    
    
    
    
    <category term="tool" scheme="https://www.miracleyoo.com/tags/tool/"/>
    
    <category term="markdown" scheme="https://www.miracleyoo.com/tags/markdown/"/>
    
    <category term="math" scheme="https://www.miracleyoo.com/tags/math/"/>
    
  </entry>
  
  <entry>
    <title>Dockerä¸Nivida-Dockerçš„ç”¨æ³•ä¸æ³¨æ„äº‹é¡¹</title>
    <link href="https://www.miracleyoo.com/2020/04/26/docker-et-nvidia/"/>
    <id>https://www.miracleyoo.com/2020/04/26/docker-et-nvidia/</id>
    <published>2020-04-27T00:56:52.000Z</published>
    <updated>2021-03-12T08:58:20.777Z</updated>
    
    <content type="html"><![CDATA[<h2 id="docker-images-and-containers">Docker Images and Containers</h2><ul><li><p>æ¸…é™¤æ‰€æœ‰å·²ç»åœæ­¢çš„containerï¼š<code>docker container prune -f</code> ã€‚å…¶ä¸­ <code>-f</code> è¡¨ç¤ºä¸å¼¹å‡ºç¡®è®¤æç¤ºã€‚ä¹Ÿå¯ä½¿ç”¨<code>docker rm $(docker ps -a -q)</code>æ¥æ¸…ç†ã€‚å…¶ä¸­ï¼Œ<code>docker rm</code>ä»£è¡¨åˆ é™¤containerï¼Œè€Œ<code>docker rmi</code>åˆ™æ˜¯åˆ é™¤imageã€‚</p></li><li><p>å¦‚æœä½ éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªåªç”¨ä¸€æ¬¡çš„containerï¼Œé‚£ä¹ˆä½¿ç”¨<code>docker run --rm</code>å‚æ•°ï¼Œç»“æŸåä¼šè‡ªåŠ¨åˆ é™¤ã€‚</p><span id="more"></span></li><li><p><code>docker ps &lt;-a&gt;</code> å¯ä»¥åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„/å…¨éƒ¨çš„containerã€‚å…¶æ•ˆæœå’Œ<code>docker container ls &lt;-a&gt;</code>ç›¸åŒã€‚è€Œè‹¥æƒ³åˆ—å‡ºå…¨éƒ¨imagesï¼Œåˆ™è¦ä½¿ç”¨<code>docker images</code>ã€‚</p></li><li><p>docker imagesä¸­çš„ç¯å¢ƒå˜é‡æœ‰å››ä¸ªæ¥æºï¼š</p><ol type="1"><li>Dockerfileä¸­é€šè¿‡<code>ENV</code>æŒ‡ä»¤æ·»åŠ çš„ç¯å¢ƒå˜é‡ï¼Œå¦‚<code>ENV PATH /opt/conda/bin:$PATH</code></li><li>Dockerfileä¸­é€šè¿‡ä¿®æ”¹<code>/root/.bashrc</code>æ–‡ä»¶ä½¿ç”¨<code>export</code>å‘½ä»¤æ·»åŠ åˆ°bashä¸­çš„ç¯å¢ƒå˜é‡ï¼Œå¦‚<code>export PATH=/OPT/conda/bin:$PATH</code>å‘½ä»¤ã€‚</li><li>åœ¨é€šè¿‡imageå®ä¾‹åŒ–containeræ—¶æ·»åŠ <code>-e</code>æˆ–<code>--env</code>å‚æ•°æ¥æ·»åŠ åˆ°ç¯å¢ƒä¸­çš„å˜é‡ã€‚è¿™ä¸ªæ–¹æ³•æœ‰å±€é™æ€§ï¼Œå®ƒä¸èƒ½å®Œæˆå¯¹å·²æœ‰å˜é‡çš„â€œæ·»åŠ â€æ“ä½œï¼Œåªèƒ½æ–°å»ºä¸€ä¸ªæ–°çš„ç¯å¢ƒå˜é‡ï¼Œå¦‚<code>--env NEW_VAR=/opt/conda/bin</code></li><li>åœ¨<code>docker run</code>æœ«ç«¯çš„containerå†…å‘½ä»¤çš„å‰é¢æ·»åŠ ä¸€å¥<code>export</code>å¼•å¯¼çš„å‘½ä»¤ï¼Œå¦‚ï¼š<code>docker run -it -v $(PWD):/app debian:jessie bash -c 'export PATH=$PATH:/opt/conda/bin; bash'</code>ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯è¾ƒä¸ºå¤æ‚ã€‚</li></ol><p>å…¶ä¸­ï¼Œå¦‚æœèƒ½æ‰¾åˆ°æºDockerfileï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯é€šè¿‡ä¿®æ”¹Dockerfileç„¶åé‡æ–°buildå¾—åˆ°ä¸€ä¸ªè‡ªå·±çš„ç‰ˆæœ¬ã€‚å…¶æ¬¡æ˜¯æ–¹æ³•ä¸‰ï¼Œå®åœ¨ä¸è¡Œä½¿ç”¨æ–¹æ³•å››ã€‚å¦‚æœå…ˆè¿›å…¥bashå†è¿è¡Œå‘½ä»¤å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œè€Œç›´æ¥ä½¿ç”¨<code>docker run</code>å‡ºç°äº†ç¯å¢ƒå˜é‡ç›¸å…³çš„å¤±è´¥æç¤ºï¼Œå¾ˆå¯èƒ½æ˜¯ç”±äºDockerfileå†™çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯åœ¨<code>/root/.bashrc</code>ä¸­æ·»åŠ ç¯å¢ƒå˜é‡çš„æ–¹æ³•æ‰€è‡´ã€‚</p></li><li><p>å¦‚æœéœ€è¦ä¸€ä¸ªcontaineré•¿æœŸåœ¨åå°å¾…æœºå€™å‘½ï¼Œé‚£å¯ä»¥ä½¿ç”¨<code>-d</code>æˆ–<code>--detach</code>é€‰é¡¹å»ºç«‹ä¸€ä¸ªä¸€ç›´å¾…æœºçš„dockerè¿›ç¨‹ã€‚ä½¿ç”¨æ–¹æ³•ï¼š</p><ol type="1"><li><code>docker run -itd --name NAME xxx/xxx:xx /bin/bash</code></li><li><code>docker exec -it NAME your-command</code></li></ol></li><li><p>å¯åŠ¨æ—¶å¦‚æœéœ€è¦å¯¹æœ¬åœ°æ–‡ä»¶å¤¹å’ŒDockerå†…éƒ¨æ–‡ä»¶å¤¹åšæ˜ å°„ï¼Œåˆ™ä½¿ç”¨<code>docker run -v &lt;LOCAL_FOLDER&gt;:&lt;DOCKER_FOLDER&gt;</code> ã€‚ è¯¥å‚æ•°å¯ä»¥å¤æ•°æ¬¡å‡ºç°ï¼Œå¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">    -v <span class="variable">$AUDIO_IN</span>:/input \</span><br><span class="line">    -v <span class="variable">$AUDIO_OUT</span>:/output \</span><br><span class="line">    -v <span class="variable">$MODEL_DIRECTORY</span>:/model \</span><br><span class="line">    -e MODEL_PATH=/model \</span><br><span class="line">    researchdeezer/spleeter \</span><br><span class="line">    separate -i /input/audio_1.mp3 /input/audio_2.mp3 -o /output</span><br></pre></td></tr></table></figure></li><li><p>docker runæ‰€æœ‰çš„å‚æ•°éƒ½åº”è¯¥å†™åœ¨é•œåƒåå­—<code>xxx/xxx:xx</code>å‰é¢ï¼Œå†™åœ¨å…¶åé¢çš„ç»Ÿç»Ÿä¼šè¢«è§†ä½œåœ¨docker containerä¸­è¿è¡Œçš„å‘½ä»¤æˆ–å‘½ä»¤å‚æ•°ã€‚</p></li><li><p>å¦‚æœä½ æœ‰äº†ä¸€ä¸ªåœ¨åå°æŒç»­è¿è¡Œçš„containerï¼Œä¸”ä½ æƒ³å¼„ä¸€ä¸ªäº¤äº’æ€§bashï¼Œæ­¤æ—¶ä½ ä»éœ€è¦åŠ ä¸Š<code>-it</code>å‚æ•°ï¼ŒåŒæ ·æ˜¯åœ¨<code>docker exec</code>åï¼Œcontaineråå­—å‰åŠ éœ€è¦çš„å‚æ•°ï¼Œrestartå’ŒstartåŒç†ã€‚</p></li><li><p>å¦‚æœä½ å¯¹ä½œè€…çš„Docker Imageä¸æ»¡æ„ï¼Œéœ€è¦ä¿®æ”¹ï¼Œæ­¤æ—¶æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ol type="1"><li>æ‰¾åˆ°Dockerfileå¹¶ä¿®æ”¹ï¼Œ<code>docker build</code>ï¼Œ<code>docker push</code></li><li>ä½¿ç”¨bashè¿›å…¥ä¸€ä¸ªå®ä¾‹åŒ–çš„Imageï¼Œåœ¨é‡Œé¢åšä¸€é€šæ“ä½œï¼Œå‡ºæ¥åä½¿ç”¨<code>docker commit -m &lt;YOUR_MESSAGE&gt; -a &lt;AUTHOR_NAME&gt; &lt;CONTAINER_ID&gt; &lt;DOCKERHUB_USERNAME/NEW_IMAGE_NAME:TAG&gt;</code>æäº¤æ›´æ”¹ä½¿å…¶ä¿å­˜ä¸ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œæœ€åä½¿ç”¨<code>docker push</code>æ¨é€æ–°çš„é•œåƒåˆ°docker hubã€‚å¦‚æœå‘½åæœ‰è¯¯æˆ–å¿˜è®°æ·»åŠ docker hub usernameä½œä¸ºå‰ç¼€ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>docker tag &lt;existing-image&gt; &lt;hub-user&gt;/&lt;repo-name&gt;[:&lt;tag&gt;]</code>æ”¹åã€‚</li></ol><p>æ³¨æ„ï¼Œä½¿ç”¨<code>docker push</code>éœ€è¦æœ‰docker hubè´¦å·ï¼Œå¹¶åœ¨pushå‰ä½¿ç”¨<code>docker login</code>æ“ä½œç™»å½•ã€‚</p></li><li><p>ä¸€ä¸ªè¾¨æï¼š<code>docker commit</code>é’ˆå¯¹çš„æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„containerï¼Œä½¿å…¶å›ºåŒ–ä¸ºä¸€ä¸ªimageï¼›è€Œ<code>docker push</code>æ¨é€çš„åˆ™æ˜¯ä¸€ä¸ªimageåˆ°docker hubã€‚å‰è€…æ˜¯æœ¬åœ°æ“ä½œï¼Œåè€…æ˜¯ä¸Šä¼ æ“ä½œã€‚</p></li><li><p>ä¸€ä¸ªåŒºåˆ«ï¼š<code>docker start</code>æ˜¯å¯åŠ¨ä¸€ä¸ªå·²ç»åœæ­¢çš„containerï¼Œè€Œ<code>docker restart</code>åˆ™æ˜¯å…ˆstopä¸€ä¸ªcontainerå†startã€‚å¦‚æœä¸€ä¸ªcontainerå·²ç»åœæ­¢äº†ï¼Œé‚£ä¹ˆäºŒè€…ç­‰æ•ˆã€‚</p></li></ul><h2 id="dockerfile">Dockerfile</h2><ul><li>Docker Hubä¸­å¹¶ä¸ç›´æ¥æä¾›Dockerfileï¼Œä½†å¯ä»¥é€šè¿‡æŸ¥çœ‹imageçš„â€œæ ‡ç­¾â€é¡µé¢çœ‹æ¯ä¸ªimageçš„dockerå»ºç«‹æ“ä½œã€‚ä½†ç”±äºDocker buildçš„æ—¶å€™ä½¿ç”¨gitä¼šå¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥å¾ˆå¤šä½œè€…ä¼šåœ¨å…¶Githubä¸Šå‘å¸ƒè¿™äº›Dockerfileï¼Œå¾€å¾€å¯ä»¥æŸ¥çœ‹ä»‹ç»é¡µé¢æ‰¾åˆ°é“¾æ¥ã€‚</li><li>Dockerfileä¸­è®¾ç½®è¿›å…¥ç‚¹å‘½ä»¤ï¼š<code>ENTRYPOINT ["spleeter"]</code>ã€‚</li></ul><ol type="1"><li>è¿™é‡Œâ€spleeterâ€œæ˜¯ä¸€ä¸ªbinå¯æ‰§è¡Œæ–‡ä»¶ã€‚å®ƒçš„æ•ˆæœæ˜¯ï¼šæœ¬æ¥éœ€è¦ç”¨æˆ·åœ¨<code>docker run</code>æ—¶è¾“å…¥<code>docker run xxx/xxx:xx spleeter separate</code>ï¼Œ ç°åœ¨å°±åªç”¨è¾“å…¥<code>docker run xxx/xxx:xx separate</code>äº†ï¼Œå³runçš„æ—¶å€™å¸®ä½ å…ˆæ‰“äº†ä¸€ä¸ªå‘½ä»¤æ ‡è®°ä½†æ²¡ç»™ä½ æŒ‰å›è½¦ã€‚</li><li>å¦‚æœä½ å‘ç°è‡ªå·±åœ¨è¿è¡Œä¸€ä¸ªdocker imageæ—¶å€™æç¤ºäº†æŸä¸ªä½ æ²¡æœ‰è¾“å…¥çš„å‘½ä»¤çš„ç›¸å…³é—®é¢˜ï¼Œå¦‚<code>xxx don't have a parameter yyy, please input aaa, bbb, or ccc</code>ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯Dockerfileä¸­è®¾å®šäº†è¿›å…¥ç‚¹ã€‚</li><li>å¦‚æœä½œè€…åœ¨Dockerfileä¸­è®¾å®šäº†è¿›å…¥ç‚¹ï¼Œä½†ä½ éœ€è¦è¿›å…¥dockerè¿›è¡Œè°ƒè¯•æˆ–æ£€æŸ¥æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>docker run -it --entrypoint bash</code>æ¥åˆ‡æ¢å…¥ç‚¹ï¼Œè¿›å…¥ä¸€ä¸ªbashå‘½ä»¤è¡Œä¸­è°ƒè¯•ã€‚</li></ol><ul><li><code>docker build</code>é’ˆå¯¹çš„æ˜¯ä¸€ä¸ªurlæˆ–æ˜¯ä¸€ä¸ªæœ¬åœ°çš„æ–‡ä»¶å¤¹ã€‚å¦‚æœæ˜¯æœ¬åœ°çš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹å†…éœ€è¦å«æœ‰ä¸€ä¸ªä»¥<code>Dockerfile</code>ä¸ºåçš„æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦å¯¼å…¥æŸäº›æ–‡ä»¶åˆ°Docker Imageä¸­ï¼Œåˆ™è¿™äº›æ–‡ä»¶éœ€è¦åœ¨æ­£ç¡®çš„ä½ç½®ã€‚<ol type="1"><li>å¦‚æœdockerfileçš„åå­—ä¸æ˜¯<code>Dockerfile</code>ï¼Œåˆ™ä½¿ç”¨<code>-f/--file &lt;DOCKERFILE_NAME&gt;</code>æ¥æŒ‡å®šåç§°ã€‚</li><li>å¦‚æœéœ€è¦æŒ‡å®šè¾“å‡ºimageçš„åå­—å’Œtagï¼Œåˆ™ä½¿ç”¨<code>-t/--tag</code>æ ‡ç­¾ï¼Œä»¥<code>name:tag</code>å‘½åã€‚</li><li>å¦‚æœbuildçš„æ—¶å€™å¿˜è®°äº†å‘½åimageï¼Œåˆ™è¾“å‡ºçš„imageæ²¡æœ‰åå­—å’Œtagï¼Œåªæœ‰ä¸€ä¸ªéšæœºåºå·ã€‚æ­¤æ—¶å¦‚æœè¦é‡å‘½åï¼Œå¯ä»¥ç”¨<code>docker tag &lt;SERIAL_NUMBER&gt; &lt;NAME:TAG&gt;</code> å‘½ä»¤ã€‚é»˜è®¤tagä¸ºlatestã€‚</li><li>Docker Buildç¤ºä¾‹ï¼š<ul><li>æœ¬åœ°æ–‡ä»¶å¤¹ï¼š<code>docker build -f &lt;NAME:TAG&gt; &lt;TARGET DICTIONARY&gt;</code></li><li>æœ¬åœ°æ–‡ä»¶ï¼š<code>docker build - &lt; &lt;Dockerfile_Path&gt;</code></li><li>URLï¼š<code>docker build https://github.com/&lt;USERNAME&gt;/&lt;REPONAME&gt;.git#&lt;BRUNCH&gt;:&lt;SUBFOLDERNAME&gt;</code></li></ul></li></ol></li></ul><h2 id="nivdia-docker">Nivdia Docker</h2><ul><li><p>å…ˆæ”¾<a href="https://github.com/NVIDIA/nvidia-docker">é“¾æ¥</a>ã€‚è¿™é‡Œæ˜¯Nvidia Dockerçš„Githubä»“åº“ã€‚</p></li><li><p>å†è¯´ä½œç”¨ã€‚è‹¥æƒ³åœ¨Dockerä¸­è¿è¡ŒGPUç¨‹åºï¼Œåˆ™æ™®é€šçš„Dockeræ˜¯åšä¸åˆ°çš„ï¼Œç¨‹åºæ— æ³•é»˜è®¤åœ¨Dockerä¸­ä½¿ç”¨GPUè®¡ç®—èµ„æºï¼›å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæœ¬åœ°å·²ç»å®‰è£…äº†æŸä¸ªç‰ˆæœ¬çš„CUDAï¼Œä½†ç›®æ ‡ç¨‹åºéœ€è¦ä¾èµ–å¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸éº»çƒ¦çš„ã€‚è€ŒNvidia Dockerçš„å‡ºç°åˆ™å¾ˆå¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å®ƒç›¸å½“äºåœ¨Dockerçš„ä¸‹é¢å¡è¿›äº†ä¸€å±‚CUDAå±‚ï¼Œä»‹äºContainerå’ŒOSä¹‹é—´ã€‚</p><figure><img src="/2020/04/26/docker-et-nvidia/inner.png" alt="Nvidia Docker åŸç†å›¾"><figcaption aria-hidden="true">Nvidia Docker åŸç†å›¾</figcaption></figure></li><li><p>ç„¶åæ˜¯å®‰è£…ã€‚</p><ol type="1"><li><p>ä½œä¸ºå‰ç½®æ¡ä»¶ï¼Œéœ€è¦æœ¬æœºä¸Šå®‰è£…æœ‰Nvidia Driverï¼Œä¸å¼ºåˆ¶è¦æ±‚CUDAã€‚ï¼ˆä¸è¿‡æ—¢ç„¶éƒ½å®‰åˆ°Driveräº†ï¼Œä¸å¦‚æŠŠæœ¬æœºCUDAä¹Ÿè£…äº†ï¼‰å®˜æ–¹æ•™ç¨‹<a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#ubuntu-installation">é“¾æ¥</a>ã€‚å½“ç„¶ï¼Œè¯·å®‰è£…Dockerã€‚</p></li><li><p>æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add the package repositories</span></span><br><span class="line">distribution=$(. /etc/os-release;<span class="built_in">echo</span> $ID<span class="variable">$VERSION_ID</span>)</span><br><span class="line">curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -</span><br><span class="line">curl -s -L https://nvidia.github.io/nvidia-docker/<span class="variable">$distribution</span>/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list</span><br><span class="line"></span><br><span class="line">sudo apt-get update &amp;&amp; sudo apt-get install -y nvidia-container-toolkit</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><p>ä»£ç å¯èƒ½ä¼šéšç€Nvidia Dockerçš„çš„å‡çº§è€Œå‘ç”Ÿå˜åŒ–ï¼Œæœ€å¥½å‚é˜…æœ¬ç« ç¬¬ä¸€æ¡çš„é“¾æ¥ã€‚</p></li></ol></li><li><p>è¯•è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### Test nvidia-smi with the latest official CUDA image</span></span><br><span class="line">docker run --gpus all nvidia/cuda:10.0-base nvidia-smi</span><br><span class="line"></span><br><span class="line"><span class="comment"># Start a GPU enabled container on two GPUs</span></span><br><span class="line">docker run --gpus 2 nvidia/cuda:10.0-base nvidia-smi</span><br><span class="line"></span><br><span class="line"><span class="comment"># Starting a GPU enabled container on specific GPUs</span></span><br><span class="line">docker run --gpus <span class="string">&#x27;&quot;device=1,2&quot;&#x27;</span> nvidia/cuda:10.0-base nvidia-smi</span><br><span class="line">docker run --gpus <span class="string">&#x27;&quot;device=UUID-ABCDEF,1&quot;&#x27;</span> nvidia/cuda:10.0-base nvidia-smi</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specifying a capability (graphics, compute, ...) for my container</span></span><br><span class="line"><span class="comment"># Note this is rarely if ever used this way</span></span><br><span class="line">docker run --gpus all,capabilities=utility nvidia/cuda:10.0-base nvidia-smi</span><br></pre></td></tr></table></figure><p>å…¶æ ‡å¿—æ€§ç‰¹ç‚¹å°±æ˜¯ä¸€ä¸ªå‚æ•°<code>--gpus &lt;PARAMETERS&gt;</code> ä¸€èˆ¬ä½¿ç”¨<code>--gpus all</code>å³å¯ï¼Œå…¶ä»–éƒ¨åˆ†å’Œæ™®é€šdockerä¸€æ¨¡ä¸€æ ·ã€‚</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;docker-images-and-containers&quot;&gt;Docker Images and Containers&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;æ¸…é™¤æ‰€æœ‰å·²ç»åœæ­¢çš„containerï¼š&lt;code&gt;docker container prune -f&lt;/code&gt; ã€‚å…¶ä¸­ &lt;code&gt;-f&lt;/code&gt; è¡¨ç¤ºä¸å¼¹å‡ºç¡®è®¤æç¤ºã€‚ä¹Ÿå¯ä½¿ç”¨&lt;code&gt;docker rm $(docker ps -a -q)&lt;/code&gt;æ¥æ¸…ç†ã€‚å…¶ä¸­ï¼Œ&lt;code&gt;docker rm&lt;/code&gt;ä»£è¡¨åˆ é™¤containerï¼Œè€Œ&lt;code&gt;docker rmi&lt;/code&gt;åˆ™æ˜¯åˆ é™¤imageã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å¦‚æœä½ éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªåªç”¨ä¸€æ¬¡çš„containerï¼Œé‚£ä¹ˆä½¿ç”¨&lt;code&gt;docker run --rm&lt;/code&gt;å‚æ•°ï¼Œç»“æŸåä¼šè‡ªåŠ¨åˆ é™¤ã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary>
    
    
    
    
    <category term="deep-learning" scheme="https://www.miracleyoo.com/tags/deep-learning/"/>
    
    <category term="docker" scheme="https://www.miracleyoo.com/tags/docker/"/>
    
    <category term="nvidia" scheme="https://www.miracleyoo.com/tags/nvidia/"/>
    
    <category term="gpu" scheme="https://www.miracleyoo.com/tags/gpu/"/>
    
  </entry>
  
  <entry>
    <title>Linux(Ubuntu)è£…æœºä¸é…ç½®ç¬”è®°</title>
    <link href="https://www.miracleyoo.com/2020/04/11/linux-setup/"/>
    <id>https://www.miracleyoo.com/2020/04/11/linux-setup/</id>
    <published>2020-04-12T01:11:47.000Z</published>
    <updated>2021-03-12T09:08:49.885Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¡¬ç›˜ç›¸å…³">ç¡¬ç›˜ç›¸å…³</h2><ol type="1"><li><p><strong>dfå‘½ä»¤</strong> <code>df</code>ï¼šæ£€æŸ¥linuxæœåŠ¡å™¨çš„æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µã€‚<strong>å®ƒåªä¼šæ˜¾ç¤ºå·²ç»æŒ‚è½½çš„ç£ç›˜ä¿¡æ¯ï¼</strong></p><p><code>df -h</code>, å³<code>--human-readble</code>ï¼šä»¥1024çš„å€æ•°çš„æ–¹å¼æ˜¾ç¤ºå¤§å°ã€‚(e.g., 1023M)</p><p><code>df -T</code>ï¼šæŸ¥çœ‹æ‰€æœ‰ç£ç›˜çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹(type)</p><span id="more"></span></li><li><p><strong><code>fdisk</code>å‘½ä»¤</strong></p><p><code>fdisk</code>ï¼šå¼ºå¤§çš„ç£ç›˜ç›‘è§†å’Œæ“ä½œå·¥å…·ã€‚</p><p><code>fdisk -l</code>ä¼šæ˜¾ç¤º<strong>æ‰€æœ‰çš„</strong>ç£ç›˜å’Œåˆ†åŒºï¼ä¸è®ºæœ‰æ²¡æœ‰æŒ‚è½½ï¼Œéƒ½ä¼šè¢«åˆ—å‡ºæ¥ã€‚</p></li><li><p><strong>mountå‘½ä»¤</strong></p><p><code>mount</code>ï¼šæŒ‚è½½ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ</p><p><code>mount -t ntfs &lt;source&gt; &lt;target&gt;</code>ï¼šä»¥ntfsæ–‡ä»¶ç³»ç»Ÿçš„å½¢å¼ä»æºç›®å½•æŒ‚è½½åˆ°ç›®æ ‡ç›®å½•ã€‚tè¡¨ç¤ºtypesç±»å‹</p><p><code>mount -a</code>ï¼šæŒ‚è½½ fstab ä¸­çš„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿã€‚aè¡¨ç¤ºall</p></li><li><p><strong>blkidå‘½ä»¤</strong></p><p><code>sudo blkid</code>ï¼šè·å–å„ä¸ªåˆ†åŒºçš„UUIDå’Œåˆ†åŒºç±»å‹TYPE</p></li><li><p>ç‰©ç†ç£ç›˜ä¸ç£ç›˜åˆ†åŒºï¼šä¸€ä¸ªç‰©ç†ç£ç›˜åœ¨<code>fdisk -l</code>ä¸­çš„æ˜¾ç¤ºå¾€å¾€ç±»ä¼¼äº<code>/dev/sda</code>ï¼Œ<code>/dev/sdb</code>ï¼Œ<code>/dev/nvme0n1</code>ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸å¸¦æ•°å­—çš„ï¼Œsda sdbæ˜¯æœ€å¸¸è§çš„å‘½åã€‚è€Œåˆ†åŒºå‘½ååˆ™æ˜¯å¦‚ï¼š<code>/dev/sda1</code>ï¼Œ<code>/dev/sdb2</code>ä¹‹ç±»åœ¨ç‰©ç†ç£ç›˜çš„åé¢å¸¦ä¸Šæ•°å­—è¡¨ç¤ºåˆ†åŒºç¼–å·ã€‚</p><p>ä½†æœ‰äº›å¦‚åŒç³»ç»Ÿä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°æœ€åä¸€ä¸ªä¾‹å­ä¸­å±•ç¤ºçš„å‘½åï¼Œè¿™ç§ç£ç›˜çš„åˆ†åŒºåˆ™æ˜¯ä»¥<code>p[x]</code>ç»“å°¾ï¼Œå¦‚<code>/dev/nvme0n1p1</code>ï¼Œ<code>/dev/nvme0n1p9</code>ã€‚</p></li><li><p>Linuxå¼€æœºåä¸ä¼šè‡ªåŠ¨æŒ‚è½½Windowsæ–‡ä»¶æ ¼å¼NTFSçš„ç£ç›˜ã€‚</p></li><li><p><code>sudo chmod -R 777 &lt;Folder_Name&gt;</code> å¯ä»¥å–æ¶ˆä¸€ä¸ªæ–‡ä»¶å¤¹çš„å…¨éƒ¨è®¿é—®æƒé™ã€‚</p></li><li><p><code>chmod</code>å‘½ä»¤å¯¹ext3/4æ–‡ä»¶ç³»ç»Ÿï¼Œå³Linuxæ ¼å¼çš„æ–‡ä»¶ç³»ç»Ÿæ‰æœ‰æ•ˆï¼Œå¯¹å…¶ä»–æ–‡ä»¶ç³»ç»Ÿï¼Œå¦‚vfat(Fat32)ï¼ŒNTFSéƒ½æ˜¯æ— æ•ˆçš„ã€‚</p></li><li><p>/etc/fstab` æ–‡ä»¶æ˜¯æŒç®¡ç¡¬ç›˜è‡ªåŠ¨æŒ‚è½½é…ç½®çš„æ–‡ä»¶ï¼ŒåŒ…å«è‡ªåŠ¨æŒ‚è½½åˆ†åŒºè¿‡ç¨‹çš„å¿…è¦ä¿¡æ¯ã€‚æ¯ä¸€æ¡è®°å½•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><code>[Device] [Mount Point] [File System Type] [Options] [Dump] [Pass]</code></p><p>å¦‚ï¼š</p><p><code>UUID=B45A01D55A019570 /data ntfs defaults 0 2</code></p><p>å…¶ä¸­ï¼š</p><p><code>[Options]</code> ï¼š<code>defaults</code>è¡¨ç¤ºç”¨é»˜è®¤çš„<code>rw, suid, dev, exec, auto, nouser, async</code>ç­‰é€‰é¡¹ï¼ˆä¸åŒå†…æ ¸å’Œæ–‡ä»¶ç³»ç»Ÿä¸åŒï¼‰è¿›è¡ŒæŒ‚è½½ï¼Œè¿™äº›é€‰é¡¹çš„å«ä¹‰ï¼š<code>rw</code> å¯è¯»å†™ï¼›<code>suid</code> æ‰§è¡Œç¨‹åºæ—¶éµå®ˆ<code>uuid</code>ï¼›<code>dev</code> è§£é‡Šå­—ç¬¦æˆ–ç¦æ­¢ç‰¹æ®Šè®¾å¤‡ï¼›<code>exec</code> å…è®¸æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼›<code>auto</code> å¯ä»¥<code>-a</code>æ–¹å¼åŠ è½½ï¼›<code>nouser</code> ç¦æ­¢æ™®é€šç”¨æˆ·æŒ‚è½½æ­¤æ–‡ä»¶ç³»ç»Ÿï¼›<code>async</code> æ‰€æœ‰I/Oå¼‚æ­¥å®Œæˆã€‚</p><p><code>[Dump]</code> ï¼šæ˜¯å¦å¼€å¯åˆ†åŒºå¤‡ä»½ï¼Œ0è¡¨ç¤ºå…³é—­</p><p><code>[Pass]</code>ï¼šç³»ç»Ÿå¯åŠ¨æ—¶æ£€æŸ¥åˆ†åŒºé”™è¯¯çš„é¡ºåºï¼Œrootä¸º1ï¼Œå…¶ä»–ä¸º2ï¼Œ0ä¸ºä¸æ£€æŸ¥ã€‚</p></li><li><p>åœ¨<code>fstab</code>æ–‡ä»¶ä¸­æ·»åŠ è®°å½•å‰ä¸€å®šè¦å…ˆå°è¯•ç”¨mountå‘½ä»¤æ‰‹åŠ¨æŒ‚è½½ã€‚</p></li></ol><h3 id="å‚è€ƒ">å‚è€ƒ</h3><ol type="1"><li><a href="https://blog.csdn.net/qxqxqzzz/article/details/89790688">Ubuntu18.04 å¼€æœºè‡ªåŠ¨æŒ‚è½½å…¶ä»–ç¡¬ç›˜</a></li><li><a href="https://blog.csdn.net/ybdesire/article/details/79145180">LinuxæŸ¥çœ‹ä¸æŒ‚è½½æ–°ç£ç›˜</a></li></ol><h2 id="cudaçš„å®‰è£…">CUDAçš„å®‰è£…</h2><ol type="1"><li><p>æ£€æŸ¥è‡ªå·±çš„GPUæ˜¯å¦æ˜¯CUDA-capableï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥<code>lspci | grep -I NVIDIA</code> ï¼Œä¼šæ˜¾ç¤ºè‡ªå·±çš„NVIDIA GPUç‰ˆæœ¬ä¿¡æ¯ï¼Œå»CUDAçš„å®˜ç½‘æŸ¥çœ‹è‡ªå·±çš„GPUç‰ˆæœ¬æ˜¯å¦åœ¨CUDAçš„æ”¯æŒåˆ—è¡¨ä¸­ã€‚</p></li><li><p>æ£€æŸ¥è‡ªå·±çš„Linuxç‰ˆæœ¬æ˜¯å¦æ”¯æŒ CUDAï¼ˆUbuntu ç¨³å®šæ”¯æŒç‰ˆæ²¡é—®é¢˜ï¼‰ã€‚</p></li><li><p>æ£€æŸ¥å…¶ä»–é—®é¢˜ã€‚è¿™é‡Œå°±ä¸è¯¦è¿°äº†ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¸€èˆ¬OKï¼Œè¿™é‡Œä¸»è¦è¦æ£€æŸ¥æ˜¯å¦å®‰è£…äº†<code>gcc</code>ï¼Œæ˜¯å¦å®‰è£…äº†<code>kernel header</code>å’Œ <code>package development</code>ã€‚å¦‚æœå®³æ€•å‡ºç°é—®é¢˜å¯ä»¥å‚è€ƒ<a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#pre-installation-actions">å®˜ç½‘</a>æ‰§è¡Œè¿™å‡ æ­¥æ£€æµ‹ã€‚</p></li><li><p>äº<a href="https://developer.nvidia.com/cuda-downloads">CUDAå®˜ç½‘</a>ä¸‹è½½ä¸ç³»ç»Ÿå¯¹åº”çš„CUDAç‰ˆæœ¬ã€‚æœ€åä¸€ä¸ªé€‰é¡¹é€‰æ‹©<code>runfile</code>ï¼Œå› ä¸ºå…¶æ‰€éœ€æ­¥éª¤æœ€å°‘ï¼Œä¹Ÿå› æ­¤æœ€ä¸å®¹æ˜“å‡ºé—®é¢˜ã€‚æ‰€æœ‰é€‰é¡¹å®Œæˆåï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹ä¸¤è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://developer.download.nvidia.com/compute/cuda/10.2/Prod/local_installers/cuda_10.2.89_440.33.01_linux.run</span><br><span class="line">sudo sh cuda_10.2.89_440.33.01_linux.run</span><br></pre></td></tr></table></figure><p>å…ˆä¸è¦æ‰§è¡Œç¬¬äºŒæ¡<code>sudo</code>å¼€å¤´çš„æŒ‡ä»¤ï¼Œåªä½¿ç”¨<code>wget</code>ä¸‹è½½ã€‚</p></li><li><p>å¦‚æœä¹‹å‰æœ‰å®‰è£…è¿‡å…¶ä»–ç‰ˆæœ¬çš„CUDAå¹¶å¸Œæœ›å°†å…¶å¸è½½ï¼Œä½¿ç”¨<code>sudo nvidia-uninstall</code>å¸è½½ã€‚å¦‚æœè¯¥å‘½ä»¤ä¸åœ¨ç³»ç»Ÿè·¯å¾„ä¸­ï¼Œåˆ™ä½¿ç”¨<code>sudo /usr/bin/nvidia-uninstall</code>ï¼ˆä½ç½®å¯èƒ½å˜åŒ–ï¼‰å¸è½½ã€‚å¦‚æœè¿˜æ˜¯æ²¡æœ‰ï¼Œæˆ–æ˜¯ä¹‹å‰çš„é©±åŠ¨å·²ç»æŸåï¼Œåˆ™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove --purge nvidia*</span><br><span class="line">sudo chmod +x NVIDIA-Linux-x86_64-410.93.run</span><br><span class="line">sudo ./NVIDIA-Linux-x86_64-410.93.run --uninstall</span><br></pre></td></tr></table></figure></li><li><p>å±è”½<code>nouveau</code>é©±åŠ¨ã€‚</p></li></ol><h3 id="nouveauæ˜¯ä»€ä¹ˆ">Nouveauæ˜¯ä»€ä¹ˆ</h3><blockquote><h4 id="nouveau-accelerated-open-source-driver-for-nvidia-cards">Nouveau: Accelerated Open Source driver for nVidia cards</h4><p>The <strong>nouveau</strong> project aims to build high-quality, free/libre software drivers for <a href="https://nouveau.freedesktop.org/wiki/CodeNames/">nVidia cards</a>. â€œNouveauâ€ [<em>nuvo</em>] is the French word for â€œnewâ€. Nouveau is composed of a Linux kernel KMS driver (nouveau), Gallium3D drivers in Mesa, and the Xorg DDX (xf86-video-nouveau). The kernel components have also been ported to <a href="https://nouveau.freedesktop.org/wiki/NetBSD/">NetBSD</a>.</p></blockquote><p>ç®€å•è¯´ï¼Œnouveauæ˜¯Linuxç³»ç»Ÿé»˜è®¤çš„ç»™NVIDIAå¡é¢„è£…çš„ä¸€ä¸ªå›¾å½¢åŠ é€Ÿé©±åŠ¨ï¼Œè€Œè¿™ä¸ªé©±åŠ¨ä¼šä¸CUDAäº§ç”Ÿéƒ¨åˆ†å†²çªï¼Œæ‰€ä»¥åœ¨å®‰è£…CUDAä¹‹å‰éœ€è¦å°†å…¶ç¦ç”¨ï¼Œå¦åˆ™ä¼šå‡ºç°å¡åœ¨å¼€æœºç™»å½•ç•Œé¢æ— æ³•è¿›å…¥å›¾å½¢ç•Œé¢ï¼ˆä»ç„¶å¯ä»¥sshè®¿é—®ï¼‰ï¼Œé»‘å±ï¼Œé¼ æ ‡é”®ç›˜è¾“å…¥è¢«ç¦ç”¨ç­‰é—®é¢˜ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªï¼ˆäº²èº«ç»å†ï¼‰ã€‚</p><p>ç»§ç»­å®‰è£…æ•™ç¨‹ï¼š</p><ol start="6" type="1"><li><p>åˆšæ‰è¯´åˆ°è¦å±è”½<code>nouveau</code>ï¼Œé‚£ä¹ˆæ€ä¹ˆçŸ¥é“ä½ æœ‰æ²¡æœ‰è£…å®ƒå‘¢ï¼Ÿ ä½¿ç”¨<code>lsmod | grep nouveau</code>å‘½ä»¤ï¼Œå¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œå°±å¯ä»¥åˆ¤å®šä½ æ²¡æœ‰è¿è¡Œ<code>nouveau</code>ï¼Œå¯ä»¥ç›´æ¥è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå¦åˆ™ï¼š</p><ol type="1"><li><p>Create a file at <code>/etc/modprobe.d/blacklist-nouveau.conf</code> with the following contents:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blacklist nouveau</span><br><span class="line">options nouveau modeset=0</span><br></pre></td></tr></table></figure></li><li><p>Regenerate the kernel initramfs:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-initramfs -u</span><br></pre></td></tr></table></figure></li><li><p>Restart.</p></li><li><p>Run <code>lsmod | grep nouveau</code> again. If there is no output, then you succeed.</p></li></ol></li><li><p>æ­¤åå»ºè®®è¿›å…¥ä¸€ä¸ªéå›¾å½¢ç•Œé¢å®‰è£…ï¼Œè¿™é‡Œå¯ä»¥åœ¨é‡å¯åä½¿ç”¨<code>ssh</code>æ¥å…¥ï¼Œä¹Ÿå¯ä»¥åœ¨é‡å¯åæŒ‰<code>alt+ctrl+f1</code>ï¼Œè¿›å…¥<strong>text mode</strong>ï¼Œç™»å½•è´¦æˆ·ã€‚</p></li><li><p>è¾“å…¥ <code>sudo service lightdm stop</code> å…³é—­å›¾å½¢åŒ–ç•Œé¢ã€‚</p></li><li><p>æ‰§è¡Œåˆšæ‰å®˜ç½‘ä¸­ç»™å‡ºçš„ç¬¬äºŒæ¡å‘½ä»¤ï¼š<code>sudo sh cuda_10.2.89_440.33.01_linux.run</code>ã€‚æ³¨æ„è¿™é‡Œçš„ç‰ˆæœ¬ä¼šä¸æ–­æœ‰å˜åŒ–ã€‚æ³¨æ„è¿™é‡Œæœ‰ä¸€ä¸ªç‚¹ï¼Œå³ä½ æ˜¯å¦è¦åŒæ—¶å®‰è£…OpenGLï¼Œå¦‚æœä½ æ˜¯åŒæ˜¾ï¼Œä¸”ä¸»æ˜¾æ˜¯éNVIDIAçš„GPUéœ€è¦é€‰æ‹©noï¼Œå¦åˆ™yesã€‚åŒç†ï¼Œå¦‚æœå‡†å¤‡é€‰noï¼Œä¹Ÿå¯ä»¥ä¸€å¼€å§‹å°±åŠ ä¸Šå‚æ•°<code>--no-opengl-files</code>ã€‚ å¦å¤–ï¼Œå¦‚æœä¸èƒ½ç›´æ¥æ‰§è¡Œï¼Œä½¿ç”¨<code>sudo chmod a+x cuda_xx.xx.xx_linux.run</code>ä¸ºå…¶èµ‹æƒã€‚</p></li><li><p>å®‰è£…æˆåŠŸåï¼Œä¼šæç¤ºä½ å°†cudaçš„å‡ ä¸ªè·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿè·¯å¾„ä¸­ï¼Œè¿™é‡Œé‡å¤ä¸€ä¸‹ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/cuda-10.2/bin:/usr/<span class="built_in">local</span>/cuda-10.2/NsightCompute-2019.1<span class="variable">$&#123;PATH:+:<span class="variable">$&#123;PATH&#125;</span>&#125;</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/cuda-10.2/lib64\</span><br><span class="line">                         <span class="variable">$&#123;LD_LIBRARY_PATH:+:<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>nvcc -V</code>æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸã€‚å½“ç„¶ä¹Ÿå¯ä»¥åŒæ—¶æµ‹è¯•<code>nvidia-smi</code>ã€‚è¿™é‡Œå¯èƒ½ä¼šæŠ¥é”™å¹¶æç¤ºéœ€è¦aptå®‰è£…ä¸€ä¸ªåŒ…ï¼ŒæŒ‰æç¤ºæ¥ã€‚</p></li><li><p>å®Œæˆã€‚</p></li></ol><h3 id="å‚è€ƒ-1">å‚è€ƒ</h3><ol type="1"><li><a href="https://developer.nvidia.com/cuda-downloads">NVIDIA CUDAä¸‹è½½å®˜ç½‘</a></li><li><a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html">NVIDIA å®˜æ–¹å®‰è£…æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰</a></li><li><a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#pre-installation-actions">NVIDIA å®˜æ–¹å®‰è£…æŒ‡å—ä¸­å‰ç½®æ£€æŸ¥éƒ¨åˆ†</a></li><li><a href="https://www.pugetsystems.com/labs/hpc/How-To-Install-CUDA-10-together-with-9-2-on-Ubuntu-18-04-with-support-for-NVIDIA-20XX-Turing-GPUs-1236/">How To Install CUDA 10 (together with 9.2) on Ubuntu 18.04 with support for NVIDIA 20XX Turing GPUs</a></li><li><a href="https://blog.csdn.net/lipi37/article/details/90407099">Ubuntu å®‰è£… cuda æ—¶å¡åœ¨ç™»å½•ç•Œé¢ï¼ˆlogin loop)çš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€</a></li><li><a href="https://blog.csdn.net/wkk15903468980/article/details/56489704">ubuntuå®‰è£…cudaå¾ªç¯ç™»å½•</a></li><li><a href="https://blog.csdn.net/qq_33200967/article/details/80689543">Ubuntuå®‰è£…å’Œå¸è½½CUDAå’ŒCUDNN</a></li><li><a href="https://blog.csdn.net/wf19930209/article/details/81879514">Linuxå®‰è£…CUDAçš„æ­£ç¡®å§¿åŠ¿</a></li></ol><h2 id="cuda-ä¸-cudnn-çš„è”ç³»">CUDA ä¸ CUDNN çš„è”ç³»</h2><ol type="1"><li>è¦å…ˆè£…CUDAå†è£…CUDNNã€‚</li><li>å‰è€…æ˜¯å¹³å°ï¼Œåè€…æ˜¯åŸºäºå¹³å°çš„æ·±åº¦å­¦ä¹ åŠ é€Ÿå™¨ã€‚åŠ é€Ÿå¯ä»¥åº”ç”¨äºå‡ ä¹å…¨éƒ¨æ·±åº¦å­¦ä¹ å¹³å°ã€‚è¿˜æ˜¯è¦å®‰çš„ã€‚</li><li>ä¸€èˆ¬æ·±åº¦å­¦ä¹ ä½¿ç”¨å®‰è£…runtimeç‰ˆæœ¬å³å¯ã€‚</li><li><a href="https://developer.nvidia.com/rdp/cudnn-download">CUDNNå®˜æ–¹ä¸‹è½½</a>ï¼Œ<a href="https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html">CUDNNå®˜æ–¹å®‰è£…æ­¥éª¤</a></li></ol><h2 id="ä¿®å¤ubuntuä¸­æ£€æµ‹åˆ°ç³»ç»Ÿç¨‹åºé”™è¯¯çš„é—®é¢˜">ä¿®å¤Ubuntuä¸­â€œæ£€æµ‹åˆ°ç³»ç»Ÿç¨‹åºé”™è¯¯â€çš„é—®é¢˜</h2><h3 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h3><p>æ¯æ¬¡å¼€æœºæ—¶éƒ½ä¼šæœ‰â€œ<strong>Ubuntu xx.xx åœ¨å¯åŠ¨æ—¶æ£€æµ‹åˆ°ç³»ç»Ÿç¨‹åºé”™è¯¯</strong> â€å¼¹çª—å‡ºç°ã€‚å³ä½¿ç‚¹å‡»æŠ¥å‘Šä¸‹æ¬¡è¿˜ä¼šç»§ç»­å‡ºç°ã€‚</p><h3 id="é—®é¢˜æ¥æº">é—®é¢˜æ¥æº</h3><p>ä¹‹å‰çš„æŸä¸ªæ—¶åˆ»æŸä¸ªç¨‹åºå´©æºƒäº†ï¼Œè€ŒUbuntuæƒ³è®©ä½ å†³å®šè¦ä¸è¦æŠŠè¿™ä¸ªé—®é¢˜æŠ¥å‘Šç»™å¼€å‘è€…ï¼Œè¿™æ ·ä»–ä»¬å°±èƒ½å¤Ÿä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚</p><h3 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h3><ol type="1"><li><code>sudo rm /var/crash/*</code> ï¼šåˆ é™¤è¿™äº›é”™è¯¯æŠ¥å‘Šã€‚ä½†æ˜¯å¦‚æœåˆæœ‰ä¸€ä¸ªç¨‹åºå´©æºƒäº†ï¼Œä½ å°±ä¼šå†æ¬¡çœ‹åˆ°â€œæ£€æµ‹åˆ°ç³»ç»Ÿç¨‹åºé”™è¯¯â€çš„é”™è¯¯ã€‚ä½ å¯ä»¥å†æ¬¡åˆ é™¤è¿™äº›æŠ¥å‘Šæ–‡ä»¶ï¼Œæˆ–è€…é€‰æ‹©ç¦ç”¨Apportæ¥å½»åº•åœ°æ‘†è„±è¿™ä¸ªé”™è¯¯å¼¹çª—ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œç³»ç»Ÿä¸­ä»»ä½•ç¨‹åºå´©æºƒæ—¶ï¼Œç³»ç»Ÿéƒ½ä¸ä¼šå†é€šçŸ¥ä½ ã€‚ä½†è¿™æœªå¿…ä¸€ä»¶åäº‹ï¼Œé™¤éä½ æ„¿æ„å¡«å†™é”™è¯¯æŠ¥å‘Šã€‚å¦‚æœä½ ä¸æƒ³å¡«å†™é”™è¯¯æŠ¥å‘Šï¼Œé‚£ä¹ˆè¿™äº›é”™è¯¯é€šçŸ¥å­˜ä¸å­˜åœ¨éƒ½ä¸ä¼šæœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</li><li><code>sudo vim /etc/default/apport</code> æ°¸ä¹…å±è”½è¿™äº›æŠ¥é”™ã€‚</li></ol><h3 id="å‚è€ƒ-2">å‚è€ƒ</h3><ol type="1"><li><a href="https://blog.csdn.net/hywerr/article/details/72582082">å¦‚ä½•ä¿®å¤ubuntuä¸­æ£€æµ‹åˆ°ç³»ç»Ÿç¨‹åºé”™è¯¯çš„é—®é¢˜</a></li><li><a href="https://itsfoss.com/how-to-fix-system-program-problem-detected-ubuntu/">How To Fix System Program Problem Detected In Ubuntu</a></li></ol><h2 id="å®‰è£…python3.6ç‰ˆæœ¬çš„anaconda">å®‰è£…Python3.6ç‰ˆæœ¬çš„Anaconda</h2><p>ç”±äºä¹‹å‰ä½¿ç”¨çš„ä¸€äº›å¼€æºåº“å’Œè½¯ä»¶å¯¹3.7çš„æ”¯æŒæ€§å°šè¿˜æœ‰é—®é¢˜ï¼Œè€ŒAnacondaé»˜è®¤Pythonç‰ˆæœ¬ä¸º3.6ï¼Œ æ‰€ä»¥æœ‰å¿…è¦æŠŠAnacondaé™çº§ä¸º3.6ç‰ˆæœ¬ã€‚</p><p>å®‰è£…æ–¹æ³•ï¼š</p><ol type="1"><li><p>åˆ°Anacondaå®˜ç½‘ä¸‹è½½å¹¶å®‰è£…æœ€æ–°3.7ç‰ˆæœ¬ã€‚</p></li><li><p>ä¸–ç•Œçº¿å¼€å§‹åˆ†æ­§ï¼Œä½ å¯ä»¥é€‰æ‹©ä¿ç•™3.7ç‰ˆæœ¬çš„Anacondaï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œæˆ–æ˜¯ç›´æ¥æ›¿æ¢Pythonç‰ˆæœ¬ã€‚</p><ol type="1"><li><p>å¯¹å‰è€…ï¼Œ è‹¥åªè¦ä¸€ä¸ªpythonç¯å¢ƒä¸è¦packagesï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda create --name ana36 python=3.6</span><br><span class="line"><span class="built_in">source</span> activate ana36</span><br></pre></td></tr></table></figure><p>åä¹‹ï¼Œå¦‚æœè¦å®‰è£…ä¸€ä¸ªæ–°çš„Anacondaï¼ŒåŒ…å«é»˜è®¤çš„æ‰€æœ‰packagesï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda create -n ana36 anaconda python=3.6</span><br><span class="line"><span class="built_in">source</span> activate ana36</span><br></pre></td></tr></table></figure></li><li><p>å¯¹åè€…ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install python=3.6</span><br></pre></td></tr></table></figure></li></ol></li></ol><h2 id="æ·»åŠ vimæ‹·è´è‡³ç³»ç»Ÿå‰ªè´´æ¿å¿«æ·é”®æ”¯æŒ">æ·»åŠ Vimæ‹·è´è‡³ç³»ç»Ÿå‰ªè´´æ¿å¿«æ·é”®æ”¯æŒ</h2><p>(from: <a href="http://vim.wikia.com/wiki/Mac_OS_X_clipboard_sharing">link</a>)</p><p>Having trouble copying selected text from Vim (not MacVim)? Since using <code>"+y</code> or '"*y' in Vim on a Mac doesn't actually copy the selected text to the system clipboard, you might find it beneficial to do the following:</p><ol type="1"><li>Open your <code>~/.vimrc</code> file</li><li>add <code>vmap '' :w !pbcopy</code></li><li>Save it and <code>source</code> the file</li></ol><p>ç°åœ¨ï¼Œä½ å°±å¯ä»¥åœ¨ visual modeï¼Œ å³åœ¨Escå‘½ä»¤æ¨¡å¼åæŒ‰ä¸‹vé”®åçš„é€‰æ‹©æ¨¡å¼ä¸­ï¼Œé€‰å¥½éœ€è¦æ‹·è´åŒºåŸŸåï¼Œè¿å‡»ä¸¤æ¬¡<code>'</code> ï¼Œå³ä½¿ç”¨ <code>''</code>æ¥æ‹·è´æ‰€é€‰åŒºåŸŸã€‚</p><h2 id="åœ¨maclinuxä¸Šä½¿ç”¨sshæŒ‚è½½è¿œç¨‹ç½‘ç»œç¡¬ç›˜">åœ¨Mac/Linuxä¸Šä½¿ç”¨sshæŒ‚è½½è¿œç¨‹ç½‘ç»œç¡¬ç›˜</h2><p>TL;DRï¼š</p><ol type="1"><li>å®‰è£…sshfs: <code>sudo apt-get install sshfs</code></li><li>ç›´æ¥åœ¨<code>~/.zshrc</code>ä¸­æ·»åŠ ä»¥ä¸‹è¡Œï¼šï¼ˆå½“ç„¶ï¼Œéœ€è¦æ›´æ”¹æ–‡ä»¶å¤¹åç§°ï¼Œä»¥åŠæŒ‚è½½åçš„å‘½åï¼‰</li></ol><h3 id="è¿æ¥æœ¬åœ°linux-server">è¿æ¥æœ¬åœ°Linux Server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">connect_misaka</span></span> () &#123;</span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">&quot;/Volumes/misaka-home&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        mkdir /Volumes/misaka-home</span><br><span class="line">        sshfs -o allow_other,default_permissions,IdentityFile=~/.ssh/id_rsa,reconnect,ServerAliveInterval=15,ServerAliveCountMax=3 misaka:/home/miracle /Volumes/misaka-home/ -ovolname=mk-home</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">&quot;/Volumes/misaka-storage&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        mkdir /Volumes/misaka-storage</span><br><span class="line">        sshfs -o allow_other,default_permissions,IdentityFile=~/.ssh/id_rsa,reconnect,ServerAliveInterval=15,ServerAliveCountMax=3 misaka:/data /Volumes/misaka-storage/ -ovolname=mk-2T</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥gypsum">è¿æ¥Gypsum</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">connect_gypsum</span></span> () &#123;</span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">&quot;/Volumes/gypsum/&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        mkdir /Volumes/gypsum</span><br><span class="line">        sshfs -o allow_other,default_permissions,IdentityFile=~/.ssh/id_rsa,reconnect,ServerAliveInterval=15,ServerAliveCountMax=3 gypsum:/home/zhongyangzha /Volumes/gypsum/ -ovolname=gp-home</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">&quot;/Volumes/gypsum-scratch/&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        mkdir /Volumes/gypsum-scratch/</span><br><span class="line">        sshfs -o allow_other,default_permissions,IdentityFile=~/.ssh/id_rsa,reconnect,ServerAliveInterval=15,ServerAliveCountMax=3 gypsum:/mnt/nfs/scratch1/zhongyangzha/ /Volumes/gypsum-scratch/ -ovolname=gp-scratch</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">&quot;/Volumes/gypsum-work/&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        mkdir /Volumes/gypsum-work</span><br><span class="line">        sshfs -o allow_other,default_permissions,IdentityFile=~/.ssh/id_rsa,reconnect,ServerAliveInterval=15,ServerAliveCountMax=3 gypsum:/mnt/nfs/work1/trahman/zhongyangzha /Volumes/gypsum-work/ -ovolname=gp-work</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‚æ•°è§£é‡Š">å‚æ•°è§£é‡Š</h3><ol type="1"><li><code>ovolname</code>ï¼šæŒ‚è½½ä¸Šç½‘ç»œç¡¬ç›˜ä¹‹åç¡¬ç›˜çš„å‘½å</li><li><code>IdentityFile</code>ï¼šå¦‚æœå·²ç»è®¾ç½®äº†å…å¯†ç™»å½•ï¼Œç”¨è¿™ä¸ªå‚æ•°æŒ‡æ˜sshç§é’¥ä½ç½®å³å¯ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ã€‚</li><li><code>&lt;source&gt; &lt;target&gt;</code>ï¼šç½‘ç»œç¡¬ç›˜æºä½ç½®&lt;username@ip.address:/the/source/path&gt; ä¸æœ¬æœºç›®æ ‡æŒ‚è½½ä½ç½®</li><li><code>reconnect,ServerAliveInterval=15,ServerAliveCountMax=3</code>ï¼šå¤šæ¬¡æ–­çº¿é‡è¿ï¼Œå¯ä»¥å†æ–­å¼€ç½‘ç»œè¿æ¥ã€æœåŠ¡å™¨é‡å¯ç­‰é—®é¢˜å‘ç”Ÿåå†æ¬¡è‡ªåŠ¨è¿æ¥ã€‚</li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç¡¬ç›˜ç›¸å…³&quot;&gt;ç¡¬ç›˜ç›¸å…³&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;dfå‘½ä»¤&lt;/strong&gt; &lt;code&gt;df&lt;/code&gt;ï¼šæ£€æŸ¥linuxæœåŠ¡å™¨çš„æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µã€‚&lt;strong&gt;å®ƒåªä¼šæ˜¾ç¤ºå·²ç»æŒ‚è½½çš„ç£ç›˜ä¿¡æ¯ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;df -h&lt;/code&gt;, å³&lt;code&gt;--human-readble&lt;/code&gt;ï¼šä»¥1024çš„å€æ•°çš„æ–¹å¼æ˜¾ç¤ºå¤§å°ã€‚(e.g., 1023M)&lt;/p&gt;
&lt;p&gt;&lt;code&gt;df -T&lt;/code&gt;ï¼šæŸ¥çœ‹æ‰€æœ‰ç£ç›˜çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹(type)&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;</summary>
    
    
    
    
    <category term="machine-learning" scheme="https://www.miracleyoo.com/tags/machine-learning/"/>
    
    <category term="python" scheme="https://www.miracleyoo.com/tags/python/"/>
    
    <category term="deep-learning" scheme="https://www.miracleyoo.com/tags/deep-learning/"/>
    
    <category term="linux" scheme="https://www.miracleyoo.com/tags/linux/"/>
    
    <category term="ssh" scheme="https://www.miracleyoo.com/tags/ssh/"/>
    
    <category term="net-disk" scheme="https://www.miracleyoo.com/tags/net-disk/"/>
    
    <category term="cuda" scheme="https://www.miracleyoo.com/tags/cuda/"/>
    
  </entry>
  
  <entry>
    <title>Pandas Resample</title>
    <link href="https://www.miracleyoo.com/2020/03/24/pandas-resample/"/>
    <id>https://www.miracleyoo.com/2020/03/24/pandas-resample/</id>
    <published>2020-03-25T04:26:56.000Z</published>
    <updated>2021-03-12T09:11:02.817Z</updated>
    
    <content type="html"><![CDATA[<p>PandasåŸç”Ÿæ”¯æŒ<code>resample</code>åŠŸèƒ½ï¼Œå‰ææ˜¯ç›®æ ‡DataFrameéœ€è¦æœ‰ä¸€ä¸ªindexçš„columnã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨åœ¨å¯¹ä¸€ä¸ªå–æ ·ç‡ä¸º30Hzçš„DataFrameåšæ“ä½œï¼Œå¹¶æƒ³å°†å®ƒå˜resampleä¸º16Hzã€‚</p><p>é¦–å…ˆæˆ‘ä»¬è¦å»ºç«‹ä¸€ä¸ª<code>timestamp</code>çš„åˆ—ï¼Œè¿™ä¸ªåå­—éšæ„ï¼Œç„¶åå®ƒæ˜¯ä»¥ç§’ä¸ºå•ä½çš„è¯¥å¸§çš„æ—¶é—´ï¼Œå¦‚3.25ï¼Œ14.33ã€‚ç„¶åæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºdatatimeæ ¼å¼ï¼Œå•ä½ä¸ºsã€‚</p><span id="more"></span><p>ä¹‹åä¾¿æ˜¯ç›´æ¥resampleï¼Œresampleä¸­çš„<code>rule</code>ï¼Œå³ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡æ˜äº†resampleåä¸¤å¸§ä¹‹é—´çš„æ—¶é—´é—´éš”ï¼Œå³å‘¨æœŸã€‚å¦‚æœæˆ‘ä»¬æ˜¯16Hzï¼Œé‚£è¿™ä¸ªå‘¨æœŸä¸º62.5msã€‚</p><p><code>resample</code>æ–¹æ³•çš„æ ¼å¼æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DataFrame.resample(rule, how=<span class="literal">None</span>, axis=<span class="number">0</span>, fill_method=<span class="literal">None</span>, closed=<span class="literal">None</span>, label=<span class="literal">None</span>, convention=<span class="string">&#x27;start&#x27;</span>,kind=<span class="literal">None</span>, loffset=<span class="literal">None</span>, limit=<span class="literal">None</span>, base=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h2 id="ç¤ºä¾‹ä»£ç ">ç¤ºä¾‹ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df.index=pd.to_datetime(df[<span class="string">&#x27;timestamp&#x27;</span>],unit=<span class="string">&#x27;s&#x27;</span>)</span><br><span class="line">df=df.resample(<span class="string">&#x27;62.5L&#x27;</span>).mean()</span><br><span class="line">df=df.reset_index(drop=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">del</span> df[<span class="string">&#x27;timestamp&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="pandasæ—¶é—´ç¼©å†™">Pandasæ—¶é—´ç¼©å†™</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">B         business day frequency</span><br><span class="line">C         custom business day frequency (experimental)</span><br><span class="line">D         calendar day frequency</span><br><span class="line">W         weekly frequency</span><br><span class="line">M         month end frequency</span><br><span class="line">SM        semi-month end frequency (15th and end of month)</span><br><span class="line">BM        business month end frequency</span><br><span class="line">CBM       custom business month end frequency</span><br><span class="line">MS        month start frequency</span><br><span class="line">SMS       semi-month start frequency (1st and 15th)</span><br><span class="line">BMS       business month start frequency</span><br><span class="line">CBMS      custom business month start frequency</span><br><span class="line">Q         quarter end frequency</span><br><span class="line">BQ        business quarter endfrequency</span><br><span class="line">QS        quarter start frequency</span><br><span class="line">BQS       business quarter start frequency</span><br><span class="line">A         year end frequency</span><br><span class="line">BA, BY    business year end frequency</span><br><span class="line">AS, YS    year start frequency</span><br><span class="line">BAS, BYS  business year start frequency</span><br><span class="line">BH        business hour frequency</span><br><span class="line">H         hourly frequency</span><br><span class="line">T, min    minutely frequency</span><br><span class="line">S         secondly frequency</span><br><span class="line">L, ms     milliseconds</span><br><span class="line">U, us     microseconds</span><br><span class="line">N         nanoseconds</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;PandasåŸç”Ÿæ”¯æŒ&lt;code&gt;resample&lt;/code&gt;åŠŸèƒ½ï¼Œå‰ææ˜¯ç›®æ ‡DataFrameéœ€è¦æœ‰ä¸€ä¸ªindexçš„columnã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨åœ¨å¯¹ä¸€ä¸ªå–æ ·ç‡ä¸º30Hzçš„DataFrameåšæ“ä½œï¼Œå¹¶æƒ³å°†å®ƒå˜resampleä¸º16Hzã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬è¦å»ºç«‹ä¸€ä¸ª&lt;code&gt;timestamp&lt;/code&gt;çš„åˆ—ï¼Œè¿™ä¸ªåå­—éšæ„ï¼Œç„¶åå®ƒæ˜¯ä»¥ç§’ä¸ºå•ä½çš„è¯¥å¸§çš„æ—¶é—´ï¼Œå¦‚3.25ï¼Œ14.33ã€‚ç„¶åæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºdatatimeæ ¼å¼ï¼Œå•ä½ä¸ºsã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="machine-learning" scheme="https://www.miracleyoo.com/tags/machine-learning/"/>
    
    <category term="python" scheme="https://www.miracleyoo.com/tags/python/"/>
    
  </entry>
  
</feed>
